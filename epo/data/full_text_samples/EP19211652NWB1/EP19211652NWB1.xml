<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP19211652B1" file="EP19211652NWB1.xml" lang="en" country="EP" doc-number="3829142" kind="B1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="en"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSK..HRIS..MTNORS..SM..................</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  2100000/0</B007EP></eptags></B000><B100><B110>3829142</B110><B120><B121>EUROPEAN PATENT SPECIFICATION</B121></B120><B130>B1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>19211652.3</B210><B220><date>20191126</date></B220><B240><B241><date>20200730</date></B241><B242><date>20201210</date></B242></B240><B250>en</B250><B251EP>en</B251EP><B260>en</B260></B200><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20210602</date><bnum>202122</bnum></B430><B450><date>20211006</date><bnum>202140</bnum></B450><B452EP><date>20210706</date></B452EP></B400><B500><B510EP><classification-ipcr sequence="1"><text>H04L  29/12        20060101AFI20200207BHEP        </text></classification-ipcr><classification-ipcr sequence="2"><text>H04W  48/18        20090101ALI20200207BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>H04W  92/24        20130101 LA20210518BHEP        </text></classification-cpc><classification-cpc sequence="2"><text>H04L  61/2507      20130101 LI20200203BHEP        </text></classification-cpc><classification-cpc sequence="3"><text>H04W  76/12        20180201 FI20210517BHEP        </text></classification-cpc><classification-cpc sequence="4"><text>H04W  88/14        20130101 LA20210518BHEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>VERFAHREN ZUR UNTERSTÜTZUNG DER NAT-FUNKTIONALITÄT IN EINEM 5G-KERNNETZWERK UND NETZWERK</B542><B541>en</B541><B542>METHOD FOR SUPPORTING NAT FUNCTIONALITY IN A 5G CORE NETWORK AND NETWORK</B542><B541>fr</B541><B542>PROCÉDÉ DE PRISE EN CHARGE D'UNE FONCTIONNALITÉ NAT DANS UN RÉSEAU CENTRAL 5G ET RÉSEAU</B542></B540><B560><B561><text>US-A1- 2019 182 875</text></B561><B562><text>CISCO SYSTEMS: "Use of NRF for UPF discovery by SMF at PDU Session Establishment", 3GPP DRAFT; S2-1907591_23501_REL 16_UPF DISCOVERY AT PDU EST VIA NRF V2, 3RD GENERATION PARTNERSHIP PROJECT (3GPP), MOBILE COMPETENCE CENTRE ; 650, ROUTE DES LUCIOLES ; F-06921 SOPHIA-ANTIPOLIS CEDEX , vol. SA WG2, no. Sapporo, Japan; 20190623 - 20190629 18 June 2019 (2019-06-18), XP051752557, Retrieved from the Internet: URL:http://www.3gpp.org/ftp/tsg%5Fsa/WG2%5 FArch/TSGS2%5F134%5FSapporo/Docs/S2%2D1907 591%2Ezip [retrieved on 2019-06-18]</text></B562><B562><text>NOKIA ET AL: "23.501 6.3.3: NRF for UPF", 3GPP DRAFT; S2-177822 WAS S2-177543 NRF UPF, 3RD GENERATION PARTNERSHIP PROJECT (3GPP), MOBILE COMPETENCE CENTRE ; 650, ROUTE DES LUCIOLES ; F-06921 SOPHIA-ANTIPOLIS CEDEX ; FRANCE , vol. SA WG2, no. Ljubljana, SL; 20171023 - 20171027 27 October 2017 (2017-10-27), XP051347886, Retrieved from the Internet: URL:http://www.3gpp.org/ftp/Meetings_3GPP_ SYNC/SA2/Docs/ [retrieved on 2017-10-27]</text></B562><B562><text>HUAWEI ET AL: "Discussion on support of NAT in 5GS", 3GPP DRAFT; S2-1911742, 3RD GENERATION PARTNERSHIP PROJECT (3GPP), MOBILE COMPETENCE CENTRE ; 650, ROUTE DES LUCIOLES ; F-06921 SOPHIA-ANTIPOLIS CEDEX ; FRANCE , vol. SA WG2, no. Reno, NV, USA; 20191118 - 20191122 8 November 2019 (2019-11-08), XP051821819, Retrieved from the Internet: URL:https://ftp.3gpp.org/tsg_sa/WG2_Arch/T SGS2_136_Reno/Docs/S2-1911742.zip S2-1911742 DP NAT rev1.doc [retrieved on 2019-11-08]</text></B562><B562><text>SA2: "[Draft] LS reply on Support of Network Address Translation in the User Plane function", 3GPP DRAFT; S2-1911744, 3RD GENERATION PARTNERSHIP PROJECT (3GPP), MOBILE COMPETENCE CENTRE ; 650, ROUTE DES LUCIOLES ; F-06921 SOPHIA-ANTIPOLIS CEDEX ; FRANCE , vol. SA WG2, no. Reno NV USA; 20191118 - 20191122 8 November 2019 (2019-11-08), XP051821821, Retrieved from the Internet: URL:https://ftp.3gpp.org/tsg_sa/WG2_Arch/T SGS2_136_Reno/Docs/S2-1911744.zip S2-1911744 LS NAT rev1.docx [retrieved on 2019-11-08]</text></B562></B560></B500><B700><B720><B721><snm>COLOM IKUNO, Josep</snm><adr><str>Kanalstraße 22/2</str><city>2100 Korneuburg</city><ctry>AT</ctry></adr></B721><B721><snm>KOZA, Yvette Honorine</snm><adr><str>Hubertusstrasse 3</str><city>2301 Mühlleiten</city><ctry>AT</ctry></adr></B721></B720><B730><B731><snm>Deutsche Telekom AG</snm><iid>101814997</iid><irf>AC3244 EP</irf><adr><str>Friedrich-Ebert-Allee 140</str><city>53113 Bonn</city><ctry>DE</ctry></adr></B731></B730><B740><B741><snm>Vossius &amp; Partner 
Patentanwälte Rechtsanwälte mbB</snm><iid>100751388</iid><adr><str>Siebertstrasse 3</str><city>81675 München</city><ctry>DE</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840></B800></SDOBI>
<description id="desc" lang="en"><!-- EPO <DP n="1"> -->
<heading id="h0001"><b><u>Field of the invention</u></b></heading>
<p id="p0001" num="0001">This invention relates to a method for supporting Network Address Translation (NAT) functionality in a 5G Core Network and to a 5G Core Network adapted to perform NAT.</p>
<heading id="h0002"><b><u>Background</u></b></heading>
<p id="p0002" num="0002">NAT is a process of mapping one IP address into another by modifying the network address information in the IP header of packets while they are in transit across a traffic routing device.</p>
<p id="p0003" num="0003">Quite commonly, communication networks make use of NAT in order to bridge between IPv4 and/or IPv6 domains, because of IP address scarcity or other reasons. In such networks, NAT of user traffic requires that IP packets traversing a NAT border get their headers rewritten.</p>
<p id="p0004" num="0004">A NAT border is generally defined as device (for example a router) which has one interface in a local (internal) network and one interface in an external network. When a packet is sent from the local network to the external network, the NAT converts that local (private) IP address to a global (public) IP address. Inversely, when a packet from the external network enters the local network, the global (public) IP address is converted to a local (private) IP address.</p>
<p id="p0005" num="0005">From outside, the user appears to have an IP address that is not the one seen by the user within the local network.</p>
<p id="p0006" num="0006">In mobile communication networks, NAT is typically deployed after the Core Network, and is thus transparent to the mobile network itself, see <figref idref="f0001">FIG. 1. FIG. 1</figref> illustrates conventional NAT positioning within a mobile network system. The system comprises a radio network and a core network, which are part of the mobile network, and the NAT is deployed between the Core Network and a Data Network, such as, for example, the Internet. This deployment model is typically used in telecommunication networks and is known as network service chaining, as it consists of a chain of different services on the data path, each providing specific functionality. Other examples of services that are typically used in such a service chain after the mobile network would be firewall services, deep packet inspection, DPI, or parental control.<!-- EPO <DP n="2"> --></p>
<p id="p0007" num="0007"><figref idref="f0001">FIG. 2</figref> shows the 5G architecture as standardized by 3GPP. A User Equipment (UE), e.g. a mobile phone or other device, is connected to a Radio Access Network (RAN). The RAN is connected to a Core Network (CN), which allows the UE to have connectivity to a Data Network (DN), e.g. an external data network, such as the Internet. Several Control Plane (CP) and UP interfaces are specified for the UPF. These are the N3 interface (RAN-UPF UP), the N4 interface (a Session Management Function, SMF-UPF CP), the N6 interface (UPF-DN UP).</p>
<p id="p0008" num="0008">Within the components of the 5G system (depicted in <figref idref="f0001">FIG. 2</figref>), the UPF is the Network Function (NF) tasked with user plane processing (i.e. traffic processing). While most of the Control Plane (CP) Network Functions (NFs) in the 5G core are based on HTTP/2 APIs, the interface between SMF and UPF is based on a binary protocol (PFCP).</p>
<p id="p0009" num="0009">In current 5G systems, NAT functionality is already deployed in mobile networks. However, NAT for telecommunications carrier use is typically called "Carrier-grade NAT" and is generally not trivial in terms of functionality and performance requirements, i.e. there is an established vendor ecosystem where NAT vendors are often not the same as mobile core vendors and customer connections to data services may pass through several different IP addressing domains. Document <nplcit id="ncit0001" npl-type="s"><text>S2-1907591 "Use of NRF for UPF discovery by SMF at PDU Session Establishment", 18.06.2019</text></nplcit>. discloses UPF discovery using NRF by SMF. Document <nplcit id="ncit0002" npl-type="s"><text>S2-1911742 "Discussion on support of NAT in 5GS", 08.11.2019</text></nplcit>, discloses UPFs supporting NAT functionalilty. Document <nplcit id="ncit0003" npl-type="s"><text>S2-1911744, 08.11.2019 "LS reply on Support of Network Address Translation in the User Plane function", 08.11.2019</text></nplcit>, discloses UPFs supporting NAT.</p>
<p id="p0010" num="0010">Thus, there is a need for better integrating the NAT functionality within 5G systems, but without damaging the vendor ecosystem (i.e. avoid a situation where NAT can only be bought from large telecommunications core vendors). Furthermore, it is also desired that the addition of NAT functionality has a minimum impact on existing systems (i.e. ensure modularity when adding new features).</p>
<heading id="h0003"><b><u>Technical problem</u></b></heading>
<p id="p0011" num="0011">In view of the above and taking advantage of the fact that NAT can be quite self-contained as a functionality, it is an object of the present invention to provide a modular, service-based architecture and implementation of a NAT capable User Plane Function (UPF) for 5G systems that make use of the subscriber and session information available in the 5G system to steer NAT functionality.<!-- EPO <DP n="3"> --></p>
<p id="p0012" num="0012">This object is achieved with the features of the claims.</p>
<p id="p0013" num="0013">The present invention addresses how NAT functionality is integrated in the 5G system architecture in a modular way, that is as an additional NF Service in the UPF; how other 5G system NFs, mainly the SMF, may interact with the NAT service and how NFs in the 5G system can discover the NAT service, as well as its capabilities via the Network Repository Function (NRF).</p>
<p id="p0014" num="0014">By using a Service Based Interface (SBI) for the NAT Network Function Service (NFS) communication, backwards-compatibility is achieved. The current PFCP-based N4 interface is not changed and NFs (e.g. SMFs) not supporting NAT NFS would not require any modification.</p>
<p id="p0015" num="0015">The present invention also addresses distributed UPF deployments, that is where the UPF functionality is spread over several components each potentially in a different location. In such a deployment, components in the 5G system can discover the most suitable NAT NFS based on parameters such as location and NAT capabilities.</p>
<p id="p0016" num="0016">According to the invention, a telecommunications operator could achieve a more advanced NAT on a more specific basis, such as, for example, perform NAT on a: per DNN basis, per slice basis, per PDU session basis, per subscriber basis, per IP range basis, per individual IP basis, etc.</p>
<heading id="h0004"><b><u>Summary of the invention</u></b></heading>
<p id="p0017" num="0017">The above objects are achieved by the features of the independent claims.</p>
<p id="p0018" num="0018">According to a first aspect, the invention provides a method for supporting Network Address Translation, NAT, functionality in a 5G Core Network, CN, the 5G CN comprising at least one User Plane Function, UPF, at least one Session Management Function, SMF, and at least one Network Repository Function, NRF, wherein the UPF comprises a UPF Network Function, NF, profile and the UPF NF profile contains at least one NAT NF Service, NAT NFS, instance description, the method comprising: registering, at the NRF, the UPF NF profile, wherein the NAT NFS instance description includes information regarding which NAT functionality it supports; maintaining, at the NRF, the UPF NF profile and enabling the discovery of the UPF NF profile; choosing, by the SMF, which UPF serves a given User Equipment and/or Protocol Data<!-- EPO <DP n="4"> --> Unit, PDU, session based on the NAT NFS information from the NRF which is available at the SMF; controlling, by the SMF, which of NAT functionality is to be performed based on NAT in at least one of: on a per DNN basis, on a per slice basis, on a per PDU session basis, on a per subscriber basis, on a per IP range basis and/or on a per individual IP basis, wherein the control of which of the NAT functionality is to be performed is done via a Service Based Interface, SBI, while maintaining Packet Forwarding Control Protocol, PFCP, in the N4 interface.</p>
<p id="p0019" num="0019">In these aspects, the step of choosing, by the SMF, which UPF serves a given User Equipment and/or Protocol Data Unit, PDU, session may comprise selecting a UPF location based on the availability of a specific NAT functionality in said UPF location.</p>
<p id="p0020" num="0020">In these aspects, the at least one registered NAT NFS instance description may comprise whether the NAT NFS supports at least one of: NAT44 functionality, NAT444 functionality, NAT64 functionality, DNS64 functionality and/or NAT46 functionality.</p>
<p id="p0021" num="0021">In these aspects, the NAT functionality may be provided on at least one of: per DNN basis, per slice basis, per PDU session basis, per IP range basis, per 5G subscriber and/or per individual IP.</p>
<p id="p0022" num="0022">In these aspects, registering the UPF NF profile may comprise listing in which locations the NAT NFS is available.</p>
<p id="p0023" num="0023">In these aspects, the NAT NFS may be integrated within the UPF and may expose an N6 interface towards an external Data Network, DN.</p>
<p id="p0024" num="0024">In these aspects, the NAT NFS may be standalone, wherein the standalone NAT NFS is connected between the UPF and an external Data Network, DN, and exposes an N6 interface to the external Data Network, and exposes another interface to the UPF, and wherein the another interface (N6') uses the same protocol stack as the N6 interface.</p>
<p id="p0025" num="0025">In these aspects, registering the UPF NF profile may comprise information whether the NAT NFS is standalone or integrated; and if the NAT NFS is standalone, the registering UPF NF profile into the NRF further comprises listing which interfaces the standalone NAT NFS provides for the another interface (N6') connectivity including IP address/addresses.<!-- EPO <DP n="5"> --></p>
<p id="p0026" num="0026">In these aspects, registering the UPF NF profile may comprise listing what functionalities it supports at each UPF location.</p>
<p id="p0027" num="0027">According to a second aspect, the invention provides a 5G Core Network, CN, adapted to perform Network Address Translation, NAT, the 5G CN comprising at least one User Plane Function, UPF, at least one Session Management Function, SMF, and at least one Network Repository Function, NRF, wherein the UPF comprises a UPF Network Function, NF, profile and the UPF NF profile contains at least one NAT NF Service, NAT NFS, instance description, wherein: the UPF NF profile is registered at the NRF, wherein the NAT NFS instance description includes information regarding which NAT functionality it supports; and the NRF is configured to maintain the registered UPF NF profile and to enable discovery of the UPF NF profile;, the SMF is configured to choose, which UPF serves a given User Equipment and/or Protocol Data Unit, PDU, session based on the NAT NFS information from the NRF which is available at the SMF; the SMF is configured to control which of NAT functionality is to be performed based on NAT in at least one of: on a per DNN basis, on a per slice basis, on a per PDU session basis, on a per subscriber basis, on a per IP range basis and/or on a per individual IP basis, wherein the control of which of the NAT functionality is to be performed is done via a Service Based Interface, SBI, while maintaining Packet Forwarding Control Protocol, PFCP, in the N4 interface.</p>
<p id="p0028" num="0028">In these aspects, the SMF may be configured to select a UPF location based on the availability of a specific NAT functionality in said UPF location.</p>
<p id="p0029" num="0029">In these aspects, the UPF NF profile may comprise a list of which locations the NAT NFS is available.</p>
<p id="p0030" num="0030">In these aspects, the at least one registered NAT NFS instance description may comprise whether the NAT NFS supports at least one of: NAT44 functionality, NAT444 functionality, NAT64 functionality, DNS64 functionality and/or NAT46 functionality.</p>
<p id="p0031" num="0031">In these aspects, the NAT functionality may be provided on at least one of: per DNN basis, per slice basis, per PDU session basis, per IP range basis, per 5G subscriber and/or per individual IP.</p>
<p id="p0032" num="0032">In these aspects, the UPF NF profile may comprise a list of what functionalities it supports at each UPF location.<!-- EPO <DP n="6"> --></p>
<p id="p0033" num="0033">In these aspects, the NAT NFS may be integrated within the UPF and exposes an N6 interface towards an external Data Network, DN, or the NAT NFS may be standalone, wherein the standalone NAT NFS being connected between the UPF and an external Data Network, DN, and configured to expose an N6 interface to the external Data Network, and to expose another interface to the UPF, and wherein the another interface (N6') may be configured to use the same protocol stack as the N6 interface.</p>
<p id="p0034" num="0034">In these aspects, the UPF NF profile may comprise information whether the NAT NFS is standalone or integrated; and if the NAT NFS is standalone, the UPF NF profile may further comprise a list of which interfaces the standalone NAT NFS provides for the another interface (N6') connectivity including IP address/addresses.</p>
<p id="p0035" num="0035">Other aspects, features, and advantages will be apparent from the summary above, as well as from the description that follows, including the figures and the claims.<!-- EPO <DP n="7"> --></p>
<heading id="h0005"><b><u>Brief description of the drawings</u></b></heading>
<p id="p0036" num="0036">In the drawings:
<dl id="dl0001" compact="compact">
<dt>FIG. 1</dt><dd>illustrates conventional NAT positioning within a mobile network system.</dd>
<dt>FIG. 2</dt><dd>illustrates the 5G architecture as standardized by 3GPP.</dd>
<dt>FIG. 3</dt><dd>illustrates the principles of Network Function (NF) Service and NF Service Operation as defined by 3GPP.</dd>
<dt>FIG. 4</dt><dd>illustrates a NAT NFS standalone variant according to an embodiment of the present invention.</dd>
<dt>FIG. 5</dt><dd>illustrates a NAT NFS integrated variant according to an embodiment of the present invention.</dd>
<dt>FIG. 6</dt><dd>illustrates the NAT NFS registration in a Network Repository Function (NRF).</dd>
<dt>FIG. 7</dt><dd>illustrates the User Plane and the Data Plane architecture of NAT NFS using a distributed and integrated model according to the present invention.</dd>
<dt>FIG. 8</dt><dd>illustrates the User Plane and the Data Plane architecture of NAT NFS using a distributed and standalone model according to the present invention.</dd>
</dl></p>
<heading id="h0006"><b><u>Detailed description of the invention</u></b></heading>
<p id="p0037" num="0037">The present invention adds the NAT functionality into the 5G core by means of adding a NAT Network Function Service (NFS) to the UPF. The current standards of 3GPP define a Network Function (NF) as a 3GPP adopted or 3GPP defined processing function in a network, which has defined functional behavior, and 3GPP defined interfaces and a Network Function Service (NFS) as a functionality exposed by a NF through a service based interface and consumed by other authorized NFs.</p>
<p id="p0038" num="0038">The present invention uses the same principles of NF and NFS, as defined by 3GPP, in order to add NAT functionality into the UPF. <figref idref="f0002">FIG. 3</figref> illustrates the principles of Network Function (NF) Service and NF Service Operation as defined by 3GPP.</p>
<p id="p0039" num="0039">According to a preferred embodiment, two modes of NAT NFS are defined. In both alternatives, the NAT NFS is controlled via an exposed Service Based Interface (SBI) (referred to as Nupf in the figures). The two proposed modes of NAT NFS are:<!-- EPO <DP n="8"> -->
<ul id="ul0001" list-style="bullet" compact="compact">
<li>Standalone: A new N6' interface is defined for the data path between the current UPF interface and the NAT NFS (see <figref idref="f0002">FIG. 4</figref>). The N6' interface uses the same protocol stack as the conventional N6 interface (Gateway-Internet Local Area Network, GiLAN, interface in Evolved Packet Core, EPC). This configuration allows NAT functionality to be separately implemented (e.g. by a vendor different than the others in the rest of the UPF) and use a service chaining model as currently used.</li>
<li>Integrated: The data path is internal within the UPF (see <figref idref="f0003">FIG. 5</figref>). This configuration allows for further optimizations within the data path such as performing all header changes within the same process in one step instead of two and a more integrated implementation.</li>
</ul></p>
<p id="p0040" num="0040">According to a preferred embodiment, in order for other NFs or NFSs to be able to discover a NAT-capable UPF, the UPF NF profile, containing a NAT NFS instance description for each of the NAT NFS instances of the UPF, is registered (e.g., by the UPF itself or by another component such as an orchestrator) in the NRF. When choosing what UPF instance should serve a given UE and/or Protocol Data Unit (PDU) session, the SMF can take into account the available information in the UPF instance NF Profile, which includes the NAT NFS instance description information. <figref idref="f0003">FIG. 6</figref> illustrates the UPF registration data stored in the NRF for a given UPF instance. The NF Profile contains the NF instance description registered information, as well as a list of NFS instance registration data.</p>
<p id="p0041" num="0041">According to a preferred embodiment, and additionally to 3GPP-defined information structures common to NFS instance registration, a NAT NFS instance registers any of the following information that can be used by the SMF to perform UPF selection:
<ul id="ul0002" list-style="bullet" compact="compact">
<li>What NAT functionality it supports: e.g. NAT44 functionality, NAT444 functionality, NAT64 functionality, DNS64 functionality, NAT46,</li>
<li>Location of the NAT NFS: the SMF may choose a geographically close location, e.g. in the case of a deployment using Mobile Edge Computing, MEC,</li>
<li>Whether the NAT service is standalone or integrated,</li>
<li>The Data Networks (DNs) this NAT NFS supports, specified as Data Network Names, DNNs.</li>
</ul><!-- EPO <DP n="9"> --></p>
<p id="p0042" num="0042">According to a preferred embodiment, the two deployment modes of NAT NFS have the capability of supporting distributed deployments. This is due to the fact that the current UPF deployment model may change into a distributed model. The present invention assumes that the packet processing for certain data may be performed on a dedicated hardware, while other functionality may be deployed on, for example, off-the-shelf (COTS) network equipment which can be reprogrammed for specific telecommunication needs.</p>
<p id="p0043" num="0043">COTS-based network equipment are typically based on merchant silicon (a term used to describe chips which are designed and made by an entity other than the company providing a particular service in which they are used) optimized for Ethernet and/or IPv4/IPv6 packet processing and are capable of performing data processing of traffic at high capacity and low cost per traffic unit. Such merchant silicon is, however, not capable of processing the specific protocol stacks used in telecommunications.</p>
<p id="p0044" num="0044">Thus, according to a preferred embodiment, NAT NFS registers not only what capabilities it supports but also where such capabilities are supported. For example, a given location, server-based, may support extended functionality but low throughput, while another hardware-based location may support simple functionality but high throughput.</p>
<p id="p0045" num="0045">Referring to <figref idref="f0004">FIG. 7</figref>, there is illustrated the User Plane and the Data Plane architecture of NAT NFS using a distributed and integrated model according to a preferred embodiment.</p>
<p id="p0046" num="0046">As seen in <figref idref="f0004">FIG. 7</figref>, if the integrated model is used, a distributed UPF's control plane controls each of the UPF's locations where it is deployed. Alternatively, if a distributed and standalone model is used (see <figref idref="f0004">FIG. 8</figref>), a separate control plane for the NAT NFS (e.g. from a separate vendor) can be used, as there is a standardized interface for the data path between the NAT NFS and the rest of the UPF components.</p>
<p id="p0047" num="0047">Next, the control of the NAT NFS will be explained in detail.<!-- EPO <DP n="10"> --></p>
<p id="p0048" num="0048">The NAT NFS is not intended to perform charging, packet forwarding towards SMF via N4 or functions that would require a heavy packet interaction with the SMF. As such, a new exposed SBI (HTTP/2), as opposed to extending the functionality of the PFCP-based N4 interface, is used.</p>
<p id="p0049" num="0049">In order to setup a NAT rule in the UPF, the SMF uses the PDU session and subscriber information available to it, which is mainly the information stored in the SmContext and the subscriber information accessed via the Unified Data Management (UDM) as defined by 3GPP. Current mandatory information in SmContext is defined in 3GPP TS 29.502. Current mandatory subscriber information accessed via the UDM is defined in 3GPP TS 29.503.</p>
<p id="p0050" num="0050">According to a preferred embodiment, the following types of SmContext parameters may be used for setting up a NAT rule in the UPF, either alone or a combination of: the PDU Session Identifier; the Data Network Name (DNN); the Single Network Slice Selection Assistance Information (SNSSAI); the Identifier of the serving NF (e.g. serving Access Management Function, AMF); the serving core network operator Public Land Mobile Network Identifier (PLMN ID) and, for Standalone Non-Public Networks (SNPN), the Network Interface Device (NID); the Access Network Type; the callback Uniform Resource Identified (URI); the PDU Session type; the Session and Service Continuity (SCC) mode applicable to the PDU session; the Session Aggregate Maximum Bit Rate (AMBR) granted to the PDU session; the set of Quality of Service (QoS) flow(s) to establish for the PDU session.</p>
<p id="p0051" num="0051">According to a preferred embodiment, the following types of subscriber information which the SMF can access by querying the UDM (see <figref idref="f0001">FIG. 2</figref>) may be used: for each slice the subscriber is subscribed to or globally for the given subscriber, NAT type to be performed, and/or the external (NAT-ed) IP address of the subscriber (i.e. static Network Address Translating for a given subscriber).</p>
<p id="p0052" num="0052">In addition, in the case were the NAT NFS is standalone, the SMF also includes N6' addressing so that the NAT NFS can properly identify incoming packets and/or send outgoing packets to the correct target as well.</p>
</description>
<claims id="claims01" lang="en"><!-- EPO <DP n="11"> -->
<claim id="c-en-01-0001" num="0001">
<claim-text>A method for supporting Network Address Translation, NAT, functionality in a 5G Core Network, CN, the 5G CN comprising at least one User Plane Function, UPF, at least one Session Management Function, SMF, and at least one Network Repository Function, NRF, wherein the UPF comprises a UPF Network Function, NF, profile and the UPF NF profile contains at least one NAT NF Service, NAT NFS, instance description, the method comprising:
<claim-text>registering, at the NRF, the UPF NF profile, wherein the NAT NFS instance description includes information regarding which NAT functionality it supports;</claim-text>
<claim-text>maintaining, at the NRF, the UPF NF profile and enabling the discovery of the UPF NF profile;</claim-text>
<claim-text>choosing, by the SMF, which UPF serves a given User Equipment and/or Protocol Data Unit, PDU, session based on the NAT NFS information from the NRF which is available at the SMF;</claim-text>
<claim-text>controlling, by the SMF, which of NAT functionality is to be performed based on NAT in at least one of: on a per DNN basis, on a per slice basis, on a per PDU session basis, on a per subscriber basis, on a per IP range basis and/or on a per individual IP basis,</claim-text>
<claim-text>wherein the control of which of the NAT functionality is to be performed is done via a Service Based Interface, SBI, while maintaining Packet Forwarding Control Protocol, PFCP, in the N4 interface.</claim-text></claim-text></claim>
<claim id="c-en-01-0002" num="0002">
<claim-text>The method of claim 1, wherein the step of choosing, by the SMF, which UPF serves a given User Equipment and/or Protocol Data Unit, PDU, session comprises selecting a UPF location based on the availability of a specific NAT functionality in said UPF location.</claim-text></claim>
<claim id="c-en-01-0003" num="0003">
<claim-text>The method of claim 1 or 2, wherein the at least one registered NAT NFS instance description comprises whether the NAT NFS supports at least one of: NAT44 functionality, NAT444 functionality, NAT64 functionality, DNS64 functionality and/or NAT46 functionality, and/ or
<claim-text>wherein the NAT functionality is provided on at least one of: per DNN basis, per slice basis, per PDU session basis, per IP range basis, per 5G subscriber and/or per individual IP, and/or<!-- EPO <DP n="12"> --></claim-text>
<claim-text>wherein registering the UPF NF profile comprises listing in which locations the NAT NFS is available.</claim-text></claim-text></claim>
<claim id="c-en-01-0004" num="0004">
<claim-text>The method of any one of claims 1 to 3, wherein the NAT NFS is integrated within the UPF and exposes an N6 interface towards an external Data Network, DN.</claim-text></claim>
<claim id="c-en-01-0005" num="0005">
<claim-text>The method of any one of claims 1 to 3, wherein the NAT NFS is standalone,
<claim-text>wherein the standalone NAT NFS is connected between the UPF and an external Data Network, DN, and exposes an N6 interface to the external Data Network, and exposes another interface to the UPF, and</claim-text>
<claim-text>wherein the another interface (N6') uses the same protocol stack as the N6 interface.</claim-text></claim-text></claim>
<claim id="c-en-01-0006" num="0006">
<claim-text>The method of any one of claims 4 or 5, wherein registering the UPF NF profile comprises information whether the NAT NFS is standalone or integrated; and<br/>
if the NAT NFS is standalone, the registering UPF NF profile into the NRF further comprises listing which interfaces the standalone NAT NFS provides for the another interface (N6') connectivity including IP address/addresses.</claim-text></claim>
<claim id="c-en-01-0007" num="0007">
<claim-text>The method of any one of claims 1 to 6, wherein registering the UPF NF profile comprises listing what functionalities it supports at each UPF location.</claim-text></claim>
<claim id="c-en-01-0008" num="0008">
<claim-text>A 5G Core Network, CN, adapted to perform Network Address Translation, NAT, the 5G CN comprising at least one User Plane Function, UPF, at least one Session Management Function, SMF, and at least one Network Repository Function, NRF, wherein the UPF comprises a UPF Network Function, NF, profile and the UPF NF profile contains at least one NAT NF Service, NAT NFS, instance description, wherein:
<claim-text>the UPF NF profile is registered at the NRF, wherein the NAT NFS instance description includes information regarding which NAT functionality it supports; and</claim-text>
<claim-text>the NRF is configured to maintain the registered UPF NF profile and to enable discovery of the UPF NF profile;<!-- EPO <DP n="13"> --></claim-text>
<claim-text>the SMF is configured to choose, which UPF serves a given User Equipment and/or Protocol Data Unit, PDU, session based on the NAT NFS information from the NRF which is available at the SMF;</claim-text>
<claim-text>the SMF is configured to control which of NAT functionality is to be performed based on NAT in at least one of: on a per DNN basis, on a per slice basis, on a per PDU session basis, on a per subscriber basis, on a per IP range basis and/or on a per individual IP basis,</claim-text>
<claim-text>wherein the control of which of the NAT functionality is to be performed is done via a Service Based Interface, SBI, while maintaining Packet Forwarding Control Protocol, PFCP, in the N4 interface.</claim-text></claim-text></claim>
<claim id="c-en-01-0009" num="0009">
<claim-text>The 5G Core Network of claim 8,<br/>
wherein the SMF is configured to select a UPF location based on the availability of a specific NAT functionality in said UPF location.</claim-text></claim>
<claim id="c-en-01-0010" num="0010">
<claim-text>The 5G Core Network of claim 8 or 9, wherein the at least one registered NAT NFS instance description comprises whether the NAT NFS supports at least one of: NAT44 functionality, NAT444 functionality, NAT64 functionality, DNS64 functionality and/or NAT46 functionality, and/or
<claim-text>wherein the NAT functionality is provided on at least one of: per DNN basis, per slice basis, per PDU session basis, per IP range basis, per 5G subscriber and/or per individual IP and/or</claim-text>
<claim-text>wherein the UPF NF profile comprises a list of what functionalities it supports at each UPF location.</claim-text></claim-text></claim>
<claim id="c-en-01-0011" num="0011">
<claim-text>The 5G Core Network of any one of claims 8 to 10,<br/>
wherein the NAT NFS is integrated within the UPF and exposes an N6 interface towards an external Data Network, DN.</claim-text></claim>
<claim id="c-en-01-0012" num="0012">
<claim-text>The 5G Core Network of any one of claims 8 to 10, wherein the NAT NFS is standalone, the standalone NAT NFS being connected between the UPF and an external Data Network, DN, and configured to expose an N6 interface to the external Data Network, and to expose another interface to the UPF, and<br/>
<!-- EPO <DP n="14"> -->wherein the another interface (N6') is configured to use the same protocol stack as the N6 interface.</claim-text></claim>
<claim id="c-en-01-0013" num="0013">
<claim-text>The 5G Core Network claim 11 or 12, wherein the UPF NF profile comprises information whether the NAT NFS is standalone or integrated; and<br/>
if the NAT NFS is standalone, the UPF NF profile further comprises a list of which interfaces the standalone NAT NFS provides for the another interface (N6') connectivity including IP address/addresses.</claim-text></claim>
<claim id="c-en-01-0014" num="0014">
<claim-text>The 5G Core Network of any one of claims 8 to 13, wherein the registration of the UPF NF profile comprises listing what functionalities it supports at each UPF location.</claim-text></claim>
</claims>
<claims id="claims02" lang="de"><!-- EPO <DP n="15"> -->
<claim id="c-de-01-0001" num="0001">
<claim-text>Verfahren zum Unterstützen einer Netzwerkadressübersetzungs-, NAT, Funktionalität in einem 5G-Kernnetzwerk, CN, wobei das 5G-CN mindestens eine Benutzerebenenfunktion, UPF, mindestens eine Sitzungsverwaltungsfunktion, SMF, und mindestens eine Netzwerk-Repository-Funktion, NRF aufweist, wobei die UPF ein UPF-Netzwerkfunktions-, NF, Profil aufweist und das UPF-NF-Profil mindestens eine NAT-NF-Dienst-, NAT-NFS, Instanzbeschreibung enthält, wobei das Verfahren aufweist:
<claim-text>Registrieren des UPF-NF-Profils bei der NRF, wobei die NAT-NFS-Instanzbeschreibung Informationen enthält, die die NAT-Funktionalität betreffen, die sie unterstützt;</claim-text>
<claim-text>Aufrechterhalten des UPF-NF-Profils bei der NRF und Ermöglichen der Ermittlung des UPF-NF-Profils;</claim-text>
<claim-text>Auswählen durch die SMF, welche UPF eine gegebene Benutzereinrichtung und/oder Protokolldateneinheits-, PDU, Sitzung bedient, beruhend auf den NAT-NFS-Informationen von der NRF, die bei der SMF verfügbar sind;</claim-text>
<claim-text>Steuern durch die SMF, welche NAT-Funktionalität beruhend auf NAT auf mindestens einem von ausgeführt werden soll: auf einer Pro-DNN-Grundlage, auf einer Pro-Slice-Grundlage, auf einer Pro-PDU-Sitzungsbasis, auf einer Pro-Teilnehmerbasis, auf einer Pro-IP-Bereichsbasis und/oder auf einer Pro-Einzel-IP-Grundlage,</claim-text>
<claim-text>wobei die Steuerung, welche der NAT-Funktionalität ausgeführt werden soll, über eine dienstbasierte Schnittstelle, SBI, erfolgt, während das Paketweiterleitungssteuerprotokoll, PFCP, in der N4-Schnittstelle aufrechterhalten wird.</claim-text></claim-text></claim>
<claim id="c-de-01-0002" num="0002">
<claim-text>Verfahren nach Anspruch 1, wobei der Schritt des Auswählens durch die SMF, welche UPF eine gegebene Benutzereinrichtung und/oder Protokolldateneinheits-, PDU, Sitzung bedient, das Auswählen eines UPF-Standorts beruhend auf der Verfügbarkeit einer spezifischen NAT-Funktionalität in dem UPF-Standort aufweist.</claim-text></claim>
<claim id="c-de-01-0003" num="0003">
<claim-text>Verfahren nach Anspruch 1 oder 2, wobei die mindestens eine registrierte NAT-NFS-Instanzbeschreibung aufweist, ob der NAT-NFS mindestens eine unterstützt von:<!-- EPO <DP n="16"> -->
<claim-text>NAT44-Funktionalität, NAT444-Funktionalität, NAT64-Funktionalität, DNS64-Funktionalität und/oder NAT46-Funktionalität, und/ oder</claim-text>
<claim-text>wobei die NAT-Funktionalität auf mindestens einer bereitgestellt wird von: Pro-DNN-Grundlage, Pro-Slice-Grundlage, Pro-PDU-Sitzungsbasis, Pro-IP-Bereichsbasis, Pro-5G-Teilnehmer und/oder Pro-Einzel-IP, und/oder</claim-text>
<claim-text>wobei das Registrieren des UPF-NF-Profils das Auflisten aufweist, an welchen Standorten der NAT-NFS verfügbar ist.</claim-text></claim-text></claim>
<claim id="c-de-01-0004" num="0004">
<claim-text>Verfahren nach einem der Ansprüche 1 bis 3, wobei der NAT-NFS in die UPF integriert ist und eine N6-Schnittstelle zu einem externen Datennetzwerk, DN, offenlegt.</claim-text></claim>
<claim id="c-de-01-0005" num="0005">
<claim-text>Verfahren nach einem der Ansprüche 1 bis 3, wobei der NAT-NFS eigenständig ist, wobei der eigenständige NAT-NFS zwischen die UPF und ein externes Datennetzwerk, DN, geschaltet ist und dem externen Datennetzwerk eine N6-Schnittstelle offenlegt, und der UPF eine andere Schnittstelle offenlegt, und<br/>
wobei die andere Schnittstelle (N6') denselben Protokollstapel wie die N6-Schnittstelle verwendet.</claim-text></claim>
<claim id="c-de-01-0006" num="0006">
<claim-text>Verfahren nach einem der Ansprüche 4 oder 5, wobei das Registrieren des UPF-NF-Profils Informationen aufweist, ob der NAT-NFS eigenständig oder integriert ist; und wenn der NAT-NFS eigenständig ist, das Registrieren des UPF-NF-Profils in der NRF ferner das Auflisten aufweist, welche Schnittstellen der eigenständige NAT-NFS für die Konnektivität der anderen Schnittstelle (N6') einschließlich einer oder mehrerer IP-Adressen bereitstellt.</claim-text></claim>
<claim id="c-de-01-0007" num="0007">
<claim-text>Verfahren nach einem der Ansprüche 1 bis 6, wobei das Registrieren des UPF-NF-Profils das Auflisten aufweist, welche Funktionalitäten es an jedem UPF-Standort unterstützt.</claim-text></claim>
<claim id="c-de-01-0008" num="0008">
<claim-text>5G-Kernnetzwerk, CN, das eingerichtet ist, eine Netzwerkadressübersetzung, NAT, durchzuführen, wobei das 5G-CN mindestens eine Benutzerebenenfunktion, UPF, mindestens eine Sitzungsverwaltungsfunktion, SMF, und mindestens eine Netzwerk-Repository-Funktion, NRF, aufweist, wobei die UPF ein UPF-Netzwerkfunktions-, NF, Profil aufweist und das UPF-NF-Profil mindestens eine NAT-NF-Dienst-, NAT-NFS, Instanzbeschreibung enthält, wobei:<!-- EPO <DP n="17"> -->
<claim-text>das UPF-NF-Profil bei der NRF registriert ist, wobei die NAT-NFS-Instanzbeschreibung Informationen enthält, die die NAT-Funktionalität betreffen, die es unterstützt; und</claim-text>
<claim-text>die NRF konfiguriert ist, das registrierte UPF-NF-Profil aufrechtzuerhalten und eine Ermittlung des UPF-NF-Profils zu ermöglichen;</claim-text>
<claim-text>die SMF konfiguriert ist, beruhend auf den NAT-NFS-Informationen von der NRF, die bei der SMF verfügbar sind, auszuwählen, welche UPF eine gegebene Benutzereinrichtung und/oder Protokolldateneinheits-, PDU, Sitzung bedient;</claim-text>
<claim-text>die SMF konfiguriert ist, zu steuern, welche NAT-Funktionalität beruhend auf NAT auf mindestens einem ausgeführt werden soll von: auf einer Pro-DNN-Grundlage, auf einer Pro-Slice-Grundlage, auf einer Pro-PDU-Sitzungsbasis, auf einer Pro-Teilnehmerbasis, auf einer Pro-IP-Bereichsbasis und/oder auf einer Pro-Einzel-IP-Grundlage,</claim-text>
<claim-text>wobei die Steuerung, welche der NAT-Funktionalität ausgeführt werden soll, über eine dienstbasierte Schnittstelle, SBI, erfolgt, während das Paketweiterleitungssteuerprotokoll, PFCP, in der N4-Schnittstelle aufrechterhalten wird.</claim-text></claim-text></claim>
<claim id="c-de-01-0009" num="0009">
<claim-text>5G-Kernnetzwerk nach Anspruch 8,<br/>
wobei die SMF konfiguriert ist, einen UPF-Standort beruhend auf der Verfügbarkeit einer spezifischen NAT-Funktionalität in dem UPF-Standort auszuwählen.</claim-text></claim>
<claim id="c-de-01-0010" num="0010">
<claim-text>5G-Kernnetzwerk nach Anspruch 8 oder 9, wobei die mindestens eine registrierte NAT-NFS-Instanzbeschreibung aufweist, ob der NAT-NFS mindestens eine unterstützt von:
<claim-text>NAT44-Funktionalität, NAT444-Funktionalität, NAT64-Funktionalität, DNS64-Funktionalität und/oder NAT46-Funktionalität, und/oder</claim-text>
<claim-text>wobei die NAT-Funktionalität auf mindestens einer bereitgestellt wird von: Pro-DNN-Grundlage, Pro-Slice-Grundlage, Pro-PDU-Sitzungsbasis, Pro-IP-Bereichsbasis, Pro-5G-Teilnehmer und/oder Pro-Einzel-IP und/oder</claim-text>
<claim-text>wobei das UPF-NF-Profil eine Liste aufweist, welche Funktionalitäten es an jedem UPF-Standort unterstützt.</claim-text></claim-text></claim>
<claim id="c-de-01-0011" num="0011">
<claim-text>5G-Kernnetzwerk nach einem der Ansprüche 8 bis 10, wobei der NAT-NFS in die UPF integriert ist und eine N6-Schnittstelle zu einem externen Datennetzwerk, DN, offenlegt.<!-- EPO <DP n="18"> --></claim-text></claim>
<claim id="c-de-01-0012" num="0012">
<claim-text>5G-Kernnetzwerk nach einem der Ansprüche 8 bis 10, wobei der NAT-NFS eigenständig ist, wobei der eigenständige NAT-NFS zwischen die UPF und ein externes Datennetzwerk, DN, geschaltet und konfiguriert ist, dem externen Datennetzwerk eine N6-Schnittstelle offenzulegen und der UPF eine andere Schnittstelle offenzulegen, und<br/>
wobei die andere Schnittstelle (N6') konfiguriert ist, denselben Protokollstapel wie die N6-Schnittstelle zu verwenden.</claim-text></claim>
<claim id="c-de-01-0013" num="0013">
<claim-text>5G-Kernnetzwerk nach Anspruch 11 oder 12, wobei das UPF-NF-Profil Informationen aufweist, ob der NAT-NFS eigenständig oder integriert ist; und<br/>
wenn der NAT-NFS eigenständig ist, das UPF-NF-Profil eine Liste aufweist, welche Schnittstellen der eigenständige NAT-NFS für die Konnektivität der anderen Schnittstelle (N6') einschließlich einer oder mehrerer IP-Adressen bereitstellt.</claim-text></claim>
<claim id="c-de-01-0014" num="0014">
<claim-text>5G-Kernnetzwerk nach einem der Ansprüche 8 bis 13, wobei die Registrierung des UPF-NF-Profils das Auflisten aufweist, welche Funktionalitäten es an jedem UPF-Standort unterstützt.</claim-text></claim>
</claims>
<claims id="claims03" lang="fr"><!-- EPO <DP n="19"> -->
<claim id="c-fr-01-0001" num="0001">
<claim-text>Procédé d'assistance d'une fonctionnalité de traduction d'adresse réseau, NAT, dans un réseau principal 5G, CN, ledit CN 5G comprenant au moins une fonction de plan d'utilisateur, UPF, au moins une fonction de gestion de session, SMF, et au moins une fonction de référentiel de réseau, NRF, l'UPF comprenant un profil de fonction de réseau, NF, UPF et ledit profil NF UPF contenant au moins une description d'instance de service NF NAT, NFS NAT, ledit procédé comprenant :
<claim-text>l'enregistrement, au niveau de la NRF, du profil NF UPF, la description d'instance de service NFS NAT comprenant des informations relatives à la fonctionnalité NAT assistée ;</claim-text>
<claim-text>le maintien, au niveau de la NRF, du profil NF UPF et la possibilité de découverte du profil NF UPF ;</claim-text>
<claim-text>la sélection par la SMF de l'UPF desservant un équipement utilisateur donné et/ou une session d'unité de données de protocole, PDU, sur la base des informations NFS NAT de la NRF disponibles au niveau de la SMF ;</claim-text>
<claim-text>la commande, par la SMF, de la fonctionnalité NAT devant être exécutée basée sur la NAT sur au moins une des bases suivantes : une base par DNN, une base par tranche, une base par session PDU, une base par abonné, une base par plage IP et/ou une base par IP individuelle,</claim-text>
<claim-text>où la commande de la fonctionnalité NAT devant être exécutée est réalisée via une interface basée service, SBI, en maintenant un protocole de commande d'acheminement de paquet, PFCP, dans l'interface N4.</claim-text></claim-text></claim>
<claim id="c-fr-01-0002" num="0002">
<claim-text>Procédé selon la revendication 1, où l'étape de sélection, par la SMF, de l'UPF desservant un équipement utilisateur et/ou une session d'unité de données de protocole, PDU, comprend la sélection d'un emplacement UPF sur la base de la disponibilité d'une fonctionnalité NAT spécifique sur ledit emplacement UPF.<!-- EPO <DP n="20"> --></claim-text></claim>
<claim id="c-fr-01-0003" num="0003">
<claim-text>Procédé selon la revendication 1 ou la revendication 2, où ladite au moins une description d'instance NFS NAT enregistrée comprend si la NFS NAT assiste au moins une des fonctionnalités suivantes : fonctionnalité NAT44, fonctionnalité NAT444, fonctionnalité NAT64, fonctionnalité DNS64 et/ou fonctionnalité NAT46, et/ou où la fonctionnalité NAT est réalisée sur au moins une des bases suivantes : par DNN, par tranche, par session PDU, par plage IP, par abonné 5G et/ou par IP individuelle, et/ou où l'enregistrement du profil NF UPF comprend le listage des emplacements où la NFS NAT est disponible.</claim-text></claim>
<claim id="c-fr-01-0004" num="0004">
<claim-text>Procédé selon l'une des revendications 1 à 3, où la NFS NAT est intégrée à l'intérieur de l'UPF et expose une interface N6 vers un réseau de données externe, DN.</claim-text></claim>
<claim id="c-fr-01-0005" num="0005">
<claim-text>Procédé selon l'une des revendications 1 à 3, où la NFS NAT est autonome,
<claim-text>où la NFS NAT autonome est connectée entre l'UPF et un réseau de données externe, DN, et expose une interface N6 vers le réseau de données externe, et expose une autre interface à l'UPF , et</claim-text>
<claim-text>où l'autre interface (N6') utilise la même pile de protocole que l'interface N6.</claim-text></claim-text></claim>
<claim id="c-fr-01-0006" num="0006">
<claim-text>Procédé selon la revendication 4 ou la revendication 5, où l'enregistrement du profil NF UPF comprend des informations si la NFS NAT est autonome ou intégrée ; et,<br/>
si la NFS NAT est autonome, le profil d'enregistrement NF UPF dans la NRF comprend en outre le listage des interfaces fournies par la NFS NAT autonome pour la connectivité de l'autre interface (N6') comprenant une adresse/des adresses IP.</claim-text></claim>
<claim id="c-fr-01-0007" num="0007">
<claim-text>Procédé selon l'une des revendications 1 à 6, où l'enregistrement du profil NF UPF comprend le listage des fonctionnalités assistées sur chaque emplacement UPF.</claim-text></claim>
<claim id="c-fr-01-0008" num="0008">
<claim-text>Réseau principal 5G, CN, apte à exécuter une traduction d'adresse réseau, NAT, ledit CN 5G comprenant au moins une fonction de plan d'utilisateur, UPF, au moins une fonction de gestion de session, SMF, et au moins une fonction de référentiel de réseau, NRF, l'UPF comprenant un profil de fonction de réseau, NF, UPF et ledit profil NF UPF contenant au moins une description d'instance de service NF NAT, NFS NAT, où :
<claim-text>le profil NF UPF est enregistré au niveau de la NRF, la description d'instance de service NFS NAT comprenant des informations relatives à la fonctionnalité NAT assistée ; et<!-- EPO <DP n="21"> --></claim-text>
<claim-text>la NRF étant configurée pour maintenir le profil NF UPF enregistrer et pour permettre la découverte du profil NF UPF ;</claim-text>
<claim-text>la SMF étant configurée pour sélectionner l'UPF desservant un équipement utilisateur donné et/ou une session d'unité de données de protocole, PDU, sur la base des informations NFS NAT de la NRF disponibles au niveau de la SMF ;</claim-text>
<claim-text>la SMF étant configurée pour commander la fonctionnalité NAT devant être exécutée basée sur la NAT sur au moins une des bases suivantes : une base par DNN, une base par tranche, une base par session PDU, une base par abonné, une base par plage IP et/ou une base par IP individuelle,</claim-text>
<claim-text>où la commande de la fonctionnalité NAT devant être exécutée est réalisée via une interface basée service, SBI, en maintenant un protocole de commande d'acheminement de paquet, PFCP, dans l'interface N4.</claim-text></claim-text></claim>
<claim id="c-fr-01-0009" num="0009">
<claim-text>Réseau principal 5G selon la revendication 8,<br/>
où la SMF est configurée pour sélectionner un emplacement UPF sur la base de la disponibilité d'une fonctionnalité NAT spécifique sur ledit emplacement UPF.</claim-text></claim>
<claim id="c-fr-01-0010" num="0010">
<claim-text>Réseau principal 5G selon la revendication 8 ou la revendication 9, où ladite au moins une description d'instance NFS NAT enregistrée comprend si la NFS NAT assiste au moins une des fonctionnalités suivantes : fonctionnalité NAT44, fonctionnalité NAT444, fonctionnalité NAT64, fonctionnalité DNS64 et/ou fonctionnalité NAT46, et/ou où la fonctionnalité NAT est réalisée sur au moins une des bases suivantes : par DNN, par tranche, par session PDU, par plage IP, par abonné 5G et/ou par IP individuelle, et/ou où le profil NF UPF comprend une liste des fonctionnalités assistées sur chaque emplacement UPF.</claim-text></claim>
<claim id="c-fr-01-0011" num="0011">
<claim-text>Réseau principal 5G selon l'une des revendications 8 à 10,<br/>
où la NFS NAT est intégrée à l'intérieur de l'UPF et expose une interface N6 vers un réseau de données externe, DN.</claim-text></claim>
<claim id="c-fr-01-0012" num="0012">
<claim-text>Réseau principal 5G selon l'une des revendications 8 à 10, où la NFS NAT est autonome, la NFS NAT autonome étant connectée entre l'UPF et un réseau de données externe, DN, et configurée pour exposer une interface N6 au réseau de données externe, et pour exposer<!-- EPO <DP n="22"> --> une autre interface à l'UPF , et<br/>
où l'autre interface (N6') est configurée pour utiliser la même pile de protocole que l'interface N6.</claim-text></claim>
<claim id="c-fr-01-0013" num="0013">
<claim-text>Réseau principal 5G selon la revendication 11 ou la revendication 12, où le profil NF UPF comprend des informations si la NFS NAT est autonome ou intégrée ; et,<br/>
si la NFS NAT est autonome, le profil NF UPF comprend en outre une liste des interfaces fournies par la NFS NAT autonome pour la connectivité de l'autre interface (N6') comprenant une adresse/des adresses IP.</claim-text></claim>
<claim id="c-fr-01-0014" num="0014">
<claim-text>Réseau principal 5G selon l'une des revendications 8 à 13, où l'enregistrement du profil NF UPF comprend le listage des fonctionnalités assistées sur chaque emplacement UPF.</claim-text></claim>
</claims>
<drawings id="draw" lang="en"><!-- EPO <DP n="23"> -->
<figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="156" he="147" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> -->
<figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="139" he="174" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> -->
<figure id="f0003" num="5,6"><img id="if0003" file="imgf0003.tif" wi="135" he="170" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> -->
<figure id="f0004" num="7,8"><img id="if0004" file="imgf0004.tif" wi="165" he="224" img-content="drawing" img-format="tif"/></figure>
</drawings>
<ep-reference-list id="ref-list">
<heading id="ref-h0001"><b>REFERENCES CITED IN THE DESCRIPTION</b></heading>
<p id="ref-p0001" num=""><i>This list of references cited by the applicant is for the reader's convenience only. It does not form part of the European patent document. Even though great care has been taken in compiling the references, errors or omissions cannot be excluded and the EPO disclaims all liability in this regard.</i></p>
<heading id="ref-h0002"><b>Non-patent literature cited in the description</b></heading>
<p id="ref-p0002" num="">
<ul id="ref-ul0001" list-style="bullet">
<li><nplcit id="ref-ncit0001" npl-type="s"><article><atl>Use of NRF for UPF discovery by SMF at PDU Session Establishment</atl><serial><sertitle>S2-1907591</sertitle><pubdate><sdate>20190618</sdate><edate/></pubdate></serial></article></nplcit><crossref idref="ncit0001">[0009]</crossref></li>
<li><nplcit id="ref-ncit0002" npl-type="s"><article><atl>Discussion on support of NAT in 5GS</atl><serial><sertitle>S2-1911742</sertitle><pubdate><sdate>20191108</sdate><edate/></pubdate></serial></article></nplcit><crossref idref="ncit0002">[0009]</crossref></li>
<li><nplcit id="ref-ncit0003" npl-type="s"><article><atl>LS reply on Support of Network Address Translation in the User Plane function</atl><serial><sertitle>S2-1911744</sertitle><pubdate><sdate>20191108</sdate><edate/></pubdate></serial></article></nplcit><crossref idref="ncit0003">[0009]</crossref></li>
</ul></p>
</ep-reference-list>
</ep-patent-document>
