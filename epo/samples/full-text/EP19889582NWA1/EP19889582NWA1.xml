<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP19889582A1" file="EP19889582NWA1.xml" lang="en" country="EP" doc-number="3889030" kind="A1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="en"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSKBAHRIS..MTNORSMESMMAKHTNMD..........</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  1100000/0</B007EP></eptags></B000><B100><B110>3889030</B110><B120><B121>EUROPEAN PATENT APPLICATION</B121><B121EP>published in accordance with Art. 153(4) EPC</B121EP></B120><B130>A1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>19889582.3</B210><B220><date>20191126</date></B220><B240><B241><date>20210609</date></B241></B240><B250>ja</B250><B251EP>en</B251EP><B260>en</B260></B200><B300><B310>2018221041</B310><B320><date>20181127</date></B320><B330><ctry>JP</ctry></B330></B300><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20211006</date><bnum>202140</bnum></B430></B400><B500><B510EP><classification-ipcr sequence="1"><text>B63B  49/00        20060101AFI20200605BHEP        </text></classification-ipcr><classification-ipcr sequence="2"><text>G08G   3/00        20060101ALI20200605BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>G08G   3/00        20130101 LI20200626BCEP        </text></classification-cpc><classification-cpc sequence="2"><text>B63B  49/00        20130101 LI20200626BCEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>VORRICHTUNG ZUR ROUTENERZEUGUNG</B542><B541>en</B541><B542>ROUTE GENERATION DEVICE</B542><B541>fr</B541><B542>DISPOSITIF DE GÉNÉRATION D'ITINÉRAIRE</B542></B540><B590><B598>5</B598></B590></B500><B700><B710><B711><snm>Yanmar Power Technology Co., Ltd.</snm><iid>101864060</iid><irf>LUPF1432071/WO-EP</irf><adr><str>1-32, Chayamachi 
Kita-ku</str><city>Osaka-shi
Osaka 530-8311</city><ctry>JP</ctry></adr></B711></B710><B720><B721><snm>HARA Naohiro</snm><adr><str>c/o YANMAR Co., Ltd., 1-32, Chayamachi, Kita-ku</str><city>Osaka-shi Osaka 530-8311</city><ctry>JP</ctry></adr></B721><B721><snm>FUKUKAWA Tomoya</snm><adr><str>c/o YANMAR Co., Ltd., 1-32, Chayamachi, Kita-ku</str><city>Osaka-shi Osaka 530-8311</city><ctry>JP</ctry></adr></B721><B721><snm>DAKE Yuichiro</snm><adr><str>c/o YANMAR Co., Ltd., 1-32, Chayamachi, Kita-ku</str><city>Osaka-shi Osaka 530-8311</city><ctry>JP</ctry></adr></B721></B720><B740><B741><snm>Dennemeyer &amp; Associates S.A.</snm><iid>101427789</iid><adr><str>Postfach 70 04 25</str><city>81304 München</city><ctry>DE</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840><B844EP><B845EP><ctry>BA</ctry></B845EP><B845EP><ctry>ME</ctry></B845EP></B844EP><B848EP><B849EP><ctry>KH</ctry></B849EP><B849EP><ctry>MA</ctry></B849EP><B849EP><ctry>MD</ctry></B849EP><B849EP><ctry>TN</ctry></B849EP></B848EP><B860><B861><dnum><anum>JP2019046102</anum></dnum><date>20191126</date></B861><B862>ja</B862></B860><B870><B871><dnum><pnum>WO2020111040</pnum></dnum><date>20200604</date><bnum>202023</bnum></B871></B870></B800></SDOBI>
<abstract id="abst" lang="en">
<p id="pa01" num="0001">According to the present invention, a route controller generates a route (56) that makes a ship (95) dock at a berthing facility. The route (56) includes a first location (P1) and a second location (P2). The first location (P1) is a via point (via point (A7) in the example in the selected drawing) that is offset a prescribed distance in a direction that is orthogonal to the direction in which the berthing facility is oriented from a docking point (B1) (the second location (P2)) for the ship (95) at the berthing facility. The second location (P2) is the docking point (B1) for the ship (95) at the berthing facility. The first location (P1) is immediately before the second location (P2) in the sequence to be realized by the ship (95). The route (56) is generated such that the ship (95) remains oriented in the direction in which the berthing facility is oriented as the ship (95) moves from the first location (P1) to the second location (P2).<img id="iaf01" file="imgaf001.tif" wi="73" he="113" img-content="drawing" img-format="tif"/></p>
</abstract>
<description id="desc" lang="en"><!-- EPO <DP n="1"> -->
<heading id="h0001">TECHNICAL FIELD</heading>
<p id="p0001" num="0001">The present invention relates to a route generation device that generates a route of a ship.</p>
<heading id="h0002">BACKGROUND ART</heading>
<p id="p0002" num="0002">A ship steering system for use in automatic docking of a ship is conventionally known. Patent Literature 1 discloses a small-sized ship equipped with such ship steering system.</p>
<p id="p0003" num="0003">The small-sized ship in Patent Literature 1 includes a controller. The controller sets, among positions along a docking location, the closest position in a current bow direction as the first target position. In addition, the controller determines a position separated from the first target position by an offset amount in a direction perpendicular to an edge of the docking location as the second target position.</p>
<p id="p0004" num="0004">Then, the controller controls a propulsion apparatus so as to make the small-sized ship reach the second target position. Subsequently, the controller controls the propulsion apparatus so as to make the small-sized ship reach the first target position.</p>
<p id="p0005" num="0005">The small-sized ship is controlled according to approach control if the distance from a current position to the first target position is of a value exceeding a specified threshold. On the other hand, the small-sized ship is controlled according to adjustment control if the distance from the current position to the first target position is of a value equal to or less than the specified threshold.</p>
<p id="p0006" num="0006">In the approach control, the controller determines a target thrust and a target steering angle of the propulsion apparatus based on the first target speed (target speed in the longitudinal direction of the hull) and a target angular velocity (target angular velocity of the hull). In the adjustment control, the target thrust and the target steering angle of the propulsion apparatus are determined based on the first target speed, the second target speed (target speed in the lateral direction of the hull), and the target angular velocity.</p>
<p id="p0007" num="0007">The controller reduces the target speed as the current position of<!-- EPO <DP n="2"> --> the hull comes closer to the first target position. When the distance between the current position of the hull and the first target position falls within a specified range including zero, the controller sets the target speed to zero. Moreover, the controller reduces the target angular velocity as a current bearing of the hull comes closer to a target bearing (bearing of the hull at the docking location). When the difference between the current bearing of the hull and the target bearing falls within a specified range including zero, the controller sets the target angular velocity to zero.</p>
<heading id="h0003">CITATION LIST</heading>
<heading id="h0004">Patent Literature</heading>
<p id="p0008" num="0008">Patent Literature 1: <patcit id="pcit0001" dnum="WO2018100749A"><text>WO 2018/100749</text></patcit></p>
<heading id="h0005">DISCLOSURE OF INVENTION</heading>
<heading id="h0006">PROBLEMS TO BE SOLVED BY THE INVENTION</heading>
<p id="p0009" num="0009">Since the configuration in Patent Literature 1 carries out control so as to make the bearing of the ship coincident with the target bearing (namely, the bearing of the ship in the first target position) while bringing the ship closer to the first target position, an actual movement locus of the ship during the automatic docking may curve off under the influence of the angular velocity, for instance. For this reason, the automatic docking of the ship may not be achieved with high accuracy, which leaves room for improvement.</p>
<p id="p0010" num="0010">The present invention has been made in view of the conditions as above and is aimed at providing a route generation device capable of generating a route allowing automatic docking of a ship with high accuracy.</p>
<heading id="h0007">MEANS FOR SOLVING THE PROBLEMS AND EFFECT OF THE INVENTION</heading>
<p id="p0011" num="0011">The problems to be solved by the present invention are as described above, and the means for solving such problems and effects of the means are next described.</p>
<p id="p0012" num="0012">According to an aspect of the present invention, a route generation device with the following configuration is provided. In other words, the route generation device generates a route allowing a ship to dock at a berthing facility. The route includes a first position and a second<!-- EPO <DP n="3"> --> position. The first position is a position displaced from a docking position for the ship in the berthing facility by a specified distance in a direction perpendicular to a direction of the berthing facility. The second position is the docking position for the ship in the berthing facility. The route is generated so that the ship moves from the first position to the second position while maintaining a bearing of the ship in a direction along the berthing facility.</p>
<p id="p0013" num="0013">Such configuration allows the ship to come closer to the second position from the first position perpendicularly to the direction of the berthing facility while making the bearing of the ship coincident with the direction along the berthing facility. Consequently, the automatic docking of the ship is achieved with high accuracy while reducing the possibility of collision against the berthing facility.</p>
<p id="p0014" num="0014">The route generation device as above preferably has the following configuration. In other words, the route is so generated as to link a plurality of positions. The first position is immediately before the second position on the route in an order to be fulfilled by the ship.</p>
<p id="p0015" num="0015">Such configuration makes it possible to fulfill a simple route for automatic docking.</p>
<p id="p0016" num="0016">The route generation device as above preferably has the following configuration. In other words, the route includes one or more intermediate positions. The intermediate positions precede the first position in the order to be fulfilled by the ship. The route generation device is capable of generating the route while changing a bearing setting mode. The bearing setting mode includes a pivotal turn before parallel movement mode and a turn with movement mode. In the pivotal turn before parallel movement mode, the ship having reached the intermediate positions pivotally turns in the intermediate positions so as to cause the bearing of the ship to agree with a bearing to be fulfilled by the ship in a next position and moves to the next position while maintaining a bearing after turning. In the turn with movement mode, the ship having reached the intermediate positions turns concurrently with movement from the intermediate positions to the next position so as to cause the bearing of the ship to agree with the bearing to be fulfilled by the ship in the next position.</p>
<p id="p0017" num="0017">Such configuration makes it possible to generate a route allowing the automatic docking of the ship while making a change from the parallel<!-- EPO <DP n="4"> --> movement after completion of a turn to the movement with a turn, or vice versa according to circumstances.</p>
<p id="p0018" num="0018">The route generation device as above preferably has the following configuration. In other words, the bearing setting mode includes a pivotal turn before forward movement mode. In the pivotal turn before forward movement mode, the ship having reached the intermediate positions pivotally turns in the intermediate positions so as to cause the bearing of the ship to agree with a bearing directed to the next position and moves to the next position while maintaining a bearing after turning.</p>
<p id="p0019" num="0019">Such configuration makes it possible to generate a route allowing the automatic docking of the ship while carrying out the forward movement after completion of a turn according to circumstances.</p>
<p id="p0020" num="0020">In the route generation device as above, the bearing setting mode may be changed based on at least a direct distance between the intermediate positions and the second position or a direct distance between the intermediate positions and the first position.</p>
<p id="p0021" num="0021">In the route generation device as above, the bearing setting mode may also be changed based on at least a distance on the route between the intermediate positions and the second position or a distance on the route between the intermediate positions and the first position.</p>
<p id="p0022" num="0022">Such change in bearing setting mode makes it possible to change the method of setting the bearing of the ship between an ending phase of the automatic docking that needs a high-accuracy control of the bearing of the ship and a phase preceding the ending phase.</p>
<p id="p0023" num="0023">In the route generation device as above, the bearing setting mode is preferably changed based on at least a magnitude of change of a direction of the route in the intermediate positions.</p>
<p id="p0024" num="0024">Such change in bearing setting mode makes it possible to prevent a movement locus of the ship from considerably coming off the route even if the route sharply bends in an intermediate position.</p>
<p id="p0025" num="0025">The route generation device as above preferably includes a display data generation unit that generates display data for displaying, with a figure, the first position and the second position as well as directions to be fulfilled by the ship in the first position and the second position, respectively.</p>
<p id="p0026" num="0026">Such configuration allows a user to readily grasp the behavior of<!-- EPO <DP n="5"> --> the ship involved in the automatic docking by checking the display.</p>
<heading id="h0008">BRIEF DESCRIPTION OF DRAWINGS</heading>
<p id="p0027" num="0027">
<ul id="ul0001" list-style="none" compact="compact">
<li><figref idref="f0001">FIG. 1</figref> is a block diagram illustrating an electric configuration of a ship steering management system according to an embodiment of the present invention.</li>
<li><figref idref="f0002">FIG. 2</figref> is a diagram illustrating examples of an environmental map generated by a local map generation unit and a straight line detected by a docking point setting unit.</li>
<li><figref idref="f0003">FIG. 3</figref> is a flowchart illustrating processing to be performed by a route generation unit for the purpose of generating a route.</li>
<li><figref idref="f0004">FIG. 4</figref> is a flowchart illustrating a subroutine for setting a target bearing at via points.</li>
<li><figref idref="f0005">FIG. 5</figref> is a schematic diagram illustrating how a ship changes a bearing while following via points on a route.</li>
<li><figref idref="f0006">FIG. 6</figref> is a diagram illustrating an example of display contents of a display device based on display data.</li>
<li><figref idref="f0007">FIG. 7</figref> is a schematic diagram illustrating an exemplary motion of a ship during automatic docking.</li>
</ul></p>
<heading id="h0009">DESCRIPTION OF EMBODIMENTS</heading>
<p id="p0028" num="0028">The next description is made on an embodiment of the present invention with reference to the drawings. <figref idref="f0001">FIG. 1</figref> is a block diagram illustrating an electric configuration of a ship steering management system 1 according to an embodiment of the present invention.</p>
<p id="p0029" num="0029">The ship steering management system 1 illustrated in <figref idref="f0001">FIG. 1</figref> is loaded to use on a ship 95. The ship steering management system 1 allows automatic navigation of the ship 95. The automatic navigation includes automatic docking of the ship 95.</p>
<p id="p0030" num="0030">In the present specification, "docking" includes bringing the ship 95 up at a berthing facility. The "berthing facility" refers to a place where a ship can be brought up, and it does not matter whether the berthing facility is a natural object or an artificial object. Examples of the berthing facility include a quay, a wharf, a pier, and a floating pier.</p>
<p id="p0031" num="0031">The ship 95, to which the ship steering management system 1 is applied, is not particularly limited in structure but may be exemplified by a<!-- EPO <DP n="6"> --> pleasure boat, a fishing boat, a water jet ship, an electric propulsion ship or a hybrid ship.</p>
<p id="p0032" num="0032">The ship 95 is equipped with a propulsion apparatus 5.</p>
<p id="p0033" num="0033">The propulsion apparatus 5 includes a pair of screws 6L and 6R. The screws 6L and 6R are arranged on the left and right sides of the stern of the ship 95, respectively. The propulsion apparatus 5 is capable of rotating the screws 6L and 6R owing to the driving force of a driving source (engine or electric motor). The direction of the rotation axis of each of the screws 6L and 6R is changeable with respect to a vertical axis as a center. The direction of the rotation axis, the stop/normal rotation/reverse rotation, and the rotational speed of each of the screws 6L and 6R are changeable independently of one another. By controlling each of the screws 6L and 6R, the ship 95 is variously steered, that is to say, caused to make a parallel movement in a lateral direction, pivotally turn, and the like.</p>
<p id="p0034" num="0034">The screws 6L and 6R may be formed as screws of a stern drive or an outboard motor. The screws 6L and 6R may be replaced by a pair of water jets arranged on the left and right sides that are changeable in water jetting direction and speed independently of each other.</p>
<p id="p0035" num="0035">The ship steering management system 1 includes a route controller (route generation device) 2 and a management controller 3.</p>
<p id="p0036" num="0036">The route controller 2 is capable of generating a route for allowing the automatic navigation of the ship 95. The route controller 2 includes an environment information input unit 21, a position and bearing information input unit 22, a map generation unit 31, a docking point setting unit 41, a route generation unit 51, a display data generation unit 71, and an interface unit 81.</p>
<p id="p0037" num="0037">Specifically, the route controller 2 is constituted of a computer including a CPU, a ROM, and a RAM. In the ROM, a program for making the route controller 2 operate is stored. Cooperation of the hardware and software as above allows the route controller 2 to function as the environment information input unit 21, the position and bearing information input unit 22, the map generation unit 31, the docking point setting unit 41, the route generation unit 51, the display data generation unit 71, and the interface unit 81.</p>
<p id="p0038" num="0038">To the environment information input unit 21, environment data as to the surroundings that is acquired by a LiDAR 11 provided on the ship<!-- EPO <DP n="7"> --> 95 is input. The LiDAR 11 is installed near the bow, for instance.</p>
<p id="p0039" num="0039">The LiDAR 11 emits a pulsed light to detect the presence or absence of an object in the surroundings based on a reflected light. If an object is present, the LiDAR 11 detects the bearing of the object and the distance to the object based on the direction of the pulsed light when the reflected light has been received and the time elapsed before the reception of the reflected light. Based on the result of such detection, the LiDAR 11 acquires point group data representing the object present in the surroundings.</p>
<p id="p0040" num="0040">To the position and bearing information input unit 22, position data as to the ship 95 that is acquired by a GNSS device 12 provided on the ship 95 is input. Also to the position and bearing information input unit 22, bearing data as to the ship 95 that is acquired by a bearing sensor 13 provided on the ship 95 is input.</p>
<p id="p0041" num="0041">The GNSS device 12 receives a GNSS wave from a satellite and performs a known positioning calculation to acquire a current position of the ship 95. While GNSS positioning may be carried out by independent positioning, the use of a known DGNSS positioning or RTK (real time kinematic) positioning is preferred because the position of the ship 95 is acquired with high accuracy.</p>
<p id="p0042" num="0042">The bearing sensor 13 acquires the direction of the bow of the ship 95. The bearing sensor 13 may be a magnetic bearing sensor or a satellite compass.</p>
<p id="p0043" num="0043">The map generation unit 31 generates an environmental map. The environmental map is a map to be used to design a route. The map generation unit 31 includes a local map generator 32 and a wide area map generator 33.</p>
<p id="p0044" num="0044">The local map generator 32 generates an environmental map of a local area including a docking position. In other words, the local map generator 32 generates an environmental map of the vicinity of a berthing facility. In the following, an environmental map generated by the local map generator 32 is also referred to as a local map.</p>
<p id="p0045" num="0045">In <figref idref="f0002">FIG. 2</figref>, a local map 36 is illustrated as an example. In <figref idref="f0002">FIG. 2</figref>, the current position and direction of the ship 95 are also illustrated for convenience of description.</p>
<p id="p0046" num="0046">As illustrated in <figref idref="f0002">FIG. 2</figref>, the local map 36 includes the region, in<!-- EPO <DP n="8"> --> which no objects are detected by the LiDAR 11 and which is consequently determined to allow the navigation of the ship 95 (namely, a free space 37). In addition, the local map 36 includes a group of points representing objects detected by the LiDAR 11. As viewed from the ship 95, a region behind the objects detected by the LiDAR 11 constitutes an occlusion region 38 where the presence or absence of an object is unknown.</p>
<p id="p0047" num="0047">The wide area map generator 33 generates an environmental map including a region beyond the range of the local map 36. In the following, an environmental map generated by the wide area map generator 33 is also referred to as a wide area map.</p>
<p id="p0048" num="0048">The wide area map, which is not illustrated, includes the region, in which no objects are detected by the LiDAR 11 and which is consequently determined to allow the navigation of the ship 95, as is the case with the local map 36.</p>
<p id="p0049" num="0049">The docking point setting unit 41 in <figref idref="f0001">FIG. 1</figref> detects a candidate position for the automatic docking of the ship 95 from the local map 36. As illustrated in <figref idref="f0002">FIG. 2</figref>, a group of points deemed to indicate a berthing facility appear in the local map 36 as lined up in one direction in front of the occlusion region 38. The docking point setting unit 41 employs an appropriate computation algorithm so as to detect a straight line 39 extending along the group of points. The straight line 39 represents the direction of the berthing facility.</p>
<p id="p0050" num="0050">A user is able to setting, through the interface unit 81 to be described later, a point constituting a target for an actual automatic docking of the ship 95 (hereinafter also referred to as a docking point B1) in a position near the straight line 39 detected by the docking point setting unit 41. Taking the overall length of the ship 95 into consideration, the user sets the docking point B1 near a berthing facility deemed to allow docking (specifically, the straight line 39). In <figref idref="f0005">FIG. 5</figref>, an example of the docking point B1 is illustrated with a topography different from the topography in <figref idref="f0002">FIG. 2</figref>. The ship 95 docks in a direction along the direction of the berthing facility (direction of the straight line 39). During the docking, the user chooses where to direct the bow, that is to say, whether to berth the ship port or starboard.</p>
<p id="p0051" num="0051">To the docking point B1, information about a target position and a target bearing of the ship 95 in the docking position is given. Therefore, the docking point B1 essentially corresponds to the docking position for the<!-- EPO <DP n="9"> --> ship 95.</p>
<p id="p0052" num="0052">The target position refers to a position targeted by the ship 95 under automatic navigation. The target bearing is a bearing targeted by the ship 95 under automatic navigation. A target comprehends, apart from the final target (the docking point B1), an intermediate target preceding the final target.</p>
<p id="p0053" num="0053">The route generation unit 51 calculates a route of the ship 95 to the docking point B1 based on an appropriate route search algorithm. For the calculation of the route, the local map 36 generated by the local map generator 32 and the wide area map generated by the wide area map generator 33 are both used. After completing the calculation of the route, the route generation unit 51 generates a plurality of via points A1, A2, ... defining a route 56, as illustrated in <figref idref="f0005">FIG. 5</figref>. In addition, the route generation unit 51 sets information about the target position and the target bearing for each of the via points A1, A2, ...</p>
<p id="p0054" num="0054">The ship 95 is so controlled as to fulfill the target position and the target bearing at a point, such as the via points A1, A2, ... and the docking point B1, and such point is also referred to as a control point in the following. The via points A1, A2, ... are intermediate control points and the docking point B1 is the final control point. The route 56 is so set in a zigzag line form as to link the target positions at two or more control points in order.</p>
<p id="p0055" num="0055">Each control point includes the information about the target position and the target bearing. The automatic docking is managed so that the ship 95 may sequentially fulfill the target position and the target bearing at each control point in the order of control points on the route 56.</p>
<p id="p0056" num="0056">Next, processing performed by the route generation unit 51 is described in detail. <figref idref="f0003">FIG. 3</figref> is a flowchart illustrating processing to be performed by the route generation unit 51 for the purpose of generating the route 56. <figref idref="f0004">FIG. 4</figref> is a flowchart illustrating a subroutine for setting the target bearing at the via points A1, A2, ...</p>
<p id="p0057" num="0057">When the docking point B1 has been set and the user has given instructions about the automatic docking through the interface unit 81, the route generation unit 51 starts the processing in <figref idref="f0003">FIG. 3</figref>.</p>
<p id="p0058" num="0058">As illustrated in <figref idref="f0005">FIG. 5</figref>, the route generation unit 51 generates the target position at a via point A7 in a position (first position P1) separated from the docking point B1 (second position P2) for the docking at<!-- EPO <DP n="10"> --> a berthing facility by a specified distance in a direction perpendicular to the direction of the berthing facility (step S101 in <figref idref="f0003">FIG. 3</figref>).</p>
<p id="p0059" num="0059">The via point A7 is the (N-1)th control point if N control points are finally set and the docking point B1 is considered as the Nth control point. In other words, the via point A7 (the first position P1) set in step S101 is immediately before the docking point B1 (the second position P2) in the order to be fulfilled by the ship 95. The number of control points (that is to say, the number of the via points A1, A2, ...), however, is not settled yet in step S101 because the route 56 has not been determined.</p>
<p id="p0060" num="0060">Next, the route generation unit 51 calculates a route of the ship 95 to the via point A7 generated in step S101 based on an appropriate route search algorithm. For the calculation of the route, the wide area map generated by the wide area map generator 33 is used. While any rout search algorithm may be used, the A* algorithm is used in the present embodiment. Since the wide area map is two-dimensional, route search is performed in a two-dimensional manner.</p>
<p id="p0061" num="0061">In the route search, consideration is given to the overall length of the ship 95 as set in advance. As a result, it is possible to make a search taking an actual size of the ship into consideration. Among various methods for consideration, it is thinkable, for instance, to displace the region of the free space 37 as described before inward in an amount corresponding to the overall length and perform the route search based on the region after displacement.</p>
<p id="p0062" num="0062">In step S102, the route generation unit 51 generates one or more target positions of the ship 95 at the via points A1, A2, ... so that the result of the route search may be represented by a zigzag line. In <figref idref="f0005">FIG. 5</figref>, the two via points A1 and A2 on the beginning end side are omitted. The via points A1, A2, ..., and A6, for each of which the target position is set in step S102, correspond to the first through the (N-2)th control points, respectively, in the order of control points closer to a current position of the ship 95. The via points A1, A2, ..., and A6 other than the via point A7 in the first position P1 each correspond to an intermediate position.</p>
<p id="p0063" num="0063">In step S102, the target position is settled at all the control points (the via points A1, A2, ... and the docking point B1) and the route 56 is so set as to link the control points. In step S102, however, the target position at each of the via points A1, A2, ... is only set and the target bearing is not set yet.</p>
<p id="p0064" num="0064">Next, the route generation unit 51 sets the target bearing for each<!-- EPO <DP n="11"> --> of the via points A1, A2, ... (step S103). In the present embodiment, the route generation unit 51 sets the target bearing for each of two or more via points A1, A2, ... while appropriately changing a bearing setting mode to be described later.</p>
<p id="p0065" num="0065">The details of the process in step S103 are illustrated in <figref idref="f0004">FIG. 4</figref> as a subroutine. When the process starts, the route generation unit 51 sets the target bearing at the via point A7 to be fulfilled immediately before the docking point B1 so that the set target bearing may be the same as the target bearing at the docking point B1 (step S201).</p>
<p id="p0066" num="0066">Next, the bearing setting mode, which is related to rules for the setting of the target bearing, is determined with respect to a via point An-1 just ahead of a via point An where the target bearing was set last (n being an integer) (step S202).</p>
<p id="p0067" num="0067">The bearing setting mode is selected from four modes below according to circumstances. In the following, detailed description is made on each bearing setting mode.
<ol id="ol0001" compact="compact" ol-style="">
<li>(1) A first bearing setting mode is a pivotal turn before parallel movement mode. In this mode, the ship 95, which has reached the via point An-1, temporarily stops and pivotally turns on the spot so as to cause the bearing of the ship 95 to agree with the target bearing at the next via point An. After completion of the turn in a stopping state, the ship 95 moves to the next via point An while maintaining the bearing after the turn. The pivotal turn before parallel movement mode is assumed to be implemented if the ship 95 is adequately close to the docking point B1 in an ending phase of the automatic docking.</li>
<li>(2) A second bearing setting mode is a pivotal turn before forward movement mode. In this mode, the ship 95, which has reached the via point An-1, temporarily stops and pivotally turns on the spot so as to cause the bearing of the ship 95 to agree with a bearing directed to the next via point An. After completion of the turn in a stopping state, the ship 95 moves to the next via point An while maintaining the bearing after the turn. During such movement, the ship 95 essentially moves forward. The pivotal turn before forward movement mode is assumed to be implemented in an early phase through a middle phase of the automatic docking.</li>
<li>(3) A third bearing setting mode is a parallel movement keeping mode. In this mode, the ship 95, which has reached the via point An-1 (in the<!-- EPO <DP n="12"> --> pivotal turn before parallel movement mode or the parallel movement keeping mode), moves to the next via point An while maintaining the bearing of the ship 95 at that time as is. The parallel movement keeping mode is assumed to be implemented in an ending phase of the automatic docking, as is the case with the pivotal turn before parallel movement mode.</li>
<li>(4) A fourth bearing setting mode is a turn with movement mode. In this mode, the ship 95, which has reached the via point An-1, moves toward the next via point An. In the course of such movement, the ship 95 turns so as to cause the bearing of the ship 95 to agree with the target bearing at the next via point An. In the turn with movement mode, the movement and the turn of the ship 95 are attained concurrently, so that the ship 95 moves quickly as compared with the pivotal turn before parallel movement mode and the pivotal turn before forward movement mode. The turn with movement mode is assumed to be implemented in an early phase through a middle phase of the automatic docking.</li>
</ol></p>
<p id="p0068" num="0068">Which is to be selected from among the four bearing setting modes is determined taking account of the position of the via point An-1, how sharply the route bends at the via point An-1, and the like.</p>
<p id="p0069" num="0069">If the direct distance or distance on the route between the via point An-1 as a subject of determination and the docking point B1 is shorter than a specified distance, for instance, the parallel movement keeping mode is selected. The parallel movement keeping mode may be selected if the direct distance or distance on the route between the via point An-1 as a subject of determination and the via point A7, at which the target bearing is set in step S202, is shorter than a specified distance.</p>
<p id="p0070" num="0070">At a via point A5 that is a first via point where the above distance is equal to or longer than a specified distance when the route is followed from the docking point B1, the pivotal turn before parallel movement mode is selected.</p>
<p id="p0071" num="0071">If the via point An-1 as a subject of determination is more distant from the docking point B1, it is determined whether the direction of the route 56 significantly changes at the via point An-1. If the direction of the route 56 changes by an angle equal to or larger than a specified angle, the pivotal turn before forward movement mode is selected at the via point An-1. Otherwise the turn with movement mode is selected at the via point An-1.</p>
<p id="p0072" num="0072">Next, the route generation unit 51 finds the target bearing at the<!-- EPO <DP n="13"> --> via point An-1 as a subject in accordance with the selected bearing setting mode (step S203). A specific process is as follows.
<ol id="ol0002" compact="compact" ol-style="">
<li>(1) In the pivotal turn before parallel movement mode, the target bearing at the via point An-1 as a subject is so set as to agree with a bearing directed from a via point An-2 immediately before the via point An-1 as a subject to the via point An-1 as a subject. The route generation unit 51, however, inserts a control point to be fulfilled immediately after the via point An-1 as a subject (hereinafter also referred to as a transition point) into the route 56. The target position at the transition point is identical to the target position at the via point An-1 as a subject. The target bearing at the transition point is so set as to agree with the target bearing at the via point An immediately after the transition point.</li>
<li>(2) In the pivotal turn before forward movement mode, the target bearing at the via point An-1 as a subject is so set as to agree with a bearing directed from the via point An-2 immediately before the via point An-1 as a subject to the via point An-1 as a subject, as is the case with the pivotal turn before parallel movement mode. The route generation unit 51, however, inserts the control point to be fulfilled immediately after the via point An-1 as a subject (transition point) into the route 56. The target position at the transition point is identical to the target position at the via point An-1 as a subject. The target bearing at the transition point is so set as to agree with a bearing directed from the via point An-1 as a subject to the via point An immediately after the transition point.</li>
<li>(3) In the parallel movement keeping mode, the target bearing at the via point An-1 as a subject is so set as to agree with the target bearing at the via point An immediately after the via point An-1 as a subject.</li>
<li>(4) In the turn with movement mode, the target bearing at the via point An-1 as a subject is so set as to agree with a bearing directed from the via point An-2 immediately before the via point An-1 as a subject to the via point An-1 as a subject.</li>
</ol></p>
<p id="p0073" num="0073">After setting the target bearing at one via point An-1 as described above, the route generation unit 51 determines whether the target bearing has been set with respect to all the via points A1, A2, ..., and A7 (step S204). If, among the via points A1, A2, ..., and A7, there remains a via point where the target bearing is not set yet, the processing returns to step S202.</p>
<p id="p0074" num="0074">In the pivotal turn before parallel movement mode and the parallel<!-- EPO <DP n="14"> --> movement keeping mode, the target bearing at the via point An-1 as a subject is dependent on the target bearing at the via point An immediately after the via point An-1 as a subject. For this reason, in the flowchart in <figref idref="f0004">FIG. 4</figref>, the target bearings at the via points A1, A2, ..., and A7 are found in the order of via points closer to the docking point B1 (that is to say, in an order reverse to the order of via points followed by the ship 95).</p>
<p id="p0075" num="0075">If it is determined in step S204 that the target bearing has been set with respect to all the via points A1, A2, ..., and A7, the processing withdraws from the subroutine and returns to a main routine illustrated in <figref idref="f0003">FIG. 3</figref>. Then, the processing ends in the main routine.</p>
<p id="p0076" num="0076">An example of the route 56 generated by the processing as described above is illustrated in <figref idref="f0005">FIG. 5</figref>. As seen from the illustrated example, the ship 95 makes a parallel movement in positions on the whole route 56 that are close to the docking position (that is to say, from the via point A5 to the docking point B1) while maintaining the bearing of the ship 95 in the direction along the berthing facility.</p>
<p id="p0077" num="0077">In a section 56a where the turn with movement mode is employed, the ship 95 turns while moving. Consequently, the turn with movement mode is suitable for a quick movement. It, however, is highly possible that an actual movement locus of the ship 95 does not have such a linear form as indicated by the route 56 in <figref idref="f0005">FIG. 5</figref> but curves off as illustrated with a broken line because the ship 95 moves and turns concurrently in the section 56a.</p>
<p id="p0078" num="0078">On the other hand, at a via point A4 where the pivotal turn before forward movement mode has been selected, the ship 95 is temporarily stopped at the via point A4 and caused to turn toward the next via point A5 so as to adjust the bearing of the ship 95 before the ship 95 is caused to move to the next via point A5. As a result, the curving off of the movement locus of the ship 95 is suppressed in a section 56b. The pivotal turn before forward movement mode is suitable for the navigation in an intricate spot.</p>
<p id="p0079" num="0079">The display data generation unit 71 in <figref idref="f0001">FIG. 1</figref> is capable of generating display data for displaying the current position of the ship 95, the environmental map, the docking position, and the like. Illustrated in <figref idref="f0006">FIG. 6</figref> is an exemplary display of a display device based on the display data described below. The display data may be data for indicating the ship 95 in the current position with a symbolic figure, indicating the route 56 with a zigzag line, and indicating the position and direction to be fulfilled by the ship<!-- EPO <DP n="15"> --> at each of the via points A1, A2, .... and the docking point B1 (including the first position P1 and the second position P2) with a figure. In that case, the user is able to readily grasp the behavior of the ship 95 during the automatic docking beforehand by seeing an image on the display device.</p>
<p id="p0080" num="0080">The interface unit 81 in <figref idref="f0001">FIG. 1</figref> has a user interface function with the ship steering management system 1. The interface unit 81 may have a configuration including a display device and an input device. In that case, the user is able to input instructions by referring to the display contents of the display device and operating the input device. The input device may be a keyboard, a mouse or a touch panel.</p>
<p id="p0081" num="0081">The management controller 3 is a computer including a CPU, a ROM, and a RAM. In the ROM, a program for managing an action of the propulsion apparatus 5 (action of the screws 6L and 6R arranged on the left and the right, respectively, in the present embodiment) is stored. The management controller 3 controls the propulsion apparatus 5 in accordance with the program.</p>
<p id="p0082" num="0082">The ship 95 is equipped with a steering device 91 for steering the ship 95. When the user operates the steering device 91, the contents of operation on the steering device 91 are output to the management controller 3. The management controller 3 manages the action of the propulsion apparatus 5 according to the input contents of operation. Consequently, the user is able to manually navigate the ship 95 by operating the steering device 91. The steering device 91 may be a handle, a control lever or a joystick.</p>
<p id="p0083" num="0083">If the route controller 2 generates the route 56, the management controller 3 is able to use the target positions and the target bearings, which have been set with respect to the control points (namely, the via points A1, A2, ..., the docking point B1, and the transition point), respectively, to allow the automatic navigation of the ship 95. When the management controller 3 carries out the automatic navigation, the via points A1, A2, ... and the transition point are identically treated.</p>
<p id="p0084" num="0084">The automatic navigation (automatic docking) is carried out as described below. The management controller 3 sets the control point, which is closest to the beginning end of the route 56, as a control point of interest. The management controller 3 calculates a thrust of the ship 95 that is required for removing the difference between the current position of the ship 95 and the target position at the control point of interest. The management<!-- EPO <DP n="16"> --> controller 3 also calculates a turning round moment of the ship 95 that is required for removing the difference between the current bearing of the ship 95 and the target bearing at the control point of interest. Then, the management controller 3 gives instructions to fulfill the found thrust and turning round moment to the propulsion apparatus 5. When the current position of the ship 95 agrees with the target position at the control point of interest and the current bearing of the ship 95 agrees with the target bearing at the control point of interest, the management controller 3 sets the control point to be fulfilled next to the current control point of interest on the route 56 as a new control point of interest. Repeating the processing as above makes it possible to appropriately control the bearing of the ship 95 and cause the ship 95 to automatically navigate to the docking point B1 in accordance with the route 56.</p>
<p id="p0085" num="0085">The management controller 3 may calculate the speed and the angular velocity of the ship 95 from the change in position of the ship 95 and use the data as calculated to perform speed control. The change in position of the ship 95 is found from position data of the ship 95 acquired by the GNSS device 12 at brief intervals, for instance.</p>
<p id="p0086" num="0086">Referring to <figref idref="f0007">FIG. 7</figref>, an example of automatic docking is described. <figref idref="f0007">FIG. 7</figref> is a diagram illustrating an exemplary motion of the ship 95 during the automatic docking.</p>
<p id="p0087" num="0087">In the example illustrated in <figref idref="f0007">FIG. 7</figref>, the docking point B1 (the second position P2) is set near a pier as a berthing facility. In a position displaced from the docking point B1 by an appropriate distance in the direction perpendicular to the direction of the pier, a via point A3 (the first position P1) to be fulfilled immediately before the docking point B1 is set. The target bearing at the via point A3 is identical to the target bearing at the docking point B1. The via point A3 is preceded by a plurality of via points A1 and A2.</p>
<p id="p0088" num="0088">In this example, the ship 95 as instructed to automatically dock moves while turning after reaching the first via point A1 so as to reach the next via point A2. At the via point A2, the ship 95 temporarily stops and pivotally turns so as to have a bearing identical to the target bearing at the next via point A3. Then, the ship 95 makes a parallel movement from the via point A2 toward the next via point A3. Next, the ship 95 makes a parallel movement from the via point A3 toward the docking point B1 while<!-- EPO <DP n="17"> --> maintaining the current bearing.</p>
<p id="p0089" num="0089">Thus in the present embodiment, when the ship 95 moves to the via point A2, the via point A3, and the docking point B1 in this order, the ship 95 does not turn concurrently with a parallel movement but only makes a parallel movement. Consequently, the influence of a cross fluid force (called crossflow) generated when a turn and a parallel movement are concurrently made is prevented. If a turn and a parallel movement are concurrently made, with respect to the thrust generated by the propulsion apparatus 5, which can be grasped as separated into the thrust for a turn and the thrust for a parallel movement, an actual bearing of the ship 95 differs from an intended bearing due to the control delay of a turn and, accordingly, an actual direction of the thrust generated by the ship 95 for a parallel movement is also deviated from the intended bearing. In the present embodiment, the influence of such deviation is suppressed because the ship 95 only makes a parallel movement, so that the path of the ship 95 is prevented from curving off. As a result, the automatic docking is achieved with high accuracy so that the ship 95 may not come off the route 56 considerably.</p>
<p id="p0090" num="0090">When the automatic docking is carried out in the situation illustrated in <figref idref="f0007">FIG. 7</figref>, a route that allows the ship 95 illustrated with a solid line to simply advance to reach the docking point B1 is also thinkable. In that case, however, the ship 95 navigates in close vicinity to the pier, so that there is a possibility that the pier collides with the starboard. In the present embodiment, the route 56 is so formed as to pass through the via point A3, which is displaced from the docking point B1 by a specified distance in the direction perpendicular to the direction of the pier. The automatic docking management carried out in accordance with such detouring route 56 reduces the possibility of collision against the pier.</p>
<p id="p0091" num="0091">As described above, the route controller 2 in the present embodiment generates the route 56, which allows the ship 95 to dock at the berthing facility. The route 56 includes the first position P1 and the second position P2. The first position P1 is a via point displaced from the docking point B1 (the second position P2) for the ship 95 in the berthing facility by a specified distance in the direction perpendicular to the direction of the berthing facility (the via point A7 in the example in <figref idref="f0005">FIG. 5</figref>, the via point A5 in the example in <figref idref="f0006">FIG. 6</figref> or the via point A3 in the example in <figref idref="f0007">FIG. 7</figref>). The second position P2 is the docking point B1 for the ship 95 in the berthing<!-- EPO <DP n="18"> --> facility. The route 56 is generated so that the ship 95 may move from the first position P1 to the second position P2 while maintaining the bearing of the ship 95 in the direction along the berthing facility.</p>
<p id="p0092" num="0092">As a result, the ship 95 is allowed to come closer to the second position P2 from the first position P1 perpendicularly to the direction of the berthing facility while making the bearing of the ship 95 coincident with the direction along the berthing facility. Consequently, the automatic docking of the ship 95 is achieved with high accuracy while reducing the possibility of collision against the berthing facility.</p>
<p id="p0093" num="0093">In the example in <figref idref="f0005">FIG. 5</figref>, for instance, the route 56 is so generated as to link a plurality of positions. The first position P1 is immediately before the second position P2 in the order to be fulfilled by the ship 95.</p>
<p id="p0094" num="0094">It is therefore possible to fulfill the route 56 for automatic docking, which is simple.</p>
<p id="p0095" num="0095">In the example in <figref idref="f0005">FIG. 5</figref>, for instance, the route 56 includes one or more via points A1, A2, ..., and A6. The via points A1, A2, ..., and A6 precede the via point A7 (the first position P1) in the order to be fulfilled by the ship 95. The route controller 2 is capable of generating the route 56 while changing the bearing setting mode. The bearing setting mode includes the pivotal turn before parallel movement mode and the turn with movement mode. In the pivotal turn before parallel movement mode, the ship 95, which has reached the via point An-1, pivotally turns at the via point An-1 so as to cause the bearing of the ship 95 to agree with the bearing to be fulfilled by the ship 95 at the next via point An and moves to the next via point An while maintaining the bearing after turning. In the turn with movement mode, the ship 95, which has reached the via point An-1, turns concurrently with the movement from the via point An-1 to the next via point An so as to cause the bearing of the ship 95 to agree with the bearing to be fulfilled by the ship 95 at the next via point An.</p>
<p id="p0096" num="0096">It is therefore possible to generate the route 56, which allows the automatic docking of the ship 95, while making a change from the parallel movement after completion of a turn to the movement with a turn, or vice versa according to circumstances.</p>
<p id="p0097" num="0097">In the route controller 2 in the present embodiment, the bearing setting mode includes the pivotal turn before forward movement mode. In the pivotal turn before forward movement mode, the ship 95, which has reached<!-- EPO <DP n="19"> --> the via point An-1, pivotally turns at the via point An-1 so as to cause the bearing of the ship 95 to agree with the bearing directed to the next via point An and moves to the next via point An while maintaining the bearing after turning.</p>
<p id="p0098" num="0098">It is therefore possible to generate the route 56, which allows the automatic docking of the ship 95, while carrying out the forward movement after completion of a turn according to circumstances.</p>
<p id="p0099" num="0099">In the route controller 2 in the present embodiment, the bearing setting mode is changed based on the direct distance between the via point An-1 and the second position P2 or the direct distance between the via point An-1 and the first position P1.</p>
<p id="p0100" num="0100">The bearing setting mode may be changed based on the distance on the route 56 between the via point An-1 and the second position P2 or the distance on the route 56 between the via point An-1 and the first position P1.</p>
<p id="p0101" num="0101">Such change in bearing setting mode makes it possible to change the control of the bearing of the ship 95 between an ending phase of the automatic docking that needs a high-accuracy control of the bearing of the ship 95 and a phase preceding the ending phase.</p>
<p id="p0102" num="0102">In the route controller 2 in the present embodiment, the bearing setting mode is changed based on at least the magnitude of change of the direction of the route 56 at the via point An-1.</p>
<p id="p0103" num="0103">Such change in bearing setting mode makes it possible to prevent the movement locus of the ship 95 from considerably coming off the route 56 even if the route 56 sharply bends at the via point An-1.</p>
<p id="p0104" num="0104">The route controller 2 in the present embodiment includes the display data generation unit 71. The display data generation unit 71 generates display data 75 for displaying, with a figure, the first position P1 and the second position P2 as well as directions to be fulfilled by the ship 95 in the first position P1 and the second position P2, respectively.</p>
<p id="p0105" num="0105">As a result, the user is able to readily grasp the behavior of the ship 95 involved in the automatic docking by checking the display.</p>
<p id="p0106" num="0106">A preferred embodiment of the present invention has been described above, and the configuration as above may be modified as follows.</p>
<p id="p0107" num="0107">The route generation unit 51 may generate the route 56 so that the ship 95 may make a parallel movement through the entire route 56 from<!-- EPO <DP n="20"> --> the beginning end to the terminating end (the docking point B1).</p>
<p id="p0108" num="0108">Selection of the bearing setting mode may be performed taking account of whether the free space 37 is widely ensured around the route 56.</p>
<p id="p0109" num="0109">The ship steering management system 1 may acquire attitude data from, for instance, an IMU appropriately installed on the ship 95 and use the attitude data to manage the motion of the ship 95.</p>
<p id="p0110" num="0110">To the position and bearing information input unit 22, data on the current bearing of the ship 95 that is retrieved from the GNSS device 12 and the IMU may be input.</p>
<p id="p0111" num="0111">The wide area map generator 33 may acquire the local map 36 and use the data on the local map 36 to generate a wide area map. The wide area map may appropriately be updated using the local map 36.</p>
<p id="p0112" num="0112">The map generation unit 31 may generate an environmental map obtained by coordinate transformation based on an appropriate technique. As an example, the local map generator 32 may use information about the installation position and the bearing of the LiDAR 11 to generate the local map 36, which is obtained by the coordinate transformation from the LiDAR coordinate system to the GNSS coordinate system. The local map generator 32 may also use GNSS latitudinal and longitudinal data to generate the local map 36, which is obtained by the coordinate transformation from the GNSS coordinate system to the NEU Cartesian coordinate system.</p>
<p id="p0113" num="0113">In the embodiment as described above, the screws 6L and 6R are changeable in direction of the rotation axis independently of each other. The system of the propulsion apparatus 5, however, can be changed to any other system as long as a parallel movement in the lateral direction, a pivotal turn on the spot, and the like of the ship 95 are essentially fulfilled. It is thinkable as an example that the propulsion apparatus 5 is composed of a pair of screws arranged on the left and the right, respectively, that are each unchangeable in direction of the rotation axis, a rudder, and a side thruster provided on the bow side. The propulsion apparatus 5 may be composed of a single screw unchangeable in direction of the rotation axis, a rudder, and side thrusters provided on the bow side and the stern side, respectively.</p>
<heading id="h0010">DESCRIPTION OF REFERENCE NUMERALS</heading>
<p id="p0114" num="0114">
<ul id="ul0002" list-style="none" compact="compact">
<li>1 Ship steering management system</li>
<li>2 Route controller (route generation device)<!-- EPO <DP n="21"> --></li>
<li>P1 First position</li>
<li>P2 Second position</li>
</ul></p>
</description>
<claims id="claims01" lang="en"><!-- EPO <DP n="22"> -->
<claim id="c-en-0001" num="0001">
<claim-text>A route generation device that generates a route allowing a ship to dock at a berthing facility,<br/>
the route including:
<claim-text>a first position as a position displaced from a docking position for the ship in the berthing facility by a specified distance in a direction perpendicular to a direction of the berthing facility; and</claim-text>
<claim-text>a second position as the docking position for the ship in the berthing facility, wherein</claim-text>
<claim-text>the route is generated so that the ship moves from the first position to the second position while maintaining a bearing of the ship in a direction along the berthing facility.</claim-text></claim-text></claim>
<claim id="c-en-0002" num="0002">
<claim-text>The route generation device according to claim 1, wherein:
<claim-text>the route is so generated as to link a plurality of positions, and</claim-text>
<claim-text>the first position is immediately before the second position on the route in an order to be fulfilled by the ship.</claim-text></claim-text></claim>
<claim id="c-en-0003" num="0003">
<claim-text>The route generation device according to claim 2, wherein
<claim-text>the route includes one or more intermediate positions,</claim-text>
<claim-text>the intermediate positions preceding the first position in the order to be fulfilled by the ship,</claim-text>
<claim-text>the route is generable while changing a bearing setting mode, and</claim-text>
<claim-text>the bearing setting mode includes:
<claim-text>a pivotal turn before parallel movement mode, in which the ship having reached the intermediate positions pivotally turns in the intermediate positions so as to cause the bearing of the ship to agree with a bearing to be fulfilled by the ship in a next position and moves to the next position while maintaining a bearing after turning; and</claim-text>
<claim-text>a turn with movement mode, in which the ship having reached the intermediate positions turns concurrently with movement from the intermediate positions to the next position so as to cause the bearing of the<!-- EPO <DP n="23"> --> ship to agree with the bearing to be fulfilled by the ship in the next position.</claim-text></claim-text></claim-text></claim>
<claim id="c-en-0004" num="0004">
<claim-text>The route generation device according to claim 3, wherein the bearing setting mode includes a pivotal turn before forward movement mode, in which the ship having reached the intermediate positions pivotally turns in the intermediate positions so as to cause the bearing of the ship to agree with a bearing directed to the next position and moves to the next position while maintaining a bearing after turning.</claim-text></claim>
<claim id="c-en-0005" num="0005">
<claim-text>The route generation device according to claim 3 or 4, wherein the bearing setting mode is changed based on at least a direct distance between the intermediate positions and the second position or a direct distance between the intermediate positions and the first position.</claim-text></claim>
<claim id="c-en-0006" num="0006">
<claim-text>The route generation device according to any one of claims 3 through 5, wherein the bearing setting mode is changed based on at least a distance on the route between the intermediate positions and the second position or a distance on the route between the intermediate positions and the first position.</claim-text></claim>
<claim id="c-en-0007" num="0007">
<claim-text>The route generation device according to any one of claims 3 through 6, wherein the bearing setting mode is changed based on at least a magnitude of change of a direction of the route in the intermediate positions.</claim-text></claim>
<claim id="c-en-0008" num="0008">
<claim-text>The route generation device according to any one of claims 1 through 7, comprising a display data generation unit that generates display data for displaying, with a figure, the first position and the second position as well as directions to be fulfilled by the ship in the first position and the second position, respectively.</claim-text></claim>
</claims>
<drawings id="draw" lang="en"><!-- EPO <DP n="24"> -->
<figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="125" he="192" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> -->
<figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="116" he="178" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> -->
<figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="111" he="97" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> -->
<figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="140" he="166" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> -->
<figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="121" he="190" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> -->
<figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="111" he="179" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> -->
<figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="107" he="178" img-content="drawing" img-format="tif"/></figure>
</drawings>
<search-report-data id="srep" lang="en" srep-office="EP" date-produced=""><doc-page id="srep0001" file="srep0001.tif" wi="164" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="164" he="233" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="164" he="233" type="tif"/></search-report-data>
<ep-reference-list id="ref-list">
<heading id="ref-h0001"><b>REFERENCES CITED IN THE DESCRIPTION</b></heading>
<p id="ref-p0001" num=""><i>This list of references cited by the applicant is for the reader's convenience only. It does not form part of the European patent document. Even though great care has been taken in compiling the references, errors or omissions cannot be excluded and the EPO disclaims all liability in this regard.</i></p>
<heading id="ref-h0002"><b>Patent documents cited in the description</b></heading>
<p id="ref-p0002" num="">
<ul id="ref-ul0001" list-style="bullet">
<li><patcit id="ref-pcit0001" dnum="WO2018100749A"><document-id><country>WO</country><doc-number>2018100749</doc-number><kind>A</kind></document-id></patcit><crossref idref="pcit0001">[0008]</crossref></li>
</ul></p>
</ep-reference-list>
</ep-patent-document>
