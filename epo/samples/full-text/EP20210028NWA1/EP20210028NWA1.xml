<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP20210028A1" file="EP20210028NWA1.xml" lang="en" country="EP" doc-number="3889912" kind="A1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="en"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSKBAHRIS..MTNORSMESMMAKHTNMD..........</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  1100000/0</B007EP></eptags></B000><B100><B110>3889912</B110><B120><B121>EUROPEAN PATENT APPLICATION</B121></B120><B130>A1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>20210028.5</B210><B220><date>20201126</date></B220><B240><B241><date>20201126</date></B241></B240><B250>en</B250><B251EP>en</B251EP><B260>en</B260></B200><B300><B310>202010256117</B310><B320><date>20200402</date></B320><B330><ctry>CN</ctry></B330></B300><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20211006</date><bnum>202140</bnum></B430></B400><B500><B510EP><classification-ipcr sequence="1"><text>G06T  11/60        20060101AFI20210420BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>G06T  11/60        20130101 FI20210412BHEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>VERFAHREN UND VORRICHTUNG ZUM ERZEUGEN EINES VIDEOS</B542><B541>en</B541><B542>METHOD AND APPARATUS FOR GENERATING VIDEO</B542><B541>fr</B541><B542>PROCÉDÉ ET APPAREIL DE GÉNÉRATION DE VIDÉO</B542></B540><B590><B598>2</B598></B590></B500><B700><B710><B711><snm>BAIDU ONLINE NETWORK TECHNOLOGY (BEIJING) 
CO., LTD.</snm><iid>101872459</iid><irf>P80439EP</irf><adr><str>3/F Baidu Campus 
No. 10, Shangdi 10th Street 
Haidian District</str><city>Beijing 100085</city><ctry>CN</ctry></adr></B711></B710><B720><B721><snm>LIU, Yunfeng</snm><adr><str>3/F Baidu Campus, No. 10
Shangdi 10th Street
Haidian District</str><city>Beijing, 100085</city><ctry>CN</ctry></adr></B721><B721><snm>WANG, Chao</snm><adr><str>3/F Baidu Campus, No. 10
Shangdi 10th Street
Haidian District</str><city>Beijing, 100085</city><ctry>CN</ctry></adr></B721><B721><snm>LI, Yuanhang</snm><adr><str>3/F Baidu Campus, No. 10
Shangdi 10th Street
Haidian District</str><city>Beijing, 100085</city><ctry>CN</ctry></adr></B721><B721><snm>YUN, Ting</snm><adr><str>3/F Baidu Campus, No. 10
Shangdi 10th Street
Haidian District</str><city>Beijing, 100085</city><ctry>CN</ctry></adr></B721><B721><snm>CHEN, Guoqing</snm><adr><str>3/F Baidu Campus, No. 10
Shangdi 10th Street
Haidian District</str><city>Beijing, 100085</city><ctry>CN</ctry></adr></B721></B720><B740><B741><snm>Richly &amp; Ritschel Patentanwälte PartG mbB</snm><iid>101647809</iid><adr><str>Sattlerweg 20</str><city>51429 Bergisch Gladbach</city><ctry>DE</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840><B844EP><B845EP><ctry>BA</ctry></B845EP><B845EP><ctry>ME</ctry></B845EP></B844EP><B848EP><B849EP><ctry>KH</ctry></B849EP><B849EP><ctry>MA</ctry></B849EP><B849EP><ctry>MD</ctry></B849EP><B849EP><ctry>TN</ctry></B849EP></B848EP></B800></SDOBI>
<abstract id="abst" lang="en">
<p id="pa01" num="0001">Embodiments of the present disclosure provide a method and apparatus for generating a video. A specific implementation of the method includes: acquiring a cartoon face image sequence of a target cartoon character from a received cartoon-style video, and generating a cartoon face contour figure sequence based on the cartoon face image sequence; generating a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face, a face expression in the face image sequence matching a face expression in the cartoon face image sequence; generating a cartoon-style face image sequence for the real face according to the face image sequence; and replacing a face image of the target cartoon character in the cartoon-style video with a cartoon-style face image in a cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face. According to this implementation, it is implemented that the cartoon-style video corresponding to the real face is automatically generated based on the cartoon-style video and a single initial face image of the real face.
<img id="iaf01" file="imgaf001.tif" wi="62" he="117" img-content="drawing" img-format="tif"/></p>
</abstract>
<description id="desc" lang="en"><!-- EPO <DP n="1"> -->
<heading id="h0001">TECHNICAL FIELD</heading>
<p id="p0001" num="0001">Embodiments of the present disclosure relate to the field of computer technology, and specifically to a method and apparatus for generating a video.</p>
<heading id="h0002">BACKGROUND</heading>
<p id="p0002" num="0002">With the advancement of computer image processing technology, the technology of exchanging faces in pictures and videos is developing more and more rapidly. As an art form, cartoon refers to drawings describing life or current events by using simple but exaggerated techniques. Cartoon is very popular among the general public, especially among teenagers. The generation of a personalized cartoon video refers to that a face in an original cartoon video is converted based on a feature of the real face of a user to generate a personalized cartoon video possessing a face feature of the user. However, the production of images and videos of a cartoon character is not only time-consuming, but also requires high professional skills, which causes excessively high costs in producing a customized cartoon video by an ordinary user.</p>
<heading id="h0003">SUMMARY</heading>
<p id="p0003" num="0003">Embodiments of the present disclosure provide a method and apparatus for generating a video.</p>
<p id="p0004" num="0004">In a first aspect, an embodiment of the present disclosure provides a method for generating a video, including: acquiring a cartoon face image sequence of a target cartoon character from a received cartoon-style video, and generating a cartoon face contour figure sequence based on the cartoon face image sequence; generating a face image sequence for a real face based on the cartoon face contour figure sequence and a received<!-- EPO <DP n="2"> --> initial face image of the real face, where a face expression in the face image sequence matches a face expression in the cartoon face image sequence; generating a cartoon-style face image sequence for the real face according to the face image sequence; and replacing a face image of the target cartoon character in the cartoon-style video with a cartoon-style face image in the cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face.</p>
<p id="p0005" num="0005">In some embodiments, the generating a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face includes: for a cartoon face contour figure in the cartoon face contour figure sequence, performing sequentially following operations of generating a face image: generating a first face image based on a current cartoon face contour figure and face feature information of the initial face image; and determining a face image for the real face based on the first face image; and generating the face image sequence for the real face using the determined face image.</p>
<p id="p0006" num="0006">In some embodiments, the determining a face image for the real face based on the first face image includes: generating an optical flow diagram based on at least two current face images finally determined; generating a second face image based on a current face image finally determined and the optical flow diagram; and generating the face image for the real face based on the first face image and the second face image.</p>
<p id="p0007" num="0007">In some embodiments, the generating a cartoon face contour figure sequence based on the cartoon face image sequence includes: for a cartoon face image in the cartoon face image sequence, performing a face keypoint detection<!-- EPO <DP n="3"> --> on the cartoon face image, and generating a cartoon face contour figure based on detected face keypoints.</p>
<p id="p0008" num="0008">In some embodiments, the generating a cartoon-style face image sequence for the real face according to the face image sequence includes: inputting a face image in the face image sequence into a pre-established cartoon-style image generative model to generate a cartoon-style face image sequence for the real face, the cartoon-style image generative model being used to generate a cartoon-style face image according to a face image of the real face.</p>
<p id="p0009" num="0009">In a second aspect, an embodiment of the present disclosure provides an apparatus for generating a video, including: an acquiring unit, configured to acquire a cartoon face image sequence of a target cartoon character from a received cartoon-style video, and generate a cartoon face contour figure sequence based on the cartoon face image sequence; a first generating unit, configured to generate a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face, where a face expression in the face image sequence matches a face expression in the cartoon face image sequence; a second generating unit, configured to generate a cartoon-style face image sequence for the real face according to the face image sequence; and a replacing unit, configured to replace a face image of the target cartoon character in the cartoon-style video with a cartoon-style face image in the cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face.</p>
<p id="p0010" num="0010">In some embodiments, the first generating unit includes: a performing subunit, configured to, for a cartoon face contour figure in the cartoon face contour figure sequence, perform sequentially preset operations of<!-- EPO <DP n="4"> --> generating a face image, where the performing subunit comprises: an image generating module, configured to generate a first face image based on a current cartoon face contour figure and face feature information of the initial face image; and a determining module, configured to determine a face image for the real face based on the first face image; and a sequence generating subunit, configured to generate the face image sequence for the real face using the determined face image.</p>
<p id="p0011" num="0011">In some embodiments, the determining module is further configured to: generate an optical flow diagram based on at least two current face images finally determined; generate a second face image based on a current face image finally determined and the optical flow diagram; and generate the face image for the real face based on the first face image and the second face image.</p>
<p id="p0012" num="0012">In some embodiments, the acquiring unit is further configured to: for a cartoon face image in the cartoon face image sequence, perform a face keypoint detection on the cartoon face image, and generate a cartoon face contour figure based on detected face keypoints.</p>
<p id="p0013" num="0013">In some embodiments, the second generating unit is further configured to: input a face image in the face image sequence into a pre-established cartoon-style image generative model to generate a cartoon-style face image sequence for the real face, the cartoon-style image generative model being used to generate a cartoon-style face image according to a face image of the real face.</p>
<p id="p0014" num="0014">In a third aspect, an embodiment of the present disclosure provides a device, including: one or more processor; and a storage apparatus, storing one or more programs. The one or more programs, when executed by the one or more processors, cause the one or more processors to<!-- EPO <DP n="5"> --> implement the method according to any implementation in the first aspect.</p>
<p id="p0015" num="0015">In a fourth aspect, an embodiment of the present disclosure provides a computer readable medium, storing computer programs. The programs, when executed by a processor, implements the method according to any implementation in the first aspect.</p>
<p id="p0016" num="0016">According to the method and apparatus for generating a video provided in the embodiments of the present disclosure, the cartoon face image sequence of the target cartoon character is first acquired from the received cartoon-style video, and the cartoon face contour figure sequence is generated based on the acquired cartoon face image sequence. Next, the face image sequence for the real face is generated based on the cartoon face contour figure sequence and the received initial face image of the real face. Then, the cartoon-style face image sequence for the real face is generated according to the face image sequence. Finally, the face image of the target cartoon character in the cartoon-style video is replaced with the cartoon-style face image in the cartoon-style face image sequence, to generate the cartoon-style video corresponding to the real face. It is implemented that the cartoon-style video corresponding to the real face is automatically generated based on the cartoon-style video and a single initial face image of the real face, thereby improving the generation efficiency of the cartoon-style video corresponding to the real face and simplifying the generation steps of the video.</p>
<heading id="h0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p0017" num="0017">After reading detailed descriptions for non-limiting embodiments given with reference to the following accompanying drawings, other features, objectives and<!-- EPO <DP n="6"> --> advantages of the present disclosure will be more apparent.
<ul id="ul0001" list-style="none">
<li><figref idref="f0001">Fig. 1</figref> is a diagram of an example system architecture in which an embodiment of the present disclosure may be applied;</li>
<li><figref idref="f0002">Fig. 2</figref> is a flowchart of a method for generating a video according to an embodiment of the present disclosure;</li>
<li><figref idref="f0003">Fig. 3</figref> is a schematic diagram of an application scenario of the method for generating a video according to an embodiment of the present disclosure;</li>
<li><figref idref="f0004">Fig. 4</figref> is a flowchart of the method for generating a video according to another embodiment of the present disclosure;</li>
<li><figref idref="f0005">Fig. 5</figref> is a schematic structural diagram of an apparatus for generating a video according to an embodiment of the present disclosure;</li>
<li><figref idref="f0005">Fig. 6</figref> is a schematic structural diagram of a computer system of an electronic device adapted to implement embodiments of the present disclosure.</li>
</ul></p>
<heading id="h0005">DETAILED DESCRIPTION OF EMBODIMENTS</heading>
<p id="p0018" num="0018">The present disclosure is further described below in detail by combining accompanying drawings and embodiments. It may be appreciated that the specific embodiments described herein are merely used for explaining the relevant disclosure, rather than limiting the disclosure. In addition, it should be noted that, for ease of description, only parts related to the relevant disclosure are shown in the accompanying drawings.</p>
<p id="p0019" num="0019">It should also be noted that embodiments in the present disclosure and the features in the embodiments may be combined with each other on a non-conflict basis. The present disclosure will be described below in detail with<!-- EPO <DP n="7"> --> reference to the accompanying drawings and in combination with the embodiments.</p>
<p id="p0020" num="0020"><figref idref="f0001">Fig. 1</figref> illustrates an example system architecture 100 in which a method for generating a video or an apparatus for generating a video according to an embodiment of the present disclosure may be applied.</p>
<p id="p0021" num="0021">As shown in <figref idref="f0001">Fig. 1</figref>, the system architecture 100 may include terminal devices 101, 102 and 103, a network 104, and a server 105. The network 104 serves as a medium providing a communication link between the terminal devices 101, 102 and 103 and the server 105. The network 104 may include various types of connections, for example, wired or wireless communication links, or optical fiber cables.</p>
<p id="p0022" num="0022">A user may use the terminal devices 101, 102 and 103 to interact with the server 105 via the network 104 to receive or send messages. Various communication client applications (e.g., image processing applications, video processing applications, web browser applications, shopping applications, search applications, instant communication tools, mailbox clients and social platform software) may be installed on the terminal devices 101, 102 and 103.</p>
<p id="p0023" num="0023">The terminal devices 101, 102 and 103 may be hardware or software. When being the hardware, the terminal devices 101, 102 and 103 may be various electronic devices having an image processing function, which include, but not limited to, a smart phone, a tablet computer, an MP4 (Moving Picture Experts Group Audio Layer IV) player, a laptop portable computer and a desktop computer. When being the software, the terminal devices 101, 102 and 103 may be installed in the above listed electronic devices. The terminal devices may be implemented as a plurality of pieces of software or a plurality of software modules (e.g., software or software modules for providing a<!-- EPO <DP n="8"> --> distributed service), or as a single piece of software or a single software module, which will not be specifically defined here.</p>
<p id="p0024" num="0024">The server 105 may be a server providing various services. As an example, the server 105 may be a backend server providing a support for a video played on the terminal devices 101, 102 and 103. The backend server may perform processing such as analyzing on data such as a received cartoon-style video and a face image, and feed back a processing result (e.g., a generated video) to the terminal devices.</p>
<p id="p0025" num="0025">It should be noted that the server 105 may be hardware or software. When being the hardware, the server may be implemented as a distributed server cluster composed of a plurality of servers, or as a single server. When being the software, the server may be implemented as a plurality of pieces of software or a plurality of software modules (e.g., software or software modules for providing a distributed service), or as a single piece of software or a single software module, which will not be specifically defined here.</p>
<p id="p0026" num="0026">It should be appreciated that the numbers of the terminal devices, the networks, and the servers in <figref idref="f0001">Fig. 1</figref> are merely illustrative. Any number of terminal devices, networks, and servers may be provided based on actual requirements.</p>
<p id="p0027" num="0027">It should be noted that the method for generating a video provided by the embodiments of the present disclosure may be performed by the terminal devices 101, 102 and 103, or may be performed by the server 105. Correspondingly, the apparatus for generating a video may be provided in the terminal devices 101, 102 and 103, or may be provided in the server 105.<!-- EPO <DP n="9"> --></p>
<p id="p0028" num="0028">Further referring to <figref idref="f0002">Fig. 2, Fig. 2</figref> illustrates a flow 200 of a method for generating a video according to an embodiment of the present disclosure. The method for generating a video includes the following steps.</p>
<p id="p0029" num="0029">Step 201, acquiring a cartoon face image sequence of a target cartoon character from a received cartoon-style video, and generating a cartoon face contour figure sequence based on the cartoon face image sequence.</p>
<p id="p0030" num="0030">In this embodiment, an executing body (e.g., the terminal devices 101, 102 and 103 or the server 105 shown in <figref idref="f0001">Fig. 1</figref>) of the method for generating a video may first receive a cartoon-style video. Here, cartoon refers to the collection of animation and comics. For example, when the executing body is a terminal device, the executing body may directly receive a cartoon-style video sent by a user. When the executing body is a server, the executing body may receive a cartoon-style video from the terminal device used by the user, by means of a wired connection or a wireless connection. Thereafter, the executing body may acquire the cartoon face image sequence of the target cartoon character from the received cartoon-style video. Here, the target cartoon character may be a cartoon character pre-selected by the user. For example, the user may select the target cartoon character by clicking on a cartoon character or framing a cartoon character. In this way, the executing body may determine the target cartoon character from the cartoon-style video according to an operation (e.g., a click operation and a framing operation) of the user. Then, the executing body may perform screen capturing on a face image of the target cartoon character in the cartoon-style video, to form the cartoon face image sequence. Specifically, the executing body may perform a face detection on the cartoon-style video frame by frame, and<!-- EPO <DP n="10"> --> capture a face image of the target cartoon character if the face image of the target cartoon character is detected. Finally, the executing body may perform a face contour detection and a face contour extraction on each cartoon face image in the cartoon face image sequence, to obtain the cartoon face contour figure sequence. As an example, the cartoon face contour figure may include information of the five sense organs of a target cartoon face.</p>
<p id="p0031" num="0031">In some alternative implementations of this embodiment, the generating a cartoon face contour figure sequence based on the cartoon face image sequence in step 201 may be specifically performed as follows: for a cartoon face image in the cartoon face image sequence, a face keypoint detection is performed on the cartoon face image, and a cartoon face contour figure is generated based on the detected face keypoints.</p>
<p id="p0032" num="0032">In this implementation, for each frame of cartoon face image in the cartoon face image sequence, the executing body may perform the face keypoint detection on the cartoon face image, and thus detects the face keypoints of the cartoon face image. Then, the executing body may connect the face keypoints representing the same organ to obtain the cartoon face contour figure corresponding to the cartoon face image.</p>
<p id="p0033" num="0033">Step 202, generating a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face.</p>
<p id="p0034" num="0034">In this embodiment, the executing body may also receive a face image of the real face as the initial face image. Here, a face image of the real face may refer to a face image of a person in the real world, rather than a cartoon-style face image. Thereafter, the executing body may generate the face image sequence for the real face<!-- EPO <DP n="11"> --> based on the cartoon face contour figure sequence obtained in step 201 and the initial face image. Here, the face expression in the face image sequence may be matched with (e.g., similar or identical to) the face expression in the cartoon face image sequence. For example, for each cartoon face contour figure in the cartoon face contour figure sequence, the executing body may adjust the five sense organs in the initial face image according to the information of the five sense organs in the cartoon face contour figure, to obtain a face image having a face expression matching the cartoon face contour figure for the real face.</p>
<p id="p0035" num="0035">Step 203, generating a cartoon-style face image sequence for the real face according to the face image sequence.</p>
<p id="p0036" num="0036">In this embodiment, the executing body may convert each face image in the face image sequence generated in step 202 into a cartoon-style face image in various ways, thereby obtaining the cartoon-style face image sequence for the real face. As an example, the face image may be converted into the cartoon-style face image by adjusting the color, the contrast, etc. of the face image.</p>
<p id="p0037" num="0037">In some alternative implementations of this embodiment, step 203 may be specifically performed as follows: a face image in the face image sequence is inputted into a pre-established cartoon-style image generative model to generate a cartoon-style face image sequence for the real face.</p>
<p id="p0038" num="0038">In this implementation, the executing body may input the each face image in the face image sequence generated in step 202 into the pre-established cartoon-style image generative model to generate a cartoon-style face image sequence for the real face. Here, the cartoon-style image<!-- EPO <DP n="12"> --> generative model may be used to generate a cartoon-style face image according to a face image of the real face.</p>
<p id="p0039" num="0039">As an example, the cartoon-style image generative model may be a model trained and obtained based on a machine learning algorithm. For example, the cartoon-style image generative model may be a convolutional neural network, a deep neural network, etc. The cartoon-style image generative model may alternatively be a generative model included in a generative adversarial network (GAN). The generative adversarial network is inspired from the two-player zero-sum game (two-player game) in the game theory, and the two parties in the GAN model are respectively acted by the generative model and a discriminative model. The generative model captures the distribution of sample data, generates a sample similar to real training data, and pursues that the more like the real training data the sample is, the better the effect is. The discriminative model is a binary classifier that discriminates the probability that a sample is derived from the real training data (rather than the data generated by the generative model). Common discriminative models may include, but not limited to, a linear regressive model, a linear discriminant analysis, a support vector machine (SVM), a neural networks, and the like. Here, the generative model and the discriminative model may be trained at the same time. The discriminative model is fixed and a parameter of the generative model is adjusted. The generative model is fixed and a parameter of the discriminative model is adjusted. In this embodiment, the generative model generates a more and more realistic cartoon-style face image through continuous learning. The discriminative model enhances the capability of distinguishing the generated cartoon-style face image from the real cartoon-style face image, through continuous<!-- EPO <DP n="13"> --> learning. Finally, through the confrontation between the generative model and the discriminative model, the cartoon-style face image generated by the generative model is close to the real cartoon-style face image and successfully "cheats" the discriminative model. Such a generative adversarial network may be used to improve the authenticity of the generated cartoon-style face image.</p>
<p id="p0040" num="0040">Step 204, replacing a face image of the target cartoon character in the cartoon-style video with a cartoon-style face image in a cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face.</p>
<p id="p0041" num="0041">In this embodiment, the executing body may replace the face image of the target cartoon character in the cartoon-style video with the cartoon-style face image in the cartoon-style face image sequence generated in step 203, to generate the cartoon-style video corresponding to the real face. Here, since the cartoon-style face image sequence for the real face is generated based on the cartoon face image sequence corresponding to the target cartoon character, the cartoon-style face image in the cartoon-style face image sequence for the real face corresponds to the cartoon face image in the cartoon face image sequence acquired in step 201 one by one. Therefore, the face image of the target cartoon character in the cartoon-style video may be replaced with the cartoon-style face image in the cartoon-style face image sequence.</p>
<p id="p0042" num="0042">Further referring to <figref idref="f0003">Fig. 3, Fig. 3</figref> is a schematic diagram of an application scenario of the method for generating a video according to an embodiment. In the application scenario of <figref idref="f0003">Fig. 3</figref>, the terminal device 301 first acquires a cartoon face image sequence of a target cartoon character from a received cartoon-style video, and<!-- EPO <DP n="14"> --> generates a cartoon face contour figure sequence based on the acquired cartoon face image sequence. Next, a face image sequence for a real face is generated based on the cartoon face contour figure sequence and a received initial face image of the real face. Then, a cartoon-style face image sequence for the real face is generated according to the face image sequence. Finally, the face image of the target cartoon character in the cartoon-style video is replaced with a cartoon-style face image in the cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face.</p>
<p id="p0043" num="0043">According to the method provided in the above embodiment of the present disclosure, the cartoon-style video corresponding to the real face may be automatically generated based on the cartoon-style video and a single initial face image of the real face, thereby improving the generation efficiency of the cartoon-style video corresponding to the real face and simplifying the generation steps of the video.</p>
<p id="p0044" num="0044">Further referring to <figref idref="f0004">Fig. 4, Fig. 4</figref> illustrates a flow 400 of the method for generating a video according to another embodiment. The flow 400 of the method for generating a video includes the following steps.</p>
<p id="p0045" num="0045">Step 401, acquiring a cartoon face image sequence of a target cartoon character from a received cartoon-style video, and generating a cartoon face contour figure sequence based on the cartoon face image sequence.</p>
<p id="p0046" num="0046">In this embodiment, step 401 is similar to step 201 of the embodiment shown in <figref idref="f0002">Fig. 2</figref>, which will not be repeatedly described here.</p>
<p id="p0047" num="0047">Step 402, performing sequentially following face image generation steps 4021 to 4022, for a cartoon face contour figure in the cartoon face contour figure sequence.<!-- EPO <DP n="15"> --></p>
<p id="p0048" num="0048">In this embodiment, for the cartoon face contour figure in the cartoon face contour figure sequence, the executing body may sequentially process the cartoon face contour figure according to the position of the cartoon face contour figure in the cartoon face contour figure sequence, and use the currently processed cartoon face contour figure as the current cartoon face contour figure. Here, the executing body may perform the steps 4021 to 4022 of generating the face image.</p>
<p id="p0049" num="0049">Step 4021, generating a first face image based on a current cartoon face contour figure and face feature information of an initial face image.</p>
<p id="p0050" num="0050">In this embodiment, the executing body may generate the first face image based on the current cartoon face contour figure and the face feature information of the initial face image. As an example, a first face generative model may be preset in the executing body. The first face generative model may be used to represent a corresponding relationship between a cartoon face contour figure, feature information and a generated face image. Here, the first face generative model may be trained and obtained based on a machine learning algorithm. For example, the first face generative model may be a convolutional neural network, a deep neural network, etc. As an example, the first face generative model may be trained and obtained based on the following steps. First, a first sample set is acquired. Here, a first sample includes a sample cartoon face contour figure, sample feature information and a sample generated face image. Here, the expression of the face in the sample generated face image matches the expression of the face corresponding to the sample cartoon face contour figure, and the face in the face image used when the sample feature information is extracted is the same as the face in the<!-- EPO <DP n="16"> --> sample generated face image. Then, the sample cartoon face contour figure and the sample feature information in the first sample set are used as an input, the sample generated face image corresponding to the inputted sample cartoon face contour figure and the inputted sample feature information is used as a desired output, to train and obtain the first face generative model.</p>
<p id="p0051" num="0051">In this way, the executing body may generate the first face image based on the current cartoon face contour figure and the face feature information of the initial face image. For example, the executing body may input the current cartoon face contour figure and the face feature information of the initial face image into the first face generative model, and use the generated face image outputted by the first face generative model as the first face image.</p>
<p id="p0052" num="0052">Step 4022, determining a face image for a real face based on the first face image.</p>
<p id="p0053" num="0053">In this embodiment, the executing body may determine the face image for the real face based on the first face image generated in step 4021. As an example, the executing body may use the first face image as the face image for the real face. As another example, the executing body may directly use a preset number of first face images generated based on a preset number of previous (e.g., two previous) cartoon face contour figures in the cartoon face contour figure sequence as a preset number of previous face images for the real face. For a first face image generated based on a cartoon face contour figure except the preset number of previous cartoon face contour figures in the cartoon face contour figure sequence, the face image for the real face may be determined in other ways.</p>
<p id="p0054" num="0054">In some alternative implementations of this<!-- EPO <DP n="17"> --> embodiment, step 4022 may be specifically performed as follows.</p>
<p id="p0055" num="0055">First, an optical flow diagram is generated based on at least two current face images finally determined.</p>
<p id="p0056" num="0056">In this implementation, for a first face image generated based on a cartoon face contour figure except the two previous cartoon face contour figures in the cartoon face contour figure sequence, the executing body may generate the optical flow diagram based on the at least two current face images finally determined. Here, the at least two current face images finally determined may refer to at least two face images that are finally determined based on the face image generation steps before the current moment.</p>
<p id="p0057" num="0057">As an example, the executing body may input the at least two current face images finally determined into a pre-established optical flow estimation model to obtain an optical flow diagram. Here, the optical flow estimation model may be used to generate an optical flow diagram based on at least two images. An optical flow expresses a change of an image and contains information of a target motion. As an example, the optical flow estimation model may be a model trained and obtained based on a machine learning algorithm, e.g., may be a convolutional neural network and a deep neural network. For example, the optical flow estimation model may also be a FlowNet, and an optical flow prediction is implemented by using a convolutional network. For example, the optical flow estimation model may be trained and obtained through the following steps. First, a training sample set is acquired. A training sample may include at least two face images for training and a optical flow diagram for training corresponding to the at least two face images for training. Here, the at least two face images for training may be face images of the same face<!-- EPO <DP n="18"> --> acquired from consecutive frames of the same video, and the optical flow diagram for training contains motion information of the face. Then, the at least two face images for training of the training samples in the set of the training samples may be used as an input, and the optical flow diagram for training corresponding to the inputted at least two face images for training may be used as a desired output, to train and obtain the optical flow estimation model.</p>
<p id="p0058" num="0058">Then, a second face image is generated based on a current face image finally determined and the optical flow diagram.</p>
<p id="p0059" num="0059">In this implementation, the executing body may generate the second face image based on the current face image finally determined and the optical flow diagram. Here, the current face image finally determined may refer to the last face image determined through the face image generation steps before the current moment.</p>
<p id="p0060" num="0060">As an example, the executing body may input the current face image finally determined and the optical flow diagram obtained in the above step into a pre-established second face generative model, to generate the second face image. Here, the second face image generative model may be used to represent a corresponding relationship between a face image, an optical flow diagram, and a face image. That is, the second face image generative model may generate a next face image based on one face image and one optical flow diagram. As an example, the second face image generative model may be a model trained and obtained based on a machine learning algorithm, for example, a convolutional neural network and a deep neural network. For example, the second face image generative model may be trained and obtained through the following steps. First, a<!-- EPO <DP n="19"> --> second sample set is acquired. Here, a second sample includes a second sample face image, a sample optical flow diagram containing motion information of a next face image of the second sample face image, and the next face image. Then, the second sample face image and the sample optical flow diagram in the second sample set are used as an input, and the next face image corresponding to the inputted second sample face image and the inputted sample optical flow diagram is used as a desired output, to train and obtain the second face image generative model.</p>
<p id="p0061" num="0061">Finally, the face image for the real face is generated based on the first face image and the second face image.</p>
<p id="p0062" num="0062">In this implementation, the executing body may generate the face image for the real face based on the first face image and the second face image. As an example, the executing body may perform a weighted fusion on the first face image and the second face image, to obtain the face image for the real face. In this implementation, since the optical flow diagram is used in the process of generating the face image, that is, the motion information between adjacent face images is retained, the generated face images may be more coherent, and the large shaking in the motion of the five sense organs of the face is not easily to occur.</p>
<p id="p0063" num="0063">Step 403, generating a face image sequence for the real face using the determined face image.</p>
<p id="p0064" num="0064">In this embodiment, the executing body may determine a plurality of face images, after sequentially processing each cartoon face contour figure in the cartoon face contour figure sequence based on the face image generation steps. The number of the determined plurality of face images is identical to the number of images included in the<!-- EPO <DP n="20"> --> cartoon face contour figure sequence. The executing body may generate the face image sequence for the real face in a sequence in which the plurality of face images are determined.</p>
<p id="p0065" num="0065">Step 404, generating a cartoon-style image sequence for the real face according to the face image sequence.</p>
<p id="p0066" num="0066">In this embodiment, step 404 is similar to step 202 of the embodiment shown in <figref idref="f0002">Fig. 2</figref>, which will not be repeatedly described here.</p>
<p id="p0067" num="0067">Step 405, replacing a face image of the target cartoon character in the cartoon-style video with a cartoon-style face image in a cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face.</p>
<p id="p0068" num="0068">In this embodiment, step 405 is similar to step 204 of the embodiment shown in <figref idref="f0002">Fig. 2</figref>, which will not be repeatedly described here.</p>
<p id="p0069" num="0069">It may be seen from <figref idref="f0004">Fig. 4</figref> that, as compared with the embodiment corresponding to <figref idref="f0002">Fig. 2</figref>, the flow 400 of the method for generating a video in this embodiment emphasizes the step of generating the face image for the real face based on the current cartoon face contour figure and the face feature information of the initial face image. Therefore, the face image generated in the solution described in this embodiment takes the cartoon face contour figure and the face feature information of the initial face image into comprehensive consideration, such that the face feature of the face corresponding to the initial face image is retained while the generated face image matches the face expression corresponding to the cartoon face contour figure.</p>
<p id="p0070" num="0070">Further referring to <figref idref="f0005">Fig. 5</figref>, as an implementation of<!-- EPO <DP n="21"> --> the method shown in the above drawings, an embodiment of the present disclosure provides an apparatus for generating a video. The embodiment of the apparatus corresponds to the embodiment of the method shown in <figref idref="f0002">Fig. 2</figref>, and the apparatus may be specifically applied to various electronic devices.</p>
<p id="p0071" num="0071">As shown in <figref idref="f0005">Fig. 5</figref>, the apparatus 500 for generating a video in this embodiment includes: an acquiring unit 501, a first generating unit 502, a second generating unit 503 and a replacing unit 504. The acquiring unit 501 is configured to acquire a cartoon face image sequence of a target cartoon character from a received cartoon-style video, and generate a cartoon face contour figure sequence based on the cartoon face image sequence. The first generating unit 502 is configured to generate a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face, a face expression in the face image sequence matching a face expression in the cartoon face image sequence. The second generating unit 503 is configured to generate a cartoon-style face image sequence for the real face according to the face image sequence. The replacing unit 504 is configured to replace a face image of the target cartoon character in the cartoon-style video with a cartoon-style face image in a cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face.</p>
<p id="p0072" num="0072">In this embodiment, for specific processes of the acquiring unit 501, the first generating unit 502, the second generating unit 503 and the replacing unit 504 in the apparatus 500 for generating a video, and their technical effects, reference may be made to relative descriptions of step 201, step 202, step 203, and step 204 in the corresponding embodiment of <figref idref="f0002">Fig. 2</figref> respectively,<!-- EPO <DP n="22"> --> which will not be repeatedly described here.</p>
<p id="p0073" num="0073">In some alternative implementations of this embodiment, the first generating unit 502 includes: a performing subunit (not shown in the figure), configured to, for a cartoon face contour figure in the cartoon face contour figure sequence, perform sequentially preset face image generation steps. The performing subunit includes: an image generating module (not shown in the figure), configured to generate a first face image based on a current cartoon face contour figure and face feature information of the initial face image; and a determining module (not shown in the figure), configured to determine a face image for the real face based on the first face image. The first generating unit 502 further includes: a sequence generating subunit (not shown in the figure), configured to generate the face image sequence for the real face using the determined face image.</p>
<p id="p0074" num="0074">In some alternative implementations of this embodiment, the determining module is further configured to: generate an optical flow diagram based on at least two current face images finally determined; generate a second face image based on a current face image finally determined and the optical flow diagram; and generate the face image for the real face based on the first face image and the second face image.</p>
<p id="p0075" num="0075">In some alternative implementations of this embodiment, the acquiring unit 501 is further configured to: for a cartoon face image in the cartoon face image sequence, perform a face keypoint detection on the cartoon face image, and generate a cartoon face contour figure based on detected face keypoints.</p>
<p id="p0076" num="0076">In some alternative implementations of this embodiment, the second generating unit is further<!-- EPO <DP n="23"> --> configured to: input a face image in the face image sequence into a pre-established cartoon-style image generative model to generate a cartoon-style face image sequence for the real face, the cartoon-style image generative model being used to generate a cartoon-style face image according to a face image of the real face.</p>
<p id="p0077" num="0077">Referring to <figref idref="f0005">Fig. 6, Fig. 6</figref> is a schematic structural diagram of an electronic device 600 (e.g., the server or the terminal devices in <figref idref="f0001">Fig. 1</figref>) adapted to implement embodiments of the present disclosure. The electronic device shown in <figref idref="f0005">Fig. 6</figref> is only an example, and should not bring any limitation to the functionality and the scope of use of the embodiments of the present disclosure.</p>
<p id="p0078" num="0078">As shown in <figref idref="f0005">Fig. 6</figref>, the electronic device 600 may include a processing apparatus (e.g., a central processing unit and a graphics processing unit) 601, which may execute various appropriate actions and processes in accordance with a program stored in a read-only memory (ROM) 602 or a program loaded into a random access memory (RAM) 603 from a storage apparatus 608. The RAM 603 also stores various programs and data required by operations of the electronic device 600. The processing apparatus 601, the ROM 602 and the RAM 603 are connected to each other through a bus 604. An input/output (I/O) interface 605 is also connected to the bus 604.</p>
<p id="p0079" num="0079">Typically, the following apparatuses may be connected to the I/O interface 605: an input apparatus 606 including a touch screen, touch pad, keyboard, mouse, camera, microphone, accelerometer, gyroscope and the like; an output apparatus 607 including a liquid crystal display (LCD), a speaker, a vibrator and the like; a storage apparatus 608 including a hard disk and the like; and a<!-- EPO <DP n="24"> --> communication apparatus 609. The communication apparatus 609 may allow the electronic device 600 to communicate in a wired or wireless connection with other devices to exchange data. Although <figref idref="f0005">Fig. 6</figref> illustrates the electronic device 600 having various apparatuses, it should be understood that it is not required to implement or have all of the illustrated apparatuses. More or less apparatuses may be alternatively implemented or possessed. Each block shown in <figref idref="f0005">Fig. 6</figref> may represent one apparatus or may represent a plurality of apparatuses as desired.</p>
<p id="p0080" num="0080">In particular, according to the embodiments of the present disclosure, the process described above with reference to the flow chart may be implemented in a computer software program. For example, an embodiment of the present disclosure includes a computer program product, which includes a computer program that is tangibly embedded in a computer-readable medium. The computer program includes program codes for performing the method as illustrated in the flow chart. In such an embodiment, the computer program may be downloaded and installed from a network via the communication portion 609, or may be installed from the storage apparatus 608 or from the ROM 602. The computer program, when executed by the processing apparatus 601, implements the above mentioned functionalities as defined by the method of the embodiments of the present disclosure.</p>
<p id="p0081" num="0081">It should be noted that the computer readable medium described by the embodiments of the present disclosure may be computer readable signal medium or computer readable storage medium or any combination of the above two. An example of the computer readable storage medium may include, but not limited to: electric, magnetic, optical, electromagnetic, infrared, or semiconductor systems,<!-- EPO <DP n="25"> --> apparatus, elements, or a combination of any of the above. A more specific example of the computer readable storage medium may include but is not limited to: electrical connection with one or more wire, a portable computer disk, a hard disk, a random access memory (RAM), a read only memory (ROM), an erasable programmable read only memory (EPROM or flash memory), a fiber, a portable compact disk read only memory (CD-ROM), an optical memory, a magnet memory or any suitable combination of the above. In the embodiments of the present disclosure, the computer readable storage medium may be any physical medium containing or storing programs which may be used by a command execution system, apparatus or element or incorporated thereto. While in the embodiments of the present disclosure, the computer readable signal medium may include data signal in the base band or propagating as parts of a carrier, in which computer readable program codes are carried. The propagating data signal may take various forms, including but not limited to: an electromagnetic signal, an optical signal or any suitable combination of the above. The signal medium that can be read by computer may be any computer readable medium except for the computer readable storage medium. The computer readable signal medium is capable of transmitting, propagating or transferring programs for use by, or used in combination with, a command execution system, apparatus or element. The program codes contained on the computer readable medium may be transmitted with any suitable medium including but not limited to: wired, optical cable, RF medium etc., or any suitable combination of the above.</p>
<p id="p0082" num="0082">The computer readable medium may be included in the above electronic device, or a stand-alone computer readable medium not assembled into the electronic device. The computer readable medium stores one or more programs. The<!-- EPO <DP n="26"> --> one or more programs, when executed by the electronic device, cause the electronic device to: acquire a cartoon face image sequence of a target cartoon character from a received cartoon-style video, and generate a cartoon face contour figure sequence based on the cartoon face image sequence; generate a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face, where a face expression in the face image sequence matches a face expression in the cartoon face image sequence; generate a cartoon-style face image sequence for the real face according to the face image sequence; and replace a face image of the target cartoon character in the cartoon-style video with a cartoon-style face image in the cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face.</p>
<p id="p0083" num="0083">A computer program code for executing operations in the present disclosure may be compiled using one or more programming languages or combinations thereof. The programming languages include object-oriented programming languages, such as Java, Smalltalk or C++, and also include conventional procedural programming languages, such as "C" language or similar programming languages. The program code may be completely executed on a user's computer, partially executed on a user's computer, executed as a separate software package, partially executed on a user's computer and partially executed on a remote computer, or completely executed on a remote computer or server. In the circumstance involving a remote computer, the remote computer may be connected to a user's computer through any network, including local area network (LAN) or wide area network (WAN), or may be connected to an external computer (for example, connected through Internet using an Internet service provider).<!-- EPO <DP n="27"> --></p>
<p id="p0084" num="0084">The flow charts and block diagrams in the accompanying drawings illustrate architectures, functions and operations that may be implemented according to the systems, methods and computer program products of the various embodiments of the present disclosure. In this regard, each of the blocks in the flow charts or block diagrams may represent a module, a program segment, or a code portion, said module, program segment, or code portion comprising one or more executable instructions for implementing specified logic functions. It should also be noted that, in some alternative implementations, the functions denoted by the blocks may occur in a sequence different from the sequences shown in the figures. For example, any two blocks presented in succession may be executed, substantially in parallel, or they may sometimes be in a reverse sequence, depending on the function involved. It should also be noted that each block in the block diagrams and/or flow charts as well as a combination of blocks may be implemented using a dedicated hardware-based system executing specified functions or operations, or by a combination of a dedicated hardware and computer instructions.</p>
<p id="p0085" num="0085">The units involved in the embodiments of the present disclosure may be implemented by means of software or hardware. The described units may also be provided in a processor, for example, described as: a processor, including an acquiring unit, a first generating unit, a second generating unit, and a replacing unit. Here, the names of these units do not in some cases constitute a limitation to such units themselves. For example, the first generating unit may also be described as "a unit configured to generate a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face."<!-- EPO <DP n="28"> --></p>
<p id="p0086" num="0086">The above description only provides an explanation of the preferred embodiments of the present disclosure and the technical principles used. It should be appreciated by those skilled in the art that the inventive scope of the present disclosure is not limited to the technical solutions formed by the particular combinations of the above-described technical features. The inventive scope should also cover other technical solutions formed by any combinations of the above-described technical features or equivalent features thereof without departing from the concept of the disclosure. Technical schemes formed by the above-described features being interchanged with, but not limited to, technical features with similar functions disclosed in the present disclosure are examples.</p>
</description>
<claims id="claims01" lang="en"><!-- EPO <DP n="29"> -->
<claim id="c-en-0001" num="0001">
<claim-text>A method for generating a video, comprising:
<claim-text>acquiring (201) a cartoon face image sequence of a target cartoon character from a received cartoon-style video, and generating a cartoon face contour figure sequence based on the cartoon face image sequence;</claim-text>
<claim-text>generating (202) a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face, wherein a face expression in the face image sequence matches a face expression in the cartoon face image sequence;</claim-text>
<claim-text>generating (203) a cartoon-style face image sequence for the real face according to the face image sequence; and</claim-text>
<claim-text>replacing (204) a face image of the target cartoon character in the cartoon-style video with a cartoon-style face image in the cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face.</claim-text></claim-text></claim>
<claim id="c-en-0002" num="0002">
<claim-text>The method according to claim 1, wherein the generating a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face comprises:<br/>
for a cartoon face contour figure in the cartoon face contour figure sequence, performing sequentially following operations of generating a face image:
<claim-text>generating a first face image based on a current cartoon face contour figure and face feature information of the initial face image; and determining a face image for the real face based on the first face image; and</claim-text>
<claim-text>generating the face image sequence for the real face<!-- EPO <DP n="30"> --> using the determined face image.</claim-text></claim-text></claim>
<claim id="c-en-0003" num="0003">
<claim-text>The method according to claim 2, wherein the determining a face image for the real face based on the first face image comprises:
<claim-text>generating an optical flow diagram based on at least two current face images finally determined;</claim-text>
<claim-text>generating a second face image based on a current face image finally determined and the optical flow diagram; and</claim-text>
<claim-text>generating the face image for the real face based on the first face image and the second face image.</claim-text></claim-text></claim>
<claim id="c-en-0004" num="0004">
<claim-text>The method according to any one of claims 1-3, wherein the generating a cartoon face contour figure sequence based on the cartoon face image sequence comprises:<br/>
for a cartoon face image in the cartoon face image sequence, performing a face keypoint detection on the cartoon face image, and generating a cartoon face contour figure based on detected face keypoints.</claim-text></claim>
<claim id="c-en-0005" num="0005">
<claim-text>The method according to any one of claims 1-4, wherein the generating a cartoon-style face image sequence for the real face according to the face image sequence comprises:<br/>
inputting a face image in the face image sequence into a pre-established cartoon-style image generative model to generate a cartoon-style face image sequence for the real face, the cartoon-style image generative model being used to generate a cartoon-style face image according to a face image of the real face.</claim-text></claim>
<claim id="c-en-0006" num="0006">
<claim-text>An apparatus for generating a video, comprising:
<claim-text>an acquiring unit (501), configured to acquire a cartoon face image sequence of a target cartoon<!-- EPO <DP n="31"> --> character from a received cartoon-style video, and generate a cartoon face contour figure sequence based on the cartoon face image sequence;</claim-text>
<claim-text>a first generating unit (502), configured to generate a face image sequence for a real face based on the cartoon face contour figure sequence and a received initial face image of the real face, wherein a face expression in the face image sequence matches a face expression in the cartoon face image sequence;</claim-text>
<claim-text>a second generating unit (503), configured to generate a cartoon-style face image sequence for the real face according to the face image sequence; and</claim-text>
<claim-text>a replacing unit (504), configured to replace a face image of the target cartoon character in the cartoon-style video with a cartoon-style face image in the cartoon-style face image sequence, to generate a cartoon-style video corresponding to the real face.</claim-text></claim-text></claim>
<claim id="c-en-0007" num="0007">
<claim-text>The apparatus according to claim 6, wherein the first generating unit (502) comprises:
<claim-text>a performing subunit, configured to, for a cartoon face contour figure in the cartoon face contour figure sequence, perform sequentially preset operations of generating a face image, wherein the performing subunit comprises: an image generating module, configured to generate a first face image based on a current cartoon face contour figure and face feature information of the initial face image; and a determining module, configured to determine a face image for the real face based on the first face image; and</claim-text>
<claim-text>a sequence generating subunit, configured to generate the face image sequence for the real face using the determined face image.</claim-text><!-- EPO <DP n="32"> --></claim-text></claim>
<claim id="c-en-0008" num="0008">
<claim-text>The apparatus according to claim 7, wherein the determining module is further configured to:
<claim-text>generate an optical flow diagram based on at least two current face images finally determined;</claim-text>
<claim-text>generate a second face image based on a current face image finally determined and the optical flow diagram; and</claim-text>
<claim-text>generate the face image for the real face based on the first face image and the second face image.</claim-text></claim-text></claim>
<claim id="c-en-0009" num="0009">
<claim-text>The apparatus according to any one of claims 6-8, wherein the acquiring unit (501) is further configured to:<br/>
for a cartoon face image in the cartoon face image sequence, perform a face keypoint detection on the cartoon face image, and generate a cartoon face contour figure based on detected face keypoints.</claim-text></claim>
<claim id="c-en-0010" num="0010">
<claim-text>The apparatus according to any one of claims 6-9, wherein the second generating unit (503) is further configured to:<br/>
input a face image in the face image sequence into a pre-established cartoon-style image generative model to generate a cartoon-style face image sequence for the real face, the cartoon-style image generative model being used to generate a cartoon-style face image according to a face image of the real face.</claim-text></claim>
<claim id="c-en-0011" num="0011">
<claim-text>A device, comprising:
<claim-text>one or more processor (601); and</claim-text>
<claim-text>a storage apparatus (608), storing one or more programs,</claim-text>
<claim-text>wherein the one or more programs, when executed by the one or more processors, cause the one or more<!-- EPO <DP n="33"> --> processors to implement the method according to any one of claims 1-5.</claim-text></claim-text></claim>
<claim id="c-en-0012" num="0012">
<claim-text>A computer readable medium, storing computer programs, wherein the programs, when executed by a processor, implements the method according to any one of claims 1-5.</claim-text></claim>
</claims>
<drawings id="draw" lang="en"><!-- EPO <DP n="34"> -->
<figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="131" he="136" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> -->
<figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="86" he="161" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> -->
<figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="156" he="169" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> -->
<figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="104" he="203" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> -->
<figure id="f0005" num="5,6"><img id="if0005" file="imgf0005.tif" wi="163" he="188" img-content="drawing" img-format="tif"/></figure>
</drawings>
<search-report-data id="srep" lang="en" srep-office="EP" date-produced=""><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="155" he="233" type="tif"/></search-report-data><search-report-data date-produced="20210415" id="srepxml" lang="en" srep-office="EP" srep-type="ep-sr" status="n"><!--
 The search report data in XML is provided for the users' convenience only. It might differ from the search report of the PDF document, which contains the officially published data. The EPO disclaims any liability for incorrect or incomplete data in the XML for search reports.
 -->

<srep-info><file-reference-id>P80439EP</file-reference-id><application-reference><document-id><country>EP</country><doc-number>20210028.5</doc-number></document-id></application-reference><applicant-name><name>BAIDU ONLINE NETWORK TECHNOLOGY (BEIJING)CO., LTD.</name></applicant-name><srep-established srep-established="yes"/><srep-invention-title title-approval="yes"/><srep-abstract abs-approval="yes"/><srep-figure-to-publish figinfo="by-examiner"><figure-to-publish><fig-number>2</fig-number></figure-to-publish></srep-figure-to-publish><srep-info-admin><srep-office><addressbook><text>MN</text></addressbook></srep-office><date-search-report-mailed><date>20210426</date></date-search-report-mailed></srep-info-admin></srep-info><srep-for-pub><srep-fields-searched><minimum-documentation><classifications-ipcr><classification-ipcr><text>G06T</text></classification-ipcr></classifications-ipcr></minimum-documentation></srep-fields-searched><srep-citations><citation id="sr-cit0001"><patcit dnum="US2007008322A1" id="sr-pcit0001" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=US2007008322&amp;CY=ep"><document-id><country>US</country><doc-number>2007008322</doc-number><kind>A1</kind><name>LUDWIGSEN DAVID M [US]</name><date>20070111</date></document-id></patcit><category>X</category><rel-claims>1,6,11,12</rel-claims><category>A</category><rel-claims>2-5,7-10</rel-claims><rel-passage><passage>* figure 2 *</passage></rel-passage><rel-passage><passage>* paragraph [0016] *</passage><passage>* paragraph [0024] - paragraph [0025] *</passage></rel-passage></citation><citation id="sr-cit0002"><nplcit id="sr-ncit0001" npl-type="s"><article><author><name>HONGLIANG LI ET AL</name></author><atl>Guided Face Cartoon Synthesis</atl><serial><sertitle>IEEE TRANSACTIONS ON MULTIMEDIA, IEEE SERVICE CENTER, US</sertitle><pubdate>201112</pubdate><vid>13</vid><ino>6</ino><doi>10.1109/TMM.2011.2168814</doi><issn>1520-9210</issn></serial><location><pp><ppf>1230</ppf><ppl>1239</ppl></pp></location><refno>XP011372493</refno></article></nplcit><category>A</category><rel-claims>1-12</rel-claims><rel-passage><passage>* the whole document *</passage></rel-passage></citation><citation id="sr-cit0003"><patcit dnum="CN105139438A" id="sr-pcit0002" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=CN105139438&amp;CY=ep"><document-id><country>CN</country><doc-number>105139438</doc-number><kind>A</kind><name>UNIV ELECTRONIC SCIENCE &amp; TECH</name><date>20151209</date></document-id></patcit><category>A</category><rel-claims>1-12</rel-claims><rel-passage><passage>* claims 1-5 *</passage></rel-passage></citation><citation id="sr-cit0004"><nplcit id="sr-ncit0002" npl-type="s"><article><author><name>LI XINYU ET AL</name></author><atl>Everyone is a Cartoonist: Selfie Cartoonization with Attentive Adversarial Networks</atl><serial><sertitle>2019 IEEE INTERNATIONAL CONFERENCE ON MULTIMEDIA AND EXPO (ICME), IEEE</sertitle><pubdate>20190708</pubdate><doi>10.1109/ICME.2019.00118</doi></serial><location><pp><ppf>652</ppf><ppl>657</ppl></pp></location><refno>XP033590369</refno></article></nplcit><category>A</category><rel-claims>1-12</rel-claims><rel-passage><passage>* the whole document *</passage></rel-passage></citation></srep-citations><srep-admin><examiners><primary-examiner><name>Werling, Alexander</name></primary-examiner></examiners><srep-office><addressbook><text>Munich</text></addressbook></srep-office><date-search-completed><date>20210415</date></date-search-completed></srep-admin><!--							The annex lists the patent family members relating to the patent documents cited in the above mentioned European search report.							The members are as contained in the European Patent Office EDP file on							The European Patent Office is in no way liable for these particulars which are merely given for the purpose of information.							For more details about this annex : see Official Journal of the European Patent Office, No 12/82						--><srep-patent-family><patent-family><priority-application><document-id><country>US</country><doc-number>2007008322</doc-number><kind>A1</kind><date>20070111</date></document-id></priority-application><text>NONE</text></patent-family><patent-family><priority-application><document-id><country>CN</country><doc-number>105139438</doc-number><kind>A</kind><date>20151209</date></document-id></priority-application><text>NONE</text></patent-family></srep-patent-family></srep-for-pub></search-report-data>
</ep-patent-document>
