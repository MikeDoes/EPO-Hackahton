<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP20167715A1" file="EP20167715NWA1.xml" lang="en" country="EP" doc-number="3890362" kind="A1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="en"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSKBAHRIS..MTNORSMESMMAKHTNMD..........</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  1100000/0</B007EP></eptags></B000><B100><B110>3890362</B110><B120><B121>EUROPEAN PATENT APPLICATION</B121></B120><B130>A1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>20167715.0</B210><B220><date>20200402</date></B220><B250>en</B250><B251EP>en</B251EP><B260>en</B260></B200><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20211006</date><bnum>202140</bnum></B430></B400><B500><B510EP><classification-ipcr sequence="1"><text>H04W   4/02        20180101AFI20200921BHEP        </text></classification-ipcr><classification-ipcr sequence="2"><text>H04W   4/20        20180101ALI20200921BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>H04W   4/02        20130101 LI20200806BHEP        </text></classification-cpc><classification-cpc sequence="2"><text>H04W   4/20        20130101 LI20200806BHEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>FINGERABDRUCKVERFAHREN UND -VORRICHTUNGEN UNTER VERWENDUNG VON FUNKTIONSBASIERTEN VERGLEICHSMUSTERN</B542><B541>en</B541><B542>METHODS AND APPARATUSES FOR FINGERPRINTING EMPLOYING FUNCTION-BASED MATCHING PATTERNS</B542><B541>fr</B541><B542>PROCÉDÉS ET APPAREILS DE RELEVÉ D'EMPREINTES DIGITALES UTILISANT DES MODÈLES DE CORRESPONDANCE BASÉS SUR DES FONCTIONS</B542></B540><B590><B598>8</B598></B590></B500><B700><B710><B711><snm>Fraunhofer Gesellschaft zur Förderung der 
angewandten Forschung e.V.</snm><iid>101370866</iid><irf>P 19-0010/NSE</irf><adr><str>Hansastrasse 27 c</str><city>80686 München</city><ctry>DE</ctry></adr></B711></B710><B720><B721><snm>Meyer, Steffen</snm><adr><str>C/O Fraunhofer-Institut für Integrierte
Schaltungen IIS
Am Wolfsmantel 33</str><city>91058 Erlangen</city><ctry>DE</ctry></adr></B721><B721><snm>Vaupel, Thorsten</snm><adr><str>C/O Fraunhofer-Institut für Integrierte
Schaltungen IIS
Am Wolfsmantel 33</str><city>91058 Erlangen</city><ctry>DE</ctry></adr></B721><B721><snm>Alawieh, Mohammad</snm><adr><str>C/O Fraunhofer-Institut für Integrierte
Schaltungen IIS
Am Wolfsmantel 33</str><city>91058 Erlangen</city><ctry>DE</ctry></adr></B721><B721><snm>Perner, Bastian</snm><adr><str>C/O Fraunhofer-Institut für Integrierte
Schaltungen IIS
Am Wolfsmantel 33</str><city>91058 Erlangen</city><ctry>DE</ctry></adr></B721><B721><snm>Hupp, Jürgen</snm><adr><str>C/O Fraunhofer-Institut für Integrierte
Schaltungen IIS
Am Wolfsmantel 33</str><city>91058 Erlangen</city><ctry>DE</ctry></adr></B721></B720><B740><B741><snm>Groth &amp; Co. KB</snm><iid>101378062</iid><adr><str>P.O. Box 6107</str><city>102 32 Stockholm</city><ctry>SE</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840><B844EP><B845EP><ctry>BA</ctry></B845EP><B845EP><ctry>ME</ctry></B845EP></B844EP><B848EP><B849EP><ctry>KH</ctry></B849EP><B849EP><ctry>MA</ctry></B849EP><B849EP><ctry>MD</ctry></B849EP><B849EP><ctry>TN</ctry></B849EP></B848EP></B800></SDOBI>
<abstract id="abst" lang="en">
<p id="pa01" num="0001">The embodiments herein relate to method performed by a measurement device (801, 1000), the method comprising: receiving (901), via higher layer signalling, information on resources or resource sets of one or more transmission devices transmitting one or more beam signals associated with said resources or resource sets; performing (902) channel measurements of the one or more beam signals, per spatial filter of the measurement device; storing (903), over at least one time frame, the channel measurements into measurement groups, where each measurement group corresponds to the channel measurements performed using the same spatial filter of the measurement device; and reporting (904) the measurement groups to a network node (804, 1200) or correlating the measurements with reference data for each available time frame individually and reporting the result of the correlation to the network node (804, 1200). The embodiments also relate to a method performed by a network node (804, 1200).
<img id="iaf01" file="imgaf001.tif" wi="111" he="72" img-content="drawing" img-format="tif"/></p>
</abstract>
<description id="desc" lang="en"><!-- EPO <DP n="1"> -->
<heading id="h0001"><b>TECHNICAL FIELD</b></heading>
<p id="p0001" num="0001">The present disclosure relates to the field of wireless communications, and in particular to methods and apparatuses for enhancing classic fingerprinting approaches in a wireless communications system.</p>
<heading id="h0002"><b>BACKGROUND</b></heading>
<p id="p0002" num="0002">Fingerprinting is a pattern recognition technique where current measurements are compared with reference measurements at known locations. Various types of measurements and signals may be used (e. g. Round Trip Time - RTT, Angle of Arrival - AoA, Magnetic Fields etc.). The most common measurement that is used in the Received Signal Strength (RSS).</p>
<p id="p0003" num="0003">A database of reference measurements includes discreet reference points. Each of the reference point holds the measurement values and the location where the measurements were recorded/captured.</p>
<p id="p0004" num="0004">The initial phase in fingerprinting-based systems contains the calibration of an area. This may be done manually or by computation. In general, the outcome is a database of so called fingerprints or reference points as mentioned above. They represent the situation at a certain location. Therefore, the location (e.g. coordinates or an identifier) is stored for every single data set (= reference point) individually.</p>
<p id="p0005" num="0005">Common fingerprinting systems additionally store a list of surrounding station identification information (or IDs) and their corresponding received signal strength(s) at the calibration device location (at the location mentioned before). Below is shown a common (classic) fingerprint.<!-- EPO <DP n="2"> -->
<tables id="tabl0001" num="0001">
<table frame="all">
<tgroup cols="2">
<colspec colnum="1" colname="col1" colwidth="17mm"/>
<colspec colnum="2" colname="col2" colwidth="26mm"/>
<thead>
<row rowsep="0">
<entry namest="col1" nameend="col2" align="left" valign="top">Pos = UE</entry></row>
<row>
<entry align="center" valign="top">ID</entry>
<entry valign="top">RSS</entry></row></thead>
<tbody>
<row rowsep="0">
<entry align="center">A</entry>
<entry>not detected</entry></row>
<row rowsep="0">
<entry align="center">B</entry>
<entry>- 60 dBm</entry></row>
<row rowsep="0">
<entry align="center">C</entry>
<entry>- 65 dBm</entry></row>
<row>
<entry align="center">D</entry>
<entry>- 78 dBm</entry></row></tbody></tgroup>
</table>
</tables></p>
<p id="p0006" num="0006">As shown, the fingerprint includes an ID of each radio base station (four base stations in this example), here denoted A, B, C and D. The fingerprint is shown including the Received Signal Strength (RSS) from each of radio base station. This information may be used to determine the position of the UE.</p>
<p id="p0007" num="0007">In well-known fingerprinting-based positioning systems the characteristic pattern for certain locations will are stored in a database (in a calibration phase).</p>
<p id="p0008" num="0008">The actual measurements are then compared with the database entries. This comparison is called matching and the aim is to find as similar as possible database entries to the measurements. The estimation of the position or location of the UE is made from the weighted geometric addition of locations from the best matching database entries. The measured and stored pattern is typically a vector of the unique IDs (e. g. Medium Access Control (MAC) addresses) of detectable stations.</p>
<p id="p0009" num="0009">The classic system based on single received signal strength (or snapshot) per base station has the following disadvantage: a snapshot whether in the calibration phase or in the actual measurement phase may be interfered significantly by temporary effects. Examples for interference are especially moving objects or persons and temporary modifications of the scenery (e.g. doors or gates) which Influence the received signal strengths to one or more transmitters.</p>
<p id="p0010" num="0010">There is therefore a need to enhance the classic fingerprinting approach and improve the way the determination of a position of a UE is performed.<!-- EPO <DP n="3"> --></p>
<heading id="h0003"><b>SUMMARY</b></heading>
<p id="p0011" num="0011">According to exemplary embodiments herein, there is provided methods and apparatuses for enhancing classic fingerprinting approaches and improving the way of determining the position of a user equipment.</p>
<p id="p0012" num="0012">According to an aspect of embodiments herein, there is provided a method performed by a measurement device. The method comprising: receiving, via higher layer signalling, information on resources or resource sets of one or more transmission devices transmitting one or more beam signals associated with said resources or resource sets; performing channel measurements of the one or more beam signals, per spatial filter of the measurement device; storing, over at least one time time, the channel measurements into measurement groups, where each measurement group corresponds to the channel measurements performed using the same spatial filter of the measurement device; reporting the measurement groups to a network node or correlating the measurements of each measurement group with reference data for each available time frame individually and reporting the result of the correlation to the network node.</p>
<p id="p0013" num="0013">According to another aspect of embodiments herein, there is provided a method performed by a network node (e.g. a location server), the method comprising: requesting one or more base stations or one or more transmission devices to provide information on resources or resource sets associated with one or more beam signals transmitted by said one or more base stations or said one or more transmission devices; receiving the requested information; transmitting the received information to a measurement device; receiving from the measurement device, measurement groups wherein each measurement group includes measurements performed by the measurement device using the same spatial filter; and using the received measurement groups and the information received from said one or more base stations or said one or more transmission devices for determining the location of the measurement device.</p>
<p id="p0014" num="0014">According to another aspect of embodiments herein there is provided a measurement device comprising a processor and memory, said memory<!-- EPO <DP n="4"> --> containing instructions executable by said processor whereby the measurement device is configured to perform anyone of the subject-matter of claims 1-7.</p>
<p id="p0015" num="0015">According to another aspect of embodiments herein there is provided a location server comprising a processor and memory, said memory containing instructions executable by said processor whereby the location server is configured to perform anyone of the subject-matter of claims 8-11.</p>
<p id="p0016" num="0016">There is also provided a computer program comprising instructions which when executed on at least one processor of the measurement device according to claim 12 cause tat least said one processor to carry out the method according to anyone of claim 1-7.</p>
<p id="p0017" num="0017">There is also provided a computer program comprising instructions which when executed on at least one processor of the location server according to claim 16 cause tat least said one processor to carry out the method according to anyone of claim 8-11</p>
<p id="p0018" num="0018">Several advantages are achieved by the embodiments herein. An advantage is to enhance classis fingerprinting approaches. Another advantage is to improve the way the location of a device is determined. Yet another advantage is to have a more robust positioning approach.</p>
<heading id="h0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p0019" num="0019">Examples of embodiments and additional advantages of the embodiments herein are described in more detail with reference to attached drawings in which:
<dl id="dl0001" compact="compact">
<dt>Figure 1</dt><dd>depicts an example of fingerprinting data for a certain location in time frame 0.</dd>
<dt>Figure 2</dt><dd>depicts an example of fingerprinting data for a certain location in time frame 2.</dd>
<dt>Figure 3</dt><dd>depicts an example of a pattern reference data combining all time frames.</dd>
<dt>Figure 4</dt><dd>shows an asymmetrical beam pattern, inhomogeneous beam directions and non-uniform beam characteristics.<!-- EPO <DP n="5"> --></dd>
<dt>Figure 5</dt><dd>depicts a dynamic (adaptive) beam configuration (beam forming related) and reconfiguration over time.</dd>
<dt>Figure 6</dt><dd>illustrates a dynamic (adaptive) beam configuration (direction related) and reconfiguration over time.</dd>
<dt>Figure 7A</dt><dd>illustrates a scenario involving a measurement device (UE) with multiple spatial filters (or receiver beams) measuring multiple beams from neighboring radio base stations.</dd>
<dt>Figure 7B</dt><dd>illustrates a scenario wherein the measurement device measures Tx beams from two radio base stations and groups the measurements into groups according to an embodiment.</dd>
<dt>Figure 8</dt><dd>illustrates a signalling diagram involving a UE, two gNBs and an LMF, according to some embodiments.</dd>
<dt>Figure 9</dt><dd>illustrates a flowchart of a method performed by a measurement device according to some exemplary embodiments.</dd>
<dt>Figure 10</dt><dd>illustrates a block diagram of a measurement device according to an embodiment.</dd>
<dt>Figure 11</dt><dd>illustrates a flowchart of a method performed by a location server according to some exemplary embodiments.</dd>
<dt>Figure 12</dt><dd>illustrates a block diagram of a network node (location server) according to an embodiment.</dd>
</dl></p>
<heading id="h0005"><b>DETAILED DESCRIPTION</b></heading>
<p id="p0020" num="0020">In the following, is presented a detailed description of the exemplary embodiments in conjunction with the drawings, in several scenarios, to enable easier understanding of the solution(s) described herein.</p>
<p id="p0021" num="0021">The present disclosure describes solutions using the characteristics of sectored and beam formed antennas as patterns for fingerprinting methods in positioning. There is also an abstraction of this information in form of a function, representing the characteristics of parameters over time.</p>
<p id="p0022" num="0022">The term 'beam' is used in the following to denote a spatially selective/directive transmission of an outgoing signal or reception of an incoming signal which is achieved by precoding/filtering the signal at the antenna ports of a device with a<!-- EPO <DP n="6"> --> set of coefficients. The terms 'precoding' or 'filtering' may refer to processing of the signal in the analog domain or in the digital domain. The set of coefficients used to spatially direct a transmission/reception in a certain direction may differ from one direction to another direction. The term 'transmitter beam' or 'transmitter beam signal', denotes a spatially selective/directive transmission and the term 'receiver beam' denotes a spatially selective/directive reception. The set of coefficients used to precode/filter the transmission or reception is denoted by the term 'spatial filter'. The term 'spatial filter' is used interchangeably with the term 'beam direction' in this document as the spatial filter coefficients determine the direction in which a transmission/reception is spatially directed to.</p>
<p id="p0023" num="0023">In well-known fingerprinting-based positioning systems the characteristic pattern for certain locations are stored in a database (calibration phase). Later, actual measurements are compared with those database entries. This comparison is called matching and the goal is to find as similar as possible database entries to the measurement. The position guess is made from the weighted geometric addition of locations from the best matching database entries.</p>
<p id="p0024" num="0024">The measured and stored pattern is typically the vector of the unique ids (e.g., MAC addresses) of detectable radio base stations (or gNBs). A common enhancement used is to store their corresponding received signal strengths. The concept may include enhancing the basic approach by not only having this vector of values but also using a vector of functions.</p>
<p id="p0025" num="0025">A function may be a static or a dynamic transmission power level of reference signals over time. It results in characteristic changes at the receiver depending on the actual detection time. The power ramping function may be both in the measurement data acquisition phase and in position calculation phase.</p>
<p id="p0026" num="0026">Another function may be the antenna's direction, resulting in characteristic changes at the receiver (measurement device) on the detection along its location. This is the case because of attenuations and reflections caused by obstacles. This beam stroking function may be used both in the measurement data acquisition phase and in a position calculation phase.<!-- EPO <DP n="7"> --></p>
<p id="p0027" num="0027">There is no distinction between physically sectorized antenna sequentially activated and electronically formed beams temporarily emitting in an area.</p>
<p id="p0028" num="0028">The possibility of using combined patterns like transmission power characteristics together with the selected beam and its shape may be made available.</p>
<p id="p0029" num="0029">A function implemented by a detection device, in this case may be
<ul id="ul0001" list-style="dash" compact="compact">
<li>known (by e.g. configuration)</li>
<li>exchanged (e. g. via signaling or high-level communication),</li>
<li>selected by estimating/guessing (like synchronizing on a common sequence) or</li>
<li>guessed/estimated completely (like observing or learning the function/pattern, even if it is dynamically changing).</li>
</ul></p>
<p id="p0030" num="0030">According to some embodiments herein, for the function-based matching approach, a whole pattern is stored for each surrounding radio base station (or gNB). The stored pattern represents the progression of measured characteristics (typically received signal strength) over a certain time. The time frame can be limited representing a periodically executed function.</p>
<p id="p0031" num="0031">The representation comprises information needed to adjust correctly the expectation in the matching phase. It may range from an actual value for each time frame within the pattern to the minimal way of storing only a label and having the pattern with reduced data . Below is a general function-based fingerprint wherein for each radio base station (e.g. A or B or C or D) there is a corresponding function. In this example, a function of RSS.
<tables id="tabl0002" num="0002">
<table frame="all">
<tgroup cols="2">
<colspec colnum="1" colname="col1" colwidth="20mm"/>
<colspec colnum="2" colname="col2" colwidth="26mm"/>
<thead>
<row rowsep="0">
<entry namest="col1" nameend="col2" align="left" valign="top">Pos = UE</entry></row>
<row>
<entry align="center" valign="top">ID</entry>
<entry valign="top">RSS</entry></row></thead>
<tbody>
<row rowsep="0">
<entry align="center">A</entry>
<entry><b><i>f</i></b><sub>A</sub>(RSS)</entry></row>
<row rowsep="0">
<entry align="center">B</entry>
<entry><i>f</i><sub>B</sub>(RSS)</entry></row>
<row rowsep="0">
<entry align="center">C</entry>
<entry><i>f</i><sub>C</sub>(RSS)</entry></row>
<row>
<entry align="center">D</entry>
<entry><i>f</i><sub>D</sub>(RSS)</entry></row></tbody></tgroup>
</table>
</tables></p>
<p id="p0032" num="0032">The methodology described here benefits from the fact that e.g., the switching of the beam causes completely new conditions for the receivable signal strength. This<!-- EPO <DP n="8"> --> is true for fragmented environments e.g. inside of buildings, based on a multitude of attenuation and reflection effects.</p>
<p id="p0033" num="0033">Therefore, a possible implementation is presented here, where the function consists of the beam switching pattern over time. For simplification using only the beam's ID and the sequence. According to an embodiment, characteristics of each beam signal may be communicated and stored. These characteristics may include antenna type, its gain or complete directional radio patterns, the used transmission power (or its progress over the burst's time period), etc.</p>
<p id="p0034" num="0034">A possible sequence is shown in <figref idref="f0001"><b>Figure 1</b></figref> at time frame 0. As shown, a UE is surrounded by several base stations (or gNBs) employing beamforming. The current beam used by each gNB is depicted at time frame 0 for a certain location of the UE. The fingerprint data, which include the IDs and the RSS values of each radio base station is also depicted in the right bottom of <figref idref="f0001">Figure 1</figref>. Different angles are also depicted. Time frame 1 is left out for simplification. <figref idref="f0002"><b>Figure 2</b></figref> shows a further step in the sequence of measurements resulting in a fingerprint data for a certain location at time frame 2.</p>
<p id="p0035" num="0035">Combining the measurements of all time frames in a sequence produces a full-featured pattern reference data. <figref idref="f0003"><b>Figure 3</b></figref> shows the outcome of this combination which includes the fingerprint data at different time frames. The reference position (UE<sub>ref</sub>) may be a Cartesian metric or geodesic coordinate, but it may also be a textual or numeric identifier as annotation for later reconsideration.</p>
<p id="p0036" num="0036">At a certain location the measurements were taken for every time frame in a periodic series of temporarily active sender's setups. A sender here denotes a radio base station. In the example from <figref idref="f0001">Figure 1</figref> and <figref idref="f0002">Figure 2</figref>, n = 12 time frames in each period are used. Any suitable value of n may be used. Hence n = 12 is just an example.</p>
<p id="p0037" num="0037">It should be mentioned that radio base stations not changing their behavior dynamically or having simple antennas (like dipole) integrate easily. They have relatively stable RSS values in each measurement at every time frame, and the pattern (known or guessed/estimated) may be viewed as a static pattern.<!-- EPO <DP n="9"> --></p>
<p id="p0038" num="0038">The procedure for the location determination may be denoted matching. This phase generally compares the actual measurement with the reference data taken earlier. In common fingerprinting systems the list of detectable radio base stations with their corresponding RSS will be measured. The matching algorithms try to determine and select reference data from the database with differences as little as possible. The stored locations (aka Pos) of the best matching entries from the database will be combined geometrically. This calculation gives the estimation for the position of the mobile device.</p>
<p id="p0039" num="0039">According to an exemplary embodiment, the matching algorithm for the function-based approach is enhanced. There are several major options to compare the actual data with the reference data from the database.</p>
<p id="p0040" num="0040">The matching identifies the actual time frame or active configuration of the sender(s) in a period effective on the actual measurement. A period may be defined by absolute clock, or signaled data or through observation. Then, the relevant subsection from the pattern reference data is selected. Subsequently, a classical matching between the measurement data of a time frame and the selected part of the pattern reference data are used to calculate/determine the position of the UE. As an example, only one time frame or subset may be used for the matching; close to the basic fingerprinting approach, only a snapshot may be used, but the expectation (stored in the reference database) is more precise and better comparable.</p>
<p id="p0041" num="0041">According to an exemplary embodiment, the received RSS measurements for all time frames of a period in the mobile may be gathered. This is followed by a matching of the gathered data with the corresponding reference data subset for each time frame individually. Subsequently, a combination of all deviations may be performed to select the pattern reference point with the best overall fit to the actual measurement data. The stored position data of the best fitting pattern reference data is then used to calculate or estimate the location of the the UE. Instead of RSS, other channel measurements may be used as will be explained.</p>
<p id="p0042" num="0042">In highly dynamic environments adaptive base station configurations are important. For the function-based matching technique, the pattern of each base station may<!-- EPO <DP n="10"> --> be determined. In terms of beam management, round robin techniques are common switching from one beam to another in a sequence. Mobiles (or UEs) having the patterns may be able to adjust their expectations during the matching in the described way. This beam stroking allows to have more complex patterns than round robin. The patterns (mostly sequences) may make use of skipping the next (or more) direct beam neighbors in order to decouple the measurements additionally. A suitable sequence may be comprised of an odd number of beams and a skip of one or more neighboring beams. This produces a continuous sequence of measurements maximizing the decoupling, based on a timing spread.</p>
<p id="p0043" num="0043">Beyond the timed sequence, multiple versions of beam manipulations in terms of antenna characteristics are possible. These individual geometric setups may also evolve over time. <figref idref="f0004 f0005 f0006"><b>Figures 4-6</b></figref> illustrate beam patterns and configurations using power ramping. This concept of power ramping (i.e. forming beams over time) requests the definition and signaling of the actual configuration from the station (or management system) to a location calculation/measurement unit/device(e. g. a mobile device or a UE).</p>
<p id="p0044" num="0044"><figref idref="f0004">Figure 4</figref> shows an asymmetrical beam pattern, inhomogeneous beam directions and non-uniform beam characteristics.</p>
<p id="p0045" num="0045"><figref idref="f0005">Figure 5</figref> and <figref idref="f0006">Figure 6</figref> depict dynamic (adaptive) beam configuration (beam forming related) and reconfiguration over time.</p>
<p id="p0046" num="0046">According to an embodiment, a measurement device is configured to receive, via higher layer signalling, information on resources or resource sets of one or more transmission devices. A transmission device may be a radio base station or a gNB or a TRP (transmission and reception point). The transmission devices transmit one or more beam signals associated with the resources or resource sets. The information on the resources, may be received from a location server or an LMF (Location and Management Function) over an LPP (LTE positioning protocol) message. Example of a resource or resource set is a DL PRS resource (downlink positioning reference signal). The location server or the LMF of the location server may determine that resources or resource sets from a gNB are transmitted with different beam characteristics or has different spatial filters. A spatial filter may be<!-- EPO <DP n="11"> --> viewed as antenna characteristics used by a device to receive/measure a set of beams. The spatial filter may also be viewed as antenna characteristics used by a device to transmit a set of beams.</p>
<p id="p0047" num="0047">The LMF may request gNB(s) to provide information on spatial direction (e.g. beams). In this case the LMF may send the request in a NRPPa assistance data request message. NRPPa stands for new radio positioning protocol A and is a protocol within the 5G RAN (Radio Access Network) 3GPP standard.</p>
<p id="p0048" num="0048">The measurement device may receive, via higher layer signalling, the information on the resources or resources from one or more gNBs. As an example, the information may be received using an RRC (Radio Resource Control) message. An SSB (synchronization signal block) resource information or CSI-RS (channel state information-reference signal) resource information, or SRS (sounding reference signal) resource information may be provided to the measurement device from the transmission devices. In the case of SRS, the measurement device may be a gNB or radio base station or a TRP, and the transmission device may be a UE.</p>
<p id="p0049" num="0049">The transmission devices transmit one or more beams signals associated with the resources or resource sets and the measurement device performs channel measurements of the one or more beam signals, per spatial filter of the measurement device. A spatial filter may be viewed as a receiver (Rx) beam used by the measurement device to receive and measure the beam signals. Definition of the spatial filter was previously presented. The channel measurements may be one or more of the following: RSSI (receive signal strength indicator), RSS (receive signal strength), RSRP (receive signal receive power), SNR (signal to noise ratio), RSRQ (receive signal receive quality, timing RSTD (receive signal time difference), RTOA (relative time of arrival), TA (timing advance), etc.</p>
<p id="p0050" num="0050">According to an embodiment, the measurement device stores, over at least one time frame, the channel measurements into measurement groups, where each measurement group corresponds to the channel measurements performed using the same spatial filter of the measurement device. The measurement device then reports the measurement groups to a network node (e.g. the LMF or the location<!-- EPO <DP n="12"> --> server). The measurement device may correlate the measurements of each measurement group with reference data for each available time frame, individually, and reports the result of the correlation to the network node (e.g., location server or LMF).</p>
<p id="p0051" num="0051">Referring to <figref idref="f0007"><b>Figure 7A</b></figref>, there is illustrated a network scenario involving two gNBs (gNB1 701, gNB2 702) and one measurement device, UE 703. The UE 703 is shown employing four receiver beams (or spatial filters), used to measure beam signals (Tx beams) transmitted by the two gNBs 701, 703. <figref idref="f0008"><b>Figure 7B</b></figref> illustrates an example where each gNB transmits beams (at different time frames), and the UE employs the spatial filter(s) or (active) Rx beam (s), to perform measurements of the transmitted beams. A group of beam measurements is also illustrated. The UE 703 groups the measurements into measurement groups. In this example, the UE 703 may activate two beams at the same time and measure a total of four beams. The UE may include multiple spatial filters or receiver beams as shown in the figures.</p>
<p id="p0052" num="0052">According to an embodiment, if the measurement device employs more than one spatial filter (as shown in <figref idref="f0007 f0008">Figures 7A-7B</figref>), the measurement device may map the same resources or resource set in different measurement groups. The resources or resource sets corresponds to the beams transmitted from one or more base stations for the same time frame. A network node (or location server) may request over higher layer signaling the measurement device capability on multiple spatial filter reception. It should be noted that the network node may be a serving gNB requesting over RRC the UE capabilities. The network node may be an LMF requesting over LPP the UE physical transmission and reception capabilities. The network node may be an LMF requesting over NRPPa the UE physical transmission and reception capabilities from a gNB. The network node may be an LMF requesting over NRPPa the gNB physical transmission and reception capabilities. The measurement device is configured to report a signal of the same resource or resource set received by N spatial filters in M reported measurement groups, where N is larger than or equal to M. N and M may take any suitable value.</p>
<p id="p0053" num="0053">According to an embodiment, the measurement device is configured to determine a correlation between the measurement groups, and report the result of the<!-- EPO <DP n="13"> --> correlation that is below a defined threshold value, to the network node or location server (not shown). As an example, if the result of the correlation is high (i.e., exceeds a defined threshold value), the measurement values of the groups may be considered redundant and hence ignored or not reported. If the result of the correlation is low (i.e. below the defined correlation threshold value), the information can be useful, and the group measurements are reported to the location server. The correlation value(s) or the result of the correlation may be a reference value itself and reported as an additional fingerprinting information.</p>
<p id="p0054" num="0054">The table below illustrates an example of normalized correlation values between the measurement groups performed by the measurement device for different PRS resources 1-6. The measurement device (UE) is here assumed to employ four spatial filters (or Rx beams 1-4) for the measurements of beam signals associated with the PRS resources 1-6. In this example, the UE spatial filter (UE Rx Beam 1) is configured to be the reference that results in the maximum correlation value of 1. The correlation of the measurements taken by the other UE spatial filters (UE RX Beam 2, 3 and 4) with the reference beam are also indicated in the table. The PRS resources can correspond to one or multiple gNBs.
<tables id="tabl0003" num="0003"><img id="ib0001" file="imgb0001.tif" wi="146" he="69" img-content="table" img-format="tif"/>
</tables></p>
<p id="p0055" num="0055">The first row in the table above corresponds to the (normalized) correlation values determined based on channel measurements performed on 6 Tx beam signals transmitted by one or more gNBs, each beam signal conveys a PRS resource. The<!-- EPO <DP n="14"> --> measurement device uses the same spatial filter (Rx beam 1). Hence, the first row corresponds to the first group determined based on measurements performed using spatial filter 1 (or Rx beam 1), the second row corresponds to the second group based on measurements performed using spatial filter 2 (or Rx Beam 2), etc. The measurements may be performed at the same time frame or at different time frames depending on the capabilities of the measurement device. For the example above, since the measurement device has four spatial filters, the device can perform measurements at the same time. The measurements and/or the correlation values may be stored in the measurement device, over at least one time frame.</p>
<p id="p0056" num="0056">The measurement device may determine the correlation between the groups, depending on the configuration provided by the location server or LMF. The location server may configure the measurement device, for power reduction, not to report groups exceeding a defined correlation threshold value. As an example, correlation values below a threshold value of 0.6 are reported to the location server for determining a position of the measurement device. Correlation values above 0.6 are not reported since these values do not contribute to the positioning calculation at the location server. It is appreciated that the correlation threshold value is a design parameter.</p>
<p id="p0057" num="0057">According to an embodiment, the measurement device may be configured to combine deviations between the channel measurements and the reference data (pattern) and select a pattern reference point which matches the measurement performed at a given time frame, e.g., the actual measurement data. In one example, the deviation is parameterized from a probability density distribution obtained from the channel measurements and the reference data. For a normal distribution, the deviation is parametrized by mean and variance of the set of the channel measurements and a set of pattern reference points.</p>
<p id="p0058" num="0058">Referring to <figref idref="f0009"><b>Figure 8</b></figref>, there is illustrated an example of a signalling diagram involving some of the previously described embodiments. The diagram involves a UE 801 (measurement device); a first and a second radio base station gNB1 802, gNB2 803, and a network node in the form of a LMF 804 (or a location server including the LMF). As shown:<!-- EPO <DP n="15"> -->
<ul id="ul0002" list-style="none">
<li><b>1a-1b.</b> The LMF 804 requests the gNBs 802-803 to provide information on resources or resource sets associated with one or more beam signals transmitted by the gNBs 802-803. The requests may be sent in a NRPPa assistance Data request message. Hence, the LMF 804 may determine that resources or resource sets from the gNBs 802, 803 are transmitted with (different) beam characteristics that may have different spatial filters.</li>
<li><b>2a-2b.</b> Each gNB 802-803 provides the requested information to the LMF 804 in a NRPPa response message.</li>
<li>3. The LMF 804 sends, via higher layer signalling, to the UE 801, assistance data or information on resources or resource sets. This information is sent in an LPP assistance data message. This message is a request to the UE 801 to perform channel measurements of the one or more beam signals, per spatial filter of the UE 801. The LMF 804 may indicate to the UE 801 a correlation index to use for the measurement reporting. For example, the LMF 804 may indicate in the message, a correlation threshold value to be used by the UE 801 for determining the type of information to report to the LMF 804.<br/>
As described earlier, the assistance data may be sent by each gNB to the UE 801.</li>
<li><b>4a.</b> The LMF 804 may request the UE 801 to provide it capabilities with regards to the number or type of spatial filters or Rx beams the UE 801 employs for the channel measurements.</li>
<li><b>4b.</b> The UE 801 provides the information if requested by the LMF 804 in step 4a.</li>
<li><b>5.</b> The UE 801 performs channel measurements of the one or more Tx beam signals, per spatial filter of the UE 801. The channel measurements may include one or more of the following: RSSI, RSS, RSRQ, RSRP, SINR, absolute/relative RSTD, RTOA, TA etc.<br/>
The UE 801 stores, over at least one time frame, the channel measurements into measurement groups, where each measurement group corresponds to the channel measurements performed using the same (active) spatial filter of the UE 801. The UE 801 may also correlate the measurements of each measurement<!-- EPO <DP n="16"> --> group with reference data for each available time frame individually. For example, the LMF 804 may request the UE to perform the correlation.</li>
<li><b>6.</b> The UE 801 reports the measurement groups, or the result of the correlation to the LMF 804. This report may be sent in an LPP location information message.</li>
<li><b>7.</b> The LMF 804 uses the reported measurement groups received from the UE 801 and the information received from gNB1 802 and gNB2 803, received in steps <b>2a-2b</b> for determining the location of the UE 801. The LMF 804 may also use the reference data for determining the location of the UE 801.</li>
</ul></p>
<p id="p0059" num="0059">Referring to <figref idref="f0010"><b>Figure 9</b></figref>, there is depicted a flowchart of a method performed by a measurement device in accordance with previously described embodiments. The method comprises:
<ul id="ul0003" list-style="none">
<li>(901) Receiving, via higher layer signalling, information on resources or resource sets of one or more transmission devices transmitting one or more beam signals associated with said resources or resource sets;</li>
<li>(902) Performing channel measurements of the one or more beam signals, per spatial filter of the measurement device</li>
<li>(903) Storing, over at least one time frame, the channel measurements into measurement groups, where each measurement group corresponds to the channel measurements performed using the same spatial filter of the measurement device. The measurement device may store characteristics of sectored and beam formed antennas as at least one pattern or at least one function for each surrounding radio base station and further store corresponding measured signal strengths over at least one time frame; and</li>
<li>(904) reporting the measurement groups to a network node (LMF or location server) or correlating/matching the measurements of each measurement group with reference data for each available time frame individually and reporting the result of the correlation to the network node.</li>
</ul></p>
<p id="p0060" num="0060">Additional actions performed by the measurement device have already been described.<!-- EPO <DP n="17"> --></p>
<p id="p0061" num="0061">In order to perform the method described above, there is provided a measurement device. <figref idref="f0011"><b>Figure 10</b></figref> illustrates a block diagram depicting a measurement device 1000. The measurement device 1000 may be a UE or a radio base station. The device 1000 comprises a processor 1010 or processing circuit or a processing module or a processor or means; a receiver circuit or receiver module 1040; a transmitter circuit or transmitter module 1050; a memory module 1020 a transceiver circuit or transceiver module 1030 which may include the transmitter circuit 1050 and the receiver circuit 1040. The measurement device 1000 further comprises an antenna system 1060 which includes antenna circuitry for transmitting and receiving signals to/from at least the gNB or other UEs. The antenna system employ beamforming as previously described. The actions performed by the device have already been described. The memory 1020 contains instructions executable by the processor 1010 whereby the measurement device 1000 is operative/configured to perform any one of the subject-matter of method claims 1-7.</p>
<p id="p0062" num="0062">The processing module/circuit 1010 includes a processor, microprocessor, an application specific integrated circuit (ASIC), field programmable gate array (FPGA), or the like, and may be referred to as the "processor." The processor 1010 controls the operation of the measurement device and its components. Memory (circuit or module) 1020 includes a random access memory (RAM), a read only memory (ROM), and/or another type of memory to store data and instructions that may be used by processor 1010. In general, it will be understood that the device 1000 in one or more embodiments includes fixed or programmed circuitry that is configured to carry out the operations in any of the embodiments disclosed herein.</p>
<p id="p0063" num="0063">In at least one such example, the processor 1010 includes a microprocessor, microcontroller, DSP, ASIC, FPGA, or other processing circuitry that is configured to execute computer program instructions from a computer program stored in a non-transitory computer-readable medium that is in or is accessible to the processing circuitry. Here, "non-transitory" does not necessarily mean permanent or unchanging storage, and may include storage in working or volatile memory, but the term does connote storage of at least some persistence. The execution of the program instructions specially adapts or configures the processing circuitry to carry<!-- EPO <DP n="18"> --> out the operations disclosed in this disclosure. Further, it will be appreciated that the measurement device 1000 may comprise additional components. The measurement device 1000 may belong to any radio access technology including 4G or LTE, LTE-A, 5G, advanced 5G or a combination thereof that support beamforming technology.</p>
<p id="p0064" num="0064">There is also provided a computer program comprising instructions which when executed on at least one processor of the measurement device 1000 according to claim 12, cause at least said one processor to carry out the method according to anyone of claims 1-7.</p>
<p id="p0065" num="0065">There is also provided a carrier containing the computer program, wherein the carrier is one of a computer readable storage medium; an electronic signal, optical signal or a radio signal.</p>
<p id="p0066" num="0066">Referring to <figref idref="f0012"><b>Figure 11</b></figref>, there is depicted a flowchart of a method performed by a network node or a location server or an LMF (in a location server), in accordance with previously described embodiments. The method comprises:
<ul id="ul0004" list-style="none">
<li>(1101) Requesting one or more base stations or one or more transmission devices, to provide information on resources or resource sets associated with one or more beam signals transmitted by said on or more base stations (or gNBs) or one or more transmission devices;</li>
<li>(1102) Receiving said information from said one or more base stations or said one or more transmission devices and transmitting the received information to a measurement device;</li>
<li>(1103) Receiving, from the measurement device, measurement groups, wherein each measurement group includes measurements performed by the measurement device using the same spatial filter; and</li>
<li>(1104) Using the measurement groups received from the measurement device and the information received from said one or more base stations or one or more transmission devices for determining the location of the measurement device.<!-- EPO <DP n="19"> --> The location server or network node may use any suitable method or approach to determine the location of the measurement device. However, using the received information from the measurement device and from the one or more base stations or one or more transmission devices, improves the determination of the location of the UE.</li>
</ul></p>
<p id="p0067" num="0067">Additional actions performed by the location server have already been described.</p>
<p id="p0068" num="0068">In order to perform the method steps above, there is provided a network node (e.g., a location server or an LMF within a server). <figref idref="f0013"><b>Figure 12</b></figref> illustrates a block diagram depicting a network node 1200. The network node 1200 comprises a processor 1210 or processing circuit or a processing module or a processor or means; a receiver circuit or receiver module 1240; a transmitter circuit or transmitter module 1250; a memory module 1220 a transceiver circuit or transceiver module 1230 which may include the transmitter circuit 1250 and the receiver circuit 1240. The network node 1200 further comprises an antenna system 1260 which includes antenna circuitry for transmitting and receiving signals to/from at least the gNB or other UEs. The antenna system employ beamforming as previously described. The actions performed by the network node have already been described. The memory contains instructions executable by the processor 1210 whereby the network node 1200 is operative/configured to perform any one of the subject-matter of method claims 8-11.</p>
<p id="p0069" num="0069">The processing module/circuit 1210 includes a processor, microprocessor, an application specific integrated circuit (ASIC), field programmable gate array (FPGA), or the like, and may be referred to as the "processor." The processor 1210 controls the operation of the network node and its components. Memory (circuit or module) 1220 includes a random access memory (RAM), a read only memory (ROM), and/or another type of memory to store data and instructions that may be used by processor 1210. In general, it will be understood that the network node 1200 in one or more embodiments includes fixed or programmed circuitry that is configured to carry out the operations in any of the embodiments disclosed herein.</p>
<p id="p0070" num="0070">In at least one such example, the processor 1210 includes a microprocessor, microcontroller, DSP, ASIC, FPGA, or other processing circuitry that is configured<!-- EPO <DP n="20"> --> to execute computer program instructions from a computer program stored in a non-transitory computer-readable medium that is in or is accessible to the processing circuitry. Here, "non-transitory" does not necessarily mean permanent or unchanging storage, and may include storage in working or volatile memory, but the term does connote storage of at least some persistence. The execution of the program instructions specially adapts or configures the processing circuitry to carry out the operations disclosed in this disclosure. Further, it will be appreciated that the network node 1200 may comprise additional components. The device 1000 may belong to any radio access technology including 4G or LTE, LTE-A, 5G, advanced 5G or a combination thereof that support beamforming technology.</p>
<p id="p0071" num="0071">There is also provided a computer program comprising instructions which when executed on at least one processor of the network node according to claim 16, cause at least said one processor to carry out the method according to anyone of claims 8-11.</p>
<p id="p0072" num="0072">There is also provided a carrier containing the computer program, wherein the carrier is one of a computer readable storage medium; an electronic signal, optical signal or a radio signal.</p>
<p id="p0073" num="0073">Several advantages are achieved by the embodiments herein compared to the classic fingerprinting approach.</p>
<p id="p0074" num="0074">The 5G standards especially New Radio (NR) have several mechanisms included providing functions for the concept which may make take advantage of the teaching of the presented embodiments. An example is the beam management with the sending of SSB CSI-RS, PRS, SRS or other suitable signals suitable as beam stroking pattern.</p>
<p id="p0075" num="0075">Having more specialized functions available can lead to a more robust positioning determination method. The specialization can even be scenario-dependent; e.g. indoors one can expect a different variance in the signals compared to outdoor areas.<!-- EPO <DP n="21"> --></p>
<p id="p0076" num="0076">A globally known behavior of the function is a suitable solution. But more convenient should be dynamic hence adaptive configuration of a function. Information about this behavior should be transferred not only between backend nodes but also to the mobile nodes or UEs. Hence, signaling between network nodes and UEs is helpful.</p>
<p id="p0077" num="0077">Throughout this disclosure, the word "comprise" or "comprising" has been used in a non-limiting sense, i.e. meaning "consist at least of". Although specific terms may be employed herein, they are used in a generic and descriptive sense only and not for purposes of limitation. The embodiments herein may be applied in any wireless systems including GSM, 3G or WCDMA, LTE or 4G, LTE-A (or LTE-Advanced), 5G, WiMAX, WiFi, satellite communications, TV broadcasting etc. that employ beamforming technology and fingerprinting techniques.</p>
</description>
<claims id="claims01" lang="en"><!-- EPO <DP n="22"> -->
<claim id="c-en-0001" num="0001">
<claim-text>A method performed by a measurement device (801, 1000); the method comprises:
<claim-text>- receiving (901), via higher layer signalling, information on resources or resource sets of one or more transmission devices transmitting one or more beam signals associated with said resources or resource sets;</claim-text>
<claim-text>- performing (902) channel measurements of the one or more beam signals, per spatial filter of the measurement device;</claim-text>
<claim-text>- storing (903), over at least one time frame, the channel measurements into measurement groups, where each measurement group corresponds to the channel measurements performed using the same spatial filter of the measurement device; and</claim-text>
<claim-text>- reporting (904) the measurement groups to a network node (804, 1200) or correlating the measurements of each measurement group with reference data for each available time frame individually and reporting the result of the correlation to the network node (804, 1200).</claim-text></claim-text></claim>
<claim id="c-en-0002" num="0002">
<claim-text>The method according to claim 1 further comprising, determining a correlation between the measurement groups, and reporting, to the network node, the result of the correlation that is below a defined correlation threshold value.</claim-text></claim>
<claim id="c-en-0003" num="0003">
<claim-text>The method according to claim 1 or claim 2 comprising, if the measurement device employs more than one spatial filter, the method comprises, mapping the same resources or resource sets in different measurement groups.</claim-text></claim>
<claim id="c-en-0004" num="0004">
<claim-text>The method according to anyone of the preceding claims, comprising, combining deviations between the channel measurements and the<!-- EPO <DP n="23"> --> reference data and selecting a pattern reference point which matches the measurement performed at a given time frame.</claim-text></claim>
<claim id="c-en-0005" num="0005">
<claim-text>The method according to anyone of claims 1-4, comprising receiving from the network node, in a long term evolution positioning protocol, LPP, message, the information on resources or resource sets, wherein the network node is a location server.</claim-text></claim>
<claim id="c-en-0006" num="0006">
<claim-text>The method according to anyone of claims 1-4, comprising receiving from at least one network node, in a Radio Resource Control, RRC, message, the information on resources or resource sets, wherein the network node is a radio base station.</claim-text></claim>
<claim id="c-en-0007" num="0007">
<claim-text>The method according to anyone of the preceding claims, wherein the channel measurements include at least one of: receive signal strength indicator, RSSI, or receive signal receive power, RSRP, or receive signal receive quality, RSRQ, or signal to noise ratio, SNR, or receive signal time difference, RSRD, or relative time of arrival, RTOA, or timing advance, TA.</claim-text></claim>
<claim id="c-en-0008" num="0008">
<claim-text>A method performed by a location server (804, 1200), the method comprising:
<claim-text>- requesting (1101) one or more radio base stations or one or more transmission devices, to provide information on resources or resource sets associated with one or more beam signals transmitted by said one or more base stations or one or more transmission devices;</claim-text>
<claim-text>- receiving (1102) said information from said one or more base stations or transmission devices and transmitting the received information to a measurement device (801, 1000);</claim-text>
<claim-text>- receiving (1103), from the measurement device (801, 1000), measurement groups, wherein each measurement group includes<!-- EPO <DP n="24"> --> measurements performed by the measurement device (801, 1000) using the same spatial filter; and</claim-text>
<claim-text>- using (1104) the measurement groups received from the measurement device and the information received from said one or more base stations or said one or more transmission devices for determining the location of the measurement device (801, 1000).</claim-text></claim-text></claim>
<claim id="c-en-0009" num="0009">
<claim-text>The method according to claim 8 comprising, requesting the measurement device (801, 1000) to provide capabilities of the measurement device (801, 1000) with regards to the number of spatial filters.</claim-text></claim>
<claim id="c-en-0010" num="0010">
<claim-text>The method according to claim 8 or claim 9 comprising transmitting in an LPP message, the information on resources or resource sets.</claim-text></claim>
<claim id="c-en-0011" num="0011">
<claim-text>The method according to anyone of claims 8-10 wherein the channel measurements include at least one of: RSSI or RSRP, or RSRQ, or SNR, or RSRD, or RTOA, or TA.</claim-text></claim>
<claim id="c-en-0012" num="0012">
<claim-text>A measurement device (801, 1000) comprising a processor (1010) and a memory (1020), said memory (1020) containing instructions executable by said processor (1010) whereby said measurement device (801, 1000) is configured to:
<claim-text>- receive, via higher layer signalling, information on resources or resource sets of one or more transmission devices transmitting one or more beam signals associated with said resources or resource sets;</claim-text>
<claim-text>- perform channel measurements of the one or more beam signals, per spatial filter of the measurement device;</claim-text>
<claim-text>- store, over at least one time frame, the channel measurements into measurement groups, where each measurement group corresponds to the<!-- EPO <DP n="25"> --> channel measurements performed using the same spatial filter of the measurement device; and</claim-text>
<claim-text>- report the measurement groups to a network node (804, 1200) or correlating the measurements of each measurement group with reference data for each available time frame individually and reporting the result of the correlation to the network node (804, 1200).</claim-text></claim-text></claim>
<claim id="c-en-0013" num="0013">
<claim-text>The measurement device (801, 1000) according to claim 12 is configured to determine a correlation between the measurement groups, and reporting the result of the correlation that is below a defined threshold, to the location server.</claim-text></claim>
<claim id="c-en-0014" num="0014">
<claim-text>The measurement device (801, 1000) according to claim 12 or claim 13 comprising, if the measurement device employs more than one spatial filter, the measurement device is configured to map the same resources or resource sets in different measurement groups.</claim-text></claim>
<claim id="c-en-0015" num="0015">
<claim-text>The measurement device (801, 1000) according to anyone of claims 12-14, is configured to combine deviations between the measurements and the reference data and selecting a pattern reference point which matches the measurement performed at a given time frame.</claim-text></claim>
<claim id="c-en-0016" num="0016">
<claim-text>A location server (804, 1200) comprising a processor (1210) and a memory (1220), said memory (1220) containing instructions executable by said processor (1210) whereby said location server (804, 1200) is configured to:
<claim-text>- request one or more radio base stations or one or more transmission devices, to provide information on resources or resource sets associated with one or more beam signals transmitted by said one or more base stations or one or more transmission devices ;<!-- EPO <DP n="26"> --></claim-text>
<claim-text>- receive said information from said one or more radio base stations or one or more transmission devices and transmit the received information to a measurement device (801, 1000);</claim-text>
<claim-text>- receive, from the measurement device (801, 1000), measurement groups, wherein each measurement group includes measurements performed by the measurement device (801, 1000) using the same spatial filter; and</claim-text>
<claim-text>- use the measurement groups received from the measurement device and the information received from said one or more radio base stations or said one or more transmission devices for determining the location of the measurement device.</claim-text></claim-text></claim>
</claims>
<drawings id="draw" lang="en"><!-- EPO <DP n="27"> -->
<figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="134" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> -->
<figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="132" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> -->
<figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="142" he="167" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> -->
<figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="134" he="172" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> -->
<figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="98" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> -->
<figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="108" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> -->
<figure id="f0007" num="7A"><img id="if0007" file="imgf0007.tif" wi="97" he="178" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> -->
<figure id="f0008" num="7B"><img id="if0008" file="imgf0008.tif" wi="130" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> -->
<figure id="f0009" num="8"><img id="if0009" file="imgf0009.tif" wi="146" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> -->
<figure id="f0010" num="9"><img id="if0010" file="imgf0010.tif" wi="139" he="183" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> -->
<figure id="f0011" num="10"><img id="if0011" file="imgf0011.tif" wi="131" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> -->
<figure id="f0012" num="11"><img id="if0012" file="imgf0012.tif" wi="146" he="188" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> -->
<figure id="f0013" num="12"><img id="if0013" file="imgf0013.tif" wi="131" he="203" img-content="drawing" img-format="tif"/></figure>
</drawings>
<search-report-data id="srep" lang="en" srep-office="EP" date-produced=""><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="155" he="233" type="tif"/></search-report-data><search-report-data date-produced="20200917" id="srepxml" lang="en" srep-office="EP" srep-type="ep-sr" status="n"><!--
 The search report data in XML is provided for the users' convenience only. It might differ from the search report of the PDF document, which contains the officially published data. The EPO disclaims any liability for incorrect or incomplete data in the XML for search reports.
 -->

<srep-info><file-reference-id>P 19-0010/NSE</file-reference-id><application-reference><document-id><country>EP</country><doc-number>20167715.0</doc-number></document-id></application-reference><applicant-name><name>Fraunhofer Gesellschaft zur Förderung derangewandten Forschung e.V.</name></applicant-name><srep-established srep-established="yes"/><srep-invention-title title-approval="yes"/><srep-abstract abs-approval="yes"/><srep-figure-to-publish figinfo="by-applicant"><figure-to-publish><fig-number>8</fig-number></figure-to-publish></srep-figure-to-publish><srep-info-admin><srep-office><addressbook><text>DH</text></addressbook></srep-office><date-search-report-mailed><date>20200925</date></date-search-report-mailed></srep-info-admin></srep-info><srep-for-pub><srep-fields-searched><minimum-documentation><classifications-ipcr><classification-ipcr><text>H04W</text></classification-ipcr></classifications-ipcr></minimum-documentation></srep-fields-searched><srep-citations><citation id="sr-cit0001"><patcit dnum="WO2020042081A1" id="sr-pcit0001" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=WO2020042081&amp;CY=ep"><document-id><country>WO</country><doc-number>2020042081</doc-number><kind>A1</kind><name>ERICSSON TELEFON AB L M [SE]; LI TIANYI [CN]</name><date>20200305</date></document-id></patcit><category>X</category><rel-claims>1-16</rel-claims><rel-passage><passage>* abstract *</passage><passage>* paragraph [0049] - paragraph [0134]; figures 1-6 *</passage></rel-passage></citation><citation id="sr-cit0002"><patcit dnum="US2019037529A1" id="sr-pcit0002" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=US2019037529&amp;CY=ep"><document-id><country>US</country><doc-number>2019037529</doc-number><kind>A1</kind><name>EDGE STEPHEN WILLIAM [US] ET AL</name><date>20190131</date></document-id></patcit><category>X</category><rel-claims>1-16</rel-claims><rel-passage><passage>* abstract *</passage><passage>* paragraph [0025] - paragraph [0112]; figures 1-10 *</passage></rel-passage></citation></srep-citations><srep-admin><examiners><primary-examiner><name>Manthey, Axel</name></primary-examiner></examiners><srep-office><addressbook><text>The Hague</text></addressbook></srep-office><date-search-completed><date>20200917</date></date-search-completed></srep-admin><!--							The annex lists the patent family members relating to the patent documents cited in the above mentioned European search report.							The members are as contained in the European Patent Office EDP file on							The European Patent Office is in no way liable for these particulars which are merely given for the purpose of information.							For more details about this annex : see Official Journal of the European Patent Office, No 12/82						--><srep-patent-family><patent-family><priority-application><document-id><country>WO</country><doc-number>2020042081</doc-number><kind>A1</kind><date>20200305</date></document-id></priority-application><family-member><document-id><country>EP</country><doc-number>3844982</doc-number><kind>A1</kind><date>20210707</date></document-id></family-member><family-member><document-id><country>WO</country><doc-number>2020042081</doc-number><kind>A1</kind><date>20200305</date></document-id></family-member></patent-family><patent-family><priority-application><document-id><country>US</country><doc-number>2019037529</doc-number><kind>A1</kind><date>20190131</date></document-id></priority-application><family-member><document-id><country>AU</country><doc-number>2018310427</doc-number><kind>A1</kind><date>20200116</date></document-id></family-member><family-member><document-id><country>BR</country><doc-number>112020001354</doc-number><kind>A2</kind><date>20200811</date></document-id></family-member><family-member><document-id><country>CN</country><doc-number>110998353</doc-number><kind>A</kind><date>20200410</date></document-id></family-member><family-member><document-id><country>CN</country><doc-number>113093102</doc-number><kind>A</kind><date>20210709</date></document-id></family-member><family-member><document-id><country>EP</country><doc-number>3662302</doc-number><kind>A1</kind><date>20200610</date></document-id></family-member><family-member><document-id><country>EP</country><doc-number>3822652</doc-number><kind>A1</kind><date>20210519</date></document-id></family-member><family-member><document-id><country>JP</country><doc-number>2020530110</doc-number><kind>A</kind><date>20201015</date></document-id></family-member><family-member><document-id><country>KR</country><doc-number>20200032107</doc-number><kind>A</kind><date>20200325</date></document-id></family-member><family-member><document-id><country>TW</country><doc-number>201911771</doc-number><kind>A</kind><date>20190316</date></document-id></family-member><family-member><document-id><country>US</country><doc-number>2019037529</doc-number><kind>A1</kind><date>20190131</date></document-id></family-member><family-member><document-id><country>US</country><doc-number>2020178202</doc-number><kind>A1</kind><date>20200604</date></document-id></family-member><family-member><document-id><country>WO</country><doc-number>2019027595</doc-number><kind>A1</kind><date>20190207</date></document-id></family-member></patent-family></srep-patent-family></srep-for-pub></search-report-data>
</ep-patent-document>
