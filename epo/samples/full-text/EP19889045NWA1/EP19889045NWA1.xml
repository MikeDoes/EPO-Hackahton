<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP19889045A1" file="EP19889045NWA1.xml" lang="en" country="EP" doc-number="3890309" kind="A1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="en"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSKBAHRIS..MTNORSMESMMAKHTNMD..........</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  1100000/0</B007EP></eptags></B000><B100><B110>3890309</B110><B120><B121>EUROPEAN PATENT APPLICATION</B121><B121EP>published in accordance with Art. 153(4) EPC</B121EP></B120><B130>A1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>19889045.1</B210><B220><date>20190906</date></B220><B240><B241><date>20210609</date></B241></B240><B250>zh</B250><B251EP>en</B251EP><B260>en</B260></B200><B300><B310>201811459740</B310><B320><date>20181130</date></B320><B330><ctry>CN</ctry></B330></B300><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20211006</date><bnum>202140</bnum></B430></B400><B500><B510EP><classification-ipcr sequence="1"><text>H04N   5/262       20060101AFI20200605BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>H04N  19/174       20141101 LI20200626BCEP        </text></classification-cpc><classification-cpc sequence="2"><text>H04N  19/70        20141101 LI20200626BCEP        </text></classification-cpc><classification-cpc sequence="3"><text>H04N   5/262       20130101 LI20200626BCEP        </text></classification-cpc><classification-cpc sequence="4"><text>H04N  21/2343      20130101 LI20200626BCEP        </text></classification-cpc><classification-cpc sequence="5"><text>H04N  21/218       20130101 LI20200626BCEP        </text></classification-cpc><classification-cpc sequence="6"><text>H04N  21/84        20130101 LI20200626BCEP        </text></classification-cpc><classification-cpc sequence="7"><text>H04N  21/81        20130101 LI20200626BCEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>VIDEODATENVERARBEITUNGSVERFAHREN UND -APPARAT, ZUGEHÖRIGE VORRICHTUNG, UND SPEICHERMEDIUM</B542><B541>en</B541><B542>VIDEO DATA PROCESSING METHOD AND APPARATUS, RELATED DEVICE, AND STORAGE MEDIUM</B542><B541>fr</B541><B542>PROCÉDÉ ET APPAREIL DE TRAITEMENT DE DONNÉES VIDÉO, DISPOSITIF ASSOCIÉ, ET SUPPORT DE STOCKAGE</B542></B540><B590><B598>1</B598></B590></B500><B700><B710><B711><snm>ZTE Corporation</snm><iid>101635398</iid><irf>P006658 SHM/SLB</irf><adr><str>ZTE Plaza 
Keji Road South 
Hi-Tech Industrial Park 
Nanshan District</str><city>Shenzhen, Guangdong 518057</city><ctry>CN</ctry></adr></B711></B710><B720><B721><snm>HUANG, Cheng</snm><adr><str>ZTE Plaza
Keji Road South
Hi-tech Industrial Park
Nanshan District</str><city>Shenzhen, Guangdong 518057</city><ctry>CN</ctry></adr></B721></B720><B740><B741><snm>Ipsilon</snm><iid>101854227</iid><adr><str>Le Centralis 
63, avenue du Général Leclerc</str><city>92340 Bourg-la-Reine</city><ctry>FR</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840><B844EP><B845EP><ctry>BA</ctry></B845EP><B845EP><ctry>ME</ctry></B845EP></B844EP><B848EP><B849EP><ctry>KH</ctry></B849EP><B849EP><ctry>MA</ctry></B849EP><B849EP><ctry>MD</ctry></B849EP><B849EP><ctry>TN</ctry></B849EP></B848EP><B860><B861><dnum><anum>CN2019104703</anum></dnum><date>20190906</date></B861><B862>zh</B862></B860><B870><B871><dnum><pnum>WO2020107998</pnum></dnum><date>20200604</date><bnum>202023</bnum></B871></B870></B800></SDOBI>
<abstract id="abst" lang="en">
<p id="pa01" num="0001">The present application provides a video data processing method and device, a server, a terminal, and a storage medium. The method includes: determining a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and decoding and playing video data of the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video, in response to a zoom operation on the sphere region of the omnidirectional video.<img id="iaf01" file="imgaf001.tif" wi="162" he="69" img-content="drawing" img-format="tif"/></p>
</abstract>
<description id="desc" lang="en"><!-- EPO <DP n="1"> -->
<heading id="h0001"><b>TECHNICAL FIELD</b></heading>
<p id="p0001" num="0001">The present disclosure relates to, but is not limited to, the field of video processing.</p>
<heading id="h0002"><b>BACKGROUND</b></heading>
<p id="p0002" num="0002">VR (Virtual Reality) is a technology that simulates and generates a three dimensional (3D) virtual world with computer technologies so that a user can experience a highly realistic virtual space in the aspects of vision, hearing, touch, and the like. With the rapid development of VR technologies, applications of VR videos (also called omnidirectional videos) such as on-demand and live broadcasts are more and more extensive, and immersive video service and experience are brought to users.</p>
<p id="p0003" num="0003">Currently, on one hand, an omnidirectional video needs to provide a panoramic viewing experience in both a horizontal direction (in a range of 360 degrees) and a vertical direction (in a range of 180 degrees), so the video quality per unit area or resolution (number of pixels per degree) of the omnidirectional video is much lower than that of a single-view video (such as a traditional TV video) under the same bitrate condition; on the other hand, limited by bandwidth conditions of the current network infrastructure, the video bitrate of the omnidirectional video provided by the service providers in the market is often limited, and these factors finally result in that the image quality of a region of interest for the user is generally not high while the omnidirectional video is played, which greatly affects the experience of the omnidirectional video service.</p>
<p id="p0004" num="0004">In view of the above problems in the existing art, no effective solution has been found yet.</p>
<heading id="h0003"><b>SUMMARY</b></heading>
<p id="p0005" num="0005">In an embodiment of the present disclosure, there is provided a video data<!-- EPO <DP n="2"> --> processing method and device, related apparatuses and a storage medium.</p>
<p id="p0006" num="0006">In an embodiment of the present disclosure, there is provided a video data processing method applied to a server, the method including: determining a sphere region of an omnidirectional video, encoding and generating video data of a projection region of the sphere region on a projected picture of the omnidirectional video, and video data of one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; and storing the encoded video data, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0007" num="0007">In an embodiment of the present disclosure, there is further provided a video data processing method applied to a server, the method including: determining a 2D region on a projected picture of an omnidirectional video, encoding and generating video data of the 2D region, and video data of one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and storing the encoded video data, information on the 2D region on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0008" num="0008">In an embodiment of the present disclosure, there is further provided a video data processing method applied to a terminal, the method including: determining a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and decoding and playing video data of the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video, in response to a zoom operation on the sphere region of the omnidirectional video.</p>
<p id="p0009" num="0009">In an embodiment of the present disclosure, there is further provided a video data processing method applied to a terminal, the method including: determine a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and decoding and playing video data of the one or more zoom regions of the 2D region on the projected<!-- EPO <DP n="3"> --> picture of the omnidirectional video, in response to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0010" num="0010">In an embodiment of the present disclosure, there is further provided a video data processing method applied to a server, the method including: determining a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and generating a media presentation description file of the omnidirectional video, the media presentation description file including a sphere region zoom descriptor indicating the sphere region of the omnidirectional video and the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0011" num="0011">In an embodiment of the present disclosure, there is further provided a video data processing method applied to a server, the method including: determining a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and generating a media presentation description file of the omnidirectional video, the media presentation description file including a 2D region zoom descriptor indicating the 2D region on the projected picture of the omnidirectional video and the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0012" num="0012">In an embodiment of the present disclosure, there is further provided a video data processing method applied to a terminal, the method including: receiving a media presentation description file, where the media presentation description file includes a sphere region zoom descriptor for indicating a sphere region of an omnidirectional video and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and requesting to obtain, according to the sphere region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the sphere region of the omnidirectional video.</p>
<p id="p0013" num="0013">In an embodiment of the present disclosure, there is further provided a video data processing method applied to a terminal, the method including: receiving a media presentation description file, where the media presentation description file includes a 2D region zoom descriptor indicating a 2D region on a projected picture of an<!-- EPO <DP n="4"> --> omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and requesting to obtain, according to the 2D region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0014" num="0014">In an embodiment of the present disclosure, there is further provided a video data processing device, including: an encoding unit and a storage unit, where the encoding unit is configured to determine a sphere region of an omnidirectional video, encode and generate video data of a projection region of the sphere region on a projected picture of the omnidirectional video, and video data of one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; and the storage unit is configured to store the encoded video data, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; or where the encoding unit is configured to determine a 2D region on a projected picture of an omnidirectional video, encode and generate video data of the 2D region, and video data of one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the storage unit is configured to store the encoded video data, information on the 2D region on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0015" num="0015">In an embodiment of the present disclosure, there is further provided a video data processing device, including: a first determination unit and a processing unit, where the first determination unit is configured to determine a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and the processing unit is configured to decode and play video data of the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video, in response to a zoom operation on the sphere region of the omnidirectional video; or where the first determination unit is configured to determine a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the<!-- EPO <DP n="5"> --> projected picture of the omnidirectional video; and the processing unit is configured to decode and play video data of the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video, in response to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0016" num="0016">In an embodiment of the present disclosure, there is further provided a video data processing device, including: a second determination unit and a generation unit, where the second determination unit is configured to determine a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and the generation unit is configured to generate a media presentation description file of the omnidirectional video, the media presentation description file including a sphere region zoom descriptor indicating the sphere region of the omnidirectional video and the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; or where the second determination unit is configured to determine a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the generation unit is configured to generate a media presentation description file of the omnidirectional video, the media presentation description file including a 2D region zoom descriptor indicating the 2D region on the projected picture of the omnidirectional video and the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0017" num="0017">In an embodiment of the present disclosure, there is further provided a video data processing device, including: a receiving unit and a requesting unit, where the receiving unit is configured to receive a media presentation description file, where the media presentation description file includes a sphere region zoom descriptor for indicating a sphere region of the omnidirectional video and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and the requesting unit is configured to request to obtain, according to the sphere region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the sphere region of the omnidirectional video; or where the receiving unit is configured<!-- EPO <DP n="6"> --> to receive a media presentation description file, where the media presentation description file includes a 2D region zoom descriptor indicating a 2D region on a projected picture of an omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the requesting unit is configured to request to obtain, according to the 2D region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0018" num="0018">In an embodiment of the present disclosure, there is further provided a server, including: a first processor, and a first memory storing a computer program executable on the processor, where the first processor is configured to, when executing the computer program, perform steps of the above method at server side.</p>
<p id="p0019" num="0019">In an embodiment of the present disclosure, there is further provided a terminal, including: a second processor, and a second memory storing a computer program executable on the processor, where the second processor is configured to, when executing the computer program, perform steps of the above method at terminal side.</p>
<p id="p0020" num="0020">In an embodiment of the present disclosure, there is further provided a storage medium storing a computer program thereon, where the computer program, when executed by a processor, causes steps of the above method at server side to be implemented, or causes steps of the above method at terminal side to be implemented.</p>
<p id="p0021" num="0021">The video data processing method and device, related apparatuses and storage medium provided in the embodiments of the disclosure provide, for zooming of a sphere region or 2D region of the omnidirectional video, information on one or more zoom regions of the sphere region or the 2D region of the omnidirectional video so that while the omnidirectional video is played, the omnidirectional video data is directly zoomed based on the provided zoom related information without switching code streams, thereby realizing continuity in the zoom operation on the sphere region or the 2D region of the omnidirectional video, ensuring the video quality of a region of interest for the user, and improving service experience of the omnidirectional video.<!-- EPO <DP n="7"> --></p>
<heading id="h0004"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading>
<p id="p0022" num="0022">
<ul id="ul0001" list-style="none" compact="compact">
<li><figref idref="f0001">FIG. 1</figref> is a schematic flowchart of a video data processing method at a server side according to an embodiment of the disclosure;</li>
<li><figref idref="f0001">FIG. 2</figref> is a schematic flowchart of a video data processing method at a server side according to an embodiment of the disclosure;</li>
<li><figref idref="f0002">FIG. 3</figref> is a schematic flowchart of another video data processing method at a server side according to an embodiment of the disclosure;</li>
<li><figref idref="f0002">FIG. 4</figref> is a schematic flowchart of a video data processing method at a terminal side according to an embodiment of the disclosure;</li>
<li><figref idref="f0002">FIG. 5</figref> is a schematic flowchart of a video data processing method at a terminal side according to an embodiment of the disclosure;</li>
<li><figref idref="f0003">FIG. 6</figref> is a schematic flowchart of another video data processing method at a terminal side according to an embodiment of the disclosure;</li>
<li><figref idref="f0003">FIG. 7</figref> is a schematic flowchart of another video data processing method at a server side according to an embodiment of the disclosure;</li>
<li><figref idref="f0003">FIG. 8</figref> is a first schematic flowchart of another video data processing method at a server side according to an embodiment of the disclosure;</li>
<li><figref idref="f0004">FIG. 9</figref> is a second schematic flowchart of another video data processing method at a server side according to an embodiment of the disclosure;</li>
<li><figref idref="f0004">FIG. 10</figref> is a schematic flowchart of another video data processing method at a terminal side according to an embodiment of the disclosure;</li>
<li><figref idref="f0004">FIG. 11</figref> is a first schematic flowchart of another video data processing method at a terminal side according to an embodiment of the disclosure;</li>
<li><figref idref="f0005">FIG. 12</figref> is a second schematic flowchart of another video data processing method at a terminal side according to an embodiment of the disclosure;</li>
<li><figref idref="f0005">FIG. 13</figref> is a schematic structural diagram of a video data processing system according to an application embodiment of the disclosure;</li>
<li><figref idref="f0006">FIG. 14</figref> is a schematic flowchart of the encoding, file packaging and playing of an omnidirectional video according to an application example of the disclosure;</li>
<li><figref idref="f0006">FIG. 15</figref> is a schematic flowchart of processing by a video player according to an<!-- EPO <DP n="8"> --> application embodiment of the disclosure;</li>
<li><figref idref="f0007">FIG. 16</figref> is a schematic diagram showing a relationship between a sphere region of an omnidirectional video and a zoom region on a projected picture according to an application embodiment of the disclosure;</li>
<li><figref idref="f0007">FIG. 17</figref> is another schematic flowchart of processing by a video player according to an application embodiment of the disclosure;</li>
<li><figref idref="f0008">FIG. 18</figref> is a schematic diagram showing a relationship between a 2D region on a projected picture of an omnidirectional video and a zoom region on the projected picture according to an application embodiment of the disclosure;</li>
<li><figref idref="f0009">FIG. 19</figref> is a schematic processing flowchart of the omnidirectional video data according to an application embodiment of the disclosure;</li>
<li><figref idref="f0010">FIG. 20</figref> is a schematic structural diagram of a video data processing device provided on a server according to an embodiment of the disclosure;</li>
<li><figref idref="f0010">FIG. 21</figref> is a schematic structural diagram of a video data processing device provided on a terminal according to an embodiment of the disclosure;</li>
<li><figref idref="f0010">FIG. 22</figref> is a schematic structural diagram of another video data processing device provided on a server according to an embodiment of the disclosure;</li>
<li><figref idref="f0011">FIG. 23</figref> is a schematic structural diagram of another video data processing device provided on a terminal according to an embodiment of the disclosure;</li>
<li><figref idref="f0011">FIG. 24</figref> is a schematic structural diagram of a server according to an embodiment of the disclosure;</li>
<li><figref idref="f0012">FIG. 25</figref> is a schematic structural diagram of a terminal according to an embodiment of the disclosure; and</li>
<li><figref idref="f0012">FIG. 26</figref> is a schematic structural diagram of a video data processing system according to an embodiment of the disclosure.</li>
</ul></p>
<heading id="h0005"><b>DETAILED DESCRIPTION</b></heading>
<p id="p0023" num="0023">For clarity and better understanding of the objects, technical solution and advantages of the disclosure, embodiments of the disclosure will now be described in detail in conjunction with the accompanying drawings. It should be noted that the<!-- EPO <DP n="9"> --> embodiments of the disclosure and features therein may be arbitrarily combined with each other without conflict.</p>
<p id="p0024" num="0024">In addition, it should be noted that terms like "first", "second" are used herein for the purpose of distinguishing similar objects instead of indicating a particular order or sequence.</p>
<p id="p0025" num="0025">Firstly, some terms are defined. In general, embodiments of the disclosure provide techniques that may be used for video data processing. In some embodiments, storage of the omnidirectional video data in a file based on an ISO base media file format (ISOBMFF) is implemented. Among them, the ISO base media file format such as a restricted scheme information box, a visual sample entry, and the like may be operated with reference to the MPEG-4 Part 12 ISO base media file format established by the Moving Picture Experts Group (MPEG) of ISO/IEC JTC1/SC29/WG11. The projection and package steps of the omnidirectional video, and their basic formats may be operated with reference to the MPEG-I Part 2 OMAF (omnidirectional media format) established by the Motion Picture Experts Group (MPEG) of ISO/IEC JTC1/SC29/WG11.</p>
<p id="p0026" num="0026">All data in the ISO base media file format is contained in a data box (or, box), i.e., the ISO base media file is composed of several boxes each having a type and a length that can be regarded as a data object. One box which may contain another box is referred to as a container box. One ISO base media file will first have and only have one "ftyp" type box, which acts as a flag for the file format and contains some information about the file. Then there will be one and only one "MOOV" type box (Movie Box), which is a container box having sub-boxes containing metadata information of the media. Media data of the ISO base media file is contained in a "mdat" type box (Media Data Box), which is also a container box, and a plurality of them or none (when the media data all refer to other files) may be present, and the structure of the media data is described by metadata.</p>
<p id="p0027" num="0027">In an embodiment of the present disclosure, there is provided a video data processing method applied to a server. The method, as shown in <figref idref="f0001">FIG. 1</figref>, includes steps 101 and 102.<!-- EPO <DP n="10"> --></p>
<p id="p0028" num="0028">At step 101, a space region corresponding to an omnidirectional video is determined, and video data of a projection region of the space region on a projected picture of the omnidirectional video and video data of one or more zoom regions of the space region on the projected picture of the omnidirectional video are encoded and generated.</p>
<p id="p0029" num="0029">At step 102: the encoded video data, information on the space region of the omnidirectional video and information on the one or more zoom regions of the space region on the projected picture of the omnidirectional video.</p>
<p id="p0030" num="0030">In other words, in step 101, a space region corresponding to an omnidirectional video is determined, and the following video data are encoded and generated: 1) video data corresponding to a projection region on a projected picture of the omnidirectional video; and 2) video data corresponding to one or more zoom regions on the projected picture of the omnidirectional video, where the projection region on the projected picture corresponds to the determined space region. In addition, in step 102, the information on the space region of the omnidirectional video refers to information about the space region, and the information on the one or more zoom regions refers to information about the one or more zoom regions.</p>
<p id="p0031" num="0031">In practical applications, the space region may have multiple expression forms, for example, represented by spherical coordinates, and then, the space region is a sphere region of the omnidirectional video in a spherical coordinate system. The sphere region includes information on one or more of: a center point of the sphere region, an azimuth angle range and an elevation angle range of the sphere region; where the center point of the sphere region includes: an azimuth angle at the center point, an elevation angle at the center point and a tilt angle at the center point.</p>
<p id="p0032" num="0032">The space region may also be represented by two-dimensional Cartesian coordinates, in which case the space region is a two dimensional (2D) region on a projected picture of the omnidirectional video in a two-dimensional Cartesian coordinate system. The 2D region includes information on one or more of: width, height, vertical offset, and horizontal offset of the 2D region.</p>
<p id="p0033" num="0033">In an example, when the space region is a sphere region of an omnidirectional<!-- EPO <DP n="11"> --> video, as shown in <figref idref="f0001">FIG. 2</figref>, the steps 101 and 102 may be implemented by the following steps 101a to 102a.</p>
<p id="p0034" num="0034">At step 101a, a sphere region of an omnidirectional video is determined, and video data of a projection region of the sphere region on a projected picture of the omnidirectional video and video data of one or more zoom regions of the sphere region on the projected picture of the omnidirectional video are encoded and generated.</p>
<p id="p0035" num="0035">At step 102a, the encoded video data, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video are stored.</p>
<p id="p0036" num="0036">In another example, when the space region is a 2D region on the projected picture of the omnidirectional video, as shown in <figref idref="f0002">FIG. 3</figref>, the steps 101 and 102 of <figref idref="f0001">FIG. 1</figref> may be implemented by the following steps 101b to 102b.</p>
<p id="p0037" num="0037">At step 101b, a 2D region on a projected picture of an omnidirectional video is determined, and video data of the 2D region, and video data of one or more zoom regions of the 2D region on the projected picture of the omnidirectional video are encoded and generated.</p>
<p id="p0038" num="0038">At step 102b, the encoded video data, information on the 2D region on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video are stored.</p>
<p id="p0039" num="0039">The solutions in the embodiments of the present disclosure provide, for zooming of a sphere region or 2D region of the omnidirectional video, information on one or more zoom regions of the sphere region or the 2D region of the omnidirectional video. In this way, a correspondence of a projection region of the sphere region or the 2D region on the projected picture and one or more zoom regions of the sphere region or the 2D region on the projected picture is established. In this manner, while the omnidirectional video is played, the omnidirectional video data is directly zoomed based on the provided zoom region related information without switching code streams, thereby realizing continuity in the zoom operation on the sphere region or the<!-- EPO <DP n="12"> --> 2D region of the omnidirectional video, ensuring the video quality of a region of interest for the user, and improving service experience of the omnidirectional video.</p>
<p id="p0040" num="0040">In practical applications, the server may be a content source server (responsible for capturing, encoding and compressing, fragment packaging, and the like of an omnidirectional audio/video content source).</p>
<p id="p0041" num="0041">When the space region is a sphere region of an omnidirectional video, the steps 101a and 102a include the following processes.</p>
<p id="p0042" num="0042">In step 101a, in an embodiment, the sphere region of the omnidirectional video has video data of different resolutions or qualities in different zoom regions on the projected picture of the omnidirectional video.</p>
<p id="p0043" num="0043">In step 101a, in an embodiment, the step of encoding and generating video data of the projection region of the sphere region on the projected picture of the omnidirectional video and video data of one or more zoom regions of the sphere region on the projected picture of the omnidirectional video includes: encoding and generating, for a plurality of omnidirectional video bit streams of the same content source, video data of different zoom regions of the sphere region of the omnidirectional video on the projected picture of the omnidirectional video according to a motion constraint tile set (MCTS) mode with different resolutions or qualities.</p>
<p id="p0044" num="0044">Tile regions of different resolutions or qualities with the same region number represent different zoom regions of the sphere region of the omnidirectional video on the projected picture of the omnidirectional video.</p>
<p id="p0045" num="0045">In step 101a, in practical applications, there may be a plurality of sphere regions having corresponding zoom regions, and based on this, in an embodiment, at least one sphere region of the omnidirectional video is determined.</p>
<p id="p0046" num="0046">In step 102a, the step of storing the encoded video data includes: storing the video data of the projection region of the sphere region on the projected picture of the omnidirectional video and the video data of the one or more zoom regions in the same video track or the same video file.</p>
<p id="p0047" num="0047">Here, in practical applications, the video track or file having the above video data stored therein may store only the above video data, or store the above video data as<!-- EPO <DP n="13"> --> well as video data corresponding to other sphere regions at the same time. In an example, the video track or file may store video data of only one sphere region and its corresponding one or more zoom regions. In another example: the video track or file stores video data of a plurality of sphere regions and video data of one or more zoom regions corresponding to each of the sphere regions. In yet another example, the video track or file stores video data of one sphere region and its corresponding one or more zoom regions, and video data of a projection region of other sphere regions on the projected picture of the omnidirectional video. For example, assuming that a sphere region A has video data of one or more zoom regions corresponding thereto, then the video data of the projection region of the sphere region A on the projected picture of the omnidirectional video and the video data of the one or more zoom regions, are stored in the same video track or the same video file. For another example, assuming that there are sphere regions A, B, C, and the sphere region A has video data of one or more zoom regions corresponding thereto, while the sphere regions B and C have no video data of one or more zoom regions corresponding thereto, then the video data of the projection region of the sphere region A on the projected picture of the omnidirectional video and the video data of the one or more zoom regions, are stored in the same video track or the same video file, while the video data of the projection regions of the sphere regions B and C may also be present in said same video track or file.</p>
<p id="p0048" num="0048">In step 102a, the step of storing the information on the sphere region of the omnidirectional video, and the information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video includes: storing, in a sphere region zooming box (SphereRegionZoomingBox) or coverage information box (CoverageInformationBox) in a video track sample entry, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0049" num="0049">That is, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video, are stored in an element in the video track<!-- EPO <DP n="14"> --> sample entry.</p>
<p id="p0050" num="0050">In an embodiment, when the above information is stored, a region zoom indicator element in the sphere region zooming box or coverage information box may be set to a designated value (e.g., 1) for indicating that one or more zoom regions of the sphere region are present on the projected picture of the omnidirectional video. In this manner, the terminal can quickly know whether one or more zoom regions of the sphere region are present on the projected picture of the omnidirectional video.</p>
<p id="p0051" num="0051">Here, for the sphere region zooming box, the video track carries video sample metadata using a visual sample entry (VisualSampleEntry). In an embodiment, the visual sample entry may contain a sphere region zooming box. The sphere region zooming box may include information on one or more of: one or more sphere regions overlaid by the video content relative to a global coordinate axis; and one or more zoom regions of the sphere region on the video picture.</p>
<p id="p0052" num="0052">In practical applications, for the restricted video sample entry type 'resv', the projected omnidirectional video scheme is used to indicate that the decoded picture is a packaged picture containing monocular or binocular stereoscopic contents. If the scheme_type within the scheme type box in the restricted scheme information box is equal to 'podv' (projected omnidirectional video), it indicates that the projected omnidirectional video scheme is adopted.</p>
<p id="p0053" num="0053">A format of the projected omnidirectional video picture is represented by a projected omnivideo box (ProjectedOmniVideoBox) contained in a scheme information box (SchemeInformationBox). When the scheme_type is 'podv', there is one and only one projected omnivideo box in the scheme information box. Based on this, in an embodiment, the projected omnivideo box may contain a sphere region zooming box. The sphere region zooming box may include information on one or more of: one or more sphere regions overlaid by the omnidirectional video content relative to a global coordinate axis; and one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0054" num="0054">In case of a coverage information box, for the restricted video sample entry type 'resv', the projected omnidirectional video scheme is used to indicate that the decoded<!-- EPO <DP n="15"> --> picture is a packaged picture containing monocular or binocular stereoscopic contents. If the scheme_type within the scheme type box in the restricted scheme information box is equal to 'podv' (projected omnidirectional video), it indicates that the projected omnidirectional video scheme is adopted.</p>
<p id="p0055" num="0055">A format of the projected omnidirectional video picture is represented by a projected omnivideo box contained in the scheme information box. When the scheme_type is 'podv', there is one and only one projected omnivideo box in the scheme information box. Based on this, in an embodiment, the projected omnivideo box may contain a coverage information box. The coverage information box may include information on one or more of: one or more sphere regions overlaid by the omnidirectional video content relative to a global coordinate axis; and one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0056" num="0056">When the space region is a 2D region on the projected picture of the omnidirectional video, the steps 101b and 102b may include the following specific implementation.</p>
<p id="p0057" num="0057">In step 101b, in an embodiment, the 2D region has video data of different resolutions or qualities in different zoom regions on the projected picture of the omnidirectional video.</p>
<p id="p0058" num="0058">In step 101b, in an embodiment, the step of encoding and generating video data of the 2D region, and video data of one or more zoom regions of the 2D region on the projected picture of the omnidirectional video includes: encoding and generating, for a plurality of omnidirectional video bit streams of the same content source, video data of different zoom regions of the 2D region on the projected picture of the omnidirectional video according to an MCTS mode with different resolutions or qualities.</p>
<p id="p0059" num="0059">Tile regions of different resolutions or qualities with the same region number represent different zoom regions of the 2D region on the projected picture of the omnidirectional video on the projected picture of the omnidirectional video.</p>
<p id="p0060" num="0060">In step 101b, in practical applications, there may be a plurality of sphere regions<!-- EPO <DP n="16"> --> having corresponding zoom regions, and based on this, in an embodiment, at least one 2D region on the projected picture of the omnidirectional video is determined.</p>
<p id="p0061" num="0061">In step 102b, the step of storing the encoded video data includes: storing the video data of the 2D region, and the video data of the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video in the same video track or the same video file.</p>
<p id="p0062" num="0062">Here, in practical applications, the video track or file having the above video data stored therein may store only the above video data, or store the above video data as well as video data corresponding to other 2D regions at the same time. In an example, the video track or file may store video data of only one 2D region and its corresponding one or more zoom regions; or the video track or file may store video data of a plurality of 2D regions and one or more zoom regions corresponding to each of the 2D regions; or the video track or file may store video data of one 2D region and its corresponding one or more zoom regions, and video data of other 2D regions. For example, assuming that a 2D region A has video data of one or more zoom regions corresponding thereto, then the video data of the 2D region A, and the video data of the one or more zoom regions are stored in the same video track or the same video file. For another example, assuming that there are 2D regions A, B, C, the 2D region A has video data of one or more zoom regions corresponding thereto, while the 2D regions B and C have no video data of one or more zoom regions corresponding thereto, then the video data of the 2D region A, and the video data of the one or more zoom regions are stored in the same video track or the same video file, while the video data of the 2D regions B and C may also be present in said same video track or file.</p>
<p id="p0063" num="0063">In step 102b, the step of storing the information on the 2D region on the projected picture of the omnidirectional video, and the information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video includes: storing, in a 2D region zooming box (2DRegionZoomingBox) or a region wise packing box (RegionWisePackingBox) in a video track sample entry, information on the 2D region on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected<!-- EPO <DP n="17"> --> picture of the omnidirectional video.</p>
<p id="p0064" num="0064">That is, information on the 2D on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video, are stored in an element in the video track sample entry.</p>
<p id="p0065" num="0065">In an embodiment, when the above information is stored, a region zoom indicator element in the 2D region zooming box or region wise packing box may be set to a designated value (e.g., 1) for indicating that one or more zoom regions of the 2D region are present on the projected picture of the omnidirectional video. In this manner, the terminal can quickly know whether one or more zoom regions of the 2D region are present on the projected picture of the omnidirectional video.</p>
<p id="p0066" num="0066">Here, for the 2D region zooming box, the video track carries video sample metadata using a visual sample entry. In an embodiment, the visual sample entry may contain a 2D region zooming box. The 2D region zooming box may include information on one or more of: a 2D region on the video picture; one or more zoom regions of the 2D region on the video picture.</p>
<p id="p0067" num="0067">In practical applications, for the restricted video sample entry type 'resv', the projected omnidirectional video scheme is used to indicate that the decoded picture is a packaged picture containing monocular or binocular stereoscopic contents. If the scheme_type within the scheme type box in the restricted scheme information box is equal to 'podv' (projected omnidirectional video), it indicates that the projected omnidirectional video scheme is adopted.</p>
<p id="p0068" num="0068">A format of the projected omnidirectional video picture is represented by a projected omnivideo box contained in the scheme information box. When the scheme_type is 'podv', there is one and only one projected omnivideo box in the scheme information box. Based on this, in an embodiment, the projected omnivideo box may contain a 2D region zooming box. The 2D region zooming box may include information on one or more of: a 2D region on a projected picture of an omnidirectional video; and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.<!-- EPO <DP n="18"> --></p>
<p id="p0069" num="0069">In case of a region wise packing box, for the restricted video sample entry type 'resv', the projected omnidirectional video scheme is used to indicate that the decoded picture is a packaged picture containing monocular or binocular stereoscopic contents. If the scheme_type within the scheme type box in the restricted scheme information box is equal to 'podv' (projected omnidirectional video), it indicates that the projected omnidirectional video scheme is adopted.</p>
<p id="p0070" num="0070">A format of the projected omnidirectional video picture is represented by a projected omnivideo box contained in the scheme information box. When the scheme_type is 'podv', there is one and only one projected omnivideo box in the scheme information box. Based on this, in an embodiment, the projected omnivideo box may contain a region wise packing box, where the region wise packing box may include information on one or more of: mapping of the omnidirectional video between a package region and the projection region in the 2D picture domain; and one or more zoom regions of the projection region on the projected picture of the omnidirectional video.</p>
<p id="p0071" num="0071">In an embodiment, the information on the zoom regions includes at least one of: the number of zoom regions; width, height, vertical offset and horizontal offset of the zoom region; a zoom ratio of the zoom region; a zoom algorithm type of the zoom region; a boundary symbolization type of the zoom region; a type of the zoom region; and text description of the zoom region.</p>
<p id="p0072" num="0072">In practical applications, the encoded video data, the information on the sphere region of the omnidirectional video, and the information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video are sent to a streaming media server for storage by the server. Here, the streaming media server is mainly responsible for storage and transmission control of video media resources.</p>
<p id="p0073" num="0073">The terminal adopts a processing mode corresponding to that of the server to decode and play the omnidirectional video data.</p>
<p id="p0074" num="0074">In view of this, in an embodiment of the present disclosure, there is further provided a video data processing method applied to a terminal. The method, as shown<!-- EPO <DP n="19"> --> in <figref idref="f0002">FIG. 4</figref>, includes steps 401 and 402.</p>
<p id="p0075" num="0075">At step 401, a space region corresponding to an omnidirectional video and one or more zoom regions of the space region on a projected picture of the omnidirectional video are determined.</p>
<p id="p0076" num="0076">At step 402, video data of the one or more zoom regions of the space region on the projected picture of the omnidirectional video are decoded and played, in response to a zoom operation on the space region corresponding to the omnidirectional video.</p>
<p id="p0077" num="0077">Here, based on the information on the space region of the omnidirectional video, and the information on the one or more zoom regions of the space region on the projected picture of the omnidirectional video stored at the server side, the terminal determines a space region corresponding to the omnidirectional video, and one or more zoom regions of the space region on the projected picture of the omnidirectional video.</p>
<p id="p0078" num="0078">The solutions in the embodiments of the present disclosure provide, for zooming of a sphere region or 2D region of the omnidirectional video, information on one or more zoom regions of the sphere region or the 2D region of the omnidirectional video. In this manner, while the omnidirectional video is played, the omnidirectional video data is directly zoomed based on the provided zoom region related information without switching code streams, thereby realizing continuity in the zoom operation on the sphere region or the 2D region of the omnidirectional video, ensuring the video quality of a region of interest for the user, and improving service experience of the omnidirectional video.</p>
<p id="p0079" num="0079">Based on the information on the space region corresponding to the omnidirectional video, and the information on the one or more zoom regions of the space region on the projected picture of the omnidirectional video, the terminal may determine a space region corresponding to the omnidirectional video, and one or more zoom regions of the space region on the projected picture of the omnidirectional video.</p>
<p id="p0080" num="0080">In practical applications, the terminal may be a virtual reality head-mounted display (HDM) or the like that can track changes in the user's viewing angle and<!-- EPO <DP n="20"> --> attitude and magnify a picture on a miniature display screen through a visual optical system located in front of the user's eyes to provide a VR video immersive display effect.</p>
<p id="p0081" num="0081">In practical applications, based on the elements in the video track sample entry in the received omnidirectional video file, the terminal determines a space region corresponding to an omnidirectional video, and one or more zoom regions of the space region on the projected picture of the omnidirectional video, and thus judges whether video data of a zoom region corresponding to a zoom operation on the space region exists.</p>
<p id="p0082" num="0082">In practical applications, after a zoom operation instruction is received (for example, when a director instructs or a user performs a zoom operation, the terminal will receive a zoom operation instruction), the terminal decodes and plays video data of the one or more zoom regions of the space region on the projected picture of the omnidirectional video, in response to a zoom operation on the space region of the omnidirectional video.</p>
<p id="p0083" num="0083">In practical applications, the zoom operation may include one zoom operation or a continuity of zoom operations. When receiving one zoom operation, the terminal decodes and plays video data of one zoom region of the space region on the projected picture of the omnidirectional video; and when receiving a plurality of zoom operations, the terminal decodes and plays video data of a plurality of zoom regions of the space region on the projected picture of the omnidirectional video.</p>
<p id="p0084" num="0084">In practical applications, the zoom operation may include a zoom operation for one space region corresponding to the omnidirectional video, or may include a zoom operation for a plurality of space regions corresponding to the omnidirectional video. When performing a zoom operation on one space region, the terminal decodes and plays video data of a zoom region of the one space region on the projected picture of the omnidirectional video; and when performing zoom operations on a plurality of space regions, the terminal decodes and plays video data of zoom regions of the plurality of space regions on the projected picture of the omnidirectional video.</p>
<p id="p0085" num="0085">In some examples, when the space region is a sphere region of an<!-- EPO <DP n="21"> --> omnidirectional video, as shown in <figref idref="f0002">FIG. 5</figref>, the steps 401 and 402 of <figref idref="f0002">FIG. 4</figref> may be implemented by the following steps 401a to 402a.</p>
<p id="p0086" num="0086">At step 401a, a sphere region of an omnidirectional video and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video are determined.</p>
<p id="p0087" num="0087">At step 402a, video data of the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video are decoded and played, in response to a zoom operation on the sphere region of the omnidirectional video.</p>
<p id="p0088" num="0088">When the space region is a 2D region on the projected picture of the omnidirectional video, as shown in <figref idref="f0003">FIG. 6</figref>, the steps 401 and 402 of <figref idref="f0002">FIG. 4</figref> may be implemented by the following steps 401b to 402b.</p>
<p id="p0089" num="0089">At step 401b, a 2D region on a projected picture of an omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video are determined.</p>
<p id="p0090" num="0090">At step 402b, video data of the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video are decoded and played, in response to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0091" num="0091">When the space region is a sphere region of an omnidirectional video, the steps 401a and 402a include the following specific processing.</p>
<p id="p0092" num="0092">In step 401a, in an embodiment, the step of determining the sphere region of the omnidirectional video and one or more zoom regions of the sphere region on the projected picture of the omnidirectional video includes: determining, based on the elements in the video track sample entry, a sphere region of an omnidirectional video and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video.</p>
<p id="p0093" num="0093">In some examples, based on the sphere region zooming box or coverage information box in the video track sample entry, the terminal determines a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video.<!-- EPO <DP n="22"> --></p>
<p id="p0094" num="0094">Here, based on the region zoom indicator element in the sphere region zooming box or coverage information box, the terminal may judge whether one or more zoom regions of the sphere region are present on the projected picture of the omnidirectional video.</p>
<p id="p0095" num="0095">In some examples, the terminal determines, based on a designated value (e.g., 1, etc.) of a region zoom indicator element in the sphere region zooming box or coverage information box, that one or more zoom regions of the sphere region are present on the projected picture of the omnidirectional video.</p>
<p id="p0096" num="0096">In step 401a, at least one sphere region of the omnidirectional video is determined.</p>
<p id="p0097" num="0097">When the space region is a 2D region on the projected picture of the omnidirectional video, the steps 401b and 402b may include the following implementation.</p>
<p id="p0098" num="0098">In step 401b, in an embodiment, the step of determining a 2D region on a projected picture of an omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video includes: determining, based on the elements in the video track sample entry, a 2D region on the projected picture of the omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0099" num="0099">In some examples, based on the 2D region zooming box or region wise packing box in the video track sample entry, the terminal determines a 2D region on the projected picture of the omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0100" num="0100">Here, based on the region zoom indicator element in the 2D region zooming box or region wise packing box, the terminal may judge whether one or more zoom regions of the 2D region are present on the projected picture of the omnidirectional video.</p>
<p id="p0101" num="0101">In some examples, the terminal determines, based on a designated value (e.g., 1, etc.) of a region zoom indicator element in the 2D region zooming box or region wise packing box, that one or more zoom regions of the 2D region are present on the<!-- EPO <DP n="23"> --> projected picture of the omnidirectional video.</p>
<p id="p0102" num="0102">In step 401b, at least one 2D region on the projected picture of the omnidirectional video is determined.</p>
<p id="p0103" num="0103">In an embodiment, the information on the zoom regions in the elements includes at least one of: the number of zoom regions; width, height, vertical offset and horizontal offset of the zoom region; a zoom ratio of the zoom region; a zoom algorithm type of the zoom region; a boundary symbolization type of the zoom region; a type of the zoom region; and text description of the zoom region.</p>
<p id="p0104" num="0104">As can be seen from the above description, the server determines a space region corresponding to an omnidirectional video, encodes and generates video data of a projection region of the space region on a projected picture of the omnidirectional video and video data of one or more zoom regions of the space region on the projected picture of the omnidirectional video; and stores the encoded video data, information on the space region of the omnidirectional video and information on the one or more zoom regions of the space region on the projected picture of the omnidirectional video; while the terminal determines a space region corresponding to an omnidirectional video, and one or more zoom regions of the space region on the projected picture of the omnidirectional video; and decodes and plays video data of one or more zoom regions of the space region on the projected picture of the omnidirectional video, thereby realizing package and play processing of the omnidirectional video data.</p>
<p id="p0105" num="0105">The embodiments of the present disclosure are described above from the perspective of file package, and now will be described below from the perspective of transmission.</p>
<p id="p0106" num="0106">In an embodiment of the present disclosure, there is provided a video data processing method applied to a server. The method, as shown in <figref idref="f0003">FIG. 7</figref>, includes steps 701 and 702.</p>
<p id="p0107" num="0107">At step 701, a space region corresponding to an omnidirectional video, and one or more zoom regions of the space region on a projected picture of an omnidirectional video are determined.<!-- EPO <DP n="24"> --></p>
<p id="p0108" num="0108">At step 702, a media presentation description file of the omnidirectional video is generated.</p>
<p id="p0109" num="0109">Here, the media presentation description file includes a space region zoom descriptor indicating a space region corresponding to the omnidirectional video and one or more zoom regions of the space region on the projected picture of the omnidirectional video.</p>
<p id="p0110" num="0110">The solutions in the embodiments of the present disclosure provide, for zooming of a sphere region or 2D region of the omnidirectional video, information on one or more zoom regions of the sphere region or the 2D region of the omnidirectional video in a media presentation description file. In this manner, while the omnidirectional video is played, omnidirectional video data that can be directly zoomed are returned based on the provided zoom region related information without switching code streams, thereby realizing continuity in the zoom operation on the sphere region or the 2D region of the omnidirectional video, ensuring the video quality of a region of interest for the user, and improving service experience of the omnidirectional video.</p>
<p id="p0111" num="0111">In some examples, when the space region is a sphere region of an omnidirectional video, as shown in <figref idref="f0003">FIG. 8</figref>, the steps 701 and 702 of <figref idref="f0003">FIG. 7</figref> may be implemented by the following steps 701a to 702a.</p>
<p id="p0112" num="0112">At step 701a, a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video are determined.</p>
<p id="p0113" num="0113">At step 702a: generating a media presentation description file of the omnidirectional video, the media presentation description file including a sphere region zoom (SRWZ) descriptor indicating a sphere region of the omnidirectional video and one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0114" num="0114">When the space region is a 2D region on the projected picture of the omnidirectional video, as shown in <figref idref="f0004">FIG. 9</figref>, the steps 701 and 702 of <figref idref="f0003">FIG. 7</figref> may be implemented by the following steps 701b to 702b.</p>
<p id="p0115" num="0115">At step 701b, a 2D region on a projected picture of an omnidirectional video, and<!-- EPO <DP n="25"> --> one or more zoom regions of the 2D region on the projected picture of the omnidirectional video are determined.</p>
<p id="p0116" num="0116">At step 702b, a media presentation description file of the omnidirectional video is generated, the media presentation description file including a 2D region zoom (2DWZ) descriptor indicating a 2D region on the projected picture of the omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0117" num="0117">In practical applications, the media presentation description file may be a media description file (M3U8) of HTTP Live Streaming (HLS) based on Hyper Text Transfer Protocol (HTTP), or a media presentation description (MPD) file of Dynamic Adaptive Streaming over HTTP (DASH), or the like.</p>
<p id="p0118" num="0118">When the space region is a sphere region of an omnidirectional video, the steps 701a and 702a include the following specific processing.</p>
<p id="p0119" num="0119">In step 701a, in an embodiment, at least one sphere region of the omnidirectional video may be determined.</p>
<p id="p0120" num="0120">In step 702a, in an embodiment, the sphere region zoom descriptor in the media presentation description file has a designated scheme identification (URI) attribute. That is, the terminal identifies the sphere region zoom descriptor using a designated URI attribute.</p>
<p id="p0121" num="0121">In step 702a, the sphere region zoom descriptor contains at least one of: the number of zoom regions; width, height, vertical offset and horizontal offset of the zoom region; a zoom ratio of the zoom region; a zoom algorithm type of the zoom region; a boundary symbolization type of the zoom region; a type of the zoom region; and text description of the zoom region.</p>
<p id="p0122" num="0122">When the space region is a 2D region on the projected picture of the omnidirectional video, the steps 701a and 702b may include the following implementation.</p>
<p id="p0123" num="0123">In step 701b, in an embodiment, at least one 2D region on the projected picture of the omnidirectional video may be determined.</p>
<p id="p0124" num="0124">In step 702b, in an embodiment, the 2D region zoom descriptor in the media<!-- EPO <DP n="26"> --> presentation description file has a designated URI attribute.</p>
<p id="p0125" num="0125">In step 702b, the 2D region zoom descriptor contains at least one of: the number of zoom regions; width, height, vertical offset and horizontal offset of the zoom region; a zoom ratio of the zoom region; a zoom algorithm type of the zoom region; a boundary symbolization type of the zoom region; a type of the zoom region; and text description of the zoom region.</p>
<p id="p0126" num="0126">The terminal adopts a processing mode corresponding to that of the server to request to obtain the omnidirectional video data.</p>
<p id="p0127" num="0127">In view of this, in an embodiment of the present disclosure, there is further provided a video data processing method applied to a terminal. The method, as shown in <figref idref="f0004">FIG. 10</figref>, includes steps 1001 and 1002.</p>
<p id="p0128" num="0128">At step 1001, a media presentation description file is received.</p>
<p id="p0129" num="0129">The media presentation description file includes a region zoom descriptor indicating a space region corresponding to an omnidirectional video and one or more zoom regions of the space region on a projected picture of the omnidirectional video.</p>
<p id="p0130" num="0130">At step 1002, it is requested to obtain, according to the region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the space region.</p>
<p id="p0131" num="0131">The solutions in the embodiments of the present disclosure provide, for zooming of a sphere region or 2D region of the omnidirectional video, information on one or more zoom regions of the sphere region or the 2D region of the omnidirectional video in a media presentation description file. In this manner, while the omnidirectional video is played, omnidirectional video data that can be directly zoomed are requested based on the provided zoom region related information without switching code streams, thereby realizing continuity in the zoom operation on the sphere region or the 2D region of the omnidirectional video, ensuring the video quality of a region of interest for the user, and improving service experience of the omnidirectional video.</p>
<p id="p0132" num="0132">In some examples, when the space region is a sphere region of an omnidirectional video, as shown in <figref idref="f0004">FIG. 11</figref>, the steps 1001 and 1002 of <figref idref="f0004">FIG. 10</figref> may be implemented by the following steps 1101a to 1102a.</p>
<p id="p0133" num="0133">At step 1001a, a media presentation description file is received, in which the<!-- EPO <DP n="27"> --> media presentation description file includes a sphere region zoom descriptor indicating a sphere region of an omnidirectional video and one or more zoom regions of the sphere region of the omnidirectional video on a projected picture of the omnidirectional video.</p>
<p id="p0134" num="0134">At step 1002a, it is requested to obtain, in response to a zoom operation on the sphere region of the omnidirectional video and according to the sphere region zoom descriptor, an omnidirectional video file corresponding to the zoom operation on the sphere region of the omnidirectional video.</p>
<p id="p0135" num="0135">When the space region is a 2D region on the projected picture of the omnidirectional video, as shown in <figref idref="f0005">FIG. 12</figref>, the steps 1001 and 1002 of <figref idref="f0004">FIG. 10</figref> may be implemented by the following steps 1001b to 1002b.</p>
<p id="p0136" num="0136">At step 1001b, a media presentation description file is received, in which the media presentation description file includes a 2D region zoom descriptor indicating a 2D region on a projected picture of an omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0137" num="0137">At step 1002b, it is requested to obtain, in response to a zoom operation on the 2D region on a projected picture of the omnidirectional video and according to the 2D region zoom descriptor, an omnidirectional video file corresponding to the zoom operation on the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0138" num="0138">When the space region is a sphere region of an omnidirectional video, the steps 1001a and 1002a may include the following specific processing.</p>
<p id="p0139" num="0139">In step 1001a, in an embodiment, at least one sphere region of the omnidirectional video exists.</p>
<p id="p0140" num="0140">In step 1002a, in an embodiment, the terminal identifies the sphere region zoom descriptor according to the URI attribute designated in the media presentation description file.</p>
<p id="p0141" num="0141">In practical applications, if the sphere region in the zoom operation is changed, and a local omnidirectional video file in the terminal contains video data of the zoom region corresponding to the zoom operation on the sphere region, the local omnidirectional video file is directly used. When no corresponding omnidirectional<!-- EPO <DP n="28"> --> video file exists locally, if the sphere region zoom descriptor contains zoom region description information of the changed sphere region, the omnidirectional video file corresponding to the zoom operation on the changed sphere region will be requested to be obtained according to the sphere region zoom descriptor; and if the sphere region zoom descriptor contains no zoom region description information of the changed sphere region, a code stream switching technology in the existing art will be adopted to request the corresponding omnidirectional video file.</p>
<p id="p0142" num="0142">Based on this, in step 1002a, in an embodiment, it is requested to obtain a first omnidirectional video file corresponding to a first zoom operation on the sphere region of the omnidirectional video; a second zoom operation on a sphere region of the omnidirectional video is determined, the second zoom operation corresponding to a second sphere region different from a first sphere region corresponding to the first zoom operation; and it is requested to obtain, according to the sphere region zoom descriptor, a second omnidirectional video file corresponding to the second zoom operation.</p>
<p id="p0143" num="0143">More specifically, in the above step, it is determined that the second zoom operation corresponds to a first sphere region different from a second sphere region corresponding to the first zoom operation; and it is judged whether a second omnidirectional video file corresponding to the second zoom operation can be requested according to the sphere region zoom descriptor and a judgment result is obtained; when the judgment result represents that a second omnidirectional video file corresponding to the second zoom operation can be requested, it is requested to obtain the second omnidirectional video file corresponding to the second zoom operation; and when the judgment result represents that no omnidirectional video file corresponding to the second zoom operation can be requested, it is requested to obtain an omnidirectional video file of the corresponding code stream.</p>
<p id="p0144" num="0144">When the space region is a 2D region on the projected picture of the omnidirectional video, the steps 1001b and 1002b include the following specific processing.</p>
<p id="p0145" num="0145">In step 1001b, in an embodiment, at least one 2D region on the projected picture<!-- EPO <DP n="29"> --> the omnidirectional video exists.</p>
<p id="p0146" num="0146">In step 1002b, in an embodiment, the terminal identifies the 2D region zoom descriptor according to the URI attribute designated in the media presentation description file.</p>
<p id="p0147" num="0147">In practical applications, if the 2D region in the zoom operation is changed, and a local omnidirectional video file in the terminal contains video data of the zoom region corresponding to the zoom operation on the 2D region, the local omnidirectional video file is directly used. When no corresponding omnidirectional video file exists locally, if the 2D region zoom descriptor contains zoom region description information of the changed 2D region, the omnidirectional video file corresponding to the zoom operation on the changed 2D region will be requested to be obtained according to the 2D region zoom descriptor; and if the sphere region zoom descriptor contains no zoom region description information of the changed 2D region, a code stream switching technology in the existing art will be adopted to request the corresponding omnidirectional video file.</p>
<p id="p0148" num="0148">Based on this, in step 1002b, in an embodiment, it is requested to obtain a third omnidirectional video file corresponding to a third zoom operation on the 2D region on a projected picture of the omnidirectional video; a fourth zoom operation on the 2D region on the projected picture of the omnidirectional video is determined, the fourth zoom operation corresponding to a first 2D region different from a second 2D region corresponding to the third zoom operation; and it is requested to obtain, according to the 2D region zoom descriptor, a fourth omnidirectional video file corresponding to the fourth zoom operation.</p>
<p id="p0149" num="0149">More specifically, in the above step, it is determined that a first 2D region corresponding to the fourth zoom operation is different from a second 2D region corresponding to the third zoom operation; it is judged whether a fourth omnidirectional video file corresponding to the fourth zoom operation can be requested according to the 2D region zoom descriptor and a judgment result is obtained; when the judgment result represents that a fourth omnidirectional video file corresponding to the fourth zoom operation can be requested, it is requested to obtain<!-- EPO <DP n="30"> --> the fourth omnidirectional video file corresponding to the fourth zoom operation; and when the judgment result represents that no omnidirectional video file corresponding to the fourth zoom operation can be requested, it is requested to obtain an omnidirectional video file of the corresponding code stream.</p>
<p id="p0150" num="0150">As can be seen from the above description, in the solutions of the embodiments of the present disclosure, the server determines a space region corresponding to an omnidirectional video, and one or more zoom regions of the space region on the projected picture of the omnidirectional video; and generates a media presentation description file of the omnidirectional video, the media presentation description file including a region zoom descriptor indicating a space region corresponding to an omnidirectional video and one or more zoom regions of the space region on a projected picture of the omnidirectional video; while the terminal receives a media presentation description file; and requests to obtain, according to the region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the space region, thereby realizing the transmission process of the omnidirectional video data.</p>
<p id="p0151" num="0151">The present disclosure is described in further details below with reference to application embodiments.</p>
<p id="p0152" num="0152">As shown in <figref idref="f0005">FIG. 13</figref>, an application embodiment of the present disclosure provides a video processing system, which may specifically be an omnidirectional video processing system, including: a content source server 100, a streaming media server 200, and a terminal 300.</p>
<p id="p0153" num="0153">The content source server 100 is responsible for capturing, encoding and compressing, and fragment packaging of an omnidirectional audio/video content source, and for generating omnidirectional video files of different zoom versions of an omnidirectional video sphere region. The content source server 100 includes: a content production module 110, an encoding module 120, and a package module 130.</p>
<p id="p0154" num="0154">Here, the content production module 110 performs recording of the real physical world audio-visual scenario using a set of cameras or a camera apparatus with multiple cameras and sensors, and an audio sensor. Video pictures shot by different<!-- EPO <DP n="31"> --> cameras at the same moment are spliced into an omnidirectional video to be projected on a unit sphere.</p>
<p id="p0155" num="0155">The encoding module 120 is responsible for encoding and compressing digitized video signals and audio signals output from the content production module 110, and generally generates audio/video elementary streams of multiple bitrates to cover different network bandwidth requirements.</p>
<p id="p0156" num="0156">The package module 130 is responsible for packaging the audio/video elementary streams output from the encoding module 120 into a plurality of media segments with fixed time intervals and providing index information of the media segments. The index information includes: a media description file of HTTP-based HLS (M3U8), or an MPD file of DASH.</p>
<p id="p0157" num="0157">In some examples, the package module 130 stores, based on the box in the omnidirectional video track, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; or the package module 130 stores, based on the box, information on the 2D region on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0158" num="0158">The package module 130 creates corresponding index information for the packaged omnidirectional video track file, such as an MPD file of DASH, and the package module 130 adds an SRWZ descriptor defined in the embodiment of the present disclosure into the MPD file, which descriptor indicates the carried information on the sphere region of the omnidirectional video in an omnidirectional video track, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; or adds a 2DWZ descriptor into the MPD file, which descriptor indicates the carried information on the 2D region on the projected picture in an omnidirectional video track, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0159" num="0159">The streaming media server 200 is responsible for controlling storage and<!-- EPO <DP n="32"> --> transmission of omnidirectional video media resources, and includes: a storage and transmission module 210. In practical applications, the streaming media server 200 may be any suitable type of network server, such as a center node or edge node server of a Content Delivery Network (CDN), or a proxy server, a World Wide Web (Web) server, or a combination thereof.</p>
<p id="p0160" num="0160">The storage and transmission module 210 is responsible for storing the media segments and the index file information thereof outputted from the package module 130, and performing transmission control of the omnidirectional video media resources according to the request from an omnidirectional video processing terminal 300.</p>
<p id="p0161" num="0161">The terminal 300 may include a streaming media client 310 and a video player 320. The streaming media client 310 is responsible for providing access request and transmission control to the omnidirectional video media resources. For example, a DASH client or an HLS client, submits a request to the streaming media server 200 for obtaining and parsing the index information of the media segment, and submits a request to the streaming media server 200 for obtaining a corresponding omnidirectional video file according to the information about changes in a user viewpoint provided by the video player 320.</p>
<p id="p0162" num="0162">The video player 320 is responsible for providing operations such as decoding, cache playing and the like on media resources such as an omnidirectional video. The video player 320, such as a virtual reality HDM, can track changes in the viewing angle and attitude of the user, and magnify a picture on a miniature display screen through a visual optical system located in front of the user's eyes to provide a VR video immersive display effect.</p>
<p id="p0163" num="0163">According to a director instruction or a user zoom operation during playing of the omnidirectional video, the streaming media client 310 submits a request to the streaming media server 200 for obtaining omnidirectional video files containing a space region of the omnidirectional video and one or more zoom regions of the space region on the projected picture of the omnidirectional video. The video player 320 decapsulates the omnidirectional video file, extracts one or more zoom regions of the<!-- EPO <DP n="33"> --> space region on the projected picture of the omnidirectional video, and the video player 320 decodes and plays the corresponding zoom regions in the omnidirectional video file according to information such as a zoom ratio, a type of the zoom region, and the like, thereby realizing zoom operation on the sphere region during playing of the omnidirectional video.</p>
<p id="p0164" num="0164">Some important modules in the application embodiments of the present disclosure are described in detail below.</p>
<p id="p0165" num="0165"><figref idref="f0006">FIG. 14</figref> is a schematic flowchart of the encoding, file packaging and playing of an omnidirectional video according to an application example of the disclosure. As shown in <figref idref="f0006">FIG. 14</figref>, in the application embodiment of the disclosure, the encoding module 120 encodes a plurality of bit streams from the same omnidirectional video source at different spatial resolutions respectively according to an MCTS manner, so as to form different zoom versions of the omnidirectional video corresponding to the same content. In <figref idref="f0006">FIG. 14</figref>, a bit stream at a resolution A corresponds to an original version of the omnidirectional video, and bit streams at resolutions B and C correspond to zoom versions of the omnidirectional video. The resolutions A, B and C may be different from each other.</p>
<p id="p0166" num="0166">The package module 130 stores a bit stream of each encoded MCTS sequence as a sub-picture track. As shown in <figref idref="f0006">FIG. 14</figref>, each sub-picture track has respective tile regions 1, 2 ... 8, which respectively correspond to different sphere regions of the omnidirectional video through a specific projection mapping mechanism. Tile regions in the sub-picture track with the same number but different resolutions represent different zoom regions of the sphere region of the omnidirectional video on the projected picture of the omnidirectional video.</p>
<p id="p0167" num="0167">In some examples, when the space region is represented in the form of spherical coordinates, an extractor track is created for each selection of MCTSs that support a zoom operation on the omnidirectional video sphere region. The extractor track, carrying a sphere region zooming box or coverage information box as defined in the embodiments of the present disclosure, is configured to establish mapping between a sphere region of the omnidirectional video and one or more zoom regions of the<!-- EPO <DP n="34"> --> sphere region on a projected picture of the omnidirectional video. In each sample of the extractor track, an extractor is created for each MCTS to extract data from tile regions of the sub-picture track that contains a projection region (original-resolution MCTS) on a projected picture of the omnidirectional video, and one or more zoom regions (high-resolution or low-resolution MCTSs). In the example of <figref idref="f0006">FIG. 14</figref>, the bit streams extracted by the extractor track include data of the projection region with resolution A and data of the zoom regions with resolutions B and C of the sphere regions of the omnidirectional video on the projected picture of the omnidirectional video corresponding to region numbers 1 and 2.</p>
<p id="p0168" num="0168">Accordingly, the streaming media client 310 selects a version of each sub-picture track to be requested to receive based on a current user viewport and the SRWZ descriptor in the media presentation description file (e.g., MPD file, etc.). The video player 320 parses the extractor track, reconstructs bit streams from different sub-picture tracks, and decodes and plays the reconstructed bit streams.</p>
<p id="p0169" num="0169">In some examples, as shown in <figref idref="f0006">FIG. 15</figref>, the video player 320 determines, based on the sphere region zooming box or coverage information box in the omnidirectional video track sample entry, a corresponding sphere region of the omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video (step 1501); decodes and plays video data of the one or more zoom regions on the projected picture of the omnidirectional video, in response to a zoom operation on the sphere region of the omnidirectional video (step 1502).</p>
<p id="p0170" num="0170"><figref idref="f0007">FIG. 16</figref> is a schematic diagram showing a relationship between a sphere region of an omnidirectional video and a zoom region on a projected picture of the omnidirectional video. As can be seen from <figref idref="f0007">FIG. 16</figref>, information on the sphere region of the omnidirectional video in the box may include one or more of: information on center point of the sphere region; information on an azimuth angle range and an elevation angle range of the sphere region. The information on the center point of the sphere region may include: information on an azimuth angle at the center point, an elevation angle at the center point and a tilt angle at the center point.</p>
<p id="p0171" num="0171">The sphere region structure of an omnidirectional video is defined as follows:<!-- EPO <DP n="35"> -->
<img id="ib0001" file="imgb0001.tif" wi="100" he="98" img-content="program-listing" img-format="tif"/>
where the centre_azimuth, centre_elevation and centre_tilt respectively indicate an azimuth angle, an elevation angle and a tilt angle of a center point of the sphere region; and azimuth_range and elevation_range define an azimuth angle range and an elevation angle range of the sphere region, respectively.</p>
<p id="p0172" num="0172">As can be seen from <figref idref="f0007">FIG. 16</figref>, the information in the box on the zoom regions on the projected picture of the omnidirectional video includes information on one or more of: the number of zoom regions; width, height, vertical offset and horizontal offset of the zoom region; a zoom ratio of the zoom region; a zoom algorithm type of the zoom region; a boundary symbolization type of the zoom region; a type of spherical zoom region; and text description of the zoom region.</p>
<p id="p0173" num="0173">The zoom region structure on a projected picture of the omnidirectional video is defined as follows:
<img id="ib0002" file="imgb0002.tif" wi="82" he="41" img-content="program-listing" img-format="tif"/><!-- EPO <DP n="36"> -->
<img id="ib0003" file="imgb0003.tif" wi="89" he="78" img-content="program-listing" img-format="tif"/>
<ul id="ul0002" list-style="none" compact="compact">
<li>where num_regions indicates the number of zoom regions corresponding to the sphere regions or 2D regions on a projected picture of the same omnidirectional video. There may be one or more zoom regions, where video data of different zoom regions have different resolutions or qualities;</li>
<li>zoom_reg_width[i], zoom_reg_height[i], zoom_reg_top[i] and zoom_reg_left[i] define the width, height, vertical offset and horizontal offset of the i-th zoom region, respectively;</li>
<li>zoom_ratio indicates a zoom ratio of the zoom region;</li>
<li>zoom_algorithm_typ indicates a zoom algorithm type of the zoom region;</li>
<li>zoom_symbolization_typ indicates a boundary symbolization type of the zoom region;</li>
<li>zoom_area_type indicates a type of the zoom region, where classification of the types is as shown in Table 1; and</li>
<li>zoom_description is a null-terminated UTF-8 character string that provides text description of the zoom region.</li>
</ul><!-- EPO <DP n="37"> -->
<tables id="tabl0001" num="0001">
<table frame="all">
<title>Table 1</title>
<tgroup cols="2">
<colspec colnum="1" colname="col1" colwidth="23mm"/>
<colspec colnum="2" colname="col2" colwidth="143mm"/>
<thead>
<row>
<entry valign="middle">Value</entry>
<entry valign="middle">Description</entry></row></thead>
<tbody>
<row>
<entry valign="middle">0</entry>
<entry valign="middle">a zoom region for director's clips, i.e., the video is zoomed here based on the creative intention of the content author or content provider</entry></row>
<row>
<entry valign="middle">1</entry>
<entry valign="middle">a zoom region selected based on measurement of viewing statistics</entry></row>
<row>
<entry valign="middle">2..239</entry>
<entry valign="middle">Reserved</entry></row>
<row>
<entry valign="middle">240..255</entry>
<entry valign="middle">Undefined</entry></row></tbody></tgroup>
</table>
</tables></p>
<p id="p0174" num="0174">When the box is a sphere region zooming box, the sphere region zooming box may include information on one or more of: one or more sphere regions overlaid by the video content relative to a global coordinate axis; and one or more zoom regions of the sphere region on the video picture.</p>
<p id="p0175" num="0175">The syntax and semantics of the sphere region zooming box are defined as follows:</p>
<heading id="h0006"><b>SphereRegionZoomingBox</b></heading>
<p id="p0176" num="0176">
<ul id="ul0003" list-style="none" compact="compact">
<li>Box Type: 'srwz'</li>
<li>Container: ProjectedOmniVideoBox or VisualSampleEntry</li>
<li>Mandatory: No</li>
<li>Quantity: Zero or one</li>
</ul>
<img id="ib0004" file="imgb0004.tif" wi="129" he="80" img-content="program-listing" img-format="tif"/><!-- EPO <DP n="38"> -->
<img id="ib0005" file="imgb0005.tif" wi="113" he="113" img-content="program-listing" img-format="tif"/>
<ul id="ul0004" list-style="none" compact="compact">
<li>where region_definition_typ indicates a shape of the sphere region, which, when equal to 0, indicates that the sphere region is designated by four large circles, and, when equal to 1, indicates that the sphere region is designated by two azimuth circles and two elevation circles;</li>
<li>num_regions designates the number of sphere regions, where at least one sphere region is determined;</li>
<li>remaining_area_flag, when the value is 0, indicates that the sphere region is defined by the SphereRegionStruct (1) structure, and when the value is 1, indicates the remaining sphere regions except the one defined by num_regions-1 SphereRegionStruct (1) structures;</li>
<li>view_idc_presence_flag, when the value is 0, indicates that no view_idc exists, and when the value is 1, indicates that view_idc exists, indicating that the sphere region is related to a particular view (left, right, or both) or monocular picture;</li>
<li>default_view_idc, when the value is 0, indicates that the sphere region is a monocular picture, when the value is 1, indicates that the sphere region is a left view of a stereo picture, when the value is 2, indicates that the sphere region is a right view<!-- EPO <DP n="39"> --> of a stereo picture, and when the value is 3, indicates that the sphere region includes a left view and a right view of a stereo picture;</li>
<li>view_idc, when the value is 0, indicates that the sphere region is a monocular picture, when the value is 1, indicates that the sphere region is a left view of a stereo picture, when the value is 2, indicates that the sphere region is a right view of a stereo picture, and when the value is 3, indicates that the sphere region includes a left view and a right view of a stereo picture;</li>
<li>region_zoom_flag, when the value is 0, indicates that no zoom region corresponding to the sphere region exists on the projected picture of the omnidirectional video, and when the value is 1, indicates that one or more zoom regions corresponding to the sphere region are present on the projected picture of the omnidirectional video; and</li>
<li>RegionWiseZoomingStruct() represents the syntax structure of a zoom region of the sphere region on the projected picture of the omnidirectional video, as previously described.</li>
</ul></p>
<p id="p0177" num="0177">In generation of the media presentation description information, for the SRWZ descriptor, taking an MPD file as an example, the following settings are performed:<br/>
A supplemental attribute element with a scheme identification @schemeIdUri being "urn:mpeg:mpegI:omaf:2018:2dwz" is called a SRWZ descriptor.</p>
<p id="p0178" num="0178">At most one SRWZ descriptor may exist in the representation hierarchy of the MPD file of DASH. The SRWZ descriptor should not appear in the MPD or AdaptationSet levels.</p>
<p id="p0179" num="0179">The SRWZ descriptor indicates a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video in an omnidirectional video track carried by its corresponding representation.</p>
<p id="p0180" num="0180">When there is an SRWZ descriptor applicable to the representation and the sphere region zooming box exists in a track corresponding to the representation, the SRWZ descriptor should carry information equivalent to the sphere region zooming box. The SRWZ descriptor should contain elements and properties as defined in Table<!-- EPO <DP n="40"> --> 2.
<tables id="tabl0002" num="0002">
<table frame="all">
<title>Table 2</title>
<tgroup cols="4">
<colspec colnum="1" colname="col1" colwidth="72mm"/>
<colspec colnum="2" colname="col2" colwidth="21mm"/>
<colspec colnum="3" colname="col3" colwidth="32mm"/>
<colspec colnum="4" colname="col4" colwidth="118mm"/>
<thead>
<row>
<entry valign="top"><b>Element or Attribute</b></entry>
<entry align="center" valign="top"><b>Use</b></entry>
<entry valign="top"><b>Data type</b></entry>
<entry valign="top"><b>Description</b></entry></row></thead>
<tbody>
<row>
<entry><b>sphRegionZoom</b></entry>
<entry align="center">1</entry>
<entry>omaf:sphRegion ZoomType</entry>
<entry>a container element whose properties and elements indicate sphere regions and corresponding zoom regions thereof</entry></row>
<row>
<entry><b>sphRegionZoom</b> @shape_type</entry>
<entry align="center">Optional</entry>
<entry>xs:unsignedByte</entry>
<entry>indicating a shape of the sphere region; when the value is 0, the sphere region is indicated by four large circles, and, when the value is 1, the sphere region is indicated by two azimuth angles and two elevation angles</entry></row>
<row>
<entry><b>sphRegionZoom</b>@remaini ng_area_flag</entry>
<entry align="center">Optional</entry>
<entry>xs:boolean</entry>
<entry>when the value is 0, indicating that all the sphere regions are defined by the element SphRegionZoom.sphRegionInfo, when the value is 1, indicating that all the sphere regions except the last one are defined by the element SphRegionZoom.sphRegionInfo, and the last remaining sphere region is a sphere region within the content coverage that is not covered by the sphere region set defined by the element SphRegionZoom.sphRegionInfo.</entry></row>
<row>
<entry><b>sphRegionZoom</b> @view_idc_presence_flag</entry>
<entry align="center">Optional</entry>
<entry>xs:boolean</entry>
<entry>when the value is 0, indicating that the attribute SphRegionZoom.sphRegionInfo@view_idc does not exist; and when the value is 1, the attribute SphRegionZoom.sphRegionInfo@view_idc exists, indicating that the sphere region is related to a particular view (left, right, or both) or monocular picture.</entry></row>
<row>
<entry><b>sphRegionZoom</b> @default_view_idc</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>omaf: ViewType</entry>
<entry>when the value is 0, indicating that the sphere region is a monocular picture, when the value is 1, indicating that the sphere region is a left view of a stereo picture, when the value is 2, indicating that the sphere region is a right view of a stereo picture, and when the value is 3, indicating that the sphere region includes a left view and a right view of a stereo picture.</entry></row>
<row>
<entry><b>sphRegionZoom.</b> sphRegionInfo</entry>
<entry align="center">1..255</entry>
<entry>omaf:zoomInfoType</entry>
<entry>an element whose attribute describes sphere region information in the element sphRegionZoom, where at least one sphere region is designated.</entry></row>
<row>
<entry><b>sphRegionZoom.sphRegionInfo</b>@view_idc</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>omaf: ViewType</entry>
<entry>when the value is 0, indicating that the sphere region is a monocular picture, when the value is 1, indicating that the sphere region is a left view of a stereo picture, when the value is 2, indicating that the sphere region is a right view of a stereo picture, and when the value is 3, indicating that the sphere region includes a left view and a right view of a stereo picture.</entry></row>
<row>
<entry><b>sphRegionZoom.sphRegionInfo</b>@centre_azimuth</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>omaf:Range1</entry>
<entry>an azimuth angle in the order of 2<sup>-16</sup> degrees for indicating a center point of the sphere region.</entry></row>
<row>
<entry><b>sphRegionZoom.sphRegionInfo</b>@centre_elevation</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>omaf:Range2</entry>
<entry>an elevation angle in the order of 2<sup>-16</sup> degrees for indicating a center point of the sphere region.</entry></row>
<row>
<entry><b>sphRegionZoom.sphRegionInfo</b>@centre_tilt</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>omaf:Range1</entry>
<entry>a tilt angle in the order of 2<sup>-16</sup> degrees for indicating a center point of the sphere region.</entry></row>
<row>
<entry><b>sphRegionZoom.sphRegionInfo</b>@azimuth_range</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>omaf:HRange</entry>
<entry>an azimuth angle range of the sphere region in the order of 2<sup>-16</sup> degrees defined through a center point thereof.</entry></row>
<row>
<entry><b>sphRegionZoom.sphRegionInfo</b>@elevation_range</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>omaf:HRange</entry>
<entry>an elevation angle range of the sphere region in the order of 2<sup>-16</sup> degrees defined through a center point thereof</entry></row>
<row>
<entry><b>sphRegionZoom.</b> zoomInfo</entry>
<entry align="center">1..255</entry>
<entry>omaf:sphRegion InfoType</entry>
<entry>an element whose attribute is used to describe information on a zoom region corresponding to the sphere region defined in the element sphRegionZoom.sphRegionInfo, where at least one zoom region is designated.</entry></row><!-- EPO <DP n="41"> -->
<row>
<entry><b>sphRegionZoom.zoomInfo</b> @zoom_region_left</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>a horizontal coordinate of an upper left corner of the zoom region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>sphRegionZoom.zoomInfo</b> @zoom_region_right</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>a vertical coordinate of an upper left corner of the zoom region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>sphRegionZoom.zoomInfo</b> @zoom_region_width</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>width of the zoom region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>sphRegionZoom.zoomInfo</b> @zoom_region_height</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>height of the zoom region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>SphRegionZoom.zoomInfo</b>@zoom_ratio</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedByte</entry>
<entry>indicating a zoom ratio of a zoom region in the projected picture</entry></row>
<row>
<entry><b>SphRegionZoom.zoomInf o</b>@zoom_algorithm_type</entry>
<entry align="center">Optional</entry>
<entry>omaf:listofUnsignedByte</entry>
<entry>indicating a zoom algorithm of a zoom region in the projected picture</entry></row>
<row>
<entry><b>SphRegionZoom.zoomInfο</b>@zoom_symbolization_ty pe</entry>
<entry align="center">Optional</entry>
<entry>omaf:listofUnsignedByte</entry>
<entry>indicating a zoom boundary symbolization type of a zoom region in the projected picture</entry></row>
<row>
<entry><b>SphRegionZoom.zoomInfo</b>@zoom_description</entry>
<entry align="center">Optional</entry>
<entry>xs:string</entry>
<entry>indicating description information of a zoom region in the projected picture</entry></row></tbody></tgroup>
</table>
</tables></p>
<p id="p0181" num="0181">When the box is a coverage information box, the coverage information box may include information on one or more of: one or more sphere regions overlaid by the omnidirectional video content relative to a global coordinate axis; and one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0182" num="0182">The syntax and semantics of the coverage information box are defined as follows:</p>
<heading id="h0007"><b>CoverageInformationBox</b></heading>
<p id="p0183" num="0183">
<ul id="ul0005" list-style="none" compact="compact">
<li>Box Type: 'covi'</li>
<li>Container: ProjectedOmniVideoBox</li>
<li>Mandatory: No</li>
<li>Quantity: Zero or one</li>
</ul>
<img id="ib0006" file="imgb0006.tif" wi="127" he="24" img-content="program-listing" img-format="tif"/></p>
<p id="p0184" num="0184">Here, the syntax structure of ContentCoverageStruct is defined as follows:
<img id="ib0007" file="imgb0007.tif" wi="45" he="5" img-content="program-listing" img-format="tif"/><!-- EPO <DP n="42"> -->
<img id="ib0008" file="imgb0008.tif" wi="78" he="168" img-content="program-listing" img-format="tif"/>
<ul id="ul0006" list-style="none" compact="compact">
<li>where coverage_shape_type indicates a shape of the sphere region, which, when equal to 0, indicates that the sphere region is designated by four large circles, and, when equal to 1, indicates that the sphere region is designated by two azimuth circles and two elevation circles;</li>
<li>num_regions designates the number of sphere regions, where at least one sphere region is determined;</li>
<li>view_idc_presence_flag, when the value is 0, indicates that no view_idc[i] exists, and when the value is 1, indicates that view_idc[i] exists, indicating that the sphere region is related to a particular view (left, right, or both) or monocular picture;<!-- EPO <DP n="43"> --></li>
<li>default_view_idc, when the value is 0, indicates that the sphere region is a monocular picture, when the value is 1, indicates that the sphere region is a left view of a stereo picture, when the value is 2, indicates that the sphere region is a right view of a stereo picture, and when the value is 3, indicates that the sphere region includes a left view and a right view of a stereo picture;</li>
<li>view_idc[i], when the value is 1, indicates that the i-th sphere region is a left view of a stereo picture, when the value is 2, indicates that the i-th sphere region is a right view of a stereo picture, and when the value is 3, indicates that the i-th sphere region includes a left view and a right view of a stereo picture. The value 0 is reserved;</li>
<li>region_zoom_flag, when the value is 0, indicates that no zoom region corresponding to the sphere region exists on the projected picture of the omnidirectional video, and when the value is 1, indicates that one or more zoom regions corresponding to the sphere region are present on the projected picture of the omnidirectional video; and</li>
<li>RegionWiseZoomingStruct() represents the syntax structure of a zoom region of the sphere region on the projected picture of the omnidirectional video, as previously described.</li>
</ul></p>
<p id="p0185" num="0185">In generation of the media presentation description information, the requirement of the SRWZ descriptor is completely the same as that of the SRWZ descriptor in the media presentation description information corresponding to the sphere region zooming box, and thus is not repeated here.</p>
<p id="p0186" num="0186">When the space region is represented in two-dimensional Cartesian coordinates, the package module 103 creates an extractor track for each selection of MCTSs that supports a zoom operation on a 2D region on the projected picture of the omnidirectional video. The extractor track, carrying a 2D region zooming box or region wise packing box as defined in the embodiments of the present disclosure, is configured to establish mapping between a 2D region on a projected picture of the omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video. In each sample of the extractor track,<!-- EPO <DP n="44"> --> an extractor is created for each MCTS to extract data from tile regions of the sub-picture track that contains a projection region (original-resolution MCTS) on a projected picture of the omnidirectional video, and one or more zoom regions (high-resolution or low-resolution MCTSs). In the example of <figref idref="f0006">FIG. 14</figref>, the bit streams extracted by the extractor track include data of the projection region with resolution A and data of the zoom regions with resolutions B and C of the sphere regions of the omnidirectional video on the projected picture of the omnidirectional video corresponding to region numbers 1 and 2.</p>
<p id="p0187" num="0187">Accordingly, the streaming media client 310 selects a version of each sub-picture track to be requested to receive based on a current user viewport and the 2DWZ descriptor in the media presentation description file (e.g., MPD file, etc.). The video player 320 parses the extractor track, reconstructs bit streams from different sub-picture tracks, and decodes and plays the reconstructed bit streams.</p>
<p id="p0188" num="0188">In some examples, as shown in <figref idref="f0007">FIG. 17</figref>, the video player 320 determines, based on the 2D region zooming box or region wise packing box in the omnidirectional video track sample entry, a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region (step 1701); decodes and plays video data of the one or more zoom regions on the projected picture of the omnidirectional video, in response to a zoom operation on the 2D region on the projected picture of the omnidirectional video (step 1702).</p>
<p id="p0189" num="0189"><figref idref="f0008">FIG. 18</figref> is a schematic diagram showing a relationship between a 2D region on a projected picture of an omnidirectional video and a zoom region on the projected picture. As can be seen from <figref idref="f0008">FIG. 18</figref>, the information on the 2D region on the projected picture of the omnidirectional video in the box may include: width, height, vertical offset, and horizontal offset of the 2D region.</p>
<p id="p0190" num="0190">The information on the zoom regions on the projected picture of the omnidirectional video includes information on one or more of: the number of zoom regions; width, height, vertical offset and horizontal offset of the zoom region; a zoom ratio of the zoom region; a zoom algorithm type of the zoom region; a boundary symbolization type of the zoom region; a type of spherical zoom region; and text<!-- EPO <DP n="45"> --> description of the zoom region.</p>
<p id="p0191" num="0191">The zoom region structure on a projected picture of the omnidirectional video is defined as above.</p>
<p id="p0192" num="0192">When the box is a 2D region zooming box, the 2D region zooming box may include information on one or more of: a 2D region on the video picture; and one or more zoom regions of the 2D region on the video picture.</p>
<p id="p0193" num="0193">The syntax and semantics of the 2D region zooming box are defined as follows:</p>
<heading id="h0008"><b>2DRegionZoomingBox</b></heading>
<p id="p0194" num="0194">
<ul id="ul0007" list-style="none" compact="compact">
<li>Box Type: '2dwz'</li>
<li>Container: VisualSampleEntry</li>
<li>Mandatory: No</li>
<li>Quantity: Zero or one</li>
</ul>
<img id="ib0009" file="imgb0009.tif" wi="123" he="138" img-content="program-listing" img-format="tif"/><!-- EPO <DP n="46"> -->
<img id="ib0010" file="imgb0010.tif" wi="68" he="78" img-content="program-listing" img-format="tif"/>
<ul id="ul0008" list-style="none" compact="compact">
<li>where num_regions designates the number of 2D regions, where at least one 2D region is determined;</li>
<li>remaining_area_flag, when the value is 0, indicates that a 2D plane region is defined by left_offset, top_offset, region_width and region_height, when the value is 1, indicates the remaining 2D regions except the one defined by num_regions-1 structures;</li>
<li>view_idc_presence_flag, when the value is 0, indicates that no view_idc exists, and when the value is 1, indicates that view_idc exists, indicating that the sphere region is related to a particular view (left, right, or both) or monocular picture;</li>
<li>default_view_idc, when the value is 0, indicates that the sphere region is a monocular picture, when the value is 1, indicates that the sphere region is a left view of a stereo picture, when the value is 2, indicates that the sphere region is a right view of a stereo picture, and when the value is 3, indicates that the sphere region includes a left view and a right view of a stereo picture;</li>
<li>view_idc, when the value is 0, indicates that the sphere region is a monocular picture, when the value is 1, indicates that the sphere region is a left view of a stereo picture, when the value is 2, indicates that the sphere region is a right view of a stereo picture, and when the value is 3, indicates that the sphere region includes a left view and a right view of a stereo picture;</li>
<li>left_offset, top_offset, region_width and region_height are integer values<!-- EPO <DP n="47"> --> indicating the position and size of the 2D plane region. left_offset and top_offset indicate the horizontal and vertical coordinates of an upper left corner of a 2D region on the projected picture, respectively. region_width and region_height indicate width and height of a 2D region on the projected picture, respectively.</li>
<li>region_zoom_flag, when the value is 0, indicates that no zoom region corresponding to the 2D region exists on the projected picture of the omnidirectional video, and when the value is 1, indicates that one or more zoom regions corresponding to the 2D region are present on the projected picture of the omnidirectional video; and</li>
<li>RegionWiseZoomingStruct(), is a syntax structure of a zoom region of a 2D region on the projected picture of the omnidirectional video, as shown in <figref idref="f0004">FIG. 10</figref>.</li>
</ul></p>
<p id="p0195" num="0195">In generation of the media presentation description information, for the 2DWZ descriptor, taking an MPD file as an example, the following settings are performed:<br/>
A supplemental attribute element with a scheme identification @ schemeIdUri being "urn:mpeg:mpegI:omaf:2018:2dwz" is called a 2DWZ descriptor.</p>
<p id="p0196" num="0196">At most one 2DWZ descriptor may exist in the representation hierarchy of the MPD file of DASH. The 2DWZ descriptor should not appear in the MPD or AdaptationSet levels.</p>
<p id="p0197" num="0197">The 2DWZ descriptor indicates a 2D region on a projected picture of the omnidirectional video, and one or more zoom regions of the 2D region in an omnidirectional video track carried by its corresponding representation.</p>
<p id="p0198" num="0198">When there is a 2DWZ descriptor applicable to the representation and the 2D region zooming box also exists in a track corresponding to the representation, the 2DWZ descriptor should carry information equivalent to the 2D region zooming box. The 2DWZ descriptor should contain elements and properties as defined in Table 3.
<tables id="tabl0003" num="0003">
<table frame="all">
<title>Table 3</title>
<tgroup cols="4">
<colspec colnum="1" colname="col1" colwidth="61mm"/>
<colspec colnum="2" colname="col2" colwidth="21mm"/>
<colspec colnum="3" colname="col3" colwidth="32mm"/>
<colspec colnum="4" colname="col4" colwidth="129mm"/>
<thead>
<row>
<entry valign="top"><b>Element or Attribute</b></entry>
<entry align="center" valign="top"><b>Use</b></entry>
<entry valign="top"><b>Data type</b></entry>
<entry valign="top"><b>Description</b></entry></row></thead>
<tbody>
<row>
<entry><b>twoDRegionZoom</b></entry>
<entry align="center">1</entry>
<entry>omaf: twoDRegion ZoomType</entry>
<entry>a container element whose properties and elements indicate 2D regions and corresponding zoom regions thereof</entry></row>
<row>
<entry><b>twoDRegionZoom</b>@remai ning_area_flag</entry>
<entry align="center">Optional</entry>
<entry>xs:boolean</entry>
<entry>when the value is 0, indicating that all the 2D regions are defined by the element twoDRegionZoom.twoDRegionlnfo, when the value is 1, indicating that all the 2D regions except the last one are defined by the element twoDRegionZoom. twoDRegionInfo, and the last remaining 2D region is a 2D region within the content coverage that is not covered by the 2D region set defined by the element twoDRegionZoom. twoDRegionInfo.</entry></row><!-- EPO <DP n="48"> -->
<row>
<entry><b>twoDRegionZoom</b>@view_ idc_presence_flag</entry>
<entry align="center">Optional</entry>
<entry>xs:boolean</entry>
<entry>when the value is 0, indicating that the attribute twoDRegionZoom. twoDRegionInfo@view_idc does not exist; and when the value is 1, indicating that the attribute twoDRegionZoom. twoDRegionInfo@view_idc exists, indicating that the 2D region is related to a particular view (left, right, or both) or monocular picture.</entry></row>
<row>
<entry><b>twoDRegionZoom</b>@defaul t_view_idc</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>omaf: ViewType</entry>
<entry>when the value is 0, indicating that the 2D region is a monocular picture, when the value is 1, indicating that the 2D region is a left view of a stereo picture, when the value is 2, indicating that the 2D region is a right view of a stereo picture, when the value is 3, indicating that the 2D region includes a left view and a right view of a stereo picture.</entry></row>
<row>
<entry><b>twoDRegionZoom</b>.twoDR egionInfo</entry>
<entry align="center">1..255</entry>
<entry>omaf: twoDRegion InfoType</entry>
<entry>an element whose attribute describes 2D region region information in the element twoDRegionZoom, where at least one 2D region is designated.</entry></row>
<row>
<entry><b>twoDRegionZoom.twoDR egionInfo</b>@view_idc</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>omaf: ViewType</entry>
<entry>when the value is 0, indicating that the 2D region is a monocular picture, when the value is 1, indicating that the 2D region is a left view of a stereo picture, when the value is 2, indicating that the 2D region is a right view of a stereo picture, when the value is 3, indicating that the 2D region includes a left view and a right view of a stereo picture.</entry></row>
<row>
<entry><b>twoDRegionZoom.twoDR egionInfo</b>@left_offset</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>a horizontal coordinate of an upper left corner of the 2D region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>twoDRegionZoom.twoDR egionInfo</b>@top_offset</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>a vertical coordinate of an upper left corner of the 2D region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>twoDRegionZoom.twoDR egionInfo</b>@region_width</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>width of the 2D region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>twoDRegionZoom.twoDR egionInfo</b>@region_height</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>height of the 2D region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>twoDRegionZoom.zoomIn fo</b>@zoom_region_left</entry>
<entry align="center">1..255</entry>
<entry>omaf: zoomInfoTy pe</entry>
<entry>an element whose attribute is used to describe information on a zoom region corresponding to the 2D region defined in the element twoDRegionZoom. twoDRegionlnfo, where at least one zoom region is designated.</entry></row>
<row>
<entry><b>twoDRegionZoom.zoomI nfo</b>@zoom_region_left</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>a horizontal coordinate of an upper left corner of the zoom region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>twoDRegionZoom.zoomI nfo</b>@zoom_region_right</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>a vertical coordinate of an upper left corner of the zoom region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>twoDRegionZoom.zoomI nfo</b>@zoom_region_width</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>width of the zoom region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>twoDRegionZoom.zoomI nfo</b>@zoom_region_height</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedShort</entry>
<entry>height of the zoom region in the projected picture designated in units of brightness samples.</entry></row>
<row>
<entry><b>twoDRegionZoom.zoomI nfo</b>@zoom_ratio</entry>
<entry align="center">Mandatory if applicable</entry>
<entry>xs:unsignedByte</entry>
<entry>indicating a zoom ratio of a zoom region in the projected picture</entry></row>
<row>
<entry><b>twoDRegionZoom.zoomInfo</b>@zoom_algorithm_type</entry>
<entry align="center">Optional</entry>
<entry>omaf:listofUnsignedByte</entry>
<entry>indicating a zoom algorithm of a zoom region in the projected picture</entry></row><!-- EPO <DP n="49"> -->
<row>
<entry><b>twoDRegionZoom.zoomI nfo</b>@zoom_symbolization_ type</entry>
<entry align="center">Optional</entry>
<entry>omaf: listofUnsign edByte</entry>
<entry>indicating a zoom boundary symbolization type of a zoom region in the projected picture</entry></row>
<row>
<entry><b>twoDRegionZoom.zoomI nfo</b>@zoom_description</entry>
<entry align="center">Optional</entry>
<entry>xs:string</entry>
<entry>indicating description information of a zoom region in the projected picture</entry></row></tbody></tgroup>
</table>
</tables></p>
<p id="p0199" num="0199">When the box is a region wise packing box, the region wise packing box may contain: mapping of the omnidirectional video between a package region and the projection region in the 2D picture domain; and one or more zoom regions of the projection region on the projected picture of the omnidirectional video.</p>
<p id="p0200" num="0200">The syntax and semantics of the region wise packing box are defined as follows:</p>
<heading id="h0009"><b>RegionWisePackingBox</b></heading>
<p id="p0201" num="0201">
<ul id="ul0009" list-style="none">
<li>Box Type: 'rwpk'</li>
<li>Container: ProjectedOmniVideoBox</li>
<li>Mandatory: No</li>
<li>Quantity: Zero or one</li>
</ul>
<img id="ib0011" file="imgb0011.tif" wi="128" he="34" img-content="program-listing" img-format="tif"/>
where The syntax of RegionWisePackingStruct in the box is defined as follows:
<img id="ib0012" file="imgb0012.tif" wi="96" he="73" img-content="program-listing" img-format="tif"/><!-- EPO <DP n="50"> -->
<img id="ib0013" file="imgb0013.tif" wi="77" he="121" img-content="program-listing" img-format="tif"/></p>
<p id="p0202" num="0202">Here, constituent_picture_matching_flag, when equal to 1, designates information on projection region, information on the package region and information on the guard band region in the syntax structure are respectively applied to each constituent picture; when equal to 0, designates information on projection region, information on the package region and information on the guard band region in the syntax structure are applicable to the projected picture;
<ul id="ul0010" list-style="none" compact="compact">
<li>num_regions designates the number of package regions, where at least one 2D region is determined;</li>
<li>proj_picture_width and proj_picture_height designate width and height of a projected picture with respect to a projected picture sample unit, respectively;</li>
<li>packed_picture_width and packed_picture_height designate width and height of a packed picture with respect to a packed picture sample unit, respectively;</li>
<li>guard_band_flag[i], when equal to 0, designates that the i-th package region has no guard band, when equal to 1, designates that the i-th package region has at least one guard band;<!-- EPO <DP n="51"> --></li>
<li>packing_type [i] designates a type of the region package; and</li>
<li>RectRegionPacking (i) designates a manner of region package between the i-th package region and the i-th projection region;</li>
<li>GuardBand (i) designates a guard band of the i-th package region;</li>
<li>region_zoom_flag, when the value is 0, indicates that no zoom region corresponding to the 2D region exists on the projected picture of the omnidirectional video, and when the value is 1, indicates that one or more zoom regions corresponding to the 2D region are present on the projected picture of the omnidirectional video; and</li>
<li>RegionWiseZoomingStruct(), is a syntax structure of a zoom region of a 2D region on the projected picture of the omnidirectional video, as shown in <figref idref="f0004">FIG. 10</figref>.</li>
</ul></p>
<p id="p0203" num="0203">In generation of the media presentation description information, the requirement of the 2DWZ descriptor is completely the same as that of the 2DWZ descriptor in the media presentation description information corresponding to the 2D region zooming box, and thus is not repeated here.</p>
<p id="p0204" num="0204">As can be seen from the above description, when the space region is represented in the form of spherical coordinates, the package module 130 stores, based on the box, a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and when the space region is represented in the form of two-dimensional Cartesian coordinates, the package module stores, based on the box, a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region.</p>
<p id="p0205" num="0205">The following describes an omnidirectional video data processing procedure according to the application embodiment taking the space region being a sphere region and taking an MPD file as examples. As shown in <figref idref="f0009">FIG. 19</figref>, the flow includes the following steps 1901 to 1913.</p>
<p id="p0206" num="0206">At step 1901: the client sends a request for obtaining an MPD file (e.g., an HTTP GET message) to the server, where the request carries a URL address of the MPD file.</p>
<p id="p0207" num="0207">At step 1902: after receiving the request, the server returns the MPD file (e.g., an HTTP 200 response message) to the client, where the MPD file includes a SRWZ<!-- EPO <DP n="52"> --> descriptor indicating a sphere region of an omnidirectional video and one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0208" num="0208">At step 1903: after selecting a version of the video file requested to be played, the client sends a request (such as an HTTP GET message) for obtaining a video segment to the server, where the request carries a URL address of the video segment.</p>
<p id="p0209" num="0209">Here, generally, according to an initial viewing orientation of the user, and in combination with information such as a projection format, a video bitrate, and decoding parameters carried in the received MPD file, the client selects a version of the video file requested to be played.</p>
<p id="p0210" num="0210">At step 1904: after receiving the request, the server returns the video segment (e.g., an HTTP 200 response message) to the client.</p>
<p id="p0211" num="0211">Here, the video segment may be a panorama video data segment independent of the current user viewport, or a FOV video data segment associated with the current user viewport.</p>
<p id="p0212" num="0212">At step 1905: after receiving the video segment, the terminal (video player) selects a specific sphere region of the omnidirectional video in the spherical coordinate system to perform a zoom operation, and then step 1906 is performed.</p>
<p id="p0213" num="0213">Here, the zoom operation may be a zoom operation performed by the player according to a personal selection made by the end user (e.g., according to a video screen zoom prompt in a user interface of the player), or a zoom operation automatically performed by the player according to an authoring intention of the video content source provider (e.g., director's recommendation).</p>
<p id="p0214" num="0214">The sphere region is configured for determining a zoom range of the omnidirectional video in the spherical coordinate system, and usually corresponds to a spherical position of the current user viewport, but other spherical positions may exist.</p>
<p id="p0215" num="0215">Information on the sphere region includes one or more of: a center point of the sphere region, an azimuth angle range and an elevation angle range of the sphere region.</p>
<p id="p0216" num="0216">The center point of sphere region includes: an azimuth angle at the center point,<!-- EPO <DP n="53"> --> an elevation angle at the center point and a tilt angle at the center point. One or more sphere regions may exist during the above zoom operation.</p>
<p id="p0217" num="0217">At step 1906: in the playing process, the terminal determines, for the omnidirectional video file after local decapsulation, whether video data of the zoom region corresponding to the zoom operation on the sphere region of the omnidirectional video exists in the video file. If video data of the zoom region exists, step 1910 is executed; otherwise, step 1907 is performed.</p>
<p id="p0218" num="0218">Here, the terminal determines, based on elements in the video track sample entry, a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and thus judges whether video data of a zoom region corresponding to the zoom operation on the sphere region exists.</p>
<p id="p0219" num="0219">For example, if there is a sphere region zooming box or coverage information box in the video track sample entry and the information on the sphere region in the box matches the information on the sphere region in the zoom operation of step 1905, it is determined that there is video data of the zoom region corresponding to the zoom operation on the sphere region.</p>
<p id="p0220" num="0220">There may be one or more of said video data of the zoom region, each corresponding to video data of a different zoom ratio (resolution or quality) of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0221" num="0221">At step 1907: the terminal (streaming media client) judges whether an SRWZ descriptor corresponding to the sphere region in the zoom operation exists in the MPD file. If so, step 1908 is executed; otherwise, step 1911 is performed.</p>
<p id="p0222" num="0222">Here, the terminal identifies the SRWZ descriptor based on the URI attribute value in the MPD file, and determines whether the descriptor corresponds to the sphere region in the zoom operation by retrieving a subelement sphRegionInfo (sphere region information) in the SWRZ descriptor.</p>
<p id="p0223" num="0223">At step 1908: the terminal (streaming media client) requests an omnidirectional video file corresponding to the zoom operation on the sphere region according to the SRWZ descriptor in the MPD file corresponding to the sphere region in the zoom<!-- EPO <DP n="54"> --> operation.</p>
<p id="p0224" num="0224">In this step, the URL address of the video segment carried in the request (e.g., an HTTP GET message) for a video segment sent from the client to the server is a URL address of the representation indicated by the SRW descriptor.</p>
<p id="p0225" num="0225">The video track corresponding to the representation includes video data of a projection region of the sphere region on a projected picture of the omnidirectional video, and video data of one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0226" num="0226">At step 1909: the server returns the video segment (e.g., an HTTP 200 response message) to the client.</p>
<p id="p0227" num="0227">Here, the video segment includes video data of a projection region of the sphere region on a projected picture of the omnidirectional video, and video data of one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0228" num="0228">At step 1910: the terminal (video player) decodes and plays the video data of one or more zoom regions corresponding to the sphere region in the zoom operation, and continues to execute step 1905 until the player exits the zoom operation.</p>
<p id="p0229" num="0229">In some examples, the terminal decodes and plays the video data of the one or more zoom region corresponding to the zoom operation on the sphere region according to one or more of the following zoom region information: the number of zoom regions; width, height, vertical offset and horizontal offset of the zoom region; a zoom ratio of the zoom region; a zoom algorithm type of the zoom region; a boundary symbolization type of the zoom region; a type of spherical zoom region; and text description of the zoom region.</p>
<p id="p0230" num="0230">At step 1911: the terminal requests, according to a zoom ratio of the sphere region in the zoom operation, an omnidirectional video file corresponding to the zoom ratio.</p>
<p id="p0231" num="0231">Here, the client sends a request (such as an HTTP GET message) for obtaining a video segment to the server, where the request carries a URL address of the video segment at a corresponding bitrate.<!-- EPO <DP n="55"> --></p>
<p id="p0232" num="0232">In general, the terminal requests, corresponding to an enlargement operation on the sphere region (and the higher the ratio), a video file version with a high bitrate (the higher the bitrate); and requests, corresponding to a contraction operation on the sphere region (and the higher the ratio), a video file version with a low bitrate (the lower the bitrate).</p>
<p id="p0233" num="0233">At step 1912: after receiving the request, the server returns the video segment (e.g., an HTTP 200 response message) to the client, where the video segment includes video data corresponding to the zoom ratio of the sphere region in the zoom operation.</p>
<p id="p0234" num="0234">At step 1913: after receiving the file, the terminal decodes and plays the video data corresponding to the zoom ratio of the sphere region in the zoom operation, and turns to execute step 1905 until the player exits the zoom operation.</p>
<p id="p0235" num="0235">In order to implement the method in the embodiments of the present disclosure, an embodiment of the disclosure further provides a video data processing device disposed on a server. As shown in <figref idref="f0010">FIG. 20</figref>, the device includes: an encoding unit 201 and a storage unit 202.</p>
<p id="p0236" num="0236">In an embodiment, the encoding unit 201 is configured to: determine a sphere region of an omnidirectional video, encode and generate video data of a projection region of the sphere region on a projected picture of the omnidirectional video, and video data of one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; and the storage unit 202 is configured to store the encoded video data, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0237" num="0237">In some examples, the encoding unit 201 may be further configured to: generating, for a plurality of omnidirectional video bit streams of the same content source, video data of different zoom regions of the sphere region on the projected picture of the omnidirectional video according to an MCTS mode with different resolutions or qualities.</p>
<p id="p0238" num="0238">Further, the storage unit 202 is configured to: store the video data of the projection region of the sphere region on the projected picture of the omnidirectional<!-- EPO <DP n="56"> --> video and the video data of the one or more zoom regions in the same video track or the same video file.</p>
<p id="p0239" num="0239">In some examples, the storage unit 202 may be further configured to: store, in a sphere region zooming box or coverage information box in a video track sample entry, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0240" num="0240">In another embodiment, the encoding unit 201 is configured to: determine a 2D region on a projected picture of an omnidirectional video, encode and generate video data of the 2D region, and video data of one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the storage unit 202 is configured to store the encoded video data, information on the 2D region on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0241" num="0241">In some examples, the encoding unit 201 may be further configured to: generate, for a plurality of omnidirectional video bit streams of the same content source, video data of different zoom regions of the 2D region on the projected picture of the omnidirectional video according to an MCTS mode with different resolutions or qualities.</p>
<p id="p0242" num="0242">Further, the storage unit 202 is configured to: store the video data of the 2D region, and the video data of the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video in the same video track or the same video file.</p>
<p id="p0243" num="0243">In some examples, the storage unit 202 may be further configured to: store, in a 2D region zooming box or region wise packing box in a video track sample entry, information on the 2D region on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0244" num="0244">In practical applications, the encoding unit 201 may be implemented by a processor in a video data processing device; and the storage unit 202 may be<!-- EPO <DP n="57"> --> implemented by a processor in a video data processing device in combination with a communication interface.</p>
<p id="p0245" num="0245">In order to implement the method in the embodiments of the present disclosure, an embodiment of the disclosure further provides a video data processing device disposed on a terminal. As shown in <figref idref="f0010">FIG. 21</figref>, the device includes: a first determination unit 211 and a processing unit 212.</p>
<p id="p0246" num="0246">In an embodiment, the first determination unit 211 is configured to determine a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and the processing unit 212 is configured to decode and play video data of the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video, in response to a zoom operation on the sphere region of the omnidirectional video.</p>
<p id="p0247" num="0247">In some examples, the first determination unit 211 may be further configured to: determine, based on the elements in the video track sample entry, a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video.</p>
<p id="p0248" num="0248">In another embodiment, the first determination unit 211 is configured to determine a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the processing unit 212 is configured to decode and play video data of one or more zoom regions of the 2D region on the projected picture of the omnidirectional video corresponding to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0249" num="0249">In some examples, the first determination unit 211 may be further configured to: determine, based on elements in the video track sample entry, a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0250" num="0250">In practical applications, the first determination unit 211 and the processing unit 212 may be implemented by a processor in a video data processing device.</p>
<p id="p0251" num="0251">In order to implement the method in the embodiments of the present disclosure,<!-- EPO <DP n="58"> --> an embodiment of the disclosure further provides a video data processing device disposed on a server. As shown in <figref idref="f0010">FIG. 22</figref>, the device includes: a second determination unit 221 and a generation unit 222.</p>
<p id="p0252" num="0252">The second determination unit 221 is configured to determine a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and the generation unit 222 is configured to generate a media presentation description file of the omnidirectional video, the media presentation description file including a sphere region zoom descriptor indicating a sphere region of the omnidirectional video and one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</p>
<p id="p0253" num="0253">Alternatively, the second determining unit 221 is configured to determine a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the generation unit 222 is configured to generate a media presentation description file of the omnidirectional video, the media presentation description file including a 2D region zoom descriptor indicating a 2D region on the projected picture of the omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0254" num="0254">In practical applications, the second determination unit 221 and the generation unit 222 may be implemented by a processor in a video data processing device.</p>
<p id="p0255" num="0255">In order to implement the method in the embodiments of the present disclosure, an embodiment of the disclosure further provides a video data processing device disposed on a terminal. As shown in <figref idref="f0011">FIG. 23</figref>, the device includes: a receiving unit 231 and a requesting unit 232.</p>
<p id="p0256" num="0256">The receiving unit 231 is configured to receive a media presentation description file, where the media presentation description file includes a sphere region zoom descriptor indicating a sphere region of an omnidirectional video and one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; and the requesting unit 232 is configured to request to obtain, according to the<!-- EPO <DP n="59"> --> sphere region zoom descriptor, an omnidirectional video file corresponding to a first zoom operation on the sphere region of the omnidirectional video.</p>
<p id="p0257" num="0257">Alternatively, the receiving unit 231 is configured to receive a media presentation description file, where the media presentation description file includes a 2D region zoom descriptor indicating a 2D region on a projected picture of an omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the requesting unit 232 is configured to request to obtain, according to the 2D region zoom descriptor, an omnidirectional video file corresponding to a third zoom operation on the 2D region on the projected picture of the omnidirectional video.</p>
<p id="p0258" num="0258">In an embodiment, the requesting unit 232 is configured to: identify the sphere region zoom descriptor according to the URI attribute designated in the media presentation description file; or identify the 2D region zoom descriptor according to the URI attribute designated in the media presentation description file.</p>
<p id="p0259" num="0259">In an embodiment, the requesting unit 232 is configured to: request to obtain a first omnidirectional video file corresponding to a first zoom operation on the sphere region of the omnidirectional video; determine a second zoom operation on a sphere region of the omnidirectional video, the second zoom operation corresponding to a second sphere region different from a first sphere region corresponding to the first zoom operation; and request to obtain, according to the sphere region zoom descriptor, a second omnidirectional video file corresponding to the second zoom operation.</p>
<p id="p0260" num="0260">Alternatively, the requesting unit 232 is configured to: request to obtain a third omnidirectional video file corresponding to a third zoom operation on the 2D region on the projected picture of the omnidirectional video; determine a fourth zoom operation on the 2D region on the projected picture of the omnidirectional video, the fourth zoom operation corresponding to a first 2D region different from a second 2D region corresponding to the third zoom operation; and request to obtain, according to the 2D region zoom descriptor, a fourth omnidirectional video file corresponding to the fourth zoom operation.</p>
<p id="p0261" num="0261">In practical applications, the receiving unit 231 may be implemented by a<!-- EPO <DP n="60"> --> communication interface in a video data processing device; and the requesting unit 232 may be implemented by a processor in a video data processing device in combination with a communication interface.</p>
<p id="p0262" num="0262">It should be noted that: when processing video data, the video data processing device provided in the above embodiments is merely illustrated by dividing the program modules in an exemplary manner, and in practical applications, the processing may be allocated to and completed by different program modules as needed, that is, the internal structure of the device may be divided into different program modules to complete all or part of the above-described processing. In addition, the video data processing device and the video data processing method provided in the foregoing embodiments belong to the same concept, and specific implementation processes thereof are described in detail in the method embodiments and thus are not repeated here.</p>
<p id="p0263" num="0263">Based on the hardware implementation of the foregoing program modules, and in order to implement the method at the server side in the embodiments of the present disclosure, an embodiment of the disclosure further provides a server. As shown in <figref idref="f0011">FIG. 24</figref>, the server 240 includes: a first communication interface 241 capable of performing information interaction with other apparatuses; and a first processor 242 connected to the first communication interface 241 for implementing information interaction with other apparatuses, and, when running a computer program, executing the method provided in one or more of the above technical solutions at the server side. The computer program is stored on a first memory 243.</p>
<p id="p0264" num="0264">In practical applications, obviously, the various components in the server 240 are coupled together by a bus system 244. It is understood that the bus system 244 is configured to enable communications among these components. The bus system 244 includes, in addition to a data bus, a power bus, a control bus, and a status signal bus. However, for clarity of illustration, the various busses are shown jointly in <figref idref="f0011">FIG. 24</figref> as the bus system 244.</p>
<p id="p0265" num="0265">The first memory 243 in the embodiment of the present disclosure is configured to store various types of data to support operations on a smart apparatus 80. Examples<!-- EPO <DP n="61"> --> of such data include: any computer program to be operated on the server 240.</p>
<p id="p0266" num="0266">The method disclosed in the embodiments of the disclosure can be applied into or implemented by the first processor 242. The first processor 242 may be an integrated circuit chip capable of processing signals. In implementation, the steps of the above method may be implemented by an integrated logic circuit in hardware or instructions in the form of software in the first processor 242. The first processor 242 may be a general-purpose processor, a digital signal processor (DSP), or other programmable logic devices, discrete gate or transistor logic devices, discrete hardware components, or the like. The first processor 242 may implement or perform the methods, steps, and logic blocks disclosed in the embodiments of the present disclosure. The general-purpose processor may be a microprocessor or any conventional processor or the like. The steps of the method disclosed in the embodiments of the present disclosure may be directly implemented by a hardware decoding processor, or implemented by a combination of hardware and software modules in the decoding processor. The software module may be located in a storage medium in the first memory 243, and the first processor 242 reads information from the first memory 243 and completes the steps of the above methods in combination with hardware thereof.</p>
<p id="p0267" num="0267">In an exemplary embodiment, the server 240 may be implemented by one or more application specific integrated circuits (ASICs), DSPs, programmable logic devices (PLDs), complex programmable logic devices (CPLDs), field-programmable gate arrays (FPGAs), general-purpose processors, controllers, micro controllers (MCUs), microprocessors, or other electronic components for performing the aforementioned methods.</p>
<p id="p0268" num="0268">Based on the hardware implementation of the foregoing program modules, and in order to implement the method provided in the embodiments of the disclosure at the terminal side, as shown in <figref idref="f0012">FIG. 25</figref>, a terminal 250 includes a second communication interface 251 and a second processor 252.</p>
<p id="p0269" num="0269">The second communication interface 251 is capable of performing information interaction with a network.<!-- EPO <DP n="62"> --></p>
<p id="p0270" num="0270">The second processor 252 is connected to the second communication interface 251 for implementing information interaction with the network, and is configured to, when running a computer program, execute the method provided in one or more of the above technical solutions at the terminal side. The computer program is stored on a second memory 253.</p>
<p id="p0271" num="0271">In practical applications, obviously, the various components in the terminal 250 are coupled together by a bus system 254. It is understood that the bus system 254 is configured to enable communications among these components. The bus system 254 includes, in addition to a data bus, a power bus, a control bus, and a status signal bus. However, for clarity of illustration, the various busses are shown jointly in <figref idref="f0012">FIG. 25</figref> as the bus system 254.</p>
<p id="p0272" num="0272">The second memory 253 in the embodiment of the present disclosure is configured to store various types of data to support operations on a smart terminal 250. Examples of such data include: any computer program to be operated on the terminal 250.</p>
<p id="p0273" num="0273">The method disclosed in the embodiments of the disclosure can be applied into or implemented by the second processor 252. The second processor 252 may be an integrated circuit chip capable of processing signals. In implementation, the steps of the above method may be implemented by an integrated logic circuit in hardware or instructions in the form of software in the second processor 252. The second processor 252 may be a general-purpose processor, a DSP, or other programmable logic devices, discrete gate or transistor logic devices, discrete hardware components, or the like. The second processor 252 may implement or perform the methods, steps, and logic blocks disclosed in the embodiments of the present disclosure. The general-purpose processor may be a microprocessor or any conventional processor or the like. The steps of the method disclosed in the embodiments of the present disclosure may be directly implemented by a hardware decoding processor, or implemented by a combination of hardware and software modules in the decoding processor. The software module may be located in a storage medium in the second memory 253, and the second processor 252 reads information from the second<!-- EPO <DP n="63"> --> memory 253 and completes the steps of the above methods in combination with hardware thereof.</p>
<p id="p0274" num="0274">In an exemplary embodiment, the terminal 250 may be implemented by one or more ASICs, DSPs, PLDs, CPLDs, FPGAs, general-purpose processors, controllers, MCUs, microprocessors, or other electronic components for performing the foregoing methods.</p>
<p id="p0275" num="0275">It will be appreciated that the memories (the first memory 243 and the second memory 253) in the embodiments of the present disclosure may include either a volatile memory or a nonvolatile memory, or both. The nonvolatile memory may be a read only memory (ROM), a programmable read-only memory (PROM), an erasable programmable read-only memory (EPROM), an electrically erasable programmable read-only memory (EEPROM), a ferromagnetic random access memory (FRAM), a flash memory, a magnetic surface memory, an optical disk, or a compact disc read-only memory (CD-ROM); where the magnetic surface memory may be a disk or tape memory. The volatile memory may be a random access memory (RAM) used as an external cache. By way of example but not limitation, many forms of RAMs are available, such as a static random access memory (SRAM), a synchronous static random access memory (SSRAM), a dynamic random access memory (DRAM), a synchronous dynamic random access memory (SDRAM), a double data rate synchronous dynamic random access memory (DDRSDRAM), an enhanced synchronous dynamic random access memory (ESDRAM), a synclink dynamic random access memory (SLDRAM), and a direct rambus random access memory (DRRAM). The memories described in the embodiments of this disclosure are intended to include, but not limited to, these and any other suitable types of memories.</p>
<p id="p0276" num="0276">In order to implement the method in the embodiments of the present disclosure, an embodiment of the disclosure further provides a video data processing system. As shown in <figref idref="f0012">FIG. 26</figref>, the system includes: a server 261 and a terminal 262.</p>
<p id="p0277" num="0277">In practical applications, as shown in <figref idref="f0005">FIG. 13</figref>, the system may further include: a streaming media server responsible for storing data of the server 261 and relevant information on the zoom region for the terminal 262 to obtain.<!-- EPO <DP n="64"> --></p>
<p id="p0278" num="0278">It should be noted that: the specific processing procedures of the server 261 and the terminal 262 have been described in detail above, and thus are not repeated here.</p>
<p id="p0279" num="0279">In an exemplary embodiment, an embodiment of the present disclosure further provides a storage medium, i.e., a computer storage medium, which may be specifically a computer-readable storage medium. In an example, the storage medium is the first memory 243 storing a computer program executable by the first processor 242 of the server 240 to complete steps of the method at the server side described above. In another example, the storage medium is the second memory 253 storing a computer program executable by the second processor 252 of the terminal 250 to complete steps of the method at the terminal side described above. The computer-readable storage medium may be memories such as FRAMs, ROMs, PROMs, EPROMs, EEPROMs, a flash memory, a magnetic surface memory, an optical disk, or CD-ROM.</p>
<p id="p0280" num="0280">The above are only preferred embodiments of the present disclosure and not intended to limit the scope of the present disclosure.</p>
</description>
<claims id="claims01" lang="en"><!-- EPO <DP n="65"> -->
<claim id="c-en-0001" num="0001">
<claim-text>A video data processing method applied to a server, the method comprising:
<claim-text>determining a sphere region of an omnidirectional video, encoding and generating video data of a projection region of the sphere region on a projected picture of the omnidirectional video, and video data of one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; and</claim-text>
<claim-text>storing the encoded video data, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0002" num="0002">
<claim-text>The method according to claim 1, wherein video data of different zoom regions of the sphere region of the omnidirectional video on the projected picture of the omnidirectional video has different resolutions or qualities.</claim-text></claim>
<claim id="c-en-0003" num="0003">
<claim-text>The method according to claim 1, wherein the step of encoding and generating the video data of the projection region of the sphere region on the projected picture of the omnidirectional video and the video data of the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video comprises:<br/>
generating, for a plurality of omnidirectional video bit streams of a same content source, video data of different zoom regions of the sphere region on the projected picture of the omnidirectional video according to a motion constraint tile set (MCTS) mode with different resolutions or qualities.</claim-text></claim>
<claim id="c-en-0004" num="0004">
<claim-text>The method according to claim 1, wherein the step of storing the encoded video data comprises:<br/>
storing the video data of the projection region of the sphere region on the projected picture of the omnidirectional video and the video data of the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video in a same video track or a same video file.</claim-text></claim>
<claim id="c-en-0005" num="0005">
<claim-text>The method according to claim 1, wherein the step of storing the information on the sphere region of the omnidirectional video, and the information on the one or more zoom regions of the sphere region on the projected picture of the<!-- EPO <DP n="66"> --> omnidirectional video comprises:<br/>
storing, in a sphere region zooming box or coverage information box in a video track sample entry, the information on the sphere region of the omnidirectional video, and the information on the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</claim-text></claim>
<claim id="c-en-0006" num="0006">
<claim-text>The method according to claim 5, wherein the method further comprises:<br/>
setting a region zoom indicator element in the sphere region zooming box or coverage information box to a designated value for indicating that one or more zoom regions of the sphere region are present on the projected picture of the omnidirectional video.</claim-text></claim>
<claim id="c-en-0007" num="0007">
<claim-text>The method according to any one of claims 1 to 6, wherein at least one sphere region of the omnidirectional video is determined.</claim-text></claim>
<claim id="c-en-0008" num="0008">
<claim-text>The method according to any one of claims 1 to 6, wherein the information on the one or more zoom regions comprises at least one of:
<claim-text>a number of the one or more zoom regions;</claim-text>
<claim-text>width, height, vertical offset and horizontal offset of the one or more zoom regions;</claim-text>
<claim-text>a zoom ratio of the one or more zoom regions;</claim-text>
<claim-text>a zoom algorithm type of the one or more zoom regions;</claim-text>
<claim-text>a boundary symbolization type of the one or more zoom regions;</claim-text>
<claim-text>a type of the one or more zoom regions; and</claim-text>
<claim-text>text description of the one or more zoom regions.</claim-text></claim-text></claim>
<claim id="c-en-0009" num="0009">
<claim-text>A video data processing method applied to a server, the method comprising:
<claim-text>determining a two-dimensional (2D) region on a projected picture of an omnidirectional video, encoding and generating video data of the 2D region, and video data of one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and</claim-text>
<claim-text>storing the encoded video data, information on the 2D region on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</claim-text><!-- EPO <DP n="67"> --></claim-text></claim>
<claim id="c-en-0010" num="0010">
<claim-text>The method according to claim 9, wherein video data of different zoom regions of the 2D region on the projected picture of the omnidirectional video has different resolutions or qualities.</claim-text></claim>
<claim id="c-en-0011" num="0011">
<claim-text>The method according to claim 9, wherein the step of encoding and generating video data of the 2D region, and video data of one or more zoom regions of the 2D region on the projected picture of the omnidirectional video comprises:<br/>
generating, for a plurality of omnidirectional video bit streams of a same content source, video data of different zoom regions of the 2D region on the projected picture of the omnidirectional video according to an MCTS mode with different resolutions.</claim-text></claim>
<claim id="c-en-0012" num="0012">
<claim-text>The method according to claim 9, wherein the step of storing the encoded video data comprises:<br/>
storing the video data of the 2D region, and the video data of the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video in a same video track or a same video file.</claim-text></claim>
<claim id="c-en-0013" num="0013">
<claim-text>The method according to claim 9, wherein the step of storing the information on the 2D region on the projected picture of the omnidirectional video, and the information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video comprises:<br/>
storing, in a 2D region zooming box or a region wise packing box in a video track sample entry, the information on the 2D region on the projected picture of the omnidirectional video, and the information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</claim-text></claim>
<claim id="c-en-0014" num="0014">
<claim-text>The method according to claim 13, further comprising:<br/>
setting a region zoom indicator element in the 2D region zooming box or region wise packing box to a designated value for indicating that one or more zoom regions of the 2D region are present on the projected picture of the omnidirectional video.</claim-text></claim>
<claim id="c-en-0015" num="0015">
<claim-text>The method according to any one of claims 9 to 14, wherein at least one 2D region on the projected picture of the omnidirectional video is determined.</claim-text></claim>
<claim id="c-en-0016" num="0016">
<claim-text>The method according to any one of claims 9 to 14, wherein the information<!-- EPO <DP n="68"> --> on the one or more zoom regions comprises at least one of:
<claim-text>a number of the one or more zoom regions;</claim-text>
<claim-text>width, height, vertical offset and horizontal offset of the one or more zoom regions;</claim-text>
<claim-text>a zoom ratio of the one or more zoom regions;</claim-text>
<claim-text>a zoom algorithm type of the one or more zoom regions;</claim-text>
<claim-text>a boundary symbolization type of the one or more zoom regions;</claim-text>
<claim-text>a type of the one or more zoom regions; and</claim-text>
<claim-text>text description of the one or more zoom regions.</claim-text></claim-text></claim>
<claim id="c-en-0017" num="0017">
<claim-text>A video data processing method applied to a terminal, the method comprising:
<claim-text>determining a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and</claim-text>
<claim-text>decoding and playing video data of the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video, in response to a zoom operation on the sphere region of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0018" num="0018">
<claim-text>The method according to claim 17, wherein the step of determining the sphere region of the omnidirectional video, and the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video comprises:<br/>
determining, based on an element in a video track sample entry, the sphere region of the omnidirectional video, and the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</claim-text></claim>
<claim id="c-en-0019" num="0019">
<claim-text>The method according to claim 18, wherein the step of determining, based on the element in the video track sample entry, the sphere region of the omnidirectional video, and the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video comprises:<br/>
determining, based on a sphere region zooming box or coverage information box in the video track sample entry, the sphere region of the omnidirectional video, and the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.<!-- EPO <DP n="69"> --></claim-text></claim>
<claim id="c-en-0020" num="0020">
<claim-text>The method according to claim 19, further comprising:<br/>
determining, based on a designated value of a region zoom indicator element in the sphere region zooming box or coverage information box, that the one or more zoom regions of the sphere region are present on the projected picture of the omnidirectional video.</claim-text></claim>
<claim id="c-en-0021" num="0021">
<claim-text>The method according to any one of claims 17 to 20, wherein at least one sphere region of the omnidirectional video is determined.</claim-text></claim>
<claim id="c-en-0022" num="0022">
<claim-text>The method according to any one of claims 18 to 20, wherein information on the one or more zoom regions in the element comprises at least one of:
<claim-text>a number of the one or more zoom regions;</claim-text>
<claim-text>width, height, vertical offset and horizontal offset of the one or more zoom regions;</claim-text>
<claim-text>a zoom ratio of the one or more zoom regions;</claim-text>
<claim-text>a zoom algorithm type of the one or more zoom regions;</claim-text>
<claim-text>a boundary symbolization type of the one or more zoom regions;</claim-text>
<claim-text>a type of the one or more zoom regions; and</claim-text>
<claim-text>text description of the one or more zoom regions.</claim-text></claim-text></claim>
<claim id="c-en-0023" num="0023">
<claim-text>A video data processing method applied to a terminal, the method comprising:
<claim-text>determining a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and</claim-text>
<claim-text>decoding and playing video data of the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video, in response to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0024" num="0024">
<claim-text>The method according to claim 23, wherein the step of determining the 2D region on the projected picture of the omnidirectional video, and the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video comprises:<br/>
determining, based on an element in a video track sample entry, the 2D region on<!-- EPO <DP n="70"> --> the projected picture of the omnidirectional video, and the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</claim-text></claim>
<claim id="c-en-0025" num="0025">
<claim-text>The method according to claim 24, wherein the step of determining, based on the element in the video track sample entry, the 2D region on the projected picture of the omnidirectional video, and the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video comprises:<br/>
determining, based on a 2D region zooming box or region wise packing box in the video track sample entry, the 2D region on the projected picture of the omnidirectional video, and the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</claim-text></claim>
<claim id="c-en-0026" num="0026">
<claim-text>The method according to claim 25, further comprising:<br/>
determining, based on a designated value of a region zoom indicator element in the 2D region zooming box or region wise packing box, that the one or more zoom regions of the 2D region are present on the projected picture of the omnidirectional video.</claim-text></claim>
<claim id="c-en-0027" num="0027">
<claim-text>The method according to any one of claims 23 to 26, wherein at least one 2D region on the projected picture of the omnidirectional video is determined.</claim-text></claim>
<claim id="c-en-0028" num="0028">
<claim-text>The method according to any one of claims 24 to 26, wherein information on the one or more zoom regions in the element comprises at least one of:
<claim-text>a number of the one or more zoom regions;</claim-text>
<claim-text>width, height, vertical offset and horizontal offset of the one or more zoom regions;</claim-text>
<claim-text>a zoom ratio of the one or more zoom regions;</claim-text>
<claim-text>a zoom algorithm type of the one or more zoom regions;</claim-text>
<claim-text>a boundary symbolization type of the one or more zoom regions;</claim-text>
<claim-text>a type of the one or more zoom regions; and</claim-text>
<claim-text>text description of the one or more zoom regions.</claim-text></claim-text></claim>
<claim id="c-en-0029" num="0029">
<claim-text>A video data processing method applied to a server, the method comprising:
<claim-text>determining a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and<!-- EPO <DP n="71"> --></claim-text>
<claim-text>generating a media presentation description file of the omnidirectional video, the media presentation description file comprising a sphere region zoom descriptor indicating the sphere region of the omnidirectional video and the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0030" num="0030">
<claim-text>The method according to claim 29, wherein the sphere region zoom descriptor in the media presentation description file has a designated scheme identification (URI) attribute.</claim-text></claim>
<claim id="c-en-0031" num="0031">
<claim-text>The method according to claim 29, wherein at least one sphere region of the omnidirectional video is determined.</claim-text></claim>
<claim id="c-en-0032" num="0032">
<claim-text>The method according to any one of claims 29 to 31, wherein the sphere region zoom descriptor contains at least one of:
<claim-text>a number of the one or more zoom regions;</claim-text>
<claim-text>width, height, vertical offset and horizontal offset of the one or more zoom regions;</claim-text>
<claim-text>a zoom ratio of the one or more zoom regions;</claim-text>
<claim-text>a zoom algorithm type of the one or more zoom regions;</claim-text>
<claim-text>a boundary symbolization type of the one or more zoom regions;</claim-text>
<claim-text>a type of the one or more zoom regions; and</claim-text>
<claim-text>text description of the one or more zoom regions.</claim-text></claim-text></claim>
<claim id="c-en-0033" num="0033">
<claim-text>A video data processing method applied to a server, the method comprising:
<claim-text>determining a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and</claim-text>
<claim-text>generating a media presentation description file of the omnidirectional video, the media presentation description file comprising a 2D region zoom descriptor indicating the 2D region on the projected picture of the omnidirectional video and the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0034" num="0034">
<claim-text>The method according to claim 33, wherein the 2D region zoom descriptor in the media presentation description file has a designated URI attribute.<!-- EPO <DP n="72"> --></claim-text></claim>
<claim id="c-en-0035" num="0035">
<claim-text>The method according to claim 33, wherein at least one 2D region on the projected picture of the omnidirectional video is determined.</claim-text></claim>
<claim id="c-en-0036" num="0036">
<claim-text>The method according to any one of claims 33 to 35, wherein the 2D region zoom descriptor contains at least one of:
<claim-text>a number of the one or more zoom regions;</claim-text>
<claim-text>width, height, vertical offset and horizontal offset of the one or more zoom regions;</claim-text>
<claim-text>a zoom ratio of the one or more zoom regions;</claim-text>
<claim-text>a zoom algorithm type of the one or more zoom regions;</claim-text>
<claim-text>a boundary symbolization type of the one or more zoom regions;</claim-text>
<claim-text>a type of the one or more zoom regions; and</claim-text>
<claim-text>text description of the one or more zoom regions.</claim-text></claim-text></claim>
<claim id="c-en-0037" num="0037">
<claim-text>A video data processing method applied to a terminal, the method comprising:
<claim-text>receiving a media presentation description file, wherein the media presentation description file comprises a sphere region zoom descriptor for indicating a sphere region of an omnidirectional video and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and</claim-text>
<claim-text>requesting to obtain, according to the sphere region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the sphere region of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0038" num="0038">
<claim-text>The method according to claim 37, further comprising:<br/>
identifying the sphere region zoom descriptor according to a URI attribute designated in the media presentation description file.</claim-text></claim>
<claim id="c-en-0039" num="0039">
<claim-text>The method according to claim 37, wherein at least one sphere region of the omnidirectional video exists.</claim-text></claim>
<claim id="c-en-0040" num="0040">
<claim-text>The method according to claim 37, wherein the step of requesting to obtain the omnidirectional video file corresponding to the zoom operation on the sphere region of the omnidirectional video comprises:
<claim-text>requesting to obtain a first omnidirectional video file corresponding to a first<!-- EPO <DP n="73"> --> zoom operation on a sphere region of the omnidirectional video; and</claim-text>
<claim-text>determining a second zoom operation on a sphere region of the omnidirectional video, the second zoom operation corresponding to a second sphere region different from a first sphere region corresponding to the first zoom operation; and requesting to obtain, according to the sphere region zoom descriptor, a second omnidirectional video file corresponding to the second zoom operation.</claim-text></claim-text></claim>
<claim id="c-en-0041" num="0041">
<claim-text>The method according to any one of claims 37 to 40, wherein the sphere region zoom descriptor contains at least one of:
<claim-text>a number of the one or more zoom regions;</claim-text>
<claim-text>width, height, vertical offset and horizontal offset of the one or more zoom regions;</claim-text>
<claim-text>a zoom ratio of the one or more zoom regions;</claim-text>
<claim-text>a zoom algorithm type of the one or more zoom regions;</claim-text>
<claim-text>a boundary symbolization type of the one or more zoom regions;</claim-text>
<claim-text>a type of the one or more zoom regions; and</claim-text>
<claim-text>text description of the one or more zoom regions.</claim-text></claim-text></claim>
<claim id="c-en-0042" num="0042">
<claim-text>A video data processing method applied to a terminal, the method comprising:
<claim-text>receiving a media presentation description file, wherein the media presentation description file comprises a 2D region zoom descriptor indicating a 2D region on a projected picture of an omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and</claim-text>
<claim-text>requesting to obtain, according to the 2D region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0043" num="0043">
<claim-text>The method according to claim 42, wherein the method further comprises:<br/>
identifying the 2D region zoom descriptor according to a URI attribute designated in the media presentation description file.</claim-text></claim>
<claim id="c-en-0044" num="0044">
<claim-text>The method according to claim 42, wherein at least one 2D region on the projected picture the omnidirectional video exists.<!-- EPO <DP n="74"> --></claim-text></claim>
<claim id="c-en-0045" num="0045">
<claim-text>The method according to claim 42, wherein the step of requesting to obtain the omnidirectional video file corresponding to the zoom operation on the 2D region on the projected picture of the omnidirectional video comprises:
<claim-text>requesting to obtain a third omnidirectional video file corresponding to a third zoom operation on a 2D region on the projected picture of the omnidirectional video; and</claim-text>
<claim-text>determining a fourth zoom operation on a 2D region on the projected picture of the omnidirectional video, the fourth zoom operation corresponding to a first 2D region different from a second 2D region corresponding to the third zoom operation; and requesting to obtain, according to the 2D region zoom descriptor, a fourth omnidirectional video file corresponding to the fourth zoom operation.</claim-text></claim-text></claim>
<claim id="c-en-0046" num="0046">
<claim-text>The method according to any one of claims 42 to 45, wherein the 2D region zoom descriptor contains at least one of:
<claim-text>a number of the one or more zoom regions;</claim-text>
<claim-text>width, height, vertical offset and horizontal offset of the one or more zoom regions;</claim-text>
<claim-text>a zoom ratio of the one or more zoom regions;</claim-text>
<claim-text>a zoom algorithm type of the one or more zoom regions;</claim-text>
<claim-text>a boundary symbolization type of the one or more zoom regions;</claim-text>
<claim-text>a type of the one or more zoom regions; and</claim-text>
<claim-text>text description of the one or more zoom regions.</claim-text></claim-text></claim>
<claim id="c-en-0047" num="0047">
<claim-text>A video data processing device, comprising: an encoding unit and a storage unit; wherein
<claim-text>the encoding unit is configured to determine a sphere region of an omnidirectional video, encode and generate video data of a projection region of the sphere region on a projected picture of the omnidirectional video, and video data of one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; and the storage unit is configured to store the encoded video data, information on the sphere region of the omnidirectional video, and information on the one or more zoom regions of the sphere region on the projected picture of the<!-- EPO <DP n="75"> --> omnidirectional video;<br/>
or</claim-text>
<claim-text>the encoding unit is configured to determine a 2D region on a projected picture of an omnidirectional video, encode and generate video data of the 2D region, and video data of one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the storage unit is configured to store the encoded video data, information on the 2D region on the projected picture of the omnidirectional video, and information on the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0048" num="0048">
<claim-text>A video data processing device, comprising: a first determination unit and a processing unit; wherein
<claim-text>the first determination unit is configured to determine a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and the processing unit is configured to decode and play video data of the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video, in response to a zoom operation on the sphere region of the omnidirectional video;<br/>
or</claim-text>
<claim-text>the first determination unit is configured to determine a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the processing unit is configured to decode and play video data of the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video, in response to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0049" num="0049">
<claim-text>A video data processing device, comprising: a second determination unit and a generation unit; wherein
<claim-text>the second determination unit is configured to determine a sphere region of an omnidirectional video, and one or more zoom regions of the sphere region on a projected picture of the omnidirectional video; and the generation unit is configured to generate a media presentation description file of the omnidirectional video, the media<!-- EPO <DP n="76"> --> presentation description file comprising a sphere region zoom descriptor indicating the sphere region of the omnidirectional video and the one or more zoom regions of the sphere region on the projected picture of the omnidirectional video;<br/>
or</claim-text>
<claim-text>the second determination unit is configured to determine a 2D region on a projected picture of an omnidirectional video, and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the generation unit is configured to generate a media presentation description file of the omnidirectional video, the media presentation description file comprising a 2D region zoom descriptor indicating the 2D region on the projected picture of the omnidirectional video and the one or more zoom regions of the 2D region on the projected picture of the omnidirectional video.</claim-text></claim-text></claim>
<claim id="c-en-0050" num="0050">
<claim-text>A video data processing device, comprising: a receiving unit and a requesting unit; wherein
<claim-text>the receiving unit is configured to receive a media presentation description file, wherein the media presentation description file comprises a sphere region zoom descriptor indicating a sphere region of an omnidirectional video and one or more zoom regions of the sphere region on the projected picture of the omnidirectional video; and the requesting unit is configured to request to obtain, according to the sphere region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the sphere region of the omnidirectional video;<br/>
or</claim-text>
<claim-text>the receiving unit is configured to receive a media presentation description file, wherein the media presentation description file comprising a 2D region zoom descriptor indicating a 2D region on a projected picture of an omnidirectional video and one or more zoom regions of the 2D region on the projected picture of the omnidirectional video; and the requesting unit is configured to request to obtain, according to the 2D region zoom descriptor, an omnidirectional video file corresponding to a zoom operation on the 2D region on the projected picture of the omnidirectional video.</claim-text><!-- EPO <DP n="77"> --></claim-text></claim>
<claim id="c-en-0051" num="0051">
<claim-text>A server, comprising: a first processor, and a first memory storing a computer program executable on a processor,<br/>
wherein the first processor is configured to when executing the computer program, perform steps of the method according to any one of claims 1 to 8, or implement steps of the method according to any one of claims 9 to 16, or implement steps of the method according to any one of claims 29 to 32, or implement steps of the method according to any one of claims 33 to 36.</claim-text></claim>
<claim id="c-en-0052" num="0052">
<claim-text>A terminal, comprising: a second processor, and a second memory storing a computer program executable on a processor,<br/>
wherein the second processor is configured to, when executing the computer program, perform steps of the method according to any one of claims 17 to 22, or implement steps of the method according to any one of claims 23 to 28, or implement steps of the method according to any one of claims 37 to 41, or implement steps of the method according to any one of claims 42 to 46.</claim-text></claim>
<claim id="c-en-0053" num="0053">
<claim-text>A storage medium having a computer program stored thereon, wherein the computer program is configured to, when executed by a processor, cause steps of the method according to any one of claims 1 to 8 to be implemented, or cause steps of the method according to any one of claims 9 to 16 to be implemented, or cause steps of the method according to any one of claims 17 to 22 to be implemented, or cause steps of the method according to any one of claims 23 to 28 to be implemented, or cause steps of the method according to any one of claims 29 to 32 to be implemented, or cause steps of the method according to any one of claims 33 to 36 to be implemented, or cause steps of the method according to any one of claims 37 to 41 to be implemented, or cause steps of the method according to any one of claims 42 to 46 to be implemented.</claim-text></claim>
</claims>
<drawings id="draw" lang="en"><!-- EPO <DP n="78"> -->
<figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="163" he="164" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="79"> -->
<figure id="f0002" num="3,4,5"><img id="if0002" file="imgf0002.tif" wi="164" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="80"> -->
<figure id="f0003" num="6,7,8"><img id="if0003" file="imgf0003.tif" wi="165" he="212" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="81"> -->
<figure id="f0004" num="9,10,11"><img id="if0004" file="imgf0004.tif" wi="165" he="217" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="82"> -->
<figure id="f0005" num="12,13"><img id="if0005" file="imgf0005.tif" wi="165" he="174" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="83"> -->
<figure id="f0006" num="14,15"><img id="if0006" file="imgf0006.tif" wi="165" he="158" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="84"> -->
<figure id="f0007" num="16,17"><img id="if0007" file="imgf0007.tif" wi="165" he="165" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="85"> -->
<figure id="f0008" num="18"><img id="if0008" file="imgf0008.tif" wi="165" he="75" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="86"> -->
<figure id="f0009" num="19"><img id="if0009" file="imgf0009.tif" wi="165" he="204" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="87"> -->
<figure id="f0010" num="20,21,22"><img id="if0010" file="imgf0010.tif" wi="88" he="194" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="88"> -->
<figure id="f0011" num="23,24"><img id="if0011" file="imgf0011.tif" wi="165" he="174" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="89"> -->
<figure id="f0012" num="25,26"><img id="if0012" file="imgf0012.tif" wi="165" he="176" img-content="drawing" img-format="tif"/></figure>
</drawings>
<search-report-data id="srep" lang="en" srep-office="EP" date-produced=""><doc-page id="srep0001" file="srep0001.tif" wi="160" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="160" he="233" type="tif"/></search-report-data>
</ep-patent-document>
