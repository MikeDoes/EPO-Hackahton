<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP20738151A1" file="EP20738151NWA1.xml" lang="en" country="EP" doc-number="3889909" kind="A1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="en"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSKBAHRIS..MTNORSMESMMAKHTNMD..........</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  1100000/0</B007EP></eptags></B000><B100><B110>3889909</B110><B120><B121>EUROPEAN PATENT APPLICATION</B121><B121EP>published in accordance with Art. 153(4) EPC</B121EP></B120><B130>A1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>20738151.8</B210><B220><date>20200113</date></B220><B240><B241><date>20210629</date></B241></B240><B250>ko</B250><B251EP>en</B251EP><B260>en</B260></B200><B300><B310>20190003953</B310><B320><date>20190111</date></B320><B330><ctry>KR</ctry></B330></B300><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20211006</date><bnum>202140</bnum></B430></B400><B500><B510EP><classification-ipcr sequence="1"><text>G06T   9/00        20060101AFI20200717BHEP        </text></classification-ipcr><classification-ipcr sequence="2"><text>G06T  15/04        20110101ALI20200717BHEP        </text></classification-ipcr><classification-ipcr sequence="3"><text>G06T  15/10        20110101ALI20200717BHEP        </text></classification-ipcr><classification-ipcr sequence="4"><text>H04N  19/184       20140101ALI20200717BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>G06T  15/04        20130101 LI20200806BCEP        </text></classification-cpc><classification-cpc sequence="2"><text>G06T  15/10        20130101 LI20200806BCEP        </text></classification-cpc><classification-cpc sequence="3"><text>G06T   9/00        20130101 LI20200806BCEP        </text></classification-cpc><classification-cpc sequence="4"><text>H04N  19/184       20141101 LI20200806BCEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>VERFAHREN UND VORRICHTUNG ZUR DREIDIMENSIONALEN DATENCODIERUNG SOWIE VERFAHREN UND VORRICHTUNG ZUR DREIDIMENSIONALEN DATENDECODIERUNG</B542><B541>en</B541><B542>THREE-DIMENSIONAL DATA ENCODING METHOD AND DEVICE, AND THREE-DIMENSIONAL DATA DECODING METHOD AND DEVICE</B542><B541>fr</B541><B542>PROCÉDÉ ET DISPOSITIF DE CODAGE DE DONNÉES TRIDIMENSIONNELLES ET PROCÉDÉ ET DISPOSITIF DE DÉCODAGE DE DONNÉES TRIDIMENSIONNELLES</B542></B540><B590><B598>1</B598></B590></B500><B700><B710><B711><snm>Samsung Electronics Co., Ltd.</snm><iid>101901488</iid><irf>P327080EP</irf><adr><str>129, Samsung-ro 
Yeongtong-gu</str><city>Suwon-si, Gyeonggi-do 16677</city><ctry>KR</ctry></adr></B711></B710><B720><B721><snm>OH, Youngho</snm><adr><str>129, Samsung-ro
Yeongtong-gu</str><city>Suwon-si, Gyeonggi-do 16677</city><ctry>KR</ctry></adr></B721><B721><snm>WOO, Jihwan</snm><adr><str>129, Samsung-ro
Yeongtong-gu</str><city>Suwon-si, Gyeonggi-do 16677</city><ctry>KR</ctry></adr></B721><B721><snm>RHYU, Sungryeul</snm><adr><str>129, Samsung-ro
Yeongtong-gu</str><city>Suwon-si, Gyeonggi-do 16677</city><ctry>KR</ctry></adr></B721></B720><B740><B741><snm>HGF</snm><iid>101859891</iid><adr><str>1 City Walk</str><city>Leeds LS11 9DX</city><ctry>GB</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840><B844EP><B845EP><ctry>BA</ctry></B845EP><B845EP><ctry>ME</ctry></B845EP></B844EP><B848EP><B849EP><ctry>KH</ctry></B849EP><B849EP><ctry>MA</ctry></B849EP><B849EP><ctry>MD</ctry></B849EP><B849EP><ctry>TN</ctry></B849EP></B848EP><B860><B861><dnum><anum>KR2020000595</anum></dnum><date>20200113</date></B861><B862>ko</B862></B860><B870><B871><dnum><pnum>WO2020145783</pnum></dnum><date>20200716</date><bnum>202029</bnum></B871></B870></B800></SDOBI>
<abstract id="abst" lang="en">
<p id="pa01" num="0001">Provided is a method of processing and transmitting three-dimensional data represented as a point cloud.</p>
<p id="pa02" num="0002">The method of encoding three-dimensional (3D) data includes: generating a geometry image indicating position information of points, a texture image indicating color information of the points, and an occupancy map indicating occupancy information of the position information of the points in the geometry image, by projecting the points included in the 3D data onto a two-dimensional (2D) plane; generating a filtered occupancy map by performing filtering on the occupancy map; performing image padding on the geometry image and the texture image, based on the filtered occupancy map; and generating and outputting a bitstream including a padded geometry image, a padded texture image, a downsampled occupancy map, and information about the filtering performed on the occupancy map.<img id="iaf01" file="imgaf001.tif" wi="111" he="66" img-content="drawing" img-format="tif"/></p>
</abstract>
<description id="desc" lang="en"><!-- EPO <DP n="1"> -->
<heading id="h0001">TECHNICAL FIELD</heading>
<p id="p0001" num="0001">The present disclosure relates to a method and apparatus for processing three-dimensional data. In particular, the present disclosure relates to a method of generating a high-resolution occupancy map from a low-resolution occupancy map in a three-dimensional data processing process.</p>
<heading id="h0002">BACKGROUND ART</heading>
<p id="p0002" num="0002">A point cloud, which is a method of representing three-dimensional data, means a set of a massive amount of points, and a large amount of three-dimensional data may be represented as a point cloud. A point cloud is a method of representing a point in three dimensions, different from the method of representing a 2D image, and is in the form of a vector that simultaneously includes position coordinates and color. For example, a point cloud may be represented by (x, y, z, R, G, B). As a density increases, a point cloud that forms a spatial configuration by collecting countless color and location data becomes more and more specific, and accordingly has a meaning as one 3D model.</p>
<p id="p0003" num="0003">As a point cloud representing three-dimensional data occupies a significant amount of memory and processor resources, a compression method is required to transmit the point cloud. Accordingly, a method of efficiently compressing such three-dimensional data is needed. Furthermore, a method of processing such three-dimensional data is needed.</p>
<heading id="h0003">DESCRIPTION OF EMBODIMENTS</heading>
<heading id="h0004">TECHNICAL PROBLEM</heading>
<p id="p0004" num="0004">Provided is a method and apparatus for efficiently processing three-dimensional data. Particularly, provided are a method and apparatus for efficiently compressing three-dimensional<!-- EPO <DP n="2"> --> data, and a method and apparatus for reconstructing a three-dimensional image by processing the three-dimensional data that is compressed and transmitted in such a way.</p>
<heading id="h0005">SOLUTION TO PROBLEM</heading>
<p id="p0005" num="0005">A method of processing and transmitting, by a data transmitting apparatus, three-dimensional (3D) data represented as a point cloud, according to an embodiment of the present disclosure, includes: generating patches based on a normal vector of each point included in a point cloud; packing generated patches; generating geometry two-dimensional (2D) image information, color 2D image information, and occupancy map information having occupancy information indicating the position of a meaningful point in 2D image information, with respect to geometry information, based on the packed patches; performing image padding to fill information about an empty portion in the geometry 2D image information and the color 2D image information; performing video compression on the image padded geometry 2D image information and color 2D image information and the occupancy map information; and combining compressed video data and compressed added data.</p>
<p id="p0006" num="0006">A method of processing compressed three-dimensional (3D) data, by a data receiving apparatus, according to an embodiment of the present disclosure, includes: separating data received as an input of the receiving apparatus into geometry two-dimensional (2D) image information, compressed color 2D image information, compressed occupancy map information, and compressed added information, with respect to compressed geometry information; performing video decompression on compressed geometry 2D image information, color 2D image information, and occupancy map information; reconstructing geometry 3D data from decompressed data; and reconstructing 3D data including color information.</p>
<p id="p0007" num="0007">A method of decoding three-dimensional (3D) data according to an embodiment of the present disclosure includes: generating a geometry image indicating position information of points, a texture image indicating color information of the points, and an occupancy map indicating occupancy information of the position information of the points<!-- EPO <DP n="3"> --> in the geometry image, by projecting the points included in the 3D data onto a two-dimensional (2D) plane; generating a filtered occupancy map by performing filtering on the occupancy map; performing image padding on the geometry image and the texture image based on the filtered occupancy map; and generating and outputting a bitstream including a padded geometry image, a padded texture image, a downsampled occupancy map, and information about filtering performed on the occupancy map.</p>
<p id="p0008" num="0008">A method of decoding three-dimensional (3D) data according to an embodiment of the present disclosure includes: receiving a bitstream; obtaining, from the bitstream, a texture image, a geometry image, an occupancy map, and filtering information; generating a filtered occupancy map by performing filtering on the occupancy map, based on the filtering information; reconstructing position information of points based on the geometry image and the filtered occupancy map; and reconstructing 3D data by reconstructing color information of the points with reconstructed position information, based on the texture image.</p>
<heading id="h0006">ADVANTAGEOUS EFFECTS OF DISCLOSURE</heading>
<p id="p0009" num="0009">According to the present disclosure, a data transfer rate may be reduced through efficient compression and transmission of three-dimensional data. Accordingly resources may be saved, and storage space, transmission time, hardware costs, and the like may be reduced. Furthermore, according to the present disclosure, a 3D image may be accurately reconstructed by processing data that is compressed and transmitted.</p>
<p id="p0010" num="0010">The effects of the present disclosure are not limited to the above-described effects, and other various effects that are not described may be clearly understood from the following descriptions by one of skill in the art to which the present disclosure belongs.</p>
<heading id="h0007">BRIEF DESCRIPTION OF DRAWINGS</heading>
<p id="p0011" num="0011">
<ul id="ul0001" list-style="none" compact="compact">
<li><figref idref="f0001">FIG. 1</figref> illustrates a system for transceiving three-dimensional data, according to an embodiment.<!-- EPO <DP n="4"> --></li>
<li><figref idref="f0002">FIG. 2</figref> illustrates a two-dimensional image generated by projecting three-dimensional data onto a plane.</li>
<li><figref idref="f0003">FIG. 3</figref> is a flowchart of a method of encoding and transmitting three-dimensional data, according to an embodiment.</li>
<li><figref idref="f0004">FIG. 4</figref> is a block diagram of a three-dimensional data encoding apparatus, according to an embodiment.</li>
<li><figref idref="f0005">FIG. 5</figref> illustrates an occupancy map indicating points projected from source data and an occupancy map corresponding to a case in which occupancy precision is 4.</li>
<li><figref idref="f0006">FIG. 6</figref> illustrates a texture image to which unnecessary information is added due to a downsampled occupancy map.</li>
<li><figref idref="f0007">FIG. 7</figref> illustrates a process of performing oversampling and filtering on an occupancy map, according to an embodiment.</li>
<li><figref idref="f0008">FIG. 8</figref> illustrates an example of a filter used for 2D filtering, according to an embodiment.</li>
<li><figref idref="f0009">FIG. 9</figref> is a block diagram of an apparatus for decoding three-dimensional data, according to an embodiment.</li>
</ul></p>
<heading id="h0008">BEST MODE</heading>
<p id="p0012" num="0012">A method of encoding three-dimensional (3D) data according to an embodiment includes: generating a geometry image indicating position information of points, a texture image indicating color information of the points, and an occupancy map indicating occupancy information of the position information of the points in the geometry image, by projecting the points included in the 3D data onto a two-dimensional (2D) plane; generating a filtered occupancy map by performing filtering on the occupancy map; performing image padding on the geometry image and the texture image, based on the filtered occupancy map; and generating and outputting a bitstream including a padded geometry image, a padded texture image, a downsampled occupancy map, and information about filtering performed on the occupancy map.</p>
<heading id="h0009">MODE OF DISCLOSURE</heading><!-- EPO <DP n="5"> -->
<p id="p0013" num="0013">The terms used in the specification are merely used to describe embodiments, and are not intended to limit the disclosure. An expression used in the singular encompasses the expression of the plural, unless it has a clearly different meaning in the context.</p>
<p id="p0014" num="0014">Unless defined otherwise, all terms used herein including technical or scientific terms have the same meanings as those generally understood by those of ordinary skill in the art to which the disclosure may pertain. The terms as those defined in generally used dictionaries are construed to have meanings matching that in the context of related technology and, unless clearly defined otherwise, are not construed to be ideally or excessively formal.</p>
<p id="p0015" num="0015">The disclosure may be described in terms of functional block components and various processing steps. Such functional blocks may be realized by any number of hardware and/or software components configured to perform the specified functions. For example, the functional blocks of the present disclosure may be implemented by one or more microprocessors, or by circuit configurations for a predetermined function. Furthermore, for example, the functional blocks of the present disclosure may be implemented in various programming or scripting languages. The functional blocks may be implemented as algorithms running on one or more processors. Furthermore, the present disclosure may employ conventional technologies for electronic environment setting, signal processing, and/or data processing, and the like.</p>
<p id="p0016" num="0016">Furthermore, connection lines or connection members between the constituent elements shown in the drawings are merely illustrative of functional connections and/or physical or circuit connections. In an actual device, a connection between the constituent elements may be indicated by various functional connections, physical connections, or circuit connections that can be replaced or added.</p>
<p id="p0017" num="0017">As used herein, "image" may include all of a still image, a video, a video frame, and/or a video stream, and may include both a 2D frame and a 3D frame. For example, "image" may include a 3D frame expressed as a point cloud.</p>
<p id="p0018" num="0018">The term "image" used throughout this specification is not only used as the term "image" itself, but also used as a generic term to describe various types of video or image information that may be known in the related field, such as "picture", "frame", "field" or<!-- EPO <DP n="6"> --> "slice", and the like. For example, "image" may mean one of a plurality of pictures or a plurality of frames, constituting a video stream, and may mean the entire video stream including a plurality of pictures or a plurality of frames.</p>
<p id="p0019" num="0019">Hereinafter, the present disclosure will be described in detail with reference to the accompanying drawings.</p>
<p id="p0020" num="0020">A 2D image may be expressed as a set of pixels having color values. A 3D image may be expressed as a set of voxels having color values. Image data expressed as a set of points (or voxels) having color values in a three-dimensional space is called a point cloud. As a point cloud contains information in a three-dimensional space, the point could is composed of vectors in a dimension one step higher than a 2D image, and has a characteristic of having a larger amount of data. Accordingly, in order to provide the point cloud quickly, accurately, and efficiently to users, research on highly efficient compression technology is being actively conducted.</p>
<p id="p0021" num="0021">The MPEG-I Part 5 Point Cloud Compression (PCC) group of the Moving Picture Experts Group (MPEG), an international standard organization, is in the process of standardizing technologies for point cloud compression. Point cloud compression technology may be classified into various categories according to the characteristics of data. Among various compression technologies, a method of converting a point cloud into a 2D image and compressing the converted 2D image using an existing video compression technology, for example, HEVC and the like, is introduced in the standardization conference.</p>
<p id="p0022" num="0022"><figref idref="f0001">FIG. 1</figref> illustrates a system for transceiving three-dimensional data, according to an embodiment.</p>
<p id="p0023" num="0023">A three-dimensional data communication system according to an embodiment may include a three-dimensional data transmission apparatus 110 and a three-dimensional data receiving apparatus 120. The three-dimensional data transmission apparatus 110 and the three-dimensional data receiving apparatus 120 may be connected through a network, and may transceive three-dimensional data. Three-dimensional data may be converted into two-dimensional data and then compressed to be transmitted to the three-dimensional data receiving apparatus 120 via a network. The three-dimensional data<!-- EPO <DP n="7"> --> receiving apparatus 120 may reconstruct the three-dimensional data based on the received data.</p>
<p id="p0024" num="0024">The three-dimensional data transmission apparatus 110 according to an embodiment may be a three-dimensional image encoding apparatus that encodes three-dimensional data. As illustrated in <figref idref="f0001">FIG. 1</figref>, the three-dimensional data transmission apparatus 110 according to an embodiment may include a processor 111 and a communicator 113. The processor 111 of the three-dimensional data transmission apparatus 110 according to an embodiment may obtain and encode three-dimensional data. The processor 111 of the three-dimensional data transmission apparatus 110 may generate compressed bitstream by processing the three-dimensional data. The communicator 113 of the three-dimensional data transmission apparatus 110 may output a bitstream of compressed information about the three-dimensional data.</p>
<p id="p0025" num="0025">Although <figref idref="f0001">FIG. 1</figref> illustrates that the three-dimensional data transmission apparatus 110 according to an embodiment includes one processor 410, the present disclosure is not limited to the embodiment illustrated in <figref idref="f0001">FIG. 1</figref>. The three-dimensional data transmission apparatus 110 according to an embodiment of the present disclosure may include a plurality of processors, the operations described below may be performed by a plurality of processors.</p>
<p id="p0026" num="0026">The processor 111 of the three-dimensional data transmission apparatus 110 may separate three-dimensional data into geometry information including position information and other attribute information such as a color and the like. For example, when three-dimensional data includes a point cloud image, the processor 111 may separate the three-dimensional data into geometry information indicating position coordinates of points and other attribute information indicating a color.</p>
<p id="p0027" num="0027">The processor 111 may group points by using at least one of proximity between points or geometrical characteristics of points, based on the geometry information. For example, the geometrical characteristics of points may include whether the points belong to the same plane and/or the direction of a normal vector of each point, and the like. The processor 111 may group points included in the three-dimensional data into a plurality of segments.<!-- EPO <DP n="8"> --></p>
<p id="p0028" num="0028">The processor 111 may project the segments onto a 2D plane. Each segment may be projected onto a predefined plane, considering geometry information of a point included in the segment. The processor 111 may generate patches by projecting each of a plurality of segments onto at least one 2D plane.</p>
<p id="p0029" num="0029">The processor 111 may generate a geometry image that a 2D video encoder can process, by combining patches including 2D information projected onto the plane. The processor 111 may generate a geometry image by packing the patches.</p>
<p id="p0030" num="0030">For example, the processor 111 of <figref idref="f0001">FIG. 1</figref> may use a predetermined surface thickness value, to project a point cloud onto a plane. The processor 111 may perform projection only on points having depth values within the predetermined surface thickness value from a surface. The processor 111 may generate a DO image (position information image) by projecting a point located on a surface of an object that a point cloud indicates. The processor 111 may generate the DO image (position information image) by gathering patches indicating depth values of a point located on a surface of an object. The processor 111 may generate a D1 image (thickness information image) by projecting points having the greatest depth value within a preset surface thickness value from a surface. The processor 111 may generate the D1 image (thickness information image) by gathering patches indicating depth values of the points. The processor 111 may not store depth value of a point (in-between point) existing within a preset surface thickness value from a surface of an object.</p>
<p id="p0031" num="0031">A geometry image indicating position information of points included in a point cloud may include the DO image and the D1 image that are described above.</p>
<p id="p0032" num="0032">The processor 111 may compress 2D image information. For example, the processor 111 may compress 2D image information by using existing video compression technologies including HEVC and the like.</p>
<p id="p0033" num="0033">The processor 111 may decompress the compressed 2D geometry image and then reconstruct the decompressed geometry image back to three-dimensional data.</p>
<p id="p0034" num="0034">The processor 111 may generate a texture image with respect to other attributes by a method similar to the method used to generate a geometry image, by using the reconstructed three-dimensional data and other attribute data, for example, color information. For example, like a texture image 201 illustrated in <figref idref="f0002">FIG. 2</figref>, the processor 111<!-- EPO <DP n="9"> --> may generate a texture image indicating color information of points included in a point cloud.</p>
<p id="p0035" num="0035">The processor 111 may output a bitstream including compressed geometry information and compressed other attribute information. The communicator 113 may transmit a bitstream including the compressed geometry information and the compressed other attribute information. The three-dimensional data receiving apparatus 120 according to an embodiment may include a 3D image decoding apparatus for encoding three-dimensional data. As illustrated in <figref idref="f0001">FIG. 1</figref>, the three-dimensional data receiving apparatus 120 according to an embodiment may include a processor 121 and a communicator 123. The three-dimensional data receiving apparatus 120 according to an embodiment may obtain and decode three-dimensional data. In the three-dimensional data receiving apparatus 120, the communicator 123 may receive a bitstream and the processor 121 may reconstruct and output three-dimensional data by processing the bitstream.</p>
<p id="p0036" num="0036">Although <figref idref="f0001">FIG. 1</figref> illustrates that the three-dimensional data receiving apparatus 120 according to an embodiment includes one process as the processor 121, the present disclosure is not limited to the embodiment of <figref idref="f0001">FIG. 1</figref>. The three-dimensional data receiving apparatus 120 according to an embodiment of the present disclosure may include a plurality of processors, and the operations described below may be performed by a plurality of processors.</p>
<p id="p0037" num="0037">The communicator 123 of the three-dimensional data receiving apparatus 120 according to an embodiment may receive a bitstream with compressed three-dimensional data information. For example, the communicator 123 of the three-dimensional data receiving apparatus 120 may receive a bitstream from the three-dimensional data transmission apparatus 110 (or an image encoding apparatus) via a network.</p>
<p id="p0038" num="0038">The processor 121 of the three-dimensional data receiving apparatus 120 according to an embodiment may obtain compressed and encoded three-dimensional data from the received bitstream and decode the obtained data. The processor 121 may generate and output a 3D image (or 3D point cloud data) by reconstructing the encoded three-dimensional data. For example, the processor 121 according to an embodiment may output from a bitstream a 3D image including the reconstructed 3D frames. The<!-- EPO <DP n="10"> --> processor 121 may output a 3D image on a display based on the three-dimensional reconstruction data.</p>
<p id="p0039" num="0039">The processor 121 according to an embodiment may obtain compressed three-dimensional data from a bitstream. The processor 121 may decompress the compressed three-dimensional data. The processor 121 may obtain a geometry image, a texture image, an occupancy map, and auxiliary information, by decompressing data included in a bitstream.</p>
<p id="p0040" num="0040">For example, the processor 121 may include a de-multiplexer (DE-MUX) that obtains, when a bitstream is received, a compressed geometry image, a compressed texture image, a compressed occupancy map, compressed auxiliary information, from a bitstream. The processor 121 may include a decompressor that decompresses pieces of compressed information.</p>
<p id="p0041" num="0041">The processor 121 may generate three-dimensional reconstruction data by reconstructing the geometry image. The processor 121 may generate three-dimensional reconstruction data with points arranged in a three-dimensional space, based on the decompressed geometry image and the decompressed occupancy map.</p>
<p id="p0042" num="0042">The processor 121 may generate and output three-dimensional data based on the three-dimensional reconstruction data and the texture image. The processor 121 may generate three-dimensional data by applying color information of the points included in a texture image to the points included in the three-dimensional reconstruction data. The generated three-dimensional data may be in the form of point cloud.</p>
<p id="p0043" num="0043"><figref idref="f0002">FIG. 2</figref> illustrates a 2D image generated by projecting three-dimensional data onto a plane in the three-dimensional data transmission apparatus 100.</p>
<p id="p0044" num="0044"><figref idref="f0002">FIG. 2</figref> illustrates color 2D image information. In the present disclosure, the geometry 2D image information may include a geometry image indicating position information of points of a point cloud, and the color 2D image information may include a texture image indicating color information of points of a point cloud.</p>
<p id="p0045" num="0045">In the following description, a method of processing 3D data represented in the form of a point cloud according to an embodiment is described with reference to <figref idref="f0003">FIGS. 3</figref> and <figref idref="f0004">4</figref>.<!-- EPO <DP n="11"> --></p>
<p id="p0046" num="0046"><figref idref="f0003">FIG. 3</figref> is a schematic flowchart of a method of processing transmission of a 3D image represented as a point cloud, according to an embodiment of the present disclosure. <figref idref="f0004">FIG. 4</figref> is a block diagram of an encoder for encoding 3D data represented as a point cloud, according to an embodiment of the present disclosure. The three-dimensional data encoding apparatus of <figref idref="f0004">FIG. 4</figref> may be included in the three-dimensional data transmission apparatus 110 of <figref idref="f0001">FIG. 1</figref>. The descriptions of the operation and function performed by the processor 111 of the three-dimensional data transmission apparatus 110 of <figref idref="f0001">FIG. 1</figref> may be applied to the three-dimensional data encoding apparatus of <figref idref="f0004">FIG. 4</figref>. Redundant descriptions are omitted.</p>
<p id="p0047" num="0047">Some or all of the blocks illustrated in <figref idref="f0003">FIGS. 3</figref> and <figref idref="f0004">4</figref> may be implemented with hardware and/or software components that execute specific functions. Functions performed by the blocks illustrated in <figref idref="f0004">FIG. 4</figref> may be implemented by at least one microprocessor included in an electronic device, or may be implemented by circuit components for the corresponding function. Some or all of the blocks illustrated in <figref idref="f0004">FIG. 4</figref> may be a software module including various programming languages or script languages running on a processor.</p>
<p id="p0048" num="0048">According to <figref idref="f0003">FIG. 3</figref>, a method of encoding three-dimensional data may include estimating a normal vector of each point included in a point cloud that is source data (410), generating patches by projecting the points based on the normal vectors (420), packing the generated patches (430), and generating, based on the packed patches, geometry 2D image information, color 2D image information, and an occupancy map having occupancy information indicating the position of a meaningful point in the geometry 2D image information, with respect to geometry information. According to an embodiment, the method of encoding three-dimensional data may include encoding the generated geometry 2D image information, color 2D image information, and geometry 2D image information (440) and transmitting the encoded information (450),</p>
<p id="p0049" num="0049">The patch generation block of <figref idref="f0004">FIG. 4</figref> may project the points included in three-dimensional data onto a 2D plane. The patch generation block may group the points included in three-dimensional data into a plurality of segments, and project the segments onto a 2D plane. The patch generation block may generate patches by projecting each of the segments onto at least one 2D plane.<!-- EPO <DP n="12"> --></p>
<p id="p0050" num="0050">The patch generation block may generate an occupancy map to distinguish an area where points of a pint cloud are projected and an area where points of a pint cloud are not projected, in a 2Dimage projected during a patch generation process.</p>
<p id="p0051" num="0051">The packing block may pack the generated patches.</p>
<p id="p0052" num="0052">A texture image coding block, a depth image coding block, an occupancy map coding block, and an auxiliary information coding block may respectively generate an encoded texture image (or a color information image), a coded geometry image (or a depth image), an encoded occupancy map, and encoded auxiliary information. The geometry image may indicate position information of points, the texture image may indicate color information of points, and the occupancy map may indicate occupancy information of position information of points in the geometry image.</p>
<p id="p0053" num="0053">The occupancy map coding block may perform filtering on the occupancy map and generate a filtered occupancy map. For example, the occupancy map coding block may downsample an occupancy map according to occupancy precision, or perform upsampling and filtering on the downsampled occupancy map.</p>
<p id="p0054" num="0054">An image padding block may perform image padding of filling information about an empty portion in the texture image and the geometry image. The image padding block may perform dilation on the texture image and the geometry image by removing discontinuity between patches to improve compression performance. For example, the image padding block may generate a dilated texture image by performing dilation on an empty portion between patches of a texture image.</p>
<p id="p0055" num="0055">Furthermore, the image padding block may perform image padding on the geometry image and the texture image, based on the occupancy map filtered in the occupancy map coding block.</p>
<p id="p0056" num="0056">A video compression block may compress the 2D image information generated by processing the three-dimensional data.</p>
<p id="p0057" num="0057">The video compression block may compress the padded geometry image, the padded texture image, and the downsampled occupancy map.</p>
<p id="p0058" num="0058">A bitstream multiplexing block may generate and output a bitstream based on the geometry image, the texture image, the occupancy map, and the auxiliary information. The bitstream multiplexing block may generate and output a bitstream including the<!-- EPO <DP n="13"> --> filtering performed on the padded geometry image, the padded texture image, the downsampled occupancy map, and information about filtering performed on the occupancy map.</p>
<p id="p0059" num="0059">As described above, the point cloud may include data indicating position and color of some points in a three-dimensional space. Accordingly, the geometry information and the color information of a point cloud is recorded only on some points in the 2D image generated by projecting points of a point cloud onto a 2D plane.</p>
<p id="p0060" num="0060">Accordingly, as illustrated in <figref idref="f0002">FIG. 2</figref>, geometry 2D image information and color 2D image information with respect to geometry information do not present in all points of the 2D image. Thus, an occupancy map that indicates an area where the points of a point cloud are projected onto a 2D image and an area where the points of a point cloud are not projected onto the 2D image is necessary.</p>
<p id="p0061" num="0061"><figref idref="f0005">FIG. 5</figref> illustrates an occupancy map corresponding to a case in which occupancy precision that is a parameter regarding the occupancy map is 4.</p>
<p id="p0062" num="0062">The occupancy precision represents the resolution of an occupancy map. For example, when the occupancy precision is N, and even one project point exists in a block of horizontally N pixels and vertically N pixels, the entire N × N block may be filled with 1.</p>
<p id="p0063" num="0063">As the occupancy map is data indicating the positions of projected points in the 2D image information, the occupancy map is transmitted by being lossless compressed. Accordingly, to reduce the size of a compressed occupancy map, instead of 1, an N value may be used as an occupancy precision value. When the occupancy precision is N, and even one project point exists in a block of horizontally N pixels and vertically N pixels, a downsampling method of filling the entire N × N block with 1 may be used. Using the N value, instead of 1, as an occupancy precision value may mean that the occupancy map is downsampled to a 1/(N × N) size.</p>
<p id="p0064" num="0064">As illustrated in <figref idref="f0005">FIG. 5</figref>, when the N value, instead of 1, is used as an occupancy precision value, the number of projected points represented by the occupancy map may increase. For example, (a) of <figref idref="f0005">FIG. 5</figref> illustrates an occupancy map indicating points projected from source data. The occupancy precision of the occupancy map illustrated in (a) of <figref idref="f0005">FIG. 5</figref> is 1. The occupancy map of (a) of <figref idref="f0005">FIG. 5</figref> shows 30 projected points. (b) of<!-- EPO <DP n="14"> --> <figref idref="f0005">FIG. 5</figref> illustrates an occupancy map generated when occupancy precision is 4. The occupancy map of (b) of <figref idref="f0005">FIG. 5</figref> shows 96 projected points.</p>
<p id="p0065" num="0065">Accordingly, as the number of projected points shown in an occupancy map increases, the compression sizes of geometry 2D image information and color 2D image information reflecting the occupancy map increase as well. In other words, when occupancy precision is not 1, the compression size of an occupancy map decreases, but the compression sizes of 2D image information and color 2D image information with respect to geometry information increase.</p>
<p id="p0066" num="0066"><figref idref="f0006">FIG. 6</figref> illustrates a texture image to which unnecessary information is added by a downsampled occupancy map. An image 801 of <figref idref="f0006">FIG. 6</figref> illustrates a texture image to which an occupancy map having occupancy precision of 1 is applied. An image 802 illustrates a texture image to which an occupancy map having occupancy precision of 4 is applied. As shown by a circular portion in each of the image 801 and the image 802 of <figref idref="f0006">FIG. 6</figref>, when occupancy precision is not 1, unnecessary information may be added to the texture image.</p>
<p id="p0067" num="0067">Accordingly, according to an embodiment of the present disclosure, when an occupancy precision value is not 1 (that is, when it is a low-resolution occupancy map), a method of removing an added point by filtering (or estimating) an occupancy map to be a high-resolution occupancy map, which is similar to an occupancy map having a precision value of 1, is proposed. According to an embodiment of the present disclosure, without changing the compression size of an occupancy map, the number of points represented by an occupancy map may be reduced. Accordingly, the compression sizes of the 2D image information and the color 2D image information with respect to geometry information may be reduced.</p>
<p id="p0068" num="0068"><figref idref="f0007">FIG. 7</figref> illustrates two-time upsampling (or oversampling) and 2D filtering of an occupancy map, used in a method of encoding three-dimensional data, according to an embodiment of the present disclosure. An occupancy precision value is set to a value of 2(N-1) such as 1, 2, 4, 8, and the like. N is 0 and a positive integer.</p>
<p id="p0069" num="0069">According to an occupancy precision value, the two-time upsampling and the 2D filtering illustrated in <figref idref="f0007">FIG. 7</figref> may be repeated.<!-- EPO <DP n="15"> --></p>
<p id="p0070" num="0070">For example, when geometry 2D image information and color 2D image information have an image size of 1280×1280, the size of an occupancy map having an occupancy precision value of 4 is an image size of 320×320 that is horizontally 1 /4 times and vertically 1/4 times. According to the method of encoding three-dimensional data according to an embodiment, when an occupancy precision value is 4, an occupancy map having an image size of 640×640 may be generated through the first two-time upsampling and 2D filtering, and an occupancy map having an image size of 1280×1280 may be generated through the second two-time upsampling and 2D filtering with respect to the generated occupancy map.</p>
<p id="p0071" num="0071">The filtering performed in <figref idref="f0007">FIG. 7</figref> may have the following conditions.</p>
<p id="p0072" num="0072">In the case when an output value of filtering is a threshold or less, the output value may be changed to 0 when an original value is 1, and may maintain 0 when the original value is 0. In the case when the output value of filtering is a threshold or more, the output value may maintain 1 when the original value is 1, and may maintain 0 when the original value is 0. In other words, according to an embodiment of the present disclosure, in performing 2D filtering on an upsampled occupancy map, an area having a value of 0 of the upsampled occupancy map may maintain the value of 0, regardless of a filtering result.</p>
<p id="p0073" num="0073">Furthermore, the upsampling may be performed by one step, not through multiple steps. In the above description, instead of a method of reconstructing the map to the original through two steps of 1/4 times and 1/2 times, a method of directly expanding the horizontal and vertical sizes by 4 times is possible. In this state, a smoothing filter for removing noise may be employed before and after reconstruction, and the smoothing filter may be calculated using a pixel value and a weighted average of nearby pixel values. The nearby pixel values used to remove noise may be determined by defining in advance a range of nearby pixel values, or by adaptively differing the size of a nearby area according to the structure of a content.</p>
<p id="p0074" num="0074">The filter of <figref idref="f0008">FIG. 8</figref> may include a 2D filter used for 2D filtering with respect to the occupancy map according to an embodiment of the present disclosure. The size and value of a filter may be defined in advance or adaptively changed according to a content. For example, in performing 2D filtering, a method of newly updating a pixel value by<!-- EPO <DP n="16"> --> calculating a weighted average based on a pixel value and nearby pixel values may be used.</p>
<p id="p0075" num="0075">An occupancy map filtering operation may be identically performed in a transmitter (or a three-dimensional data encoding apparatus) and a receiver (or a three-dimensional data decoding apparatus). To perform the same filtering on an occupancy map in each of a transmitter and a receiver, the following parameters may be used. A three-dimensional data encoding apparatus may transmit the following parameters together when encoding and transmitting three-dimensional data.
<ul id="ul0002" list-style="dash" compact="compact">
<li>occupancy_map_filtering_flag</li>
<li>occupancy_map_filtering_number</li>
<li>occupancy_map_filtering_threshold</li>
</ul></p>
<p id="p0076" num="0076">The occupancy_map_filtering_flag indicates whether to undergo a process of two-time upsampling and 2D filtering when compressing and transmitting an occupancy map. The occupancy_map_filtering_number indicates the number of performing the two-time upsampling and 2D filtering process. The occupancy_map_filtering_threshold may indicate a discriminant value used in 2D filtering.</p>
<p id="p0077" num="0077">The occupancy map coding block of <figref idref="f0004">FIG. 4</figref>, which indicates an encoder, may perform a downsampling process on an occupancy map in units of blocks according to occupancy precision, after padding is generated. A downsampled occupancy map may be compressed by a video encoder such as HEVC. The occupancy map coding block may generate an occupancy map filtered through the two-time upsampling and 2D filtering on the downsampled occupancy map, and transfer a filtered occupancy map to an image padding block. The transferred filtered occupancy map may be used for image padding. The use of the two-time upsampling and 2D filtering may be recorded in the occupancy_map_filtering_flag.</p>
<p id="p0078" num="0078">At this time, the value of occupancy_map_filtering_number is determined according to the number of performing the two-time upsampling and 2D filtering. When the occupancy_map_filtering_flag does not instruct use of the two-time upsampling and 2D filtering process, the two-time upsampling and 2D filtering process is not performed.</p>
<p id="p0079" num="0079">In <figref idref="f0009">FIG. 9</figref> illustrating a decoder, when the occupancy_map_filtering_flag instructs use of the two-time upsampling and 2D filtering process with respect to a decoded<!-- EPO <DP n="17"> --> occupancy map, a video decompression block may perform the two-time upsampling and 2D filtering on the decoded occupancy map. A filtered occupancy map generated by performing the two-time upsampling and 2D filtering is transferred to a geometry reconstruction block. At this time, the number of performing the two-time upsampling and 2D filtering is determined according to a value of the occupancy_map_filtering_number.</p>
<p id="p0080" num="0080">In the process of performing 2D filtering on an occupancy map in the encoder and the decoder, the value 0 and the value 1 may be determined according to a value of the occupancy_map_filtering_threshold.</p>
<p id="p0081" num="0081">According to an embodiment of the present disclosure, whether to perform 2D filtering with a patch unit may be determined. The three-dimensional data encoding apparatus according to an embodiment of the present disclosure may perform upsampling or upsampling and 2D filtering in units of patches included in a downsampled occupancy map, not the entire downsampled occupancy map.</p>
<p id="p0082" num="0082">The three-dimensional data encoding apparatus according to an embodiment of the present disclosure may determine whether to perform 2D filtering based on the size of a patch or the number of 1's included in a patch. When the size of a patch or the number of 1's included in a patch is small, it is highly likely that the patch represents a very complex shape. Accordingly, in the case of a small patch with a complex shape, when upsampling and 2D filtering is performed on an occupancy map, it is highly likely to obtain an output that is completely different from the original.</p>
<p id="p0083" num="0083">Accordingly, only when the size of a patch or the number of 1's included in a patch is a threshold or more, the three-dimensional data encoding apparatus according to an embodiment of the present disclosure may perform upsampling and 2D filtering on a downsampled occupancy map. When the size of a patch or the number of 1's included in a patch is less than the threshold, the three-dimensional data encoding apparatus may perform only upsampling on the downsampled occupancy map.</p>
<p id="p0084" num="0084">Furthermore, the three-dimensional data encoding apparatus according to an embodiment of the present disclosure may perform upsampling and 2D filtering, step by step, according to the size of a patch or the number of 1's included in a patch.</p>
<p id="p0085" num="0085">For example, in the case when the occupancy precision of the three-dimensional data encoding apparatus is 4, when the size of a patch or the number of 1's included in a<!-- EPO <DP n="18"> --> patch is a first threshold or more, the three-dimensional data encoding apparatus may perform two-time upsampling and 2D filtering on a four-time downsampled occupancy map. When the size of a patch or the number of 1's included in a patch is less than the first threshold, three-dimensional data encoding apparatus may perform only two-time upsampling on the four-time downsampled occupancy map. When the size of a patch or the number of 1's included in a patch is a second threshold or more, the three-dimensional data encoding apparatus may perform two-time upsampling and 2D filtering on an occupancy map that is four-time downsampled and then two-time upsampled. When the size of a patch or the number of 1's included in a patch is less than the first threshold, the three-dimensional data encoding apparatus may perform only two-time upsampling on the occupancy map that is four-time downsampled and then two-time upsampled.</p>
<p id="p0086" num="0086"><figref idref="f0009">FIG. 9</figref> is a block diagram of a decoder for decoding three-dimensional data represented as a point cloud, according to an embodiment of the present disclosure. The three-dimensional data decoding apparatus of <figref idref="f0009">FIG. 9</figref> may be included in the three-dimensional data receiving apparatus 120 of <figref idref="f0001">FIG. 1</figref>. The descriptions of the operation and function performed by the processor 121 of the three-dimensional data receiving apparatus 120 of <figref idref="f0001">FIG. 1</figref> may be applied to the three-dimensional data decoding apparatus of <figref idref="f0009">FIG. 9</figref>. Redundant descriptions are omitted.</p>
<p id="p0087" num="0087">Some or all of the blocks illustrated in <figref idref="f0009">FIG. 9</figref> may be implemented with hardware and/or software components that execute specific functions. Functions performed by the blocks illustrated in <figref idref="f0009">FIG. 9</figref> may be implemented by at least one microprocessor included in an electronic device, or by circuit components for the corresponding function. Some or all of the blocks illustrated in <figref idref="f0009">FIG. 9</figref> may be a software module including various programming languages or script languages running on a processor.</p>
<p id="p0088" num="0088">A de-multiplexing block of <figref idref="f0009">FIG. 9</figref> may receive a bitstream and obtain, from the bitstream, a texture image, a geometry image, an occupancy map, and filtering information. The filtering information may include information about filtering performed by an encoder on an occupancy map. For example, the auxiliary information may include at least one of the occupancy_map_filtering_flag, the occupancy_map_filtering_number, or the occupancy_map_filtering_threshold.<!-- EPO <DP n="19"> --></p>
<p id="p0089" num="0089">The de-multiplexing block of <figref idref="f0009">FIG. 9</figref> may receive a bitstream and obtain, from the bitstream, a compressed geometry image, a compressed texture image, a compressed occupancy map, and compressed auxiliary information. The auxiliary information may include information about filtering performed by an encoder on an occupancy map.</p>
<p id="p0090" num="0090">A video decompression block may decompress pieces of compressed information.</p>
<p id="p0091" num="0091">The video decompression block may generate a filtered occupancy map by performing filtering on an occupancy map based on the filtering information. For example, the video decompression block may perform upsampling and filtering on an occupancy map.</p>
<p id="p0092" num="0092">A geometry reconstruction block may generate three-dimensional reconstruction data by reconstructing geometry information of points, based on the decompressed geometry image and the decompressed occupancy map. The geometry reconstruction block may reconstruct position information of points, based on the geometry image and the filtered occupancy map.</p>
<p id="p0093" num="0093">A texture reconstruction block may generated and output three-dimensional data, based on the three-dimensional reconstruction data and the texture image. The texture reconstruction block may reconstruct three-dimensional data by reconstructing color information of points with reconstructed position information. The texture reconstruction block may generate three-dimensional data by applying the color information of the points included in a texture image to the points included in the three-dimensional reconstruction data. The generated three-dimensional data may be in the form of a point cloud.</p>
<p id="p0094" num="0094">The disclosed embodiments may be implemented by an S/W program including instructions stored in computer-readable storage media.</p>
<p id="p0095" num="0095">A computer, as a device capable of calling the stored instructions from a storage medium and performing operations according to the disclosed embodiments according to the called instructions, may include a terminal device and a remote control device according to the disclosed embodiments.</p>
<p id="p0096" num="0096">The computer-readable storage media may be provided in the form of non-transitory storage media. Here, "non-transitory" merely means that the storage medium does not contain signals and are tangible, but do not distinguish data being semi-permanently or temporarily stored in the storage medium.<!-- EPO <DP n="20"> --></p>
<p id="p0097" num="0097">Furthermore, electronic apparatuses or methods according to the disclosed embodiments may be provided included in computer program products. A computer program product as goods may be dealt between a seller and a buyer.</p>
<p id="p0098" num="0098">A computer program product may include an S/W program or a computer-readable storage medium where the S/W program is stored. For example, a computer program product may include a product in the form of an S/W program, for example, a downloadable application, that is electronically distributed through a manufacturer of a broadcast receiving device or an electronic market, for example, Google PlayStore or AppStore. For electronic distribution, at least part of an S/W program may be stored in a storage medium or temporarily generated. In this case, a storage medium may be a manufacturer's server, an electronic market's server, or a storage medium of a relay server that temporarily stores a SW program.</p>
<p id="p0099" num="0099">A computer program product may include a server's storage medium or a client device's storage medium in a system including a server and a client device. Alternatively, when there is a third device, for example, a smartphone, communicatively connected to a server or a client device, the computer program product may include a storage medium of the third device. Alternatively, a computer program product may include an S/W program that is transmitted from a server to a client device or a third device, or from the third device to the client device.</p>
<p id="p0100" num="0100">In this case, server, any one of the client device and the third device may perform a method according to the disclosed embodiments by executing the computer program product. Alternatively, two or more of the server, the client device, and the third device may perform, in a distribution manner, the method according to the disclosed embodiments by executing the computer program product.</p>
<p id="p0101" num="0101">For example, a server, for example, a cloud server or an artificial intelligent server, and the like, executes a computer program product stored in the server, so that the client device communicatively connected to the server may be controlled to perform the method according to the disclosed embodiments.</p>
<p id="p0102" num="0102">As another example, a third device executes a computer program product, so that a terminal connected to communication with the third device may control to perform the method according to the disclosed embodiment. In a detailed example, the third device<!-- EPO <DP n="21"> --> may remotely control a terminal device or a remote control device to transmit or receive a packing image.</p>
<p id="p0103" num="0103">When the third device executes the computer program product, the third device may download the computer program product from the server, and execute the downloaded computer program product. Alternatively, the third device may execute the computer program product provided in a preloaded state to perform the method according to the disclosed embodiments.</p>
</description>
<claims id="claims01" lang="en"><!-- EPO <DP n="22"> -->
<claim id="c-en-0001" num="0001">
<claim-text>A method of encoding three-dimensional (3D) data, the method comprising:
<claim-text>generating a geometry image indicating position information of points, a texture image indicating color information of the points, and an occupancy map indicating occupancy information of the position information of the points in the geometry image, by projecting the points included in the 3D data onto a two-dimensional (2D) plane;</claim-text>
<claim-text>generating a filtered occupancy map by performing filtering on the occupancy map;</claim-text>
<claim-text>performing image padding on the geometry image and the texture image, based on the filtered occupancy map; and</claim-text>
<claim-text>generating and outputting a bitstream including a padded geometry image, a padded texture image, a downsampled occupancy map, and information about the filtering performed on the occupancy map.</claim-text></claim-text></claim>
<claim id="c-en-0002" num="0002">
<claim-text>The method of claim 1, wherein the generating of the occupancy map comprises downsampling an occupancy map based on occupancy precision N.</claim-text></claim>
<claim id="c-en-0003" num="0003">
<claim-text>The method of claim 2, wherein, in the downsampling, when there is a projected point in a predetermined N * N pixel block, an entire area of the predetermined N * N pixel block of the occupancy map is filled with 1.</claim-text></claim>
<claim id="c-en-0004" num="0004">
<claim-text>The method of claim 1, wherein the generating of the filtered occupancy map comprises upsampling the occupancy map based on occupancy precision N.</claim-text></claim>
<claim id="c-en-0005" num="0005">
<claim-text>The method of claim 4, wherein the generating of the filtered occupancy map further comprises performing 2D filtering on the upsampled occupancy map.</claim-text></claim>
<claim id="c-en-0006" num="0006">
<claim-text>The method of claim 5, wherein, in the generating of the filtered occupancy map, whether to perform the 2D filtering is determined based on at least one of a size of an occupancy map patch or a number of 1's included in the occupancy map patch.<!-- EPO <DP n="23"> --></claim-text></claim>
<claim id="c-en-0007" num="0007">
<claim-text>The method of claim 1, wherein the filtered occupancy map is generated in units of patches.</claim-text></claim>
<claim id="c-en-0008" num="0008">
<claim-text>An apparatus for encoding three-dimensional (3D) data, the apparatus comprising:
<claim-text>a memory;</claim-text>
<claim-text>a communicator; and</claim-text>
<claim-text>at least one processor,</claim-text>
<claim-text>wherein the at least one processor is configured to:
<claim-text>generate a geometry image indicating position information of points, a texture image indicating color information of the points, and an occupancy map indicating occupancy information of the position information of the points in the geometry image, by projecting the points included in the 3D data onto a two-dimensional (2D) plane;</claim-text>
<claim-text>generate a filtered occupancy map by performing filtering on the occupancy map;</claim-text>
<claim-text>perform image padding on the geometry image and the texture image, based on the filtered occupancy map; and</claim-text>
<claim-text>generate and output a bitstream including a padded geometry image, a padded texture image, a downsampled occupancy map, and information about the filtering performed on the occupancy map.</claim-text></claim-text></claim-text></claim>
<claim id="c-en-0009" num="0009">
<claim-text>A method of decoding three-dimensional (3D) data, the method comprising:
<claim-text>receiving a bitstream;</claim-text>
<claim-text>obtaining, from the bitstream, a texture image, a geometry image, an occupancy map, and filtering information;</claim-text>
<claim-text>generating a filtered occupancy map by performing filtering on the occupancy map, based on the filtering information;</claim-text>
<claim-text>reconstructing position information of points based on the geometry image and the filtered occupancy map; and<!-- EPO <DP n="24"> --></claim-text>
<claim-text>reconstructing 3D data by reconstructing color information of points with reconstructed position information, based on the texture image.</claim-text></claim-text></claim>
<claim id="c-en-0010" num="0010">
<claim-text>An apparatus for decoding three-dimensional (3D) data, the apparatus comprising:
<claim-text>a memory;</claim-text>
<claim-text>a communicator; and</claim-text>
<claim-text>at least one processor,</claim-text>
<claim-text>wherein the at least one processor is configured to:
<claim-text>receive a bitstream;</claim-text>
<claim-text>obtain, from the bitstream, a texture image, a geometry image, an occupancy map, and filtering information,</claim-text>
<claim-text>generate a filtered occupancy map by performing filtering on the occupancy map based on the filtering information;</claim-text>
<claim-text>reconstruct position information of points based on the geometry image and the filtered occupancy map, and</claim-text>
<claim-text>reconstruct 3D data by reconstructing color information of points with reconstructed position information, based on the texture image.</claim-text></claim-text></claim-text></claim>
<claim id="c-en-0011" num="0011">
<claim-text>A computer program product comprising one or more computer readable recording media having stored therein a program to perform the method of claim 1.</claim-text></claim>
</claims>
<drawings id="draw" lang="en"><!-- EPO <DP n="25"> -->
<figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="163" he="99" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> -->
<figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="138" he="155" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> -->
<figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="124" he="137" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> -->
<figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="144" he="207" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> -->
<figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="117" he="194" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> -->
<figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="161" he="120" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> -->
<figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="115" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> -->
<figure id="f0008" num="8"><img id="if0008" file="imgf0008.tif" wi="73" he="86" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> -->
<figure id="f0009" num="9"><img id="if0009" file="imgf0009.tif" wi="140" he="233" img-content="drawing" img-format="tif"/></figure>
</drawings>
<search-report-data id="srep" lang="en" srep-office="EP" date-produced=""><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="157" he="233" type="tif"/></search-report-data>
</ep-patent-document>
