<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP20315104A1" file="EP20315104NWA1.xml" lang="en" country="EP" doc-number="3890244" kind="A1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="en"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSKBAHRIS..MTNORSMESMMAKHTNMD..........</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  1100000/0</B007EP></eptags></B000><B100><B110>3890244</B110><B120><B121>EUROPEAN PATENT APPLICATION</B121></B120><B130>A1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>20315104.8</B210><B220><date>20200403</date></B220><B250>en</B250><B251EP>en</B251EP><B260>en</B260></B200><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20211006</date><bnum>202140</bnum></B430></B400><B500><B510EP><classification-ipcr sequence="1"><text>H04L  12/24        20060101AFI20200825BHEP        </text></classification-ipcr><classification-ipcr sequence="2"><text>H04L  12/26        20060101ALN20200825BHEP        </text></classification-ipcr><classification-ipcr sequence="3"><text>H04L  29/08        20060101ALN20200825BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>H04L  41/5019      20130101 LI20200819BHEP        </text></classification-cpc><classification-cpc sequence="2"><text>H04L  41/0823      20130101 LI20200819BHEP        </text></classification-cpc><classification-cpc sequence="3"><text>H04L  41/5009      20130101 FI20200819BHEP        </text></classification-cpc><classification-cpc sequence="4"><text>H04L  41/147       20130101 LA20200819BHEP        </text></classification-cpc><classification-cpc sequence="5"><text>H04L  41/145       20130101 LA20200819BHEP        </text></classification-cpc><classification-cpc sequence="6"><text>H04L  67/10        20130101 LA20201116BHEP        </text></classification-cpc><classification-cpc sequence="7"><text>H04L  43/08        20130101 LA20200819BHEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>VERFAHREN ZUR BEREITSTELLUNG VON MULTISITE-ORCHESTRIERUNG IN EINEM ÖFFENTLICHEN NETZWERK FÜR DIE FABRIKAUTOMATISIERUNG</B542><B541>en</B541><B542>METHOD FOR PROVIDING MULTI-SITE ORCHESTRATION IN A PUBLIC NETWORK FOR FACTORY AUTOMATION</B542><B541>fr</B541><B542>PROCÉDÉ DE FOURNITURE D'ORCHESTRATION MULTI-SITE DANS UN RÉSEAU PUBLIC POUR L'AUTOMATISATION D'USINE</B542></B540><B590><B598>3</B598></B590></B500><B700><B710><B711><snm>Mitsubishi Electric R&amp;D Centre Europe B.V.</snm><iid>101108760</iid><irf>MM/191302ATO</irf><adr><str>Capronilaan 46</str><city>1119 NS  Schiphol Rijk Amsterdam</city><ctry>NL</ctry></adr><B716EP><ctry>FR</ctry></B716EP></B711><B711><snm>Mitsubishi Electric Corporation</snm><iid>101843950</iid><irf>MM/191302ATO</irf><adr><str>7-3, Marunouchi 2-chome 
Chiyoda-ku</str><city>Tokyo 100-8310</city><ctry>JP</ctry></adr><B716EP><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B716EP></B711></B710><B720><B721><snm>Khanfouci, Mourad</snm><adr><str>C/ Mitsubishi Electric R&amp;D Centre Europe 1 Alléede
Beaulieu - CS10806</str><city>35708 Rennes Cedex 7</city><ctry>FR</ctry></adr></B721></B720><B740><B741><snm>Plasseraud IP</snm><iid>101568050</iid><adr><str>66, rue de la Chaussée d'Antin</str><city>75440 Paris Cedex 09</city><ctry>FR</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840><B844EP><B845EP><ctry>BA</ctry></B845EP><B845EP><ctry>ME</ctry></B845EP></B844EP><B848EP><B849EP><ctry>KH</ctry></B849EP><B849EP><ctry>MA</ctry></B849EP><B849EP><ctry>MD</ctry></B849EP><B849EP><ctry>TN</ctry></B849EP></B848EP></B800></SDOBI>
<abstract id="abst" lang="en">
<p id="pa01" num="0001">A method for providing multi-site orchestration in a public network for factory automation, wherein the public network provides communication and computing functionality to a plurality sites which are configured to communicate with each other by the means of slice of the public network, the method comprising:<br/>
- building a multi-site orchestration model based on initial performance of the communication between different sites;<br/>
- determining choreography opportunities between the different sites by using the multi-site orchestration model;<br/>
- triggering choreography between the different sites;<br/>
- evaluating the performance of the choreography between the different sites and updating the multi-site orchestration model.
<img id="iaf01" file="imgaf001.tif" wi="67" he="97" img-content="drawing" img-format="tif"/></p>
</abstract>
<description id="desc" lang="en"><!-- EPO <DP n="1"> -->
<heading id="h0001">FIELD OF INVENTION</heading>
<p id="p0001" num="0001">The present invention relates to network orchestration for multi-site orchestration for factory automation, especially to method for providing multi-site orchestration in a public network for factory automation</p>
<heading id="h0002">BACKGROUND</heading>
<p id="p0002" num="0002">Resources provisioning for the communication between multiple sites of a factory or disseminated between different factories is adapted for the factory automation. Usually, the resources provisioning is obtained from a public operator, such as Public Land Mobile Network (PLMN), through the deployment of a dedicated low cost network slice for factory automation communications.</p>
<p id="p0003" num="0003">In the art, the multi-site orchestration is used to establish/release communications in this network slice. This establishment and release of communications is based on slice usage in terms of bandwidth and computational resources usage metrics that are obtained from the PLMN.</p>
<p id="p0004" num="0004">In particular, a general resource provisioning problem has been presented as a solution of three coordinated optimization problems. These optimization problems are coordinated by the resources usage indication (routing/computation resources) that are defined as slice costs. Detailed problems are defined in the following:
<ol id="ol0001" ol-style="">
<li>A. The slice owner optimization problem: where the slice throughput demand (in bandwidth) is obtained through utility maximization optimization problem that uses<!-- EPO <DP n="2"> --> the slice routing and congestion costs and computation usage costs as parameters. The same utility function is used for the different sites.</li>
<li>B. The cloud owner optimization problem: where the computation resources that are needed to support the virtual functions (VNF) that are required for the communication between the sites and the path between the different VNF as well as the cloud usage costs is provided by the cloud owner. These resources are proportional to PLMN slice bandwidth. This problem outputs the slice computation costs to the slice owner optimization problem and uses the routing and congestion costs as inputs.</li>
<li>C. The network owner optimization problem: where the routing and the slice costs are found by the network owner in order to route different flows for the communication between the sites in the slice. This network owner optimization problem obtains the slice congestion costs to inform the slice owner and cloud provider of the capabilities of the network.</li>
</ol></p>
<p id="p0005" num="0005">The slice routing and congestion costs are provided by the solution of the optimization problem (C) represent the possibility of the network to achieve the slice owner demand requirements setup by the problem (A), the cloud owner optimization requirements that are obtained by solving the problem (B). The costs are high if the requirements are not achieved and the costs are low otherwise. The general view of multisite allocation in the state of the art as a solution to slice resource allocation problem is summarized in <figref idref="f0001">Figure 1</figref> illustrating a multi-site orchestration architecture in the art.</p>
<p id="p0006" num="0006">In the context shown in <figref idref="f0001">Figure 1</figref>, two sites, S1 and S2, from a company want to communicate using a slice <i>i</i> of the public network PLMN, noted as P1 in <figref idref="f0001">Figure 1</figref>. The steps of this communication establishment are the following:
<ol id="ol0002" ol-style="">
<li>1) The multi-site orchestrator MO transmits to the software defined network (SDN) controller, the bandwidth demand of the communication between sites S1 and S2. The demand is both in terms of throughput and latency.</li>
<li>2) The SDN controller solves the slice routing problem for the communication between the sites S1 and S2 and transmits routing decisions and slice costs to the cloud controller CC and to the multi-site orchestrator MO, noted as P2 in <figref idref="f0001">Figure 1</figref>.<!-- EPO <DP n="3"> --> The slice costs transmitted by the SDN controller are essentially related to the achievement of the throughput demand of the slice.</li>
<li>3) The cloud controller CC provision computation resources based on the routing decisions of the SDN controller by the means of allocating virtual functions for the slice in order to ensure the latency requirements of the slice, noted as P3 in <figref idref="f0001">Figure 1</figref>. The cloud controller CC transmits the computation cost of the slice, i.e. to what extent the latency requirement of the slice is fulfilled, noted as P4 in <figref idref="f0001">Figure 1</figref>.</li>
<li>4) The multi- site orchestrator MO receives the routing decisions and costs (routing and computation costs) and adjusts the slice demands to adapt the best to the current situation in the network, noted as P5 in <figref idref="f0001">Figure 1</figref>.</li>
</ol></p>
<p id="p0007" num="0007">Therefore, in the state of the art, virtual paths establishment and slice resource provisioning are presented and applied for communication between the sites, i.e. the problem is viewed as a periodic and reconfigurable slices design for the multi-site operation based on the slice provided by the PLMN.</p>
<p id="p0008" num="0008">However, one drawback of the above mentioned approach is the latency of the orchestration, since the multisite orchestrator receives information from the sites and determines the transmission policy between the different sites. In addition, back and forth signaling between the sites and the multisite orchestrator will also introduce signaling overhead in the network.</p>
<p id="p0009" num="0009">Moreover, another drawback is that the multi-site orchestrator complexity in the art is high, since the orchestrator in the art should also decide the transmission strategy and the demand in terms of throughput and computation of the sites.</p>
<p id="p0010" num="0010">The invention aims to improve these drawbacks.</p>
<heading id="h0003">SUMMARY</heading>
<p id="p0011" num="0011">In this regard, according to one aspect of the invention, it is provided a method for providing multi-site orchestration in a public network for factory automation, wherein the public network provides communication and computing functionality to a<!-- EPO <DP n="4"> --> plurality sites which are configured to communicate with each other by the means of network slice of the public network, the method comprising:
<ul id="ul0001" list-style="dash">
<li>building a multi-site orchestration model based on initial performance of the communication between different sites;</li>
<li>determining choreography opportunities between the different sites by using the multi-site orchestration model;</li>
<li>triggering chorography between the different sites; and</li>
<li>evaluating the performance of the chorography between the different sites and updating the multi-site orchestration model.</li>
</ul></p>
<p id="p0012" num="0012">With such an arrangement, the present invention may combine the centralized orchestration with distributed orchestration that relies on the distributed provisioning of the edge cloud resources through the multi-site orchestrator a model of the network that is maintained in the multi-site orchestrator, so as to minimize the latency of the orchestration process.</p>
<p id="p0013" num="0013">In an embodiment, before building the multi-site orchestration model, the method according to the present invention further comprises: initiating an initial orchestration so as to identify a coarse initial model, based on which the multi-site orchestration model is built.</p>
<p id="p0014" num="0014">Furthermore, the initial orchestration is a proportional faire orchestration, with which each site communicates with its neighboring sites with the same data packet bandwidth.</p>
<p id="p0015" num="0015">Moreover, the multi-site orchestration model contains a representation or abstraction of sites and of the communication conditions between the sites.</p>
<p id="p0016" num="0016">Alternatively, the multi-site orchestration model includes a graph which contains nodes representing the sites and edges between pair of nodes representing communication or processing capabilities between the nodes.</p>
<p id="p0017" num="0017">Alternatively, the multi-site orchestration model includes a model for the demand of the sites, for example, expressed in terms of utility of the communication between the sites.<!-- EPO <DP n="5"> --></p>
<p id="p0018" num="0018">Alternatively, the multi-site orchestration model includes a model for the congestion of the communication between the sites, for example, expressed in terms of congestion costs.</p>
<p id="p0019" num="0019">Alternatively, wherein the multi-site orchestration model includes a site ranking that is based on specific flow transmission that is based on a random walk of packets between the sites and a stochastic matrix.</p>
<p id="p0020" num="0020">Alternatively, the multi-site orchestration model includes a database of sites adapted to perform orchestration with relevant attributes.</p>
<p id="p0021" num="0021">Alternatively, the initial performance of the public network is obtained by periodic monitoring of network state, throughput, packet errors, and/or delay. In addition, the step of determining choreography opportunities between different sites by using the multi-site orchestration model is processed based on error between predicted performance from the multi-site orchestration model and the measured traffic performance or through topological criteria that are obtained from the multi-site orchestration model.</p>
<p id="p0022" num="0022">In this regard, in the present invention, a flexible model based multi-site orchestration with reduced latency triggers orchestration in some conditions determined from the network monitoring. Local orchestration is determined when needed in order to minimize the latency and optimize the QoS of the orchestration. These local choreography are used to enrich the model used for multi-site orchestration.</p>
<p id="p0023" num="0023">In yet another embodiment, the step of triggering chorography between the different sites comprises setting up an edge cloud between the different sites participating to the choreography and starting to exchange information between the different sites.</p>
<p id="p0024" num="0024">In yet another embodiment, during the step of evaluating the performance of the chorography between the different sites and updating the multi-site orchestration model comprises monitoring the public network.</p>
<p id="p0025" num="0025">The abovementioned alternative features can be combined with each other, unless they are not compatible.<!-- EPO <DP n="6"> --></p>
<p id="p0026" num="0026">According to another aspect of the invention, it is further provided an orchestrator for providing multi-site orchestration in a public network for factory automation, wherein the public network contains a plurality sites which are configured to communicate with each other by slice of the public network, being configured to:
<ul id="ul0002" list-style="dash">
<li>build a multi-site orchestration model based on initial performance of the public network;</li>
<li>determine choreography opportunities between different sites by using the multi-site orchestration model;</li>
<li>trigger chorography between the different sites; and</li>
<li>evaluate the performance of the chorography between the different sites and update the multi-site orchestration model.</li>
</ul></p>
<p id="p0027" num="0027">According to yet another aspect of the invention, it is further provided a communication system for factory automation, comprising the above mentioned orchestrator.</p>
<p id="p0028" num="0028">In this regard, the present invention proposes a cognitive model based multi-site orchestration where the multi-site orchestrator maintains a model of the orchestration process between the different sites of the factory based on the received throughputs, latency, packet error rates or other various network radio metrics. These metrics are obtained through a continuous monitoring of the communication through the slice provided by the network. In other words, in the present invention, the multi-site orchestrator determines orchestration opportunities and local orchestration (choreography) opportunities and trigger in order to minimize the latency and improve the QoS of the system. The choreography step enrich the multi-site orchestration model.</p>
<p id="p0029" num="0029">Therefore, compared with standard model based orchestration in the art, the present invention provides more flexibility, since it can start with a coarse model and adjust the model in order to improve the orchestration performance and reduce its overall signaling and complexity.<!-- EPO <DP n="7"> --></p>
<heading id="h0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p0030" num="0030">Other features and advantages of the present invention will appear in the description hereinafter, in reference to the appended drawings, where:
<ul id="ul0003" list-style="none">
<li><figref idref="f0001">Figure 1</figref> illustrates a multi-site orchestration architecture in the art.</li>
<li><figref idref="f0002">Figure 2</figref> illustrates a multi-site orchestration architecture according to the present invention.</li>
<li><figref idref="f0003">Figure 3</figref> is a flowchart of an illustrative method according to the invention.</li>
</ul></p>
<heading id="h0005">DESCRIPTION OF EMBODIMENTS</heading>
<p id="p0031" num="0031"><figref idref="f0002">Figure 2</figref> shows a multi-site orchestration architecture according to the present invention. In the scenario of <figref idref="f0002">Figure 2</figref>, a multi-site orchestrator MO is adjusting the communication bandwidth between different sites S1, S2, and S3 (for example between sites S1 and S2) in a network slice provided by a SDN controller of a given PLMN network and relying on the computation resources that are deployed closely to each site through an edge cloud or a multi- access edge communication platform.</p>
<p id="p0032" num="0032">Each site of the multi-site orchestrator domain defines a local utility function Ui that represents the gain it will have from requesting from the network the throughput ri over the slice the network is providing.</p>
<p id="p0033" num="0033">The utility function is adjusted based on the slice congestion cost such <i>λ<sub>i</sub></i> such that the throughput requested for the site i is adjusted based on the overall gain (variation of the gain with respect to the throughput variation minus the throughput cost).</p>
<p id="p0034" num="0034">The multi-site orchestrator MO has the objective to maximize the overall gain of the system, i.e. the sum of the utilities in the network by balancing the bandwidth<!-- EPO <DP n="8"> --> between the different sites without the indication of each site to site congestion cost but rather the indication combined congestion costs for the different sites.</p>
<p id="p0035" num="0035">In this regard, the multi-site orchestrator MO decides based on a model of the network of the bandwidth balancing between the different sites, wherein the model will detailed hereinafter. The present invention intends to perform the bandwidth balancing iteratively by starting with proportional fair bandwidth balancing, and identify from this step the relevant model parameters for the orchestration, wherein a subset of the model parameters need to be updated through local orchestration and trigger the local orchestration (choreography) for the models parameters identification.</p>
<p id="p0036" num="0036">Therefore, in general, the present invention proposes a solution including the following features:
<ul id="ul0004" list-style="dash">
<li>The multi-site orchestrator builds a model for the orchestration between the sites. In particular, the multi-site orchestrator MO evaluates the model by monitoring different KPIs of the public network and/or the cloud for the orchestration. In addition, the multi-site orchestration determines opportunities for service choreography based on the KPIs of the PLMN. The opportunity for orchestration is for example a sufficient radio and/or service level KPIs in order to perform local distributed orchestration between sites, i.e. service choreography.</li>
<li>The performance of the model based orchestration is evaluated by the means of monitoring of the orchestration performance in order to identify the subset of the model parameters to be updated. The monitoring of the network consists of tracking KPIs that maybe :<br/>
Service related KPIs such as the fulfilment of the orchestration service level requirements or the SLA service level agreement, are used for the evaluation of the orchestration performance.</li>
</ul></p>
<p id="p0037" num="0037">Radio level or transport level KPIs are used for the performance evaluation of the orchestration such as packet error rate performance, end to end latency, jitter performance, ...etc.
<ul id="ul0005" list-style="dash" compact="compact">
<li>The multi- site orchestrator triggers service choreography between the sites when the performance of the orchestration is low or when an opportunity for service<!-- EPO <DP n="9"> --> choreography is detected. The orchestrator triggers distributed orchestration between the sites by exchanging information, signalling and by provisioning computational resources through containers. The service chorography is performed between the sites and is used to improve the orchestration model.</li>
</ul></p>
<p id="p0038" num="0038">Detailed steps according to the method of the present invention are now described by referring to <figref idref="f0003">Figure 3</figref>, which is a flowchart of an illustrative method according to the invention.</p>
<p id="p0039" num="0039">As shown in <figref idref="f0003">Figure 3</figref>, an exemplary embodiment of the method according to the present invention comprises the following steps:</p>
<heading id="h0006"><b>Step 0: INITIAL ORCHESTRATION STEP</b></heading>
<p id="p0040" num="0040">Prior to model building step, the multi-site orchestrator may start with an optional initial orchestration step, so as to identify a coarse initial model for the multi-site orchestrator.</p>
<p id="p0041" num="0041">The initial orchestration may be given by proportional fair orchestration where the multi-site orchestrator knows the capacity C bits/second of the slice provided by the PLMN and triggers each of the N sites of the network to communicate by transmitting data packets with bandwidth r=C/N. Each site communicates with its neighbouring sites with the same data packet bandwidth.</p>
<heading id="h0007"><b>Step 1: BUILDING A MULTI-SITE ORCHESTRATION MODEL</b></heading>
<p id="p0042" num="0042">Based on the initial orchestration step, a representation or a model of the sites and of the communication conditions between the different sites is built in the multi-site orchestrator in this step.</p>
<p id="p0043" num="0043">This representation may include:
<ul id="ul0006" list-style="dash" compact="compact">
<li>A graph (directed or undirected) where the nodes of the graph represent the sites of the factory and the edges between any pair of nodes represent the communication/processing capabilities between the nodes. The communication/processing capabilities between the sites S1 and S2 can be defined, for example, in terms of:<!-- EPO <DP n="10"> -->
<ul id="ul0007" list-style="none">
<li>∘ The packets throughput of the communication <i>r<sub>1,2</sub></i> expressed as the number of packets transmitted per time unit.</li>
<li>∘ The bit throughput of the communication <i>b<sub>1,2</sub></i> expressed as the number of bits transmitted per time unit.</li>
<li>∘ The latency of the communication <i>t<sub>1,2</sub></i> expressed in seconds per communication a number of <i>N</i> packets.</li>
<li>∘ Processing capabilities <i>p<sub>1</sub>,<sub>2</sub></i> that represents the amount of computation resources available in the path between the nodes S1 and S2. We take the assumption that the processing capabilities are related to the throughput capabilities as <i>p</i><sub>1,2</sub> = <i>ωr</i><sub>1,2</sub> where <i>ω</i> is the amount of processing needed to process a packet of data.</li>
</ul></li>
<li>A model for the demand of the sites expressed in terms of differential utility function. For example, the utility of the communication between the site S1 and the site S2 is expressed as <i>U<sub>1,2</sub></i> = <i>U<sub>1</sub>(r<sub>1,2</sub>)- U<sub>2</sub>(r<sub>1,2</sub>)</i> where the function <i>U<sub>1</sub></i> represents the gain for transmitting the throughput <i>r<sub>1,2</sub></i> to the node 2 and the function <i>U<sub>2</sub></i> represent the gain from receiving the throughput <i>r<sub>1,2</sub></i> from the site S2. Both gains are depending on the service between S1 and S2.</li>
</ul></p>
<p id="p0044" num="0044">The utility function may be the same function for the sites or a function that varies from one site to another. The utility function may be alpha fair utility function that is parameterized by the parameter <i>α</i> as the following : <maths id="math0001" num=""><math display="inline"><mrow><mi>U</mi><mfenced><mi>r</mi></mfenced><mo>=</mo><mo>−</mo><mfrac><mrow><msup><mi>r</mi><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><mi>α</mi></mfenced></mrow></msup></mrow><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><mi>α</mi></mfenced></mrow></mfrac></mrow></math><img id="ib0001" file="imgb0001.tif" wi="30" he="15" img-content="math" img-format="tif" inline="yes"/></maths>if <i>α</i> &gt; 1 and <i>U</i>(<i>r</i>) = log(<i>r</i>) for <i>a</i> = 0, wherein <i>r</i> is the ongoing packet throughput from the node.
<ul id="ul0008" list-style="dash">
<li>A model for the congestion of the communication between the different sites. The model is expressed as congestion costs <i>λ</i> that may be as a function of the packet error rate (PER) of the transmission between the sites and/or the packet throughput between the nodes. If the PER is high, the congestion cost is high and if the PER is low, the congestion cost is low. If the throughput is low, the congestion cost is high and if the throughput is high, the congestion cost is low. The congestion cost may also include the latency of the transmission that models the packets lost during the transmission between the different sites.<!-- EPO <DP n="11"> --></li>
<li>A communication between the different sites is modelled as a random walk and a stochastic matrix S is defined. The matrix element <i>S<sub>1,2</sub></i> is expressed as the proportion of the ongoing traffic from the node 1, i.e. <i>S<sub>1,2</sub></i>=1/<i>d</i>(1) where <i>d</i>(1) is the number of the nodes with which the node 1 is able to communicate. It is here assumed that the site S1 is communicating with the site S2 with probability <i>S<sub>1,2</sub></i>.</li>
<li>From the random walk matrix, a transition matrix <i>G</i> that is parameterized by two parameters <i>β,n</i> where the parameter <i>β</i> ∈ [0,1] describes the correlation between the current multisite communication and a multisite communication described as pure random walk between the sites. The parameter <i>n</i> controls the communication attempts to sites not included in the walk from the node 1. The element <i>G<sub>1,2</sub></i> is given by the following <i>G</i><sub>1,2</sub> = <i>βS</i><sub>1,2</sub> + (1 - <i>β</i>)(1/<i>n</i>).</li>
<li>A database of sites which are able to perform orchestration with the relevant attributes. In the case, the site S1 determines locally from the received traffic, the relevant parameters of the communication with its neighboring sites as well as the processing capabilities of the neighboring sites and register to the database with the determined attributes. This database will be used by the multi-site orchestrator MO to perform orchestration through the provisioning of resources for the communications between the different sites. This orchestration is based on the attributes of the registered sites in the database. Web based representational state transfer REST framework for application interface (API) signaling optimization may be used to reduce the signaling overhead between the sites and the muli- site orchestrator.</li>
</ul></p>
<p id="p0045" num="0045">The refreshment of the data base is performed by local orchestration between the different sites.</p>
<p id="p0046" num="0046">The above mentioned models can be applied alone or in combination.The multi-site orchestration model is therefore built, noted as N2 in <figref idref="f0002">Figure 2</figref>, at the multi-site orchestrator MO from the periodic monitoring of the network state, throughput, packet errors, delay, ..., etc, noted as N1 in <figref idref="f0002">Figure 2</figref>, and is used for the multi-site orchestration MO in order to reduce the signalling between the network and the different sites. In addition, reliability of the model may be evaluated locally at the multi-site orchestrator MO by checking the error between the predicted<!-- EPO <DP n="12"> --> communication profile between the sites and the actual measured performance during network monitoring periods.</p>
<heading id="h0008"><b>Step 2: DETERMINE CHOROGRAPHY OPPORTUNITIES</b></heading>
<p id="p0047" num="0047">Accordingly, the multi-site orchestrator determines the opportunities for choreography based on the error between predicted performance from the model (such as predicted throughput of the communication between the sites S1 and S2) and the measured traffic performance during the network monitoring periods or through topological criteria that are obtained from specific properties of the multi-site orchestration model or through a combination between error based triggering and topological based triggering.</p>
<p id="p0048" num="0048">The error is, for example, collected into an error matrix that is obtained as a function of the throughput errors PER and delay estimation errors, and various other network performance indicators that are monitored during the choreography.</p>
<p id="p0049" num="0049">In particular, the choreography opportunities may be defined when the following is achieved:
<ul id="ul0009" list-style="dash">
<li>The choreography is triggered for sites S1and S2, if the error <i>e<sub>1,2</sub></i> is above an error threshold that is pre-configured in the multi-site orchestrator MO.</li>
<li>The choreography is triggered for sites S1 and S2, if the total error for the sites is above a threshold and at least one of the performance indicators (throughput, latency, packet error rates are below a threshold)</li>
</ul></p>
<p id="p0050" num="0050">Alternatively, the choreography may be triggered between the sites S1 and S2 when the following topology criteria are realized:
<ul id="ul0010" list-style="dash">
<li>The choreography is triggered for sites S1 and S2, if the sites S1 and S2 are having high degrees in the graph; the degree of a node S1 of the graph is defined as the number of neighboring sites with which the site S1 is able to communicate. High degree nodes in the graph are nodes with degree above a threshold.</li>
<li>The choreography is triggered for sites S1 and S2, if the sites S1 and S2 are contributing to a high number of communication paths between any two sites<!-- EPO <DP n="13"> --> in the network; In this case, the choreography between the sites S1 and S2 is triggered if the nodes S1 and S2 are having high centrality in the network. The high centrality is defined as a centrality above a threshold.</li>
<li>The nodes are ranked with respect to the transition matrix G and the choreography is triggered for sites S1 and S2, if the ranks of the sites S1 and S2 are below a threshold; The ranking considered in this option is for example, the eigenvalue of the matrix G corresponding to the node or the eigen-vector corresponding to some specific eigenvalue of the matrix G.</li>
<li>The choreography is triggered for sites S1 and S2, if the sites S1 and S2 are contributing to a routing tree from another site in the multi- site deployment and their relative congestion cost λ<sub>1,2</sub> increased. The relative congestion λ<sub>1,2</sub> cost is defined as the routing cost for the communication between the sites S1 and S2.</li>
</ul></p>
<heading id="h0009"><b>Step 3: TRIGGER MULTI-SITE CHOREOGRAPHY</b></heading>
<p id="p0051" num="0051">Afterwards, the multi-site choreography, noted as N4 in <figref idref="f0002">Figure 2</figref>, may be triggered by the multi-site orchestrator MO through the following signaling:
<ul id="ul0011" list-style="dash">
<li>The sites S1 and S2 perform choreography, when the sites receive an explicit control message for triggering the multi-site chorography from the orchestrator. This message may include the IP addresses of the sites that are contributing to the choreography and the QoS parameters of the virtual network that is used for the communication between the sites in the choreography step;</li>
<li>The transition matrix <i>G</i> is updated by reducing the parameter <i>β</i> and the ranking is updated for the network at the orchestrator, the ranks are transmitted to the sites S1 and S2, noted N3 in <figref idref="f0002">Figure 2</figref>. The sites decide to perform choreography if their rank is below a threshold. The choreography is performed between the sites with similar lower ranks;</li>
<li>The utility function of the sites S1 and S2 is updated by the orchestrator at each site so that the choreography is performed as the following. The<!-- EPO <DP n="14"> --> parameter <i>α</i> of the utility functions is reduced and the throughput of the communication between the different sites is set to <maths id="math0002" num=""><math display="inline"><mrow><msub><mi>r</mi><mrow><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub><mo>=</mo><msup><mrow><mfenced><msub><mi>λ</mi><mrow><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub></mfenced></mrow><mrow><mo>−</mo><mfrac><mn>1</mn><mi>α</mi></mfrac></mrow></msup></mrow></math><img id="ib0002" file="imgb0002.tif" wi="23" he="9" img-content="math" img-format="tif" inline="yes"/></maths> where <i>λ</i><sub>1,2</sub> is the last estimation of the congestion cost for the communication between the sites S1 and S2.</li>
</ul></p>
<heading id="h0010"><b>STEP4: LOCAL ORCHESTRATION (MULTI-SITE CHOREOGRAPHY) AND UPDATE MULTI-SITE ORCHESTRATION MODEL</b></heading>
<p id="p0052" num="0052">The orchestrator MO setups edge clouds in the different sites participating to the local orchestration and a virtual network for the communication between the different edge clouds. The edge clouds are coordinated through edge cloud container based technology. The sites that are participating to local orchestration start to exchange information at a throughput defined as following:
<ul id="ul0012" list-style="dash">
<li>The parameter <i>α</i> of the utility of the sites is reduced and the throughput of the communication between the different sites is set to <maths id="math0003" num=""><math display="inline"><mrow><msub><mi>r</mi><mrow><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub><mo>=</mo><msup><mrow><mfenced><msub><mi>λ</mi><mrow><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub></mfenced></mrow><mrow><mo>−</mo><mfrac><mn>1</mn><mi>α</mi></mfrac></mrow></msup></mrow></math><img id="ib0003" file="imgb0003.tif" wi="23" he="9" img-content="math" img-format="tif" inline="yes"/></maths> where <i>λ</i><sub>1,2</sub> is the last estimation of the congestion cost for the communication between the sites S1 and s2;</li>
<li>The parameter <i>α</i> of the utility of the sites is reduced and the throughput of the communication between the different sites is set to <maths id="math0004" num=""><math display="inline"><mrow><msub><mi>r</mi><mrow><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub><mo>=</mo><msup><mrow><mfenced><msub><mi>λ</mi><mrow><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub></mfenced></mrow><mrow><mo>−</mo><mfrac><mn>1</mn><mi>α</mi></mfrac></mrow></msup></mrow></math><img id="ib0004" file="imgb0004.tif" wi="24" he="10" img-content="math" img-format="tif" inline="yes"/></maths> where λ<sub>1,2</sub> is the last estimation of the congestion cost for the communication between the sites 1 and 2, if the reliability of the congestion cost <i>λ</i><sub>1,2</sub> is low.</li>
<li>The throughput is reduced from its current value into a degraded throughput value that is provided by the MNO or selected autonomously by the sites S1 and S2</li>
</ul></p>
<p id="p0053" num="0053">In the meantime, the multi-site orchestrator MO is monitoring the performance of the communication between the two sites, noted as N5 in <figref idref="f0002">Figure 2</figref>. In particular, the multi- site orchestrator decides eventually during its monitoring period to adjust the local utilities of the sites and stores the last value of the utility functions. For example, in case the monitoring is based on the transition matrix G, the orchestrator<!-- EPO <DP n="15"> --> updates the value of the matrix <i>S</i> with the new parameters as the number of neighbors with good throughput/latency performance <i>m<sub>1,2</sub></i>. In this case <i>S<sub>1,2</sub></i>=<i>m<sub>1,2</sub></i>/<i>d</i>(1)<i>.</i></p>
<p id="p0054" num="0054">The model/database of the multi-site orchestrator is updated with the parameter learned during the local orchestration, noted as N6 in <figref idref="f0002">Figure 2</figref>.</p>
<p id="p0055" num="0055">In order to further explain the present invention, hereinafter we will describe some embodiments using the method mentioned above.</p>
<p id="p0056" num="0056">Assuming a multi-site orchestration scenario of N sites, wherein each site optimizes its own utility function and the multi- site orchestration is the operation of the maximization of the sum of the utility functions of the sites. The sites are using the same network slice for the communication and the maximum throughput or bandwidth allocated to the network slice, i.e. slice capacity is C.</p>
<p id="p0057" num="0057">The utility function determines the throughput demand of each site, i.e. the bandwidth needed for communications and the bandwidth needed for processing for a given service. It is assumed that there is a proportionality relation between the bandwidth demand of the site and the processing capabilities of virtual functions in the site.</p>
<p id="p0058" num="0058">In this embodiment, the multi-site orchestration that we propose is based on strategies for the adjustment of the throughput for the communications between the different sites and adjustment of the demands in order to minimize the communication outage and optimize the bandwidth usage in the slice.</p>
<p id="p0059" num="0059">The utility functions are modelled as alpha fair utility functions that expresses the site demands in terms of the bandwidth needed for communication as the following function of the throughput of the site <i>r<sub>i</sub></i> <maths id="math0005" num=""><math display="block"><mrow><msub><mi>U</mi><mi>i</mi></msub><mfenced><msub><mi>r</mi><mi>i</mi></msub></mfenced><mo>=</mo><mfrac><mrow><msubsup><mi>r</mi><mi>i</mi><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><msub><mi>α</mi><mi>i</mi></msub></mfenced></mrow></msubsup></mrow><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><msub><mi>α</mi><mi>i</mi></msub></mfenced></mrow></mfrac></mrow></math><img id="ib0005" file="imgb0005.tif" wi="35" he="14" img-content="math" img-format="tif"/></maths></p>
<p id="p0060" num="0060">The parameter alpha adjusts the demand with respect to the throughput and the overall multi-site orchestration problem is seen as network utility function maximization with multiple demand parameters.<!-- EPO <DP n="16"> --></p>
<p id="p0061" num="0061">The general multi-site orchestration problem is given as: <maths id="math0006" num=""><math display="block"><mrow><mi>max</mi><mstyle displaystyle="false"><mrow><mstyle displaystyle="true"><mrow><munder><mo>∑</mo><mi>i</mi></munder></mrow></mstyle><mrow><mfrac><mrow><msubsup><mi>r</mi><mi>i</mi><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><msub><mi>α</mi><mi>i</mi></msub></mfenced></mrow></msubsup></mrow><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><msub><mi>α</mi><mi>i</mi></msub></mfenced></mrow></mfrac></mrow></mrow></mstyle></mrow></math><img id="ib0006" file="imgb0006.tif" wi="30" he="13" img-content="math" img-format="tif"/></maths> <maths id="math0007" num=""><math display="block"><mrow><mi>s</mi><mn>.</mn><mi mathvariant="italic">t</mi><mspace width="1em"/><mrow><mstyle displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mrow></mstyle><mrow><mrow><mstyle displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mrow></mstyle><mrow><msub><mi>A</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><msub><mi>r</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></mrow><mo>≤</mo><mi>C</mi></mrow></mrow></mrow></mrow></math><img id="ib0007" file="imgb0007.tif" wi="40" he="13" img-content="math" img-format="tif"/></maths> <maths id="math0008" num=""><math display="block"><mrow><msub><mi>r</mi><mi>i</mi></msub><mo>=</mo><mrow><mstyle displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mrow></mstyle><msub><mi>r</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></mrow></mrow></math><img id="ib0008" file="imgb0008.tif" wi="19" he="13" img-content="math" img-format="tif"/></maths></p>
<p id="p0062" num="0062">The variables <i>A<sub>i,j</sub></i> are the routing variables of the network, i.e. the contribution of the communication between the site <i>i</i> and <i>j</i> to the traffic over the network slice and <i>r<sub>i,j</sub></i> is the throughput of the communication between the site <i>i</i> and the site <i>j</i></p>
<p id="p0063" num="0063">Including the congestion cost λ for the network slice we have the following global Lagrangian formulation <maths id="math0009" num=""><math display="block"><mrow><mi>L</mi><mo>=</mo><mstyle displaystyle="false"><mrow><mstyle displaystyle="true"><mrow><munder><mo>∑</mo><mi>i</mi></munder></mrow></mstyle><mrow><mfrac><mrow><msup><mrow><mfenced><mrow><mstyle displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mrow></mstyle><mrow><msub><mi>r</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></mrow></mrow></mfenced></mrow><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><msub><mi>α</mi><mi>i</mi></msub></mfenced></mrow></msup></mrow><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><msub><mi>α</mi><mi>i</mi></msub></mfenced></mrow></mfrac></mrow></mrow></mstyle><mo>−</mo><mi>λ</mi><mfenced><mrow><mstyle displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mrow></mstyle><mrow><mrow><mstyle displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mrow></mstyle><mrow><msub><mi>A</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><msub><mi>r</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>−</mo><mi>C</mi></mrow></mrow></mrow></mrow></mfenced></mrow></math><img id="ib0009" file="imgb0009.tif" wi="76" he="22" img-content="math" img-format="tif"/></maths></p>
<p id="p0064" num="0064">Each local orchestrator is solving the following local Lagrangian problem <maths id="math0010" num=""><math display="block"><mrow><msub><mrow><mi>max</mi><mi>L</mi></mrow><mi>i</mi></msub><mo>=</mo><mfrac><mrow><msup><mrow><mfenced><mrow><mstyle displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mrow></mstyle><mrow><msub><mi>r</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></mrow></mrow></mfenced></mrow><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><msub><mi>α</mi><mi>i</mi></msub></mfenced></mrow></msup></mrow><mrow><mfenced separators=""><mn>1</mn><mo>−</mo><msub><mi>α</mi><mi>i</mi></msub></mfenced></mrow></mfrac><mo>−</mo><mi>λ</mi><mstyle displaystyle="false"><mrow><mstyle displaystyle="true"><mrow><munder><mo>∑</mo><mi>j</mi></munder></mrow></mstyle><mrow><msub><mi>A</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><msub><mi>r</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></mrow></mrow></mstyle><mn>.</mn></mrow></math><img id="ib0010" file="imgb0010.tif" wi="76" he="22" img-content="math" img-format="tif"/></maths></p>
<p id="p0065" num="0065">The solution to this local Lagrangian problem is given as <maths id="math0011" num=""><math display="block"><mrow><msub><mi>r</mi><mi>i</mi></msub><mo>=</mo><msup><mrow><mfenced separators=""><mi>λ</mi><mstyle displaystyle="false"><mrow><mstyle displaystyle="true"><mrow><munder><mo>∑</mo><mi>j</mi></munder></mrow></mstyle><mrow><msub><mi>A</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></mrow></mrow></mstyle></mfenced></mrow><mrow><mo>−</mo><mfrac><mn>1</mn><mrow><msub><mi>α</mi><mi>i</mi></msub></mrow></mfrac></mrow></msup></mrow></math><img id="ib0011" file="imgb0011.tif" wi="33" he="16" img-content="math" img-format="tif"/></maths></p>
<p id="p0066" num="0066">This means that each site adjusts its throughput by considering routing parameters <i>A<sub>i,j</sub></i> and slice cost parameter λ. The invention proposes a simplified multi-site orchestration where dominant routing parameter is identified in each site as <maths id="math0012" num=""><math display="block"><mrow><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup><mo>=</mo><mi mathvariant="italic">exp</mi><mfenced separators=""><msub><mi mathvariant="italic">max</mi><mi>j</mi></msub><mfenced separators=""><mi mathvariant="italic">log</mi><mfenced><msub><mi>A</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></mfenced></mfenced></mfenced></mrow></math><img id="ib0012" file="imgb0012.tif" wi="57" he="11" img-content="math" img-format="tif"/></maths></p>
<p id="p0067" num="0067">The site adjusts its throughput as:<!-- EPO <DP n="17"> --> <maths id="math0013" num=""><math display="block"><mrow><msub><mi>r</mi><mi>i</mi></msub><mo>=</mo><msup><mrow><mfenced><msubsup><mi mathvariant="italic">λA</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mfenced></mrow><mrow><mo>−</mo><mfrac><mn>1</mn><mrow><msub><mi>α</mi><mi>i</mi></msub></mrow></mfrac></mrow></msup></mrow></math><img id="ib0013" file="imgb0013.tif" wi="28" he="10" img-content="math" img-format="tif"/></maths></p>
<p id="p0068" num="0068">Assuming the sites are using the full capacity of the slice, each slice will transmit with the following throughput <maths id="math0014" num=""><math display="block"><mrow><msubsup><mi>r</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup><mo>=</mo><msup><mrow><mfenced separators=""><mi>C</mi><mfrac><mrow><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mrow><mrow><mstyle displaystyle="false"><mrow><munder><mo>∑</mo><mi>i</mi></munder><mrow><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mrow></mrow></mstyle></mrow></mfrac></mfenced></mrow><mrow><mo>−</mo><mfrac><mn>1</mn><mrow><msub><mi>α</mi><mi>i</mi></msub></mrow></mfrac></mrow></msup></mrow></math><img id="ib0014" file="imgb0014.tif" wi="36" he="16" img-content="math" img-format="tif"/></maths></p>
<p id="p0069" num="0069">The throughput between the site <i>i</i> and <i>j</i> is provided by the following relation <maths id="math0015" num=""><math display="block"><mrow><msub><mi>r</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><msup><mrow><mfenced separators=""><mi>C</mi><mfrac><mrow><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mrow><mrow><mstyle displaystyle="false"><mrow><munder><mo>∑</mo><mi>i</mi></munder><mrow><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mrow></mrow></mstyle></mrow></mfrac></mfenced></mrow><mrow><mo>−</mo><mfrac><mn>1</mn><mrow><msub><mi>α</mi><mi>i</mi></msub></mrow></mfrac></mrow></msup></mrow></math><img id="ib0015" file="imgb0015.tif" wi="42" he="16" img-content="math" img-format="tif"/></maths></p>
<p id="p0070" num="0070">According to the present invention, the dominant routing is estimated or determined from the model and adjusting the throughput with respect to the costs as described previously.</p>
<p id="p0071" num="0071">In this embodiment, an exemplary method according to the present invention contains the following steps:
<ol id="ol0003" ol-style="">
<li>1. The multi-site orchestrator initiates an orchestration with the parameter <i>α<sub>i</sub></i> =1 ,i.e. training sequences and a schedule, which is the order in which the packets are sent from one site to the other sites of the multi-site deployment, is used to identify the orchestration model {<i>A<sub>i,j</sub></i>}. The dominant routing for each site is obtained from the measured throughputs of the communications between the different sites.</li>
<li>2. Congestion cost is obtained from the measured throughput for the different sites at the multisite orchestrator.</li>
<li>3. The multi-site orchestrator selects the set of sites with maximum routing value <maths id="math0016" num=""><math display="inline"><mrow><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mrow></math><img id="ib0016" file="imgb0016.tif" wi="6" he="7" img-content="math" img-format="tif" inline="yes"/></maths> and sets the throughput of the sites to <maths id="math0017" num=""><math display="inline"><mrow><msubsup><mi>r</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup><mn>.</mn></mrow></math><img id="ib0017" file="imgb0017.tif" wi="9" he="7" img-content="math" img-format="tif" inline="yes"/></maths> If the congestion cost is increased or some site are in outage, the multi-site triggers local orchestration to update the model between a specific pairs of nodes that are having the nodes with dominant routing <maths id="math0018" num=""><math display="inline"><mrow><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup><mn>.</mn></mrow></math><img id="ib0018" file="imgb0018.tif" wi="9" he="7" img-content="math" img-format="tif" inline="yes"/></maths><!-- EPO <DP n="18"> --></li>
<li>4. Local choreography updates the estimation of {<i>A<sub>i,j</sub></i>} and go to step (2)</li>
</ol></p>
<p id="p0072" num="0072">Alternatively, in another embodiment, the invention proposes to adjust the site demands in order to maximize the local lagrangian relation described previously. The demands are described by the parameter, described by the parameter <i>α<sub>i</sub></i> iteratively by the means of the following relation where k is defining the iteration index : <maths id="math0019" num=""><math display="block"><mrow><msubsup><mi>α</mi><mi>i</mi><mi>k</mi></msubsup><mo>=</mo><mn>1</mn><mo>+</mo><mfrac><mrow><msubsup><mi>α</mi><mi>i</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msubsup></mrow><mrow><mi mathvariant="italic">log</mi><mfenced><msup><mi>λ</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup></mfenced><mo>+</mo><mi mathvariant="italic">log</mi><mfenced><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mfenced></mrow></mfrac></mrow></math><img id="ib0019" file="imgb0019.tif" wi="60" he="13" img-content="math" img-format="tif"/></maths></p>
<p id="p0073" num="0073">The throughput between the site <i>i</i> and <i>j</i> is provided by the following relation <maths id="math0020" num=""><math display="block"><mrow><msub><mi>r</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><msup><mrow><mfenced separators=""><mi>C</mi><mfrac><mrow><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mrow><mrow><mstyle displaystyle="false"><mrow><munder><mo>∑</mo><mi>i</mi></munder><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mrow></mstyle></mrow></mfrac></mfenced></mrow><mrow><mo>−</mo><mfrac><mn>1</mn><mrow><msub><mi>α</mi><mi>i</mi></msub></mrow></mfrac></mrow></msup></mrow></math><img id="ib0020" file="imgb0020.tif" wi="42" he="16" img-content="math" img-format="tif"/></maths></p>
<p id="p0074" num="0074">The slice congestion cost is updated such as to optimize the slice capacity by the following <maths id="math0021" num=""><math display="block"><mrow><msup><mi>λ</mi><mi>k</mi></msup><mo>=</mo><msup><mi>λ</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup><mi>δ</mi><mfenced separators=""><mo>∑</mo><mo>∑</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><msub><mi>r</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>−</mo><mi>C</mi></mfenced></mrow></math><img id="ib0021" file="imgb0021.tif" wi="68" he="11" img-content="math" img-format="tif"/></maths></p>
<p id="p0075" num="0075">Where <i>δ</i> is the step for updating the congestion cost or slice usage. This updating step may be either fixed or adaptive. For the fixed step case, the same step is maintained for all the congestion cost update while in adaptive step one may reduce the step <i>δ</i> when the rate of the increase of the slice congestion cost is high.</p>
<p id="p0076" num="0076">In this regard, the multi-site orchestration in this alternative embodiment according to the present invention contains the following steps:
<ol id="ol0004" ol-style="">
<li>1. The multi-site orchestrator initiates an orchestration with the parameter <i>α<sub>i</sub></i>=1 ,i.e. training sequences and a schedule is used to identify the orchestration model {<i>A<sub>i,j</sub></i>}. The dominant routing for each site is obtained from the measured throughputs of the communications between the different sites. The initial congestion cost is set to C and the sites are not communicating<!-- EPO <DP n="19"> --></li>
<li>2. Initial congestion cost is obtained from the measured throughput for the different sites at the multisite orchestrator.</li>
<li>3. The multi-site orchestrator selects the set of sites with maximum routing value <maths id="math0022" num=""><math display="inline"><mrow><msubsup><mi>A</mi><mi>i</mi><mrow><mo>*</mo></mrow></msubsup></mrow></math><img id="ib0022" file="imgb0022.tif" wi="6" he="6" img-content="math" img-format="tif" inline="yes"/></maths> and each site set its demand <maths id="math0023" num=""><math display="inline"><mrow><msubsup><mi>α</mi><mi>i</mi><mi>k</mi></msubsup></mrow></math><img id="ib0023" file="imgb0023.tif" wi="7" he="7" img-content="math" img-format="tif" inline="yes"/></maths> the relation above and determine the throughput between the sites <i>i</i> and <i>j</i> by the relation provided above.</li>
<li>4. The orchestrator updates the congestion costs with the relation above.</li>
<li>5. Local choreography updates the estimation of {<i>A<sub>i,j</sub></i>} and go to step (2)</li>
</ol></p>
<p id="p0077" num="0077">In summary, the present invention proposes a cognitive model based multi-site orchestration which contains the following features:
<ul id="ul0013" list-style="dash">
<li>Monitoring the performance of the PLMN and build a multi-site orchestration model for the multi-site orchestration (service or radio orchestration);</li>
<li>Determining from the model the distributed orchestration or choreography opportunities between the sites and triggering chorography between the different sites;</li>
<li>Using the choreography to update the multi-site orchestration model</li>
</ul></p>
<p id="p0078" num="0078">Therefore, the present invention is its flexibility since its takes into account the partial information obtained from the PLMN/and or the cloud network. Therefore, the orchestration objective is optimized and the overall reduction of the orchestration complexity is reduced. In addition, the present invention also reduces the latency of the multi-site orchestration and the signalling overhead with the public network.</p>
<p id="p0079" num="0079">Moreover, is known to those skilled in the art, the aforementioned example architectures described above, according to the present invention, can be implemented in many ways, such as program instructions for execution by a processor, as software modules, microcode, as computer program product on computer readable media, as logic circuits, as application specific integrated circuits, as firmware, etc. The embodiments of the invention can take the form of an entirely hardware embodiment, an entirely software embodiment or an embodiment<!-- EPO <DP n="20"> --> containing both hardware and software elements. In a preferred embodiment, the invention is implemented in software, which includes but is not limited to firmware, resident software, microcode, etc.</p>
<p id="p0080" num="0080">Furthermore, the embodiments of the invention can take the form of a computer program product accessible from a computer-usable or computer-readable medium providing program code for use by or in connection with a computer, processing device, or any instruction execution system. For the purposes of this description, a computer-usable or computer readable medium can be any apparatus that can contain, store, communicate, or transport the program for use by or in connection with the instruction execution system, apparatus, or device. The medium can be electronic, magnetic, optical, or a semiconductor system (or apparatus or device). Examples of a computer-readable medium include, but are not limited to, a semiconductor or solid state memory, magnetic tape, a removable computer diskette, a RAM, a read-only memory (ROM), a rigid magnetic disk, an optical disk, etc. Current examples of optical disks include compact disk-read-only memory (CD-ROM), compact disk-read/write (CD-R/W) and DVD.</p>
<p id="p0081" num="0081">The embodiments described hereinabove are illustrations of this invention. Various modifications can be made to them without leaving the scope of the invention which stems from the annexed claims.</p>
</description>
<claims id="claims01" lang="en"><!-- EPO <DP n="21"> -->
<claim id="c-en-0001" num="0001">
<claim-text>A method for providing multi-site orchestration in a public network for factory automation, wherein the public network provides communication and computing functionality to a plurality sites which are configured to communicate with each other by the means of slice of the public network, the method comprising:
<claim-text>- building a multi-site orchestration model based on initial performance of the communication between different sites;</claim-text>
<claim-text>- determining choreography opportunities between the different sites by using the multi-site orchestration model;</claim-text>
<claim-text>- triggering chorography between the different sites; and</claim-text>
<claim-text>- evaluating the performance of the chorography between the different sites and updating the multi-site orchestration model.</claim-text></claim-text></claim>
<claim id="c-en-0002" num="0002">
<claim-text>The method according to claim 1, wherein, before building the multi-site orchestration model, it further comprises:
<claim-text>- initiating an initial orchestration so as to identify a coarse initial model, based on which the multi-site orchestration model is built.</claim-text></claim-text></claim>
<claim id="c-en-0003" num="0003">
<claim-text>The method according to claim 2, wherein, the initial orchestration is a proportional faire orchestration, with which each site communicates with its neighboring sites with the same data packet bandwidth.</claim-text></claim>
<claim id="c-en-0004" num="0004">
<claim-text>The method according to claim 1, wherein the multi-site orchestration model contains a representation of sites and of the communication conditions between the sites.<!-- EPO <DP n="22"> --></claim-text></claim>
<claim id="c-en-0005" num="0005">
<claim-text>The method according to claim 1, wherein the multi-site orchestration model includes a graph which contains nodes representing the sites and edges between any pair of nodes representing communication or processing capabilities between the nodes.</claim-text></claim>
<claim id="c-en-0006" num="0006">
<claim-text>The method according to claim 1, wherein the multi-site orchestration model includes a model for the demand of the sites, for example, expressed in terms of utility of the communication between the sites.</claim-text></claim>
<claim id="c-en-0007" num="0007">
<claim-text>The method according to claim 1, wherein the multi-site orchestration model includes a model for the congestion of the communication between the sites, for example, expressed in terms of congestion costs.</claim-text></claim>
<claim id="c-en-0008" num="0008">
<claim-text>The method according to claim 1, wherein the multi-site orchestration model includes a site ranking that is based on specific flow transmission that is based on random walk of packets between the sites and a stochastic matrix.</claim-text></claim>
<claim id="c-en-0009" num="0009">
<claim-text>The method according to claim 1, wherein the multi-site orchestration model includes a database of sites adapted to perform orchestration with relevant attributes.</claim-text></claim>
<claim id="c-en-0010" num="0010">
<claim-text>The method according to claim 1, wherein the initial performance of the public network is obtained by periodic monitoring of network state, throughput, packet errors, and/or delay.</claim-text></claim>
<claim id="c-en-0011" num="0011">
<claim-text>The method according to claim 10, wherein the step of determining choreography opportunities between different sites by using the multi-site orchestration model is processed based on error between predicted performance<!-- EPO <DP n="23"> --> from the multi-site orchestration model and the measured traffic performance or through topological criteria that are obtained from the multi-site orchestration model.</claim-text></claim>
<claim id="c-en-0012" num="0012">
<claim-text>The method according to claim 1, wherein the step of triggering chorography between the different sites comprises setting up an edge cloud between the different sites participating to the choreography and starting to exchange information between the different sites.</claim-text></claim>
<claim id="c-en-0013" num="0013">
<claim-text>The method according to claim 1, wherein the step of evaluating the performance of the chorography between the different sites and updating the multi-site orchestration model comprises monitoring the public network.</claim-text></claim>
<claim id="c-en-0014" num="0014">
<claim-text>An orchestrator for providing multi-site orchestration in a public network for factory automation, wherein the public network provides communication and computing functionality to a plurality sites which are configured to communicate with each other by slice of the public network, being configured to:
<claim-text>- build a multi-site orchestration model based on initial performance of the public network;</claim-text>
<claim-text>- determine choreography opportunities between different sites by using the multi-site orchestration model;</claim-text>
<claim-text>- trigger chorography between the different sites; and</claim-text>
<claim-text>- evaluate the performance of the chorography between the different sites and update the multi-site orchestration model.</claim-text></claim-text></claim>
<claim id="c-en-0015" num="0015">
<claim-text>A communication system for factory automation, comprising an orchestrator according to claim 14.</claim-text></claim>
</claims>
<drawings id="draw" lang="en"><!-- EPO <DP n="24"> -->
<figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="173" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> -->
<figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="165" he="189" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> -->
<figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="98" he="141" img-content="drawing" img-format="tif"/></figure>
</drawings>
<search-report-data id="srep" lang="en" srep-office="EP" date-produced=""><doc-page id="srep0001" file="srep0001.tif" wi="151" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="151" he="233" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="155" he="233" type="tif"/></search-report-data><search-report-data date-produced="20200821" id="srepxml" lang="en" srep-office="EP" srep-type="ep-sr" status="n"><!--
 The search report data in XML is provided for the users' convenience only. It might differ from the search report of the PDF document, which contains the officially published data. The EPO disclaims any liability for incorrect or incomplete data in the XML for search reports.
 -->

<srep-info><file-reference-id>MM/191302ATO</file-reference-id><application-reference><document-id><country>EP</country><doc-number>20315104.8</doc-number></document-id></application-reference><applicant-name><name>Mitsubishi Electric R&amp;D Centre Europe B.V.</name></applicant-name><srep-established srep-established="yes"/><srep-invention-title title-approval="yes"/><srep-abstract abs-approval="yes"/><srep-figure-to-publish figinfo="by-applicant"><figure-to-publish><fig-number>3</fig-number></figure-to-publish></srep-figure-to-publish><srep-info-admin><srep-office><addressbook><text>MN</text></addressbook></srep-office><date-search-report-mailed><date>20200901</date></date-search-report-mailed></srep-info-admin></srep-info><srep-for-pub><srep-fields-searched><minimum-documentation><classifications-ipcr><classification-ipcr><text>H04L</text></classification-ipcr></classifications-ipcr></minimum-documentation></srep-fields-searched><srep-citations><citation id="sr-cit0001"><patcit dnum="US2019342354A1" id="sr-pcit0001" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=US2019342354&amp;CY=ep"><document-id><country>US</country><doc-number>2019342354</doc-number><kind>A1</kind><name>BOSCH HENDRIKUS GP [NL] ET AL</name><date>20191107</date></document-id></patcit><category>Y</category><rel-claims>1-15</rel-claims><rel-passage><passage>* paragraphs [0008],  [0022],  [0023],  [0026],  [0032],  [0042],  [0044],  [0045],  [0048],  [0049],  [0053],  [0068],  [0070] *</passage></rel-passage></citation><citation id="sr-cit0002"><nplcit id="sr-ncit0001" npl-type="s"><article><author><name>NATHAN F SARAIVA DE SOUSA ET AL</name></author><atl>Network Service Orchestration: A Survey</atl><serial><sertitle>ARXIV.ORG, CORNELL UNIVERSITY LIBRARY, 201 OLIN LIBRARY CORNELL UNIVERSITY ITHACA, NY 14853</sertitle><pubdate>20180318</pubdate></serial><refno>XP080865589</refno></article></nplcit><category>Y</category><rel-claims>1-15</rel-claims><rel-passage><passage>* abstract *</passage><passage>* sections I, III, VII.D *</passage></rel-passage></citation><citation id="sr-cit0003"><nplcit id="sr-ncit0002" npl-type="s"><article><author><name>WALIA JASPREET SINGH ET AL</name></author><atl>5G network slicing strategies for a smart factory</atl><serial><sertitle>COMPUTERS IN INDUSTRY, ELSEVIER, AMSTERDAM, NL</sertitle><pubdate>20190806</pubdate><vid>111</vid><doi>10.1016/J.COMPIND.2019.07.006</doi><issn>0166-3615</issn></serial><location><pp><ppf>108</ppf><ppl>120</ppl></pp></location><refno>XP085814762</refno></article></nplcit><category>Y</category><rel-claims>1-15</rel-claims><rel-passage><passage>* sections 1, 3, 5 *</passage></rel-passage></citation><citation id="sr-cit0004"><nplcit id="sr-ncit0003" npl-type="s"><article><author><name>VELASQUEZ KARIMA ET AL</name></author><atl>Service Orchestration in Fog Environments</atl><serial><sertitle>2017 IEEE 5TH INTERNATIONAL CONFERENCE ON FUTURE INTERNET OF THINGS AND CLOUD (FICLOUD), IEEE</sertitle><pubdate>20170821</pubdate><doi>10.1109/FICLOUD.2017.49</doi></serial><location><pp><ppf>329</ppf><ppl>336</ppl></pp></location><refno>XP033257890</refno></article></nplcit><category>A</category><rel-claims>1-15</rel-claims><rel-passage><passage>* sections I, II, IV *</passage><passage>* figure 1 *</passage></rel-passage></citation><citation id="sr-cit0005"><nplcit id="sr-ncit0004" npl-type="s"><article><author><name>SCIANCALEPORE VINCENZO ET AL</name></author><atl>A Future-Proof Architecture for Management and Orchestration of Multi-Domain NextGen Networks</atl><serial><sertitle>IEEE ACCESS</sertitle><pubdate>20190701</pubdate><vid>7</vid><doi>10.1109/ACCESS.2019.2923364</doi></serial><location><pp><ppf>79216</ppf><ppl>79232</ppl></pp></location><refno>XP011732832</refno></article></nplcit><category>A</category><rel-claims>1-15</rel-claims><rel-passage><passage>* sections I, III, V *</passage></rel-passage></citation></srep-citations><srep-admin><examiners><primary-examiner><name>Ramenzoni, Stefano</name></primary-examiner></examiners><srep-office><addressbook><text>Munich</text></addressbook></srep-office><date-search-completed><date>20200821</date></date-search-completed></srep-admin><!--							The annex lists the patent family members relating to the patent documents cited in the above mentioned European search report.							The members are as contained in the European Patent Office EDP file on							The European Patent Office is in no way liable for these particulars which are merely given for the purpose of information.							For more details about this annex : see Official Journal of the European Patent Office, No 12/82						--><srep-patent-family><patent-family><priority-application><document-id><country>US</country><doc-number>2019342354</doc-number><kind>A1</kind><date>20191107</date></document-id></priority-application><family-member><document-id><country>CA</country><doc-number>3098985</doc-number><kind>A1</kind><date>20191107</date></document-id></family-member><family-member><document-id><country>CN</country><doc-number>112055953</doc-number><kind>A</kind><date>20201208</date></document-id></family-member><family-member><document-id><country>EP</country><doc-number>3788749</doc-number><kind>A1</kind><date>20210310</date></document-id></family-member><family-member><document-id><country>US</country><doc-number>2019342354</doc-number><kind>A1</kind><date>20191107</date></document-id></family-member><family-member><document-id><country>WO</country><doc-number>2019212831</doc-number><kind>A1</kind><date>20191107</date></document-id></family-member></patent-family></srep-patent-family></srep-for-pub></search-report-data>
</ep-patent-document>
