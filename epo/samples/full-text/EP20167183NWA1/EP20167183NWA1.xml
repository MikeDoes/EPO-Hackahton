<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP20167183A1" file="EP20167183NWA1.xml" lang="en" country="EP" doc-number="3889903" kind="A1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="en"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSKBAHRIS..MTNORSMESMMAKHTNMD..........</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  1100000/0</B007EP></eptags></B000><B100><B110>3889903</B110><B120><B121>EUROPEAN PATENT APPLICATION</B121></B120><B130>A1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>20167183.1</B210><B220><date>20200331</date></B220><B250>en</B250><B251EP>en</B251EP><B260>en</B260></B200><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20211006</date><bnum>202140</bnum></B430></B400><B500><B510EP><classification-ipcr sequence="1"><text>G06T   7/60        20170101AFI20200803BHEP        </text></classification-ipcr><classification-ipcr sequence="2"><text>B60D   1/00        20060101ALI20200803BHEP        </text></classification-ipcr><classification-ipcr sequence="3"><text>G06T   7/73        20170101ALI20200803BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>G06T2207/10016     20130101 LA20200727BHEP        </text></classification-cpc><classification-cpc sequence="2"><text>G06T   7/60        20130101 FI20200727BHEP        </text></classification-cpc><classification-cpc sequence="3"><text>G06T2207/30252     20130101 LA20200727BHEP        </text></classification-cpc><classification-cpc sequence="4"><text>G06T   7/73        20170101 LI20200727BHEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>VERFAHREN UND SYSTEM ZUR BERECHNUNG DES FAHRZEUGANHÄNGERWINKELS</B542><B541>en</B541><B542>METHOD AND SYSTEM FOR CALCULATING VEHICLE TRAILER ANGLE</B542><B541>fr</B541><B542>PROCÉDÉ ET SYSTÈME DE CALCUL DE L'ANGLE D'UNE REMORQUE DE VÉHICULE</B542></B540><B590><B598>5</B598></B590></B500><B700><B710><B711><snm>Continental Automotive GmbH</snm><iid>101676895</iid><irf>2020P01197EP (NU)</irf><adr><str>Vahrenwalder Straße 9</str><city>30165 Hannover</city><ctry>DE</ctry></adr></B711></B710><B720><B721><snm>Plowman, Robin</snm><adr><str>c/o Conti Temic microelectronic GmbH
Intellectual Property
Sieboldstraße 19</str><city>90411 Nürnberg</city><ctry>DE</ctry></adr></B721><B721><snm>Kadyrov, Alexander</snm><adr><str>c/o Conti Temic microelectronic GmbH
Intellectual Property
Sieboldstraße 19</str><city>90411 Nürnberg</city><ctry>DE</ctry></adr></B721></B720><B740><B741><snm>Continental Corporation</snm><iid>101882523</iid><adr><str>c/o Conti Temic microelectronic GmbH 
Intellectual Property 
Sieboldstraße 19</str><city>90411 Nürnberg</city><ctry>DE</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840><B844EP><B845EP><ctry>BA</ctry></B845EP><B845EP><ctry>ME</ctry></B845EP></B844EP><B848EP><B849EP><ctry>KH</ctry></B849EP><B849EP><ctry>MA</ctry></B849EP><B849EP><ctry>MD</ctry></B849EP><B849EP><ctry>TN</ctry></B849EP></B848EP></B800></SDOBI>
<abstract id="abst" lang="en">
<p id="pa01" num="0001">The invention relates to a method for determining the yaw angle (YA) of a trailer (2) with respect to the longitudinal axis (LAV) of a towing vehicle (1) based on at least one feature (F1, F2) included in multiple captured images by using correction information.
<img id="iaf01" file="imgaf001.tif" wi="117" he="122" img-content="drawing" img-format="tif"/></p>
</abstract>
<description id="desc" lang="en"><!-- EPO <DP n="1"> -->
<p id="p0001" num="0001">The present invention relates generally to the field of vehicle assistance systems. More specifically, the present invention relates to a method and a system for calculating yaw angle of a trailer coupled with a towing vehicle based on image information provided by a camera of the vehicle.</p>
<p id="p0002" num="0002">Methods for calculating the angle of a trailer with respect to the towing vehicle based on image information provided by a camera of the vehicle are already known.</p>
<p id="p0003" num="0003">Specifically, methods are known which provide reliable approximations of trailer yaw angle without considering the location of pivot point of the trailer. However, the accuracy of yaw angle approximation of said methods is low, especially in case of great yaw angles.</p>
<p id="p0004" num="0004">It is an objective of the embodiments of the invention to provide a method for calculating yaw angle of a trailer with high robustness and high accuracy. The objective is solved by the features of the independent claims. Preferred embodiments are given in the dependent claims. If not explicitly indicated otherwise, embodiments of the invention can be freely combined with each other.</p>
<p id="p0005" num="0005">According to an aspect, the invention refers to a method for determining the yaw angle of a trailer with respect to the longitudinal axis of a towing vehicle. The towing vehicle comprises a towball. Based on said towball, the trailer can be coupled with the vehicle. The method comprises the following steps:<br/>
<!-- EPO <DP n="2"> -->First, at least a first and a second image of the trailer is captured using a camera. The first and second image is captured such that the orientation of the trailer with respect to the vehicle is different on the at least two images.</p>
<p id="p0006" num="0006">After capturing said images, at least a first feature of the trailer is determined. Said first feature has to be visible on first and second image.</p>
<p id="p0007" num="0007">Based on said determined first feature, a first angle estimation is calculated. The first angle estimation characterizes the pivot angle in a horizontal plane between the first feature on the first image and the first feature on the second image with respect to the position of the camera of the towing vehicle. In other words, the first angle estimation refers to a pivot angle which is confined between a first line which runs between the position of the first feature on the first image and the position of said camera and a second line which runs between the position of the first feature on the second image and the position of said camera. Said pivot angle opens from the vehicle towards the trailer.</p>
<p id="p0008" num="0008">In the following, the method using at least one angle estimation based on at least one feature detected on at least two images is referred to as "basic algorithm".</p>
<p id="p0009" num="0009">It is worth mentioning that the term "position of the first feature on the first/second image" refers to the 2D image coordinates of the image feature, or the corresponding optical ray (for instance, specified as a 3D unit vector, or an azimuth/elevation). A 2D image coordinate can be converted into an optical ray using the cameras calibration information.</p>
<p id="p0010" num="0010">Furthermore, one or more angle coefficients are provided. Said one or more angle coefficients provide scaling information for said angle<!-- EPO <DP n="3"> --> estimations. So in other words, based on said angle coefficients, the angle estimations can be modified in order to mitigate lack of accuracy.</p>
<p id="p0011" num="0011">Finally, the yaw angle of the trailer is calculated based on said first angle estimation and based on said one or more angle coefficients.</p>
<p id="p0012" num="0012">Said method is advantageous because due to using two or more images and using at least one trailer feature for calculating the yaw angle, the results of yaw angle determination are very reliable and robust even when the detection of trailer features suffers from high noise or the quality of the images is poor. Due to using said one or more angle coefficients, the angle estimation can be scaled in order to improve accuracy.</p>
<p id="p0013" num="0013">According to an embodiment, at least a first and a second feature of the trailer is determined. Said first feature is arranged at a different position of the trailer than the second feature. For example, the first feature may be a conspicuous first characteristic at a first location and the second feature may be a conspicuous second characteristic at a second location of the trailer. In addition, at least a second angle estimation is calculated. The second angle estimation characterizes the pivot angle in a horizontal plane between the second feature on the first image and the second feature on the second image with respect to the position of the camera of the towing vehicle. In other words, the second angle estimation refers to a pivot angle which is confined between a first line which runs between the position of second feature on the first image and the position of said camera and a second line which runs between the position of second feature on second image and the position of said camera. Said pivot angle opens from the vehicle towards the trailer.<!-- EPO <DP n="4"> --></p>
<p id="p0014" num="0014">By using two or more features of the trailer, results with higher reliability can be obtained because effects of noise and mismatches can be reduced.</p>
<p id="p0015" num="0015">According to an embodiment, said one or more angle coefficients are established based on geometry information. Said geometry information may consider the distance between the camera and the towball and the distance between the camera and one or more features of the trailer. Thereby lack of accuracy due to unknown geometric relations between vehicle characteristics (specifically the local relation between camera and towball) and between vehicle and trailer can be mitigated.</p>
<p id="p0016" num="0016">According to an embodiment, an angle coefficient is the distance between the camera and the towball divided by the distance between the camera and a feature of the trailer. The further away a feature is from the camera, the closer the coefficient will be to zero.</p>
<p id="p0017" num="0017">According to an embodiment, said one or more angle coefficients are calculated by the distance between the camera and the towball divided by the distance between the camera and one or more features of the trailer. By calculating the quotient of said distances, the accuracy of yaw angle determination can be further improved.</p>
<p id="p0018" num="0018">According to an embodiment, said angle coefficient is a single coefficient being tailored for the respective vehicle. Said angle coefficient may be predetermined for the specific vehicle characteristics (specifically the local relation between camera and towball) and is used without considering the specific trailer. So, in other words, said single coefficient may be a "one-fits-all-trailers" coefficient. Thereby, an increase of accuracy with limited computational effort can be obtained. Said single coefficient may be applied to each angle estimation or to a median value or average value<!-- EPO <DP n="5"> --> established based on at least two angle estimations. So, in other words, either the at least one angle estimation is directly scaled based on said angle coefficient or an average value or median value of multiple angle estimations is calculated and said average or median value is scaled by said single angle coefficient.</p>
<p id="p0019" num="0019">According to an embodiment, said angle coefficient is dynamically adapted for a respective trailer. So, in other words, the angle coefficient is not fixed as a "one-fits-all-trailers" coefficient but is dynamically adjusted depending on which trailer is currently used. Thereby the accuracy of yaw angle determination is further improved.</p>
<p id="p0020" num="0020">According to an embodiment, said dynamic adaption of angle coefficient is performed by using a reference algorithm for determining yaw angle reference information and adapting the angle coefficient by comparing said two or more angle estimations with yaw angle reference information provided by said reference algorithm. The reference algorithm may provide, at least in certain circumstances, yaw angle reference information which is more accurate than the at least one angle estimation provided by the basic algorithm and which is used to dynamically establish said one or more angle coefficients. So, in other words, the results of reference algorithm are used for scaling the angle estimations provided by said basic algorithm.</p>
<p id="p0021" num="0021">According to an embodiment, the reference algorithm is configured to perform the following steps:
<ul id="ul0001" list-style="dash">
<li>a ray between the camera and determined first feature on the first image is developed and said ray is projected onto a horizontal plane thereby obtaining a first projected feature position. Similarly, a ray between the camera and determined first feature on the<!-- EPO <DP n="6"> --> second image is developed and said ray is projected onto said horizontal plane thereby obtaining a second projected feature position.</li>
<li>Based on said determined first feature, a first perpendicular bisector is established between the location of the first projected feature position and the location of the second projected feature position. More in detail, the first perpendicular bisector may be a perpendicular straight line running through the centre of the line connecting the location of the first projected feature position and the location of the second projected feature position.</li>
<li>After establishing first perpendicular bisector, a first intersection point of first perpendicular bisector with a reference axis or a further perpendicular bisector is established.</li>
<li>Finally, yaw angle reference information is provided based on a first reference angle estimation, said first reference angle estimation referring to the angle between a first line running from first projected feature position to said first intersection point and a second line running from second projected feature position to said first intersection point in said horizontal plane.</li>
</ul></p>
<p id="p0022" num="0022">It is worth mentioning that the term "position of the first feature on the first image" refers to the 2D image coordinates of the image feature, or the corresponding optical ray (for instance, specified as a 3D unit vector, or an azimuth/elevation). A 2D image coordinate can be converted into an optical ray using the cameras calibration information.</p>
<p id="p0023" num="0023">Said first reference angle estimation may open from the towing vehicle towards the trailer.<!-- EPO <DP n="7"> --></p>
<p id="p0024" num="0024">According to an embodiment, multiple yaw angle reference information referring to different yaw angles are developed based on said reference algorithm and the angle coefficient is determined by developing an average value of said multiple yaw angle reference information. Other statistical methods could also be used, for instance variance could be measured to remove outliers. Thereby, noise effects of the reference algorithm can be mitigated.</p>
<p id="p0025" num="0025">According to an embodiment, on first or second image, the yaw angle of the trailer with respect to the vehicle is zero. Thereby, said image can be used as "zero-pose image", i.e. as a reference of an exact alignment of the longitudinal axis of the vehicle with the longitudinal axis of the trailer. However, also another yaw angle value can be used as reference value, as long as said other yaw angle is known.</p>
<p id="p0026" num="0026">According to an embodiment, in the basic algorithm, calculating first angle estimation comprises determining optical rays between said position of camera and said first feature at first and second image. Said optical rays refer to straight lines which run between said camera position and said first feature. Based on said optical rays, the current pivot angle can be determined with reduced computational effort, e.g. based on geometrical methods.</p>
<p id="p0027" num="0027">According to an embodiment, specifically in the basic algorithm, camera calibration information is used for converting the position of said first feature into optical rays. For example, having knowledge of camera position using camera calibration information, the position of a certain feature on the image can be transferred in location information depending on or being correlated with the position of the camera.<!-- EPO <DP n="8"> --></p>
<p id="p0028" num="0028">According to an embodiment, camera calibration information is used for converting the position of said first feature from local domain of the image into local domain of the vehicle or of the position of the camera of the vehicle. For example, having knowledge of camera position using camera calibration information, the position of a certain feature on the image can be transferred in location information depending on or being correlated with the position of the camera included or attached to the vehicle.</p>
<p id="p0029" num="0029">According to an embodiment, in addition to said first feature, at least one further feature of the trailer is used for calculating the yaw angle. Using two or more features leads to further angle estimations which further increase the robustness and reliability of yaw angle determination.</p>
<p id="p0030" num="0030">According to an embodiment, the yaw angle is calculated by establishing the median value based on at least two angle estimations. Thereby, a very stable yaw angle determination can be obtained.</p>
<p id="p0031" num="0031">According to other embodiments, the yaw angle is calculated by establishing an average value of at least two angle estimations or by using a statistical approach applied to said angle estimations.</p>
<p id="p0032" num="0032">According to an embodiment, for providing yaw angle reference information, at least two reference angle estimations based on at least two different trailer features are established and yaw angle reference information is calculated by establishing the median value based on the at least two reference angle estimations. Thereby, a very stable determination of yaw angle reference information can be obtained.</p>
<p id="p0033" num="0033">According to other embodiments, yaw angle reference information is calculated by establishing an average value of the at least two reference<!-- EPO <DP n="9"> --> angle estimations or by using a statistical approach applied to said reference angle estimations.</p>
<p id="p0034" num="0034">According to an embodiment, the method further comprises the step of determining an angle window. Said angle window may comprise an upper and a lower bound around said yaw angle. In addition, a set of features is determined, said features within said set of features leading to angle estimations which are located within said angle window. Said determined set of features, preferably only features included in said set of features, is used for future yaw angle calculations. So, in other words, information of previous yaw angle determinations is used to determine two or more features of the trailer which lead to angle estimations quite close to determined yaw angle (i.e. within the angle window) and to not track those features which lead to angle estimations significantly deviating from determined yaw angle (i.e. out of the angle window). Thereby, the computational complexity and accuracy of angle estimation can be significantly reduced.</p>
<p id="p0035" num="0035">According to an embodiment, in the reference algorithm, the reference axis is the longitudinal axis of the towing vehicle if the camera and the towball of the vehicle are arranged in a vertically oriented plane which comprises said longitudinal axis of the towing vehicle.</p>
<p id="p0036" num="0036">According to another embodiment, in the reference algorithm, the reference axis is a straight line running between the camera and the towball if the camera and/or the towball have a lateral offset with respect to the longitudinal axis of the towing vehicle. Thereby, a lateral offset between the camera and the towball can be compensated.<!-- EPO <DP n="10"> --></p>
<p id="p0037" num="0037">According to an embodiment, the camera is the rear view camera of the vehicle. Based on the rear view camera, images of the trailer can be captured with reduced technical effort.</p>
<p id="p0038" num="0038">According to another embodiment, an angle coefficient may be calculated independently for each feature, on the basis of the reference algorithm for that feature, and on the basis of the basic algorithm for that feature. The coefficient is independent of trailer angle, therefore even if reference algorithm is currently not accurate, or unavailable (due to mathematical instabilities,e.g. divide by zero error at low yaw angles) the angle coefficient can still be used to scale the basic algorithm, even if the angle coefficient was calculated at a different trailer angle.</p>
<p id="p0039" num="0039">Each image feature will then produce an accurate angle estimate, by scaling the basic angle estimate by the angle coefficient. An average, median or other statistical measure can be used to output an estimated trailer yaw angle from the yaw angle estimates from each feature.</p>
<p id="p0040" num="0040">According to a further aspect, a system for determining the yaw angle of a trailer with respect to the longitudinal axis of a towing vehicle is disclosed. The system comprises a camera for capturing images of the trailer and a processing entity for processing said captured images. The system is further configured to execute the steps of:
<ul id="ul0002" list-style="dash" compact="compact">
<li>capturing at least a first and a second image of the trailer using a camera, the orientation of the trailer with respect to the vehicle being different on the at least two images;</li>
<li>determining at least a first feature of the trailer which is visible on first and second image;</li>
<li>calculating a first angle estimation, the first angle estimation characterizing the pivot angle in a horizontal plane between the first<!-- EPO <DP n="11"> --> feature on the first image and the first feature on the second image with respect to the position of the camera of the towing vehicle;</li>
</ul>
<ul id="ul0003" list-style="dash" compact="compact">
<li>Providing one or more angle coefficients, said one or more angle coefficients providing scaling information for said first angle estimation; and</li>
<li>calculating the yaw angle based on said first angle estimation and based on said one or more angle coefficients.</li>
</ul></p>
<p id="p0041" num="0041">Any upper-mentioned feature described as an embodiment of the method is also applicable as a system feature in a system according to the present disclosure.</p>
<p id="p0042" num="0042">According to yet another embodiment, a vehicle comprising a system according to anyone of upper-mentioned embodiments is disclosed.</p>
<p id="p0043" num="0043">The term "vehicle" as used in the present disclosure may refer to a car, truck, bus, train or any other crafts.</p>
<p id="p0044" num="0044">The term "yaw angle" as used in the present disclosure may refer to a pivot angle between the longitudinal axis of the vehicle and the longitudinal axis of the trailer.</p>
<p id="p0045" num="0045">The term "median" as used in the present disclosure may refer to a value separating a higher half from a lower half of a data sample or a probability distribution.</p>
<p id="p0046" num="0046">The term "essentially" or "approximately" as used in the invention means deviations from the exact value by +/- 10%, preferably by +/- 5% and/or deviations in the form of changes that are insignificant for the function and/or for the traffic laws.<!-- EPO <DP n="12"> --></p>
<p id="p0047" num="0047">Various aspects of the invention, including its particular features and advantages, will be readily understood from the following detailed description and the accompanying drawings, in which:
<ul id="ul0004" list-style="none">
<li><figref idref="f0001">Fig. 1</figref> shows an exemplary top view on a vehicle towing a trailer;</li>
<li><figref idref="f0001">Fig. 2</figref> schematically illustrates angle estimations based on a first and a second feature captured by camera images in different pivot angles between the trailer and the towing vehicle;</li>
<li><figref idref="f0002">Fig. 3</figref> schematically illustrates a reference angle estimation based on a first feature captured by camera images in different pivot angles between the trailer and the towing vehicle according to a reference algorithm;</li>
<li><figref idref="f0002">Fig. 4</figref> schematically illustrates reference angle estimations based on a first and a second feature captured by camera images in different pivot angles between the trailer and the towing vehicle according to said reference algorithm; and</li>
<li><figref idref="f0003">Fig. 5</figref> shows a schematic block diagram illustrating the steps of a method for determining the yaw angle of a trailer with respect to the longitudinal axis of a towing vehicle.</li>
</ul></p>
<p id="p0048" num="0048">The present invention will now be described more fully with reference to the accompanying drawings, in which example embodiments are shown. The embodiments in the figures may relate to preferred embodiments, while all elements and features described in connection with embodiments may be used, as far as appropriate, in combination with any other embodiment and feature as discussed herein, in particular related to any other embodiment discussed further above. However, this invention should not be construed as limited to the embodiments set forth herein.<!-- EPO <DP n="13"> --></p>
<p id="p0049" num="0049">Throughout the following description similar reference numerals have been used to denote similar elements, parts, items or features, when applicable.</p>
<p id="p0050" num="0050">The features of the present invention disclosed in the specification, the claims, examples and/or the figures may both separately and in any combination thereof be material for realizing the invention in various forms thereof.</p>
<p id="p0051" num="0051"><figref idref="f0001">Fig. 1</figref> shows a top view illustration of a vehicle 1 towing a trailer 2. The vehicle 1 comprises a longitudinal axis LAV which runs through the centre of the vehicle 1. Similarly, the trailer 2 comprises a longitudinal axis LAT which runs through the centre of the trailer 2. The trailer 2 is coupled with the vehicle 1 by means of a trailer hitch comprising a towball 4.</p>
<p id="p0052" num="0052">In certain driving situations, the longitudinal axis LAV of the vehicle 1 and the longitudinal axis LAT of the trailer 2 may not be aligned in parallel or may not fall into one another but the axes may confine a yaw angle YA. In other words, the yaw angle YA defines the angular deviation of the longitudinal axis LAT of the trailer 2 with respect to the longitudinal axis LAV of the vehicle 1. The yaw angle YA may be measured in a horizontal plane which includes the longitudinal axis LAT of the trailer 2 as well as the longitudinal axis LAV of the vehicle 1.</p>
<p id="p0053" num="0053">The knowledge of yaw angle YA is - inter alia - advantageous in trailer assistance systems, for example.</p>
<p id="p0054" num="0054">For determining the yaw angle YA, multiple images of at least a portion of the trailer 2 are captured by means of a camera 3. The camera 3 may be, for example, a rear view camera of the vehicle 1, which may also be used for capturing images of the surroundings of the vehicle 1 when driving<!-- EPO <DP n="14"> --> backwards. One of the captured images may refer to a known angular arrangement of the trailer 2 with respect to the towing vehicle 1. Said image may be used as reference for calculating the yaw angle YA. In said known angular arrangement of the trailer 2 with respect to the towing vehicle 1, the yaw angle YA may be 0° or any other angle value.</p>
<p id="p0055" num="0055"><figref idref="f0001">Fig. 2</figref> shows a schematic diagram illustrating the angular relationship of a first and a second feature F1, F2 of trailer 2, said features F1, F2 being identified at different points of time and at different angular positions with respect to a fix point of the vehicle 1.</p>
<p id="p0056" num="0056">The camera 3 may capture two or more images at different points of time at which the angular position of the trailer 2 with respect to the vehicle 1 is different. For example, an image series may be captured. Said image series may comprise three or more, in particular, more than five images.</p>
<p id="p0057" num="0057">In the present example, the second image may show an orientation of the trailer 2 with respect to the vehicle at a yaw angle YA = 0°. However, according to other embodiments, the yaw angle YA may be any other reference yaw angle which is known in advance and which can be used for determining the current yaw angle.</p>
<p id="p0058" num="0058">On the images captured by the camera 3, multiple different features may be identifiable. In <figref idref="f0001">Fig. 2</figref>, features F1 and F2 are illustrated which are identified at different angular positions with respect to the position of the camera 3 of the vehicle 1 or a reference axis. The first feature F1 is illustrated by a square, the second feature F2 is illustrated by a triangle. It is worth mentioning that more than two features and more than two images can be used for yaw angle estimation. Also, usage of only one feature for estimating yaw angle is possible.<!-- EPO <DP n="15"> --></p>
<p id="p0059" num="0059">So, the upper pair of first and second feature F1, F2 (associated with the solid optical rays connecting the features F1 and F2 with the camera 3) may be identified in a first image, the lower pair of first and second feature F1, F2 (associated with dashed optical rays connecting the features F1 and F2 with the camera 3) may be identified in a second image at a different point of time.</p>
<p id="p0060" num="0060">Features on the trailer 2 may be located and matched using feature detection and matching algorithm. For example, the Harris Corner Detector, Scale-Invariant Feature Transform (SIFT) algorithm, Speeded Up Robust Features (SURF) algorithm, Binary Robust Invariant Scalable Keypoints (BRISK) algorithm, Binary Robust Independent Elementary Features (BRIEF), Oriented FAST and rotated BRIEF (ORB) algorithm or another suitable feature detection and matching algorithm could be used.</p>
<p id="p0061" num="0061">The feature detection and matching algorithm may detect image features that are on the trailer or not on the trailer. To segment the trailer features from the non-trailer features a number of different methods could be used. For instance, when driving forwards in a straight line, trailer features can be segmented from non-trailer features by looking for features that remain in the same position over time. Alternatively, the motion of background features can be modelled over time using the vehicle's known motion. This could be extracted from CAN data regarding speed and steering. Features which do not fit the Epipolar constraint of the Essential Matrix could then be considered as trailer features.</p>
<p id="p0062" num="0062">For determining angle estimations α1, α2, optical rays R connecting the features F1 and F2 with the camera 3 are used. In order to associate features F1 and F2 of the captured images with the position of the camera 3, calibration information of the camera 3 may be used to transform the location of features in image coordinates into the spatial domain of the<!-- EPO <DP n="16"> --> camera, thereby enabling the provision of optical rays R linking the position of the respective feature F1, F2 with said camera position. In other words, for associating camera position and feature positions, the location of features on the images is transformed in the local domain of the vehicle 1, respectively, the local domain of the camera of the vehicle 1 based on calibration information of the camera 3.</p>
<p id="p0063" num="0063">After determining the optical rays R between the camera position and the one or more features in first and second image, the pivot angles of first feature F1 and second feature F2 are determined. In <figref idref="f0001">Fig. 2</figref>, α1 illustrates the angle estimation of pivot angle of first feature F1 between the two captured images and α2 illustrates the angle estimation of the pivot angle of second feature F2 between said images. According to embodiments, only one or more than two features of the trailer are determined and tracked over multiple images. In addition, preferably, more than two images are captured at different points of time in order to enhance the result of yaw angle estimation.</p>
<p id="p0064" num="0064">As mentioned before, one of the captured images may provide a reference image in which the angular position of the trailer 2 with respect to the vehicle 1 is known. In said known angular arrangement of the trailer 2 with respect to the towing vehicle 1, the yaw angle YA may be 0° or any other angle value. Therefore, based on said at least one angle estimation α1, α2, the yaw angle YA can be calculated. Again referring to <figref idref="f0001">Fig. 2</figref>, for example, the angular arrangement of the optical rays R indicated by dashed lines may be known because when capturing the image referring to said optical rays R, the trailer 2 has a known reference orientation with respect to the vehicle 1.</p>
<p id="p0065" num="0065">Upper-mentioned method is very robust, i.e. provides angle estimations also when the image quality is poor but the accuracy of angle estimations<!-- EPO <DP n="17"> --> is low. It appeared that in most cases the at least one angle estimation α1, α2 is lower than the actual yaw angle YA.</p>
<p id="p0066" num="0066">In order to improve the accuracy, the method uses one or more angle coefficients, based on which angle estimations are scaled or modified in order to provide angle estimations which are very close to actual yaw angle.</p>
<p id="p0067" num="0067">The angle coefficient may be established based on geometrical information which characterizes the geometrical situation between the vehicle 1 and the trailer 2. More in detail, the angle coefficient may be calculated based on a set of distance information, said set of distance information including the distance between the camera 3 and the towball 4 of the vehicle 1 and the distance between the camera 3 of the vehicle 1 and the at least one feature F1, F2 of the trailer 4. In particular, the angle coefficient may be calculated by a division of a first distance between the camera 3 and the towball 4 and a second distance between the camera 3 of the vehicle 1 and a certain feature F1, F2 of the trailer 2 (i.e. <maths id="math0001" num=""><math display="inline"><mrow><mfrac><mi mathvariant="italic">first distance</mi><mi mathvariant="italic">second distance</mi></mfrac></mrow></math><img id="ib0001" file="imgb0001.tif" wi="27" he="11" img-content="math" img-format="tif" inline="yes"/></maths>).</p>
<p id="p0068" num="0068">Multiple different possibilities for using one or more angle coefficients for scaling angle estimations exist:<br/>
First, a single angle coefficient can be used for multiple features of the trailer 2. The single angle coefficient may have been established for the respective vehicle 1 in advance. The angle coefficient may take the distance of the camera 3 with respect to the towball 4 into account. Said single angle coefficient can be stored in a storage device of the vehicle 1 or may be firmly implemented in the software of the vehicle 1.<!-- EPO <DP n="18"> --></p>
<p id="p0069" num="0069">After calculating two or more angle estimations α1, α2, a mean value may be calculated based on said angle estimations α1, α2. Said mean value may be, for example, the median of said developed angle estimations α1, α2. According to another embodiment, the yaw angle YA may be determined by calculating the arithmetical mean of developed angle estimations α1, α2. According to yet another embodiment, the yaw angle YA may be determined by using a stochastic approach based on said angle estimations α1, α2, e.g. RANSAC-algorithm (RANSAC: random sample consensus) or least squares algorithm.</p>
<p id="p0070" num="0070">A second possibility of providing one or more angle coefficients is dynamically establishing one or more angle coefficients based on a reference algorithm. More specifically, a single angle coefficient may be established for a particular trailer 2 or multiple angle coefficients may be established, each angle coefficient being associated with a certain feature F1, F2 of the trailer 2. So, in other words, an angle coefficient can be dynamically established on a per-trailer basis or a per-feature basis.</p>
<p id="p0071" num="0071">Said dynamically establishing of an angle coefficient uses angle estimations α1, α2 as mentioned before, i.e. for a certain feature, the pivot angle between a feature F1, F2 on the first image and the same feature F1, F2 on the second image is determined.</p>
<p id="p0072" num="0072">In order to determine the angle coefficient which scales a single angle estimation α1, α2 or an average or median value of multiple angle estimations α1, α2 towards the actual yaw angle YA, the single angle estimation α1, α2 or an average or median value of multiple angle estimations α1, α2 is compared with the result of a reference algorithm which provides yaw angle reference information which comprises higher accuracy than the angle estimations of basic algorithm and the angle coefficient is chosen such that angle estimation is equal or essential to<!-- EPO <DP n="19"> --> yaw angle reference information. Specifically, the reference method may be configured to consider the location of the towball 4 around which the trailer 2 pivots.</p>
<p id="p0073" num="0073">In the following, based on <figref idref="f0002">Fig. 3</figref>, an exemplary reference method is disclosed. Similar to <figref idref="f0001">Fig. 2</figref>, also <figref idref="f0002">Fig. 3</figref> shows a schematic diagram illustrating the angular relationship of a first and a second feature F1, F2 of the trailer 2 at different points of time at which the trailer 2 has a different yaw angle YA with respect to the towing vehicle 1.</p>
<p id="p0074" num="0074">It is worth mentioning that the reference algorithm uses the same images which are also used for calculating angle estimations in order to ensure that the angle coefficient is established based on the same trailer positions, respectively, trailer yaw angles.</p>
<p id="p0075" num="0075">The determination of reference yaw angle based on said reference algorithm is illustrated in <figref idref="f0002">Fig. 3</figref> in closer detail.</p>
<p id="p0076" num="0076">Similar to <figref idref="f0001">Fig. 2</figref>, also in <figref idref="f0002">Fig. 3</figref>, a first projected feature position PFP1a which is established based on first feature F1 (associated with the solid optical ray connecting the first projected feature position PFP1a with the camera 3) is identified in a first image and a second projected feature position PFP1b which is established based on second feature F2 (associated with the solid optical ray connecting the second projected feature position PFP1b with the camera 3) is identified in a second image at a different point of time.</p>
<p id="p0077" num="0077">The determination of reference yaw angle based on said reference algorithm is illustrated in <figref idref="f0002">Fig. 3</figref> in closer detail. The change of location of first and second projected feature position PFP1a, PFP1b between said<!-- EPO <DP n="20"> --> first and second image is used for determining at least one reference angle estimations β1.</p>
<p id="p0078" num="0078">After feature identification in the respective images, the first feature F1 of first and second image is projected in a common horizontal plane. More in detail, the ray between the camera 3 and determined first feature F1 on the first image is projected onto a horizontal plane thereby obtaining a first projected feature position PFP1a. In addition, the ray between the camera 3 and determined first feature F1 on the second image is projected onto the same horizontal plane thereby obtaining a second projected feature position PFP1b. It is worth mentioning that said projection is made in vertical direction thereby only changing the elevation angle of optical rays but not the azimuth angle.</p>
<p id="p0079" num="0079">After determining first and second projected feature positions PFP1a, PFP1b, a first perpendicular bisector B1 is established based on said first and second projected feature positions PFP1a, PFP1b. As shown in <figref idref="f0002">Fig. 3</figref>, the first perpendicular bisector B1 is a line being perpendicular to the line linking first and second projected feature positions PFP1a, PFP1b. In addition, the first perpendicular bisector B1 runs through the center of said linking line. Said first perpendicular bisector B1 crosses a reference axis, which is in the present embodiment the longitudinal axis of the vehicle LAV. Said intersection (indicated by IP1) of first perpendicular bisector B1 and reference axis provides the point of rotation, around which the trailer is rotated. More in detail, said intersection provides the position of the towball 4.</p>
<p id="p0080" num="0080">Based on said first perpendicular bisector B1, a first reference angle estimation β1 is calculated. Said first reference angle estimation β1 refers to an angle provided between a first line L1 linking first projected feature position PFP1a and the intersection of first perpendicular bisector B1 and<!-- EPO <DP n="21"> --> reference axis and a second line L2 linking second projected feature position PFP1b and the intersection of first perpendicular bisector B1 and reference axis. The intersection may be indicative for the position of towball 4. More in detail, the first reference angle estimation β1 characterizes the pivot angle of the trailer 2 in a horizontal plane between the location of the first feature F1 in the first image projected on the horizontal plane and the location of the first feature F1 in the second image projected on said horizontal plane around said first intersection point IP1 (which is the position of towball 4).</p>
<p id="p0081" num="0081">The first reference angle estimation β1 is representive for the yaw angle YA of the trailer 2 around its actual point of rotation.</p>
<p id="p0082" num="0082"><figref idref="f0002">Fig. 4</figref> illustrates an embodiment similar to <figref idref="f0002">Fig. 3</figref> which uses a first and a second feature F1, F2 of the trailer 2 captured at different points of time (at which the trailer 2 has a different yaw angle YA with respect to the towing vehicle 1) for establishing yaw angle reference information. The feature arrangement is similar to the illustration of <figref idref="f0001">Fig. 2</figref>.</p>
<p id="p0083" num="0083">On the images captured by the camera 3, multiple different features may be identifiable. As shown in <figref idref="f0002">Fig. 4</figref>, said features are identified at different angular positions with respect to the position of the camera 3 of the vehicle 1. The first feature is illustrated by a square, the second feature is illustrated by a triangle.</p>
<p id="p0084" num="0084">In <figref idref="f0002">Fig. 4</figref>, the upper pair of first and second feature (indicated by PFP1a, PFP2a and associated with the solid optical rays connecting the features with the camera 3) are identified in a first image, the lower pair of first and second feature F1, F2 (indicated by PFP1b, PFP2b and associated with dashed optical rays connecting the features with the camera 3) are identified in a second image at a different point of time.<!-- EPO <DP n="22"> --></p>
<p id="p0085" num="0085">The determination of yaw angle reference information is performed analogously to the embodiment of <figref idref="f0002">Fig. 3</figref>. The main difference is that two reference angle estimations β1, β2 are established and yaw angle reference information is developed based on said two reference angle estimations β1, β2. More in detail, establishing first perpendicular bisector B1 and obtaining first reference angle estimation β1 is performed like described above in connection with <figref idref="f0002">Fig. 3</figref>.</p>
<p id="p0086" num="0086">In addition, second reference angle estimation β2 is obtained by establishing third projected feature position PFP2a and fourth projected feature position PFP2b, establishing a second perpendicular bisector B2 in order to obtain a second intersection point IP2 and connecting the third projected feature position PFP2a and the fourth projected feature position PFP2b with said second intersection point IP2. Said third projected feature position PFP2a is obtained by projecting second feature F2 in the first image onto said horizontal plane and fourth projected feature position PFP2b is obtained by projecting second feature F2 in the second image onto said horizontal plane. The second intersection point IP2 may be the point in which the second perpendicular bisector B2 crosses the reference axis, in the present embodiment the longitudinal axis of the vehicle LAV. The second reference angle estimation β2 is the angle between a first line linking third projected feature position PFP2a and intersection point IP2 and a second line linking fourth projected feature position PFP2b and intersection point IP2.</p>
<p id="p0087" num="0087">In the present embodiment, the reference axis is the longitudinal axis LAV of the towing vehicle 1, because the camera 3 as well as the towball 4 is located on said longitudinal axis LAV of the vehicle 1. In other embodiments, if the camera 3 or the towball 4 has a lateral offset to the longitudinal axis LAV of the vehicle 1 or the lateral offset of the camera 3<!-- EPO <DP n="23"> --> and the towball 4 with respect to the longitudinal axis LAV of the vehicle 1 is different, the reference axis may be formed by a straight line linking the camera 3 and the towball 4.</p>
<p id="p0088" num="0088">Under ideal conditions, the first reference angle estimation β1 and the second reference angle estimation β2 should be equal (β1 = β2) and should represent the yaw angle YA. However, due to noise and mismatches, the values of first and second reference angle estimation β1, β2 can be different.</p>
<p id="p0089" num="0089">It is worth mentioning that more than two features of the trailer 2 could determined and tracked over multiple images. In addition, preferably, more than two images are captured at different points of time in order to enhance the result of estimation of yaw angle reference information. Thereby, more than two reference angle estimations β1, β2 can be established for increasing the quality of yaw angle reference information determination.</p>
<p id="p0090" num="0090">For determining yaw angle reference information based on first and second reference angle estimations β1, β2 having different values, a statistical measure may be used. According to a first embodiment, the median of two or more reference angle estimations β1, β2 may be used to determine yaw angle reference information. According to other embodiments, a statistical method may be used to determine yaw angle reference information based on of two or more reference angle estimations β1, β2. The statistical method may be, for example, RANSAC-algorithm (RANSAC: random sample consensus) or least squares algorithm.</p>
<p id="p0091" num="0091">It is worth mentioning that upper-mentioned reference algorithm is a mere example of a method which can be used for scaling/adapting angle<!-- EPO <DP n="24"> --> coefficient. However, also other reference algorithms may be used for scaling/adapting the angle coefficient.</p>
<p id="p0092" num="0092">Based on said at least one reference angle estimation β1, β2, a yaw angle reference information may be developed based on which the value of angle coefficient can be selected such that the angle estimations α1, α2 are tuned towards the yaw angle reference information .</p>
<p id="p0093" num="0093">In order to remove noise which might be inherent to upper-disclosed reference method, multiple reference angle coefficients may be developed for different yaw angles of the trailer 2. The reference angle coefficient may be not dependent on the value of the yaw angle. So, by averaging multiple angle coefficients, e.g. by moving or exponential average, the noise impact can be mitigated.</p>
<p id="p0094" num="0094">As a third example, multiple angle coefficients can be established, wherein each angle coefficient corresponds to a certain feature F1, F2 of the trailer 2. So, in other words, not only a single angle coefficient is used for all features F1, F2 of the trailer but a first angle coefficient may be used for the first feature F1 and a second angle coefficient may be used for the second feature F2.</p>
<p id="p0095" num="0095">Said multiple angle coefficients could be established dynamically by using upper-mentioned reference algorithm.</p>
<p id="p0096" num="0096">According to an example, the following formula may be used for determining yaw angle YA based on angle estimation α1, α2 and angle coefficient: <maths id="math0002" num=""><math display="block"><mrow><mi mathvariant="italic">YA</mi><mo>=</mo><mi>angle estimation</mi><mo>+</mo><msup><mi>sin</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mfenced separators=""><mi>angle coefficient</mi><mo>∗</mo><mi>sin</mi><mfenced><mi>angle estimation</mi></mfenced></mfenced></mrow></math><img id="ib0002" file="imgb0002.tif" wi="134" he="7" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="25"> --></p>
<p id="p0097" num="0097">Upper-mentioned equation can be rearranged to determine the angle coefficient by using the angle estimation α1 and reference angle estimation β1, respectively yaw angle reference information obtained based on reference angle estimation β1.</p>
<p id="p0098" num="0098">If reference angle estimation β1, respectively yaw angle reference information is unavailable, for instance due to noisy feature matches, the angle estimation α1, which is robust to noisy feature matches can be used to produce an accurate angle estimate using the previously calculated angle coefficient.</p>
<p id="p0099" num="0099">It is worth mentioning that upper-mentioned formula is a mere example and the present disclosure is not limited to the usage of said formula. So, also other formulas may be used for calculating yaw angle YA based on angle estimations α1, α2 and angle coefficient.</p>
<p id="p0100" num="0100">Under ideal conditions, when establishing multiple angle estimations α1, α2, the first angle estimation α1 and the second angle estimation α2 should be equal (α1 = α2). However, due to noise and mismatches, the values of first and second angle estimation α1, α2 can be different. It is worth mentioning that more than two angle estimations can be established for increasing the quality of yaw angle determination.</p>
<p id="p0101" num="0101">For determining the yaw angle YA based on first and second angle estimations α1, α2 having different values, a statistical measure may be used. According to a first embodiment, the median of two or more angle estimations α1, α2 may be used to determine the yaw angle YA. According to other embodiments, a statistical method may be used to determine the yaw angle YA based on of two or more angle estimations α1, α2. The statistical method may be, for example, RANSAC-algorithm (RANSAC: random sample consensus) or least squares algorithm.<!-- EPO <DP n="26"> --></p>
<p id="p0102" num="0102">It appeared that not all features visible on the captured images are equally suitable for calculating yaw angle YA. In order to reduce computational complexity and robustness, those features are selected and further used for determining yaw angle YA, which provide pivot angles quite close to actual yaw angle. For feature selection, only those features may be tracked in future images which provided pivot angles α1, α2 in a certain window around the actual yaw angle. For example, the window may be defined by an upper and a lower boundary, said upper and lower boundary defining an angular window around said actual yaw angle. For example, the window may span over a distance of 2° to 10°, more particular between 3° and 5°. All features which led to pivot angles within said window in the last two or more yaw angle determination steps are further tracked in the next captured images.</p>
<p id="p0103" num="0103">In case of tracking a particular trailer feature for multiple images, due to the movement of the trailer 2, the samples of said feature may be arranged on a circle segment. The centre of said circle segment represents the location of towball 4. Therefore, by tracking a particular trailer feature over multiple images, the location of towball 4 can be derived.</p>
<p id="p0104" num="0104">In order to mitigate noise, the determination of the location of towball 4 may consider multiple trailer features tracked for a period of time over multiple images. Each trailer feature may correspond to a circle segment with certain centre estimation. By applying a statistical method on said multiple centre estimations, the actual location of towball 4 can be developed. The statistical method may be, for example, RANSAC-algorithm or least squares algorithm.<!-- EPO <DP n="27"> --></p>
<p id="p0105" num="0105"><figref idref="f0003">Fig. 5</figref> shows a block diagram illustrating the method steps of a method for determining the yaw angle YA of a trailer 2 with respect to the longitudinal axis LAV of a towing vehicle 1.</p>
<p id="p0106" num="0106">As a first step, a first and a second image of the trailer is captured (S10).</p>
<p id="p0107" num="0107">After image capturing, at least one feature of the trailer visible on the first and the second image is determined (S11).</p>
<p id="p0108" num="0108">After determining said at least one feature, at least a first angle estimation is be calculated (S12).</p>
<p id="p0109" num="0109">In addition, one or more angle coefficients may be provided (S13). Said one or more angle coefficients provide scaling information for said at least one angle estimation.</p>
<p id="p0110" num="0110">Finally, the yaw angle is calculated based on first angle estimation and based on one or more angle coefficients which provide correction information for said angle estimation (S14).</p>
<p id="p0111" num="0111">It should be noted that the description and drawings merely illustrate the principles of the proposed invention. Those skilled in the art will be able to implement various arrangements that, although not explicitly described or shown herein, embody the principles of the invention.<!-- EPO <DP n="28"> --></p>
<heading id="h0001"><b>List of reference numerals</b></heading>
<p id="p0112" num="0112">
<dl id="dl0001" compact="compact">
<dt>1</dt><dd>vehicle</dd>
<dt>2</dt><dd>trailer</dd>
<dt>3</dt><dd>camera</dd>
<dt>4</dt><dd>towball</dd>
</dl>
<dl id="dl0002" compact="compact">
<dt><i>α</i>1</dt><dd>first angle estimation</dd>
<dt><i>α</i>2</dt><dd>second angle estimation</dd>
<dt><i>β</i>1</dt><dd>first reference angle estimation</dd>
<dt><i>β</i>2</dt><dd>second reference angle estimation</dd>
<dt>B1</dt><dd>first perpendicular bisector</dd>
<dt>B2</dt><dd>second perpendicular bisector</dd>
<dt>PFP1a</dt><dd>projected feature position of first feature in first image</dd>
<dt>PFP1b</dt><dd>projected feature position of first feature in second image</dd>
<dt>PFP2a</dt><dd>projected feature position of second feature in first image</dd>
<dt>PFP2b</dt><dd>projected feature position of second feature in second image</dd>
<dt>F1</dt><dd>first feature</dd>
<dt>F2</dt><dd>second feature</dd>
<dt>IP1</dt><dd>first intersection point</dd>
<dt>IP2</dt><dd>second intersection point</dd>
<dt>LAT</dt><dd>longitudinal axis of trailer</dd>
<dt>LAV</dt><dd>longitudinal axis of vehicle</dd>
<dt>R</dt><dd>optical ray</dd>
<dt>YA</dt><dd>yaw angle</dd>
</dl></p>
</description>
<claims id="claims01" lang="en"><!-- EPO <DP n="29"> -->
<claim id="c-en-0001" num="0001">
<claim-text>Method for determining the yaw angle (YA) of a trailer (2) with respect to the longitudinal axis (LAV) of a towing vehicle (1) comprising a towball (4), the method comprising the steps of:
<claim-text>- capturing at least a first and a second image of the trailer (2) using a camera (3), the orientation of the trailer (2) with respect to the vehicle (1) being different on the at least two images (S10);</claim-text>
<claim-text>- determining at least a first feature (F1) of the trailer (2) which is visible on first and second image (S11);</claim-text>
<claim-text>- calculating a first angle estimation (α1), the first angle estimation (α1) characterizing the pivot angle in a horizontal plane between the first feature (F1) on the first image and the first feature (F1) on the second image with respect to the position of the camera (3) of the towing vehicle (1) (S12);</claim-text>
<claim-text>- Providing one or more angle coefficients, said one or more angle coefficients providing scaling information for said first angle estimation (α1) (S13); and</claim-text>
<claim-text>- calculating the yaw angle (YA) based on said first angle estimation (α1) and based on said one or more angle coefficients (S14).</claim-text></claim-text></claim>
<claim id="c-en-0002" num="0002">
<claim-text>Method according to claim 1, wherein the one or more angle coefficients are established based on geometry information, said geometry information considering the distance between camera (3) and towball (4) and the distance between camera (3) and one or more features (F1, F2) of the trailer (2).</claim-text></claim>
<claim id="c-en-0003" num="0003">
<claim-text>Method according to claim 1 or 2, wherein the one or more angle coefficients are established by the distance between camera (3) and towball (4) divided by the distance between camera (3) and one or more features (F1, F2) of the trailer (2).<!-- EPO <DP n="30"> --></claim-text></claim>
<claim id="c-en-0004" num="0004">
<claim-text>Method according to anyone of the preceding claims, wherein said angle coefficient is a single coefficient being tailored for the respective vehicle.</claim-text></claim>
<claim id="c-en-0005" num="0005">
<claim-text>Method according to claim 4, wherein said single coefficient is applied to at least one angle estimation (α1, α2) or to a median value or average value established based on at least two angle estimations (α1, α2).</claim-text></claim>
<claim id="c-en-0006" num="0006">
<claim-text>Method according to anyone of claims 1 to 3, wherein said angle coefficient is dynamically adapted for a respective trailer (2).</claim-text></claim>
<claim id="c-en-0007" num="0007">
<claim-text>Method according to claim 6, wherein said dynamic adaption of angle coefficient is performed by using a reference algorithm for determining yaw angle (YA) and adapting the angle coefficient by comparing said at least one angle estimation (α1, α2) with yaw angle reference information provided by said reference algorithm.</claim-text></claim>
<claim id="c-en-0008" num="0008">
<claim-text>Method according to claim 7, wherein said reference algorithm is configured to:
<claim-text>- projecting the ray between the camera (3) and determined first feature on the first image onto a horizontal plane thereby obtaining a first projected feature position (PFP1a) and projecting the ray between the camera (3) and determined first feature on the second image onto said horizontal plane thereby obtaining a second projected feature position (PFP1b)</claim-text>
<claim-text>- establishing a first perpendicular bisector (B1) between the location of the first projected feature position (PFP1a) and the location of the second projected feature position (PFP1b) ;<!-- EPO <DP n="31"> --></claim-text>
<claim-text>- determining a first intersection point (IP1) of first perpendicular bisector (B1) with a reference axis or a further perpendicular bisector; and</claim-text>
<claim-text>- providing yaw angle reference information based on a first reference angle estimation (β1), said first reference angle estimation (β1) referring to the angle between a first line running from first projected feature position (PFP1a) to said first intersection point (IP1) and a second line running from second projected feature position (PFP1b) to said first intersection point (IP1) in said horizontal plane.</claim-text></claim-text></claim>
<claim id="c-en-0009" num="0009">
<claim-text>Method according to claim 7 or 8, wherein multiple yaw angle reference information referring to different yaw angles are developed based on said reference algorithm and the angle coefficient is determined by developing an average value of said multiple yaw angle reference information.</claim-text></claim>
<claim id="c-en-0010" num="0010">
<claim-text>Method according to anyone of the claims 1 to 3 and 6 to 9, wherein, per each feature, different angle coefficients are provided or established.</claim-text></claim>
<claim id="c-en-0011" num="0011">
<claim-text>Method according to claim 10, wherein each angle coefficient is established by considering the relationship of the distance between camera (3) and towball (4) and the distance between camera (3) and the respective feature (F1, F2) of the trailer (2) which corresponds to said angle coefficient.</claim-text></claim>
<claim id="c-en-0012" num="0012">
<claim-text>Method according to anyone of preceding claims, wherein the step of calculating first angle estimation (α1) comprises determining optical rays (R) between the position of the camera (3) and said at least one feature (F1, F2) at first and second image.<!-- EPO <DP n="32"> --></claim-text></claim>
<claim id="c-en-0013" num="0013">
<claim-text>Method according to claim 12, wherein camera calibration information is used for converting the position of said at least one feature (F1, F2) from local domain of the image into local domain of the vehicle (1) in order to determine said optical rays (R).</claim-text></claim>
<claim id="c-en-0014" num="0014">
<claim-text>Method according to anyone of preceding claims, wherein in addition to said first feature (F1), one or more further features of the trailer (2) are used for calculating the yaw angle (YA).</claim-text></claim>
<claim id="c-en-0015" num="0015">
<claim-text>System for determining the yaw angle (YA) of a trailer (2) with respect to the longitudinal axis (LAV) of a towing vehicle (1), the system comprising a camera (3) for capturing images of the trailer (2) and a processing entity for processing said captured images, the system further being configured to execute the steps of:
<claim-text>- capturing at least a first and a second image of the trailer (2) using a camera (3), the orientation of the trailer (2) with respect to the vehicle (1) being different on the at least two images (S10);</claim-text>
<claim-text>- determining at least a first feature (F1) of the trailer (2) which is visible on first and second image (S11);</claim-text>
<claim-text>- calculating a first angle estimation (α1), the first angle estimation (α1) characterizing the pivot angle in a horizontal plane between the first feature (F1) on the first image and the first feature (F1) on the second image with respect to the position of the camera (3) of the towing vehicle (1) (S12);</claim-text>
<claim-text>- Providing one or more angle coefficients, said one or more angle coefficients providing scaling information for said first angle estimation (α1) (S14); and</claim-text>
<claim-text>- calculating the yaw angle (YA) based on said first angle estimation (α1) and based on said one or more angle coefficients (S15).</claim-text></claim-text></claim>
</claims>
<drawings id="draw" lang="en"><!-- EPO <DP n="33"> -->
<figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="157" he="230" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> -->
<figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="131" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> -->
<figure id="f0003" num="5"><img id="if0003" file="imgf0003.tif" wi="135" he="145" img-content="drawing" img-format="tif"/></figure>
</drawings>
<search-report-data id="srep" lang="en" srep-office="EP" date-produced=""><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="155" he="233" type="tif"/></search-report-data><search-report-data date-produced="20200728" id="srepxml" lang="en" srep-office="EP" srep-type="ep-sr" status="n"><!--
 The search report data in XML is provided for the users' convenience only. It might differ from the search report of the PDF document, which contains the officially published data. The EPO disclaims any liability for incorrect or incomplete data in the XML for search reports.
 -->

<srep-info><file-reference-id>2020P01197EP (NU)</file-reference-id><application-reference><document-id><country>EP</country><doc-number>20167183.1</doc-number></document-id></application-reference><applicant-name><name>Continental Automotive GmbH</name></applicant-name><srep-established srep-established="yes"/><srep-invention-title title-approval="yes"/><srep-abstract abs-approval="yes"/><srep-figure-to-publish figinfo="by-applicant"><figure-to-publish><fig-number>5</fig-number></figure-to-publish></srep-figure-to-publish><srep-info-admin><srep-office><addressbook><text>MN</text></addressbook></srep-office><date-search-report-mailed><date>20200807</date></date-search-report-mailed></srep-info-admin></srep-info><srep-for-pub><srep-fields-searched><minimum-documentation><classifications-ipcr><classification-ipcr><text>G06T</text></classification-ipcr><classification-ipcr><text>B60D</text></classification-ipcr></classifications-ipcr></minimum-documentation></srep-fields-searched><srep-citations><citation id="sr-cit0001"><patcit dnum="DE102011113197A1" id="sr-pcit0001" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=DE102011113197&amp;CY=ep"><document-id><country>DE</country><doc-number>102011113197</doc-number><kind>A1</kind><name>VOLKSWAGEN AG [DE]</name><date>20130314</date></document-id></patcit><category>X</category><rel-claims>1,2,4-7,10,11,13-15</rel-claims><category>Y</category><rel-claims>8,9</rel-claims><category>A</category><rel-claims>3</rel-claims><rel-passage><passage>* paragraphs [0025] - [0035]; figures 1-3 *</passage></rel-passage></citation><citation id="sr-cit0002"><patcit dnum="WO2019166065A1" id="sr-pcit0002" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=WO2019166065&amp;CY=ep"><document-id><country>WO</country><doc-number>2019166065</doc-number><kind>A1</kind><name>CONTINENTAL AUTOMOTIVE GMBH [DE]</name><date>20190906</date></document-id></patcit><category>X</category><rel-claims>1,6,10-12,15</rel-claims><rel-passage><passage>* figures 2-6 *</passage></rel-passage></citation><citation id="sr-cit0003"><patcit dnum="DE102016117284A1" id="sr-pcit0003" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=DE102016117284&amp;CY=ep"><document-id><country>DE</country><doc-number>102016117284</doc-number><kind>A1</kind><name>CONNAUGHT ELECTRONICS LTD [IE]</name><date>20180315</date></document-id></patcit><category>Y</category><rel-claims>8</rel-claims><rel-passage><passage>* figures 2,3 *</passage></rel-passage></citation><citation id="sr-cit0004"><patcit dnum="WO2019170469A1" id="sr-pcit0004" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=WO2019170469&amp;CY=ep"><document-id><country>WO</country><doc-number>2019170469</doc-number><kind>A1</kind><name>CONTINENTAL AUTOMOTIVE GMBH [DE]</name><date>20190912</date></document-id></patcit><category>Y</category><rel-claims>9</rel-claims><rel-passage><passage>* paragraph [0018] *</passage></rel-passage></citation></srep-citations><srep-admin><examiners><primary-examiner><name>Tillier, Christophe</name></primary-examiner></examiners><srep-office><addressbook><text>Munich</text></addressbook></srep-office><date-search-completed><date>20200728</date></date-search-completed></srep-admin><!--							The annex lists the patent family members relating to the patent documents cited in the above mentioned European search report.							The members are as contained in the European Patent Office EDP file on							The European Patent Office is in no way liable for these particulars which are merely given for the purpose of information.							For more details about this annex : see Official Journal of the European Patent Office, No 12/82						--><srep-patent-family><patent-family><priority-application><document-id><country>DE</country><doc-number>102011113197</doc-number><kind>A1</kind><date>20130314</date></document-id></priority-application><text>NONE</text></patent-family><patent-family><priority-application><document-id><country>WO</country><doc-number>2019166065</doc-number><kind>A1</kind><date>20190906</date></document-id></priority-application><family-member><document-id><country>DE</country><doc-number>102018203152</doc-number><kind>A1</kind><date>20190905</date></document-id></family-member><family-member><document-id><country>EP</country><doc-number>3759008</doc-number><kind>A1</kind><date>20210106</date></document-id></family-member><family-member><document-id><country>US</country><doc-number>2021019904</doc-number><kind>A1</kind><date>20210121</date></document-id></family-member><family-member><document-id><country>WO</country><doc-number>2019166065</doc-number><kind>A1</kind><date>20190906</date></document-id></family-member></patent-family><patent-family><priority-application><document-id><country>DE</country><doc-number>102016117284</doc-number><kind>A1</kind><date>20180315</date></document-id></priority-application><text>NONE</text></patent-family><patent-family><priority-application><document-id><country>WO</country><doc-number>2019170469</doc-number><kind>A1</kind><date>20190912</date></document-id></priority-application><family-member><document-id><country>EP</country><doc-number>3537382</doc-number><kind>A1</kind><date>20190911</date></document-id></family-member><family-member><document-id><country>US</country><doc-number>2020402257</doc-number><kind>A1</kind><date>20201224</date></document-id></family-member><family-member><document-id><country>WO</country><doc-number>2019170469</doc-number><kind>A1</kind><date>20190912</date></document-id></family-member></patent-family></srep-patent-family></srep-for-pub></search-report-data>
</ep-patent-document>
