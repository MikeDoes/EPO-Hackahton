<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP21150214A1" file="EP21150214NWA1.xml" lang="en" country="EP" doc-number="3890356" kind="A1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="en"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSKBAHRIS..MTNORSMESMMAKHTNMD..........</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  1100000/0</B007EP></eptags></B000><B100><B110>3890356</B110><B120><B121>EUROPEAN PATENT APPLICATION</B121></B120><B130>A1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>21150214.1</B210><B220><date>20210105</date></B220><B250>en</B250><B251EP>en</B251EP><B260>en</B260></B200><B300><B310>202016834431</B310><B320><date>20200330</date></B320><B330><ctry>US</ctry></B330></B300><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20211006</date><bnum>202140</bnum></B430></B400><B500><B510EP><classification-ipcr sequence="1"><text>H04R  25/00        20060101AFI20210630BHEP        </text></classification-ipcr><classification-ipcr sequence="2"><text>H04B  17/309       20150101ALI20210630BHEP        </text></classification-ipcr><classification-ipcr sequence="3"><text>H04L  29/06        20060101ALI20210630BHEP        </text></classification-ipcr><classification-ipcr sequence="4"><text>H04M   1/60        20060101ALI20210630BHEP        </text></classification-ipcr><classification-ipcr sequence="5"><text>H04W  72/12        20090101ALI20210630BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>H04R2460/03        20130101 LA20210621BHEP        </text></classification-cpc><classification-cpc sequence="2"><text>H04R2225/55        20130101 LA20210621BHEP        </text></classification-cpc><classification-cpc sequence="3"><text>H04R2499/11        20130101 LA20210621BHEP        </text></classification-cpc><classification-cpc sequence="4"><text>H04L  69/14        20130101 LI20210621BHEP        </text></classification-cpc><classification-cpc sequence="5"><text>H04B  17/309       20150115 FI20210621BHEP        </text></classification-cpc><classification-cpc sequence="6"><text>H04R  25/554       20130101 LI20210621BHEP        </text></classification-cpc><classification-cpc sequence="7"><text>H04M   1/6066      20130101 LI20210621BHEP        </text></classification-cpc><classification-cpc sequence="8"><text>H04R2225/61        20130101 LA20210621BHEP        </text></classification-cpc><classification-cpc sequence="9"><text>H04R  25/552       20130101 LI20210621BHEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>BLUETOOTH-AUDIOAUSTAUSCH MIT ÜBERTRAGUNGSDIVERSITÄT</B542><B541>en</B541><B542>BLUETOOTH AUDIO EXCHANGE WITH TRANSMISSION DIVERSITY</B542><B541>fr</B541><B542>ÉCHANGE AUDIO BLUETOOTH AVEC DIVERSITÉ DE TRANSMISSION</B542></B540><B590><B598>2</B598></B590></B500><B700><B710><B711><snm>Sonova AG</snm><iid>101535993</iid><irf>10004P62229EP</irf><adr><str>Laubisrütistrasse 28</str><city>8712 Stäfa</city><ctry>CH</ctry></adr></B711></B710><B720><B721><snm>FERRARI, Federico</snm><adr><str>Le-Corbusier-Platz 6</str><city>3027 Bern</city><ctry>CH</ctry></adr></B721><B721><snm>EL-HOIYDI, Amre</snm><adr><str>Rue du Clos-de-Serrieres 64</str><city>2000 Neuchâtel</city><ctry>CH</ctry></adr></B721><B721><snm>GALLO, Alessandro</snm><adr><str>Schuetzenmatt 19</str><city>3280 Murten</city><ctry>CH</ctry></adr></B721></B720><B740><B741><snm>Schwan Schorer &amp; Partner mbB</snm><iid>100061170</iid><adr><str>Patentanwälte 
Bauerstraße 22</str><city>80796 München</city><ctry>DE</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840><B844EP><B845EP><ctry>BA</ctry></B845EP><B845EP><ctry>ME</ctry></B845EP></B844EP><B848EP><B849EP><ctry>KH</ctry></B849EP><B849EP><ctry>MA</ctry></B849EP><B849EP><ctry>MD</ctry></B849EP><B849EP><ctry>TN</ctry></B849EP></B848EP></B800></SDOBI>
<abstract id="abst" lang="en">
<p id="pa01" num="0001">Provided is a method for operating two hearing devices. The method includes establishing a first bi-directional wireless connection between a primary hearing device and a wireless communication device over a first wireless link, eavesdropping on the first wireless link, by a secondary hearing device, over a second wireless link between the wireless communication device and the secondary hearing device, and establishing a second bi-directional wireless connection between the primary hearing device and the secondary hearing device over a third wireless link. The method further includes monitoring the link quality of the first wireless link and/or the second wireless link, and assigning to either the secondary hearing device or the primary hearing device the role of transmitting audio-related packets towards the wireless communication device, based on the quality of at least one of the first wireless link or the second wireless link. An audio communication system is also provided.
<img id="iaf01" file="imgaf001.tif" wi="78" he="89" img-content="drawing" img-format="tif"/></p>
</abstract>
<description id="desc" lang="en"><!-- EPO <DP n="1"> -->
<heading id="h0001"><b><u>CROSS REFERENCE TO RELATED APPLICATION(S)</u></b></heading>
<p id="p0001" num="0001">This application is a continuation of <patcit id="pcit0001" dnum="US73915320"><text>U.S. Patent Application No. 16/739,153 filed on January 10, 2020</text></patcit>; <patcit id="pcit0002" dnum="US73953120"><text>U.S. Patent Application No. 16/739,531 filed on January 10, 2020</text></patcit>; and <patcit id="pcit0003" dnum="US73959320"><text>U.S. Patent Application No. 16/739,593 filed on January 10, 2020</text></patcit>, the entire contents of which are incorporated herein by reference.</p>
<heading id="h0002"><b><u>FIELD OF INVENTION</u></b></heading>
<p id="p0002" num="0002">The following description relates generally to wireless communication. More specifically, the following description relates to exploiting diversity in transmission of packets for hearing devices that are streaming information from a wireless communication device.</p>
<heading id="h0003"><b><u>BACKGROUND OF INVENTION</u></b></heading>
<p id="p0003" num="0003">Wireless technologies allow wireless communications between hearing devices and/or between hearing devices and a wireless communication device (also referred to as a "remote device" or an "audio source" if it is transmitting audio information). The audio source can be an external device (such as a mobile phone, tablet, iPod, etc.) that transmits audio packets, which are received by the hearing device. A hearing device can stream audio from an audio source using an Advanced Audio Distribution Profile (A2DP). For example, a hearing device can use Bluetooth Basic Rate/Enhanced Data Rate™ (Bluetooth BR/EDR™) to stream music from a smartphone configured to transmit audio using A2DP.</p>
<p id="p0004" num="0004">Because Bluetooth BR/EDR™ is generally a point-to-point communication, it may be necessary for one of two hearing devices worn by a user to eavesdrop an audio stream to hear audio in stereo while the other hearing device maintains a point-to-point Bluetooth BR/EDR™ connection. Specifically, a primary hearing device may establish a wireless connection with an audio source and begin streaming music, and a secondary audio device can eavesdrop the audio stream (e.g., without a wireless connection to the audio source). The primary hearing device can receive audio packets for the left stereo channel and the secondary hearing device can eavesdrop audio packets for the right stereo channel (or vice<!-- EPO <DP n="2"> --> versa). Accordingly, A2DP eavesdropping allows the hearing device user to listen to an audio stream in stereo despite Bluetooth BR/EDR™ being a point-to-point connection.</p>
<p id="p0005" num="0005">To provide a reliable audio stereo stream experience for a hearing device user, an audio source should quickly receive an acknowledgment; otherwise, it cannot proceed with transmission of a next audio packet and a level of an audio buffer of the hearing device begins to decrease, which may cause annoying interruptions for the hearing device user if the buffer is empty. Yet, receiving an acknowledgment quickly is not always possible for at least a few reasons.</p>
<p id="p0006" num="0006">For example, in the 2.4 GHz Industrial, Scientific, and Medical (ISM) band, wirelessly transmitting information from an audio source to a hearing device can include errors and/or signal degradations because of body shadowing. Body shadowing refers to the interference of a body part with the transmission or reception of packets. Depending on the position of the hearing devices and an audio source, wireless communication can be difficult. For example, a person's head can block the reception or transmission of an acknowledgment packet. Body movements can further exacerbate the body shadowing problem. Other technologies in the ISM band, such as Bluetooth Low Energy™, Wi-Fi™, and ZigBee™, for example, experience similar errors and/or signal degradation due to body shadowing.</p>
<p id="p0007" num="0007">In addition, due to size and battery life limitations, hearing devices typically radiate wireless signals with a significantly smaller strength than typical audio sources (e.g., a smartphone). A hearing device usually transmits at a power of 0 dBm. However, mobile phones transmit at a power of up to 20 dBm. Because the transmit powers of the hearing device and the mobile phone are substantially different (i.e., asymmetric), when the distance between the hearing device and the mobile phone exceeds a certain range, the quality of the wireless link from the hearing device to the mobile phone deteriorates and the quality of the transmitted audio deteriorates as a result. This power asymmetry may result in situations where (at least one of) a pair of hearing devices correctly receives audio packets, but the audio source fails to receive acknowledgments.</p>
<p id="p0008" num="0008">Further, in wireless communications between hearing devices and a wireless communication device (such as a mobile phone, for example), the user's voice can be captured by a microphone that may be part of a transmission unit of a hearing device worn by a user. The captured audio can be transmitted wirelessly directly towards another hearing device or towards the wireless communication device, which can receive the audio packets. A hearing device usually transmits at a power of 0 dBm for power consumption limitation reasons. The antenna of the hearing device is very small and lossy on both the transmission<!-- EPO <DP n="3"> --> and the reception side. As a result, the transmission range from a transmitting hearing device cannot be as large as the transmission range from a wireless microphone, for example. Because of these limitations in the transmission range from a transmitting hearing device, in situations where the distance between the hearing devices or the distance between a hearing device and the wireless communication device, exceeds a certain range or where the transmitting hearing device may be shadowed by the user's head, for example, the wireless link quality can deteriorate and the quality of the transmitted audio can deteriorate as a result.</p>
<p id="p0009" num="0009">Accordingly, a need exists to address at least the above identified problems and provide additional benefits. Specifically, a need exists for a system, method, software, or hearing device that is capable of improving wireless communication between a wireless communication device and hearing devices.</p>
<heading id="h0004"><b><u>SUMMARY</u></b></heading>
<p id="p0010" num="0010">The present invention provides improved audio transmission between hearing devices that are streaming audio information from a wireless communication device (also referred to as an "audio source" if it is transmitting audio information) or transmitting the user's voice is captured by a microphone wirelessly directly towards another hearing device or the wireless communication device, which can receive the audio packets. Specifically, the present invention proposes solutions to improve and provide reliable transmission between the hearing devices and the wireless communication device, in situations when the wireless communication link between the devices may be unreliable. More specifically, the disclosed technology assigns to one of the hearing devices the role of transmitting audio-related packets towards the wireless communication device based on the quality of the wireless communication links between each of the hearing devices and the wireless communication device. As a result, the achieved transmission range may not be limited where the audio transmitting device may be shadowed by the user's head, for example. Improving the reception range (i.e., reception diversity) may also be achieved. Combining transmit diversity and reception diversity can provide an improved range regardless of the orientation of the user's head or body on both the transmitter and receiver side.</p>
<p id="p0011" num="0011">In one general aspect, a method for operating two hearing devices may include establishing a first bi-directional wireless connection between a primary hearing device and a wireless communication device over a first wireless link; eavesdropping on the first wireless link, by a secondary hearing device, over a second wireless link between the<!-- EPO <DP n="4"> --> wireless communication device and the secondary hearing device; establishing a second bi-directional wireless connection between the primary hearing device and the secondary hearing device over a third wireless link; monitoring, by the primary hearing device, a link quality of the first wireless link and/or by the secondary hearing device, the link quality of the second wireless link; assigning to the secondary hearing device a role of transmitting audio-related packets towards the wireless communication device, in place of the primary hearing device, based on quality parameters of at least one of the first wireless link or the second wireless link; and returning to the primary hearing device the role of transmitting audio-related packets towards the wireless communication device based on the quality parameters of at least one of the first wireless link or the second wireless link.</p>
<p id="p0012" num="0012">In the method according to the foregoing aspect, the assigning to the secondary hearing device the role of transmitting audio-related packets towards the wireless communication device may be based on one of a degradation of the first wireless link quality or an improvement of the second wireless link quality.</p>
<p id="p0013" num="0013">In the method according to the foregoing aspect, the returning to the primary hearing device the role of transmitting audio-related packets towards the wireless communication device may be based on one of a degradation of the second wireless link quality or an improvement of the first wireless link quality.</p>
<p id="p0014" num="0014">In the method according to the foregoing aspect, during audio streaming, the primary hearing device may remain in the first bi-directional wireless connection with the wireless communication device and transmits to the wireless communication device packets that are not audio-related, regardless of which hearing device has the role of transmitting audio-related packets towards the wireless communication device.</p>
<p id="p0015" num="0015">In the method according to the foregoing aspect, the wireless link quality of the first or second wireless link can be measured via measuring an outgoing packet error rate.</p>
<p id="p0016" num="0016">In the method according to the foregoing aspect, the outgoing packet error rate can be calculated by monitoring a number of transmit attempts of outgoing audio frames.</p>
<p id="p0017" num="0017">In the method according to the foregoing aspect, the outgoing packet error rate can be calculated by monitoring duplicate incoming audio packets transmitted by the wireless communication device.</p>
<p id="p0018" num="0018">In the method according to the foregoing aspect, the role of transmitting audio-related packets can be transferred from the primary hearing device to the secondary<!-- EPO <DP n="5"> --> hearing device when the outgoing packet error rate on the first wireless link exceeds a predefined threshold.</p>
<p id="p0019" num="0019">In the method according to the foregoing aspect, the wireless link quality of the first or second wireless link can be measured via measuring an incoming packet error rate.</p>
<p id="p0020" num="0020">In the method according to the foregoing aspect, the role of transmitting audio-related packets can be transferred from the secondary hearing device to the primary hearing device when the outgoing packet error rate on the second wireless link exceeds a predefined threshold.</p>
<p id="p0021" num="0021">In the method according to the foregoing aspect, the role of transmitting audio-related packets can be transferred from the primary hearing device to the secondary hearing device when the incoming packet error rate on the second wireless link is lower than the incoming packet error rate on the first wireless link.</p>
<p id="p0022" num="0022">In the method according to the foregoing aspect, the role of transmitting audio-related packets can be transferred from the secondary hearing device to the primary hearing device when the incoming packet error rate on the first wireless link is lower than the incoming packet error rate on the second wireless link.</p>
<p id="p0023" num="0023">In the method according to the foregoing aspect, the audio-related packets can be at least one of audio packets or acknowledgements to audio packets.</p>
<p id="p0024" num="0024">In the method according to the foregoing aspect, the audio-related packets can be transmitted using a Logical Link Control and Adaptation Protocol (L2CAP) with a destination Channel ID (CID) field that corresponds to a destination channel endpoint that has been configured for an Advanced Audio Distribution Profile (A2DP) audio packets when an A2DP connection has been established.</p>
<p id="p0025" num="0025">In the method according to the foregoing aspect, the audio-related packets can be Enhanced Synchronous connection-oriented ("eSCO") audio packets.</p>
<p id="p0026" num="0026">In the method according to the foregoing aspect, the first and second wireless links and the third wireless link can use different wireless communication protocols.</p>
<p id="p0027" num="0027">In the method according to the foregoing aspect, the communication protocol used in the first and second wireless links can be associated with BLUETOOTH and the communication protocol used in the third wireless link can be a proprietary wireless communication protocol.<!-- EPO <DP n="6"> --></p>
<p id="p0028" num="0028">In the method according to the foregoing aspect, the packets that are not audio related can be one of a Link Management Protocol (LMP) data unit or a Logical Link Control and Adaptation Protocol (L2CAP) data unit addressed to a CID different than a destination channel endpoint for A2DP.</p>
<p id="p0029" num="0029">In another general aspect, an audio communication system is provided. The audio communication system can include a primary hearing device configured to establish a first bi-directional wireless connection with a wireless communication device over a first wireless link, and a secondary hearing device configured to eavesdrop on the first wireless link, over a second wireless link between the wireless communication device and the secondary hearing device, and establish a second bi-directional wireless connection with the primary hearing device over a third wireless link. The primary hearing device and the secondary hearing device can be both configured to monitor a link quality of the first wireless link and/or the link quality of the second wireless link, assign to the secondary hearing device a role of transmitting audio-related packets towards the wireless communication device, in place of the primary hearing device, based on quality parameters of at least one of the first wireless link or the second wireless link, and return to the primary hearing device the role of transmitting audio-related packets towards the wireless communication device based on the quality parameters of at least one of the first wireless link or the second wireless link.</p>
<p id="p0030" num="0030">In the audio communication system according to the foregoing aspect, during audio streaming, the primary hearing device can remain in the first bi-directional wireless connection with the wireless communication device and transmit to the wireless communication device packets that are not audio-related, regardless of which hearing device has the role of transmitting audio-related packets towards the wireless communication device.</p>
<p id="p0031" num="0031">Other features and aspects may be apparent from the following detailed description, the drawings, and the claims.</p>
<heading id="h0005"><b><u>BRIEF DESCRIPTION OF THE DRAWINGS</u></b></heading>
<p id="p0032" num="0032">The foregoing and other aspects of the present disclosure will become apparent to those skilled in the art to which the present disclosure relates upon reading the following description with reference to the accompanying drawings, in which:
<ul id="ul0001" list-style="none">
<li><figref idref="f0001">FIGs. 1A, 1B, and 1C</figref> are schematic diagrams of two hearing devices and a wireless communication device configured in a diversity scheme;<!-- EPO <DP n="7"> --></li>
<li><figref idref="f0002">FIG. 2</figref> is a schematic diagram illustrating a hearing system with a wireless communication device and an eavesdropper enabler hearing device (also called participant hearing device) and an eavesdropper hearing device, according to an embodiment;</li>
<li><figref idref="f0003">FIG. 3</figref> is a schematic diagram illustrating an on-body (front or back pocket) and off-body use scenarios of the hearing system of <figref idref="f0002">FIG. 2</figref>;</li>
<li><figref idref="f0004">FIG. 4</figref> is a schematic diagram illustrating usage range zones with different quality of the audio on the uplink and downlink of the hearing system of <figref idref="f0002">FIG. 2</figref>, according to an embodiment;</li>
<li><figref idref="f0005">FIGs. 5A-5C</figref> are schematic diagrams illustrating quality of the audio and usage range zones depending on the location of the hearing system of <figref idref="f0002">FIG. 2</figref>, according to an embodiment;</li>
<li><figref idref="f0005">FIG. 6</figref> is a schematic diagram illustrating audio link asymmetry of the hearing system of <figref idref="f0002">FIG. 2</figref>, according to an embodiment;</li>
<li><figref idref="f0006">FIG. 7</figref> is a schematic diagram of a packet header used in a wireless communication protocol, according to an embodiment;</li>
<li><figref idref="f0007">FIG. 8</figref> is a simplified flowchart illustrating a process for implementing a diversity scheme; and</li>
<li><figref idref="f0008">FIG. 9</figref> is a flowchart illustrating a process of implementing diversity based on role switch, according to an embodiment.</li>
</ul></p>
<p id="p0033" num="0033">Throughout the drawings and the detailed description, unless otherwise described, the same drawing reference numerals will be understood to refer to the same elements, features, and structures. The relative size and depiction of these elements may be exaggerated for clarity, illustration, and convenience.</p>
<heading id="h0006"><b><u>DETAILED DESCRIPTION</u></b></heading>
<p id="p0034" num="0034">Example embodiments that incorporate one or more aspects of the apparatus and methodology are described and illustrated in the drawings. These illustrated examples are not intended to be a limitation on the present disclosure. For example, one or more aspects of the disclosed embodiments can be utilized in other embodiments and even other types of devices. Moreover, certain terminology is used herein for convenience only and is not to be taken as a limitation.<!-- EPO <DP n="8"> --></p>
<p id="p0035" num="0035">Within the context of the following description, hearing devices (such as hearing aids, hearing prostheses, cochlear implants, earphones, etc.) are specifically utilized by individuals to hear audio from another device or from the user's surroundings and may be used, for example in order to compensate hearing loss and/or improve hearing ability. A pair of hearing devices, one intended to be worn at the left and the other at the right ear of the user, which are linked to one another is referred to as a binaural hearing system. Different styles of hearing devices exist in the form of behind-the-ear (BTE), in-the-ear (ITE), completely-in-canal (CIC) types, as well as hybrid designs consisting of an outside-the-ear part and an in-the-ear part, the latter typically including a receiver (i.e., a miniature loudspeaker), therefore commonly termed receiver-in-the-ear (RITE), receiver-in-canal (RIC), or canal-receiver-technology (CRT) hearing devices. Depending on the severity and/or cause of the user's hearing loss, other electro-mechanical output transducers, such as a bone-anchored vibrator, a direct acoustic cochlear simulator (DACS) or cochlear implant (CI) can be employed instead of a receiver. Other uses of hearing devices pertain to augmenting the hearing of normal hearing persons, for instance by means of noise suppression, to the provision of audio signals originating from remote sources, e.g., within the context of audio communication, and for hearing protection.</p>
<p id="p0036" num="0036">Hearing devices with multiple separate units, such as one intended to be worn at the left and the other at the right ear of the user, for example, allow communication between the two hearing device units, as well as communication with other devices, such as a mobile phone or a portable audio player. This communication may take place via a remote auxiliary unit, such as a hub, that acts as a communication relay. Advances in wireless technology allow direct wireless communications between a hearing device and audio sources, such as mobile phones (e.g., iPhone, Android, Blackberry, etc.), media players (e.g., iPod, MP3 player, etc.), computers (e.g., PC, Apple computer, etc.), and audio/video (A/V) receivers that can be part of a home entertainment or home theater system, for example.</p>
<p id="p0037" num="0037">Hearing devices can be used for wireless communications between hearing devices, to make and receive telephone calls to/from another user, and stream audio using an external audio source, such as mobile phone, using a bi-directional hands-free profile.</p>
<p id="p0038" num="0038">As a preliminary operation to begin streaming stereo audio, a hearing device can establish two wireless connections. First, a hearing device can establish a wireless connection with a wireless communication device based on a first wireless communication protocol. For example, a hearing device can use Bluetooth BR/EDR™ to establish a wireless connection with a wireless communication device after a pairing and/or an authentication<!-- EPO <DP n="9"> --> operation. The wireless communication device can be considered the audio source because it can transmit an audio stream to a device (e.g., a hearing device). Second, the hearing device can establish a binaural link with a secondary hearing device worn on another ear. Using the binaural link, the hearing devices can implement a second wireless communication protocol to communicate information between the hearing devices (e.g., a proprietary wireless protocol for communicating between hearing aids).</p>
<p id="p0039" num="0039">The hearing device maintaining a wireless connection with the wireless communication device can be considered the primary hearing device and the second hearing device can be considered the secondary hearing device because the secondary hearing device can eavesdrop information communicated between the wireless communication device and the primary hearing device. Also, the secondary hearing device can receive other information (e.g., missed packet information or timing information) from the primary hearing device via the binaural link.</p>
<p id="p0040" num="0040">When the wireless communication device streams audio information to the primary hearing device, the primary and secondary hearing device can implement a diversity scheme. A diversity scheme enables assigning to either the primary and secondary hearing device the role of transmitting or receiving audio-related packets from and to the wireless communication device, and/or forwarding audio-related packets from one hearing device to another. For example, when implementing a diversity scheme, a primary hearing device can transmit audio-related packets to either the wireless communication device or the secondary hearing device. The audio-related packets can be audio packets or acknowledgements (ACK packets) to audio packets. Specifically, in the case of transmitting audio packets, the primary hearing device 103 (left hearing device) can forward an "audio R" packet to the secondary hearing device 103 (right hearing device) using a wireless connection 104 (also referred to as a binaural link between two hearing devices). Audio packets can also be voice captured by a microphone, voice for a telephone call, voice commands to applications stored on a mobile phone, etc., that can be transmitted, by the primary hearing device 103 and the secondary hearing device 103, and received, by the wireless communication device 102, through wireless links using wireless communication protocols, such as Bluetooth® or Wi-Fi® (based on the IEEE 802.11 family of standards of the Institute of Electrical and Electronics Engineers), or the like, as well as other radio frequency (RF) communication protocols, for example. In the case of transmitting acknowledgements to audio packets, the primary hearing device 103 can transmit an ACK packet to the wireless communication device 102 that indicates it successfully received an audio-related packet or a signaling packet from a<!-- EPO <DP n="10"> --> wireless communication device 102. Alternatively, a secondary hearing device 103 can transmit (i.e., forward) the audio packets to the primary hearing device 103 or transmit the ACK packet to the wireless communication device 102 indicating that it successfully received an audio-related packet. The primary and the secondary hearing device can communicate using the binaural link to determine which hearing device should send audio-related packets or it can be determined by a policy (e.g., timing) in the diversity scheme. The diversity scheme can ensure that only a single hearing device (not both) transmits audio-related packets towards the wireless communication device.</p>
<p id="p0041" num="0041">Also, the disclosed technology causes one of the hearing devices, such as the secondary hearing device, for example, to not acknowledge correctly received audio packets while the primary hearing device is assigned the role of transmitting audio-related packets towards the wireless communication device (even if the primary hearing device or the secondary hearing device correctly received the audio packets). This is generally referred to as switching roles of transmitting audio-related packets towards the wireless communication device because it prohibits at least one operation in the diversity scheme (e.g., the second hearing device transmitting acknowledgments). For example, if the wireless communication device is streaming audio to the primary hearing device and the secondary hearing device is eavesdropping the audio stream, and the two hearing devices are implementing a diversity scheme, the secondary hearing device will not transmit ACK packets in response to correctly received audio packets when the primary hearing device is assigned the role of transmitting audio-related packets towards the wireless communication device.</p>
<p id="p0042" num="0042">Also, as part of diversity suspension, the secondary hearing device ignores or never acknowledges a correctly received signaling packet from the wireless communication device. Rather, the primary hearing device is the only device that transmits a response to the signaling packet from the wireless communication device after the primary hearing device has correctly received the signaling packet from the wireless communication device. This can reduce requiring binaural forwarding of signaling packets from the secondary hearing device to the primary hearing device, which can be considered a complex operation.</p>
<p id="p0043" num="0043">The disclosed diversity scheme reduces interruptions, signal distortions, and signaling traffic because less bandwidth is used and wireless connections with better connectivity are used.</p>
<p id="p0044" num="0044"><figref idref="f0001">FIGs. 1A, 1B, and 1C</figref> illustrate two hearing devices and a wireless communication device configured to implement a diversity scheme with a role switch. As shown by double-headed bold arrows in <figref idref="f0001">FIG. 1</figref>, the wireless communication devices 102 and<!-- EPO <DP n="11"> --> the hearing devices 103 can communicate wirelessly, e.g., each wireless communication device 102 can communicate with each hearing device 103 and each hearing device 103 can communicate with the other hearing device 103. Wireless communication can include using a wireless communication protocol such as Bluetooth BR/EDR™, Bluetooth Low Energy™, a proprietary communication (e.g., binaural communication protocol between hearing aids or bimodal communication protocol between a hearing aid and hearing device), ZigBee™, Wi-Fi™, or an Industry of Electrical and Electronic Engineers (IEEE) wireless communication standard (e.g., 802.11).</p>
<p id="p0045" num="0045">A diversity scheme generally enables hearing devices receiving audio-related and signaling packet to vary or change how they transmit or receive ACK packets. With a diversity scheme, hearing devices can avoid audio interruptions because at least one hearing device should receive an audio packet correctly and transmit an ACK packet to the wireless communication device 102. Also, because the hearing device 103 that correctly receives the audio or signaling packet transmits an ACK packet in a diversity scheme, it increases probability that the wireless communication device receives the corresponding acknowledgment packet because it is likely there is a good connection and/or signaling path between the wireless communication device and the hearing device. <figref idref="f0001">FIGs. 1A, 1B, and 1C</figref> illustrate different aspects of implementing a diversity scheme with two hearing devices and a wireless communication device.</p>
<p id="p0046" num="0046">In <figref idref="f0001">FIG. 1A</figref>, each hearing device 103 can transmit an ACK packet. An ACK packet is a signal that is transmitted between the hearing device 103 and the wireless communication device 102 that acknowledges reception of a packet of information (e.g., as part of Bluetooth BR/EDR™). The ACK packet can be part of a packet header (see <figref idref="f0003">FIG. 3</figref>). Specifically, a hearing device 103 can transmit an ACK packet that indicates it received an audio packet or signaling packet correctly from the wireless communication device 102. For example, a primary hearing device wirelessly linked to the wireless communication device can transmit an ACK packet or a secondary hearing device 103 eavesdrops a stream and transmits an ACK packet. If the wireless communication device 102 receives the ACK packet, it can use this information to transmit new (e.g., the next packet) information or continue to stream more information.</p>
<p id="p0047" num="0047">In contrast to <figref idref="f0001">FIG. 1A</figref> where both hearing devices 103 can transmit ACK packets in response to successfully receiving an audio packet, in <figref idref="f0001">FIG. 1B</figref>, only the primary hearing device 103 successfully receives an audio packet and transmits an ACK packet. Here, the primary hearing device 103 transmits or forwards received audio packet<!-- EPO <DP n="12"> --> information to the secondary hearing device 103. Specifically, as shown in <figref idref="f0001">FIG. 1B</figref>, the primary hearing device 103 (left hearing device) forwards an "audio R" packet to the secondary hearing device 103 (right hearing device) using a wireless connection 104 (also referred to as a binaural link between the two hearing devices). The secondary hearing device 103 does not transmit an ACK packet.</p>
<p id="p0048" num="0048">In contrast to <figref idref="f0001">FIG. 1B</figref> where only the primary hearing device 103 successfully receives an audio packet from the wireless communication device 102, in <figref idref="f0001">FIG. 1C</figref>, only the secondary hearing device 103 successfully receives an audio packet from the wireless communication device 102 and transmits an ACK packet to the wireless communication device 102. The secondary hearing device also forwards an "audio L" packet to the primary hearing device 103 using the wireless connection 104.</p>
<p id="p0049" num="0049">The wireless communication devices 102 can be computing devices that may be configured to wirelessly communicate. Wireless communication includes wirelessly transmitting information, wirelessly receiving information, or both. The wireless communication devices 102 shown in <figref idref="f0001">FIG. 1</figref> can include computers (e.g., desktop or laptop), televisions (TVs) or components in communication with television (e.g., TV streamer), a car audio system or circuitry within the car, a mobile device (e.g., smartphone), tablet, remote control, an accessory electronic device, a wireless speaker, or watch, for example. It should be noted that the hearing device 103 can also be a wireless communication device 102, but the hearing device 103 can be configured to provide audio to a user in addition to wirelessly communicating with other devices.</p>
<p id="p0050" num="0050">Some example hearing devices 103 can include hearing aids, headphones, earphones, assistive listening devices, or any combination thereof. Hearing devices can include both prescription devices and non-prescription devices configured to be worn on or near a human head. As an example of a hearing device 103, a hearing aid is a device that provides amplification, attenuation, or frequency modification of audio signals to compensate for hearing loss or difficulty. Some example hearing aids include a Behind-the-Ear (BTE), Receiver-in-the-Canal (RIC), In-the-Ear (ITE), Completely-in-the-Canal (CIC), or Invisible-in-the-Canal (IIC) hearing aid or a cochlear implant (where a cochlear implant includes a device part and an implant part). Depending on the severity and/or cause of the user's hearing loss, other electro-mechanical output transducers, such as a bone-anchored vibrator, a direct acoustic cochlear simulator (DACS) or cochlear implant (CI) can be employed instead of a receiver. Other uses of hearing devices pertain to augmenting the hearing of normal hearing persons, for instance by means of noise suppression, to the provision of audio signals<!-- EPO <DP n="13"> --> originating from remote sources, e.g., within the context of audio communication, and for hearing protection.</p>
<p id="p0051" num="0051">Hearing devices with multiple separate units, such as one intended to be worn at the left and the other at the right ear of the user, for example, allow communication between the two hearing device units, as well as communication with other devices, such as a mobile phone or a portable audio player. This communication may take place via a remote auxiliary unit, such as a hub, that acts as a communication relay. Advances in wireless technology allow direct wireless communications between a hearing device and wireless communication devices, such as mobile phones (e.g., smartphone, such as iPhone, Android, Blackberry, etc.), Digital Enhanced Cordless Telecommunications ("DECT") phones, landline phones, tablets, media players (e.g., iPod, MP3 player, etc.), computers (e.g., desktop or laptop, PC, Apple computer, etc.), audio/video (A/V) receivers that can be part of a home entertainment or home theater system, for example, a car audio system or circuitry within the car, remote control, an accessory electronic device, a wireless speaker, or a smart watch.</p>
<p id="p0052" num="0052">An example schematic diagram of such wireless communications system is illustrated in <figref idref="f0002">FIG. 2</figref>. The wireless communications system 10 can include a wireless communication device 12 (illustrated as a mobile phone in <figref idref="f0002">FIG. 2</figref>, but not limited thereto), a first hearing device 14, and a second hearing device 16. However, embodiments are not limited thereto and other configurations are contemplated. For example, the wireless communications system 10 can include a wireless communication device 12 and only one hearing device. In operation, the wireless communication device 12 can wirelessly transmit audio packets, which can be received by the first hearing device 14 and the second hearing device 16. The audio packets can be transmitted and received through wireless links using wireless communication protocols, such as Bluetooth or Wi-Fi® (based on the IEEE 802.11 family of standards of the Institute of Electrical and Electronics Engineers), or the like, as well as other radio frequency (RF) communication protocols, for example. Among such point-to-point wireless communications are protocols that conform to the Bluetooth specification promulgated by the Bluetooth Special Interest Group of Bellevue, Washington. The Bluetooth Core Specification specifies both the Bluetooth Classic variant of Bluetooth, also known as Bluetooth Basic Rate/Enhanced Data Rate™ (Bluetooth BR/EDR™), as well as Bluetooth Low Energy variant of Bluetooth, also known as Bluetooth LE, or BLE. Advances in integrated chip design have made it possible to develop a chip that supports both Bluetooth Classic and Bluetooth Low Energy and that has a size and a power consumption performance that is suitable for the capabilities of hearing devices. Because Bluetooth<!-- EPO <DP n="14"> --> BR/EDR™ is generally a point-to-point communication, it may be desirable for one of two hearing devices worn by a user to eavesdrop an audio stream to hear audio in stereo while the other hearing device maintains a point-to-point Bluetooth BR/EDR™ connection. Specifically, a primary hearing device may establish a wireless connection with a wireless communication device and begin streaming music, and a secondary audio device can eavesdrop the audio stream (e.g., without a wireless connection to the wireless communication device). The primary hearing device can receive audio packets for the left stereo channel and the secondary hearing device can eavesdrop audio packets for the right stereo channel (or vice versa). Accordingly, A2DP eavesdropping allows the hearing device user to listen to an audio stream in stereo despite Bluetooth BR/EDR™ being a point-to-point connection.</p>
<p id="p0053" num="0053">In the Bluetooth system, when a hearing device is connected to a mobile phone, it is up to the mobile phone to control the transmit power of the hearing device. If the reception power is too low, the mobile phone asks, via the Bluetooth protocol, to increase the transmit power of the hearing device. If the reception power is too high, the mobile phone asks, via the Bluetooth protocol, to decrease the transmit power of the hearing device.</p>
<p id="p0054" num="0054">The Bluetooth system uses a closed loop power control. Each side can ask the other side to increase or decrease the transmitted power, with the goal to receive the radio signal in the best power zone (e.g., not to weak and not too strong).</p>
<p id="p0055" num="0055">The first hearing device 14 and the second hearing device 16 can be electro-acoustic transducers configured to convert audio information into sound. Such electro-acoustic transducers can include but are not limited to earphones, ear buds, hearing aids, speakers, headphones, etc., for example. The first hearing device 14 may be configured as a left channel speaker for a stereo channel and the second hearing device 16 may be configured as a right channel speaker for a stereo channel, or vice-versa.</p>
<p id="p0056" num="0056">As shown in <figref idref="f0002">FIG. 2</figref>, each of the first hearing device 14 and the second hearing device 16 can include an input microphone system 18', 18" configured to capture an audio signal and convert the audio signal into an electrical input signal. Although the microphone system shown in <figref idref="f0002">FIG. 2</figref> includes only one input microphone 18', 18", the microphone system can include more than one input microphone. The microphone 18', 18" may be directional, i.e., may pick up most sounds in front a person wearing the microphone, or omnidirectional, i.e., may pick up sounds from all directions. In addition to the input microphone 18', 18", further receiving means for receiving signals may be present, such as a telecoil receiver, a receiving unit including an antenna for receiving wirelessly transmitted signals, etc. For<!-- EPO <DP n="15"> --> example, a streamed audio input signal (such as a phone call or music) can be received from a streaming input source, such as the wireless communication device 12, for example, by a wireless connection, such as wireless point-to-point link 20, for example.</p>
<p id="p0057" num="0057">The electrical input signals obtained from the input microphone 18', 18" can be processed by a signal processor 22', 22" that can convert the electrical input signals into digital signals that can be processed further to obtain an electrical output signal. A desired electrical input signal can be the electrical input signal obtained by the input microphone 18', 18", the streamed audio input signal, or a mix of both input signals. The electrical output signal can be converted into an acoustic output signal by a receiver 24', 24" (also known as a "speaker") and can be emitted into the remaining volume between the user's eardrum and the earpiece or the in-the-ear-canal-component of the hearing device.</p>
<p id="p0058" num="0058">The signal processor 22', 22" may be a single digital signal processor or may be made up of different, potentially distributed processor units, preferably including at least one digital signal processor unit. The signal processor 22', 22" can include one or more of a microprocessor, a microcontroller, a digital signal processor (DSP), an application specific integrated circuit (ASIC), a field-programmable gate array (FPGA), discrete logic circuitry, or the like, appropriately programmed with software and/or computer code, or a combination of special purpose hardware and programmable circuitry. The signal processor 22', 22" may be further adapted to differentiate sounds, such as speech and background noise, and process the sounds differently for a seamless hearing experience. The signal processor 22', 22" can further support cancellation of feedback or noise from wind, ambient disturbances, etc.</p>
<p id="p0059" num="0059">The signal processor 22', 22" can further include memory (not shown in <figref idref="f0002">FIG. 2</figref>) and may store tables with pre-determined values, ranges, and thresholds, as well as program instructions that may cause the signal processor 22', 22" to access the memory, execute the program instructions, and provide the functionality ascribed to it herein. The memory may include one or more volatile, non-volatile, magnetic, optical, or electrical media, such as read-only memory (ROM), random access memory (RAM), electrically-erasable programmable ROM (EEPROM), flash memory, or the like. The signal processor 22', 22" can further include one or more analog-to-digital (A/D) and digital-to-analog (D/A) converters for converting various analog inputs to the signal processor 22', 22", such as analog input from the microphone 18', 18", for example, in digital signals and for converting various digital outputs from the signal processor 22', 22" to analog signals representing audible sound data which can be applied to the speaker 24', 24", for example.<!-- EPO <DP n="16"> --></p>
<p id="p0060" num="0060">Each of the first hearing device 14 and the second hearing device 16 can be configured to wirelessly receive audio or other signals from each other, from the wireless communication device 12, or from another device, component or system, such as a remote hearing device controller, a hearing loop system, an audio link device, or a streaming device, for example. Each of the first hearing device 14 and the second hearing device 16 can include a wireless communication unit, such as a transceiver 26', 26" configured to receive and optionally to transmit wireless signals to other devices. For example, each of the first hearing device 14 and the second hearing device 16 may receive wireless audio signals and/or control signals from a wireless communication device via an antenna 25', 25", and convey them to the signal processor 22', 22" or to each other. In certain embodiments, the transceiver 26', 26" may be a part of the signal processor 22', 22". Specifically, the signal processor 22', 22" can employ a Bluetooth receiver, an audio codec that provides the audio signal conveyed by a wireless communication device, such as the wireless communication device 12, for example, in digitized form, and a decoder that decodes the digitized audio signal. Alternatively, the transceiver 26', 26" may include its own Bluetooth on-board signal processor 23. As illustrated in <figref idref="f0002">FIG. 2</figref>, the transceiver 26' can include a transmit counter (txCnt) 27 and a receive counter (rxCnt) 29, which may count how many attempts have occurred to transmit and receive an audio packet between the first hearing device 14 and the wireless communication device. The transceiver 26' can also include a power amplifier 31 that may be configured to amplify the signal from the microphone 18'. The transceiver 26' can further include a controller 32 that can receive the respective counts from the transmit counter (txCnt) and the receive counter (rxCnt), send a control signal to the amplifier to amplify an audio signal, or send notifications to the first hearing device 14 and the second hearing device 16 regarding the quality of the wireless link 20 based on the counts from the transmit counter (txCnt) and the receive counter (rxCnt), as described below. The controller 32 may be a single digital signal processor or may include one or more of a microprocessor, a microcontroller, a digital signal processor (DSP), an application specific integrated circuit (ASIC), a field-programmable gate array (FPGA), discrete logic circuitry, a memory, or the like. The transceiver 26" can have a similar configuration, particularly if the roles of the hearings devices 14 and 16 are reversed, and the second hearing device 16 performs the functions of a participant/eavesdropper enabler.</p>
<p id="p0061" num="0061">Modern hearing devices can be used to make and receive telephone calls and stream audio using a wireless communication device, such as mobile phone, via a wireless<!-- EPO <DP n="17"> --> link, using a bi-directional hands-free profile. This link can also be used for voice communication with a digital assistant on the mobile phone. The mobile phone can be worn by the user on-body (e.g., in a front pocket, back-pocket, or in a bag), or off-body (e.g., on a table or desk), as illustrated in <figref idref="f0003">FIG. 3</figref>, for example. A hearing device usually transmits at a power of 0 dBm. At the same time, current mobile phones may transmit at a power of up to 20 dBm and the power level increases with each new generation of mobile phones. Because the transmit powers of the hearing device and the mobile phone are different (e.g., asymmetric), when the distance between the hearing device and the mobile phone exceeds a certain range, the wireless link quality can deteriorate and the quality of the transmitted audio can deteriorate as a result. For example, as illustrated in <figref idref="f0004">FIG. 4</figref>, certain range zones can result in good audio for both the uplink (e.g., the wireless link from the hearing device to the mobile phone) and downlink (e.g., the wireless link from the mobile phone to the hearing device) (user 301), in good audio on the downlink only and bad audio on the uplink (user 302), and with bad audio on both the uplink and downlink (user 303). These differences between the uplink and the downlink in the situations shown for user 302, for example, can cause wireless link asymmetry that can result in bad audio on the uplink and/or the downlink (i.e., on the bad wireless link). In the worst case scenario, the Bluetooth link may be completely lost (user 304).</p>
<p id="p0062" num="0062">In addition, even if mobile phone is worn by the user on-body, the location of the mobile phone can still affect the wireless link, as illustrated in <figref idref="f0005">FIGs. 5A-5C</figref>. For example, when the mobile phone is worn by the user in the front pocket, the link quality remains acceptable (<figref idref="f0005">FIG. 5A</figref>). When the mobile phone is worn by the user in the back pocket, the link quality depends on the position of the user's arms. Specifically, when the mobile phone is worn by the user in the back pocket and the user's arms are up or away from the user's body, the link quality remains acceptable (<figref idref="f0005">FIG. 5B</figref>). However, when the mobile phone is worn by the user in the back pocket and the user's arms are down or close to the user's body, the link quality deteriorates (<figref idref="f0005">FIG. 5C). FIG. 5C</figref> depicts an example of a situation that might benefit from diversity with role switch, where the roles od the primary hearing device and the secondary hearing device can be switched, to assign the role of transmitting audio-related packets towards the wireless communication device to the hearing device with better quality of the wireless link to the wireless communication device.</p>
<p id="p0063" num="0063">Some hearing devices are susceptible to wireless link asymmetry due to the different (e.g., asymmetric) transmit powers of the hearing device and the mobile phone, when the distance between the hearing device and the mobile phone exceeds a certain range.<!-- EPO <DP n="18"> --> The amount of link asymmetry can be calculated with the following formula: A= (PhoneTxPower - HearingAidSensitivity) - (HearingAidTxPower - PhoneSensitivity) = (20 - (-91)) - (0 - (-91)) = 20, where the value -91 dBm for the sensitivity of the hearing aid and of the mobile phone is a typical sensitivity for Bluetooth chips. The wireless link asymmetry is illustrated in <figref idref="f0005">FIG. 6</figref>. The hearing system described herein can control automatically (e.g., without manual intervention by the user) any asymmetry of the wireless links between the hearing device and the wireless communication device, thereby improving the audio quality.</p>
<p id="p0064" num="0064">Turning back to <figref idref="f0002">FIG. 2</figref>, it may be desirable to transmit the sound coming from the mobile phone 12 into both ears of the user. The first (e.g., left) hearing device 14 can be connected to the wireless communication device 12 via the wireless point-to-point link 20, which can conform to the Bluetooth protocol. A separate Bluetooth or a proprietary binaural wireless link 28 may be formed between the first hearing device 14 and the second hearing device 16 for network management purposes and/or to coordinate actions between the first hearing device 14 and the second hearing device 16 concerning audio received from the wireless communication device 12, for example. The first hearing device 14 can receive audio packets directly from the wireless communication device 12 via the wireless link 20. The second (e.g., right) hearing device 16 can be configured to eavesdrop on (that is, can listen in on or observe) the Bluetooth link 20 between the mobile phone 12 and the first hearing device 14 to also receive the audio packets sent from the wireless communication device 12 by picking up the audio sent by the mobile phone 12 to the first hearing device 14 and playing back this sound. For example, the second hearing device 16 can be configured to eavesdrop on the Bluetooth link 20 between the mobile phone 12 and the first hearing device 14 via a communication link 30. In other words, the first hearing device 14 can be configured as a participant or an eavesdropper enabler (EDE) and the second hearing device 16 can be configured as an eavesdropper (ED). The eavesdropper and participant roles are not necessarily limited to the second hearing device 16 and the first hearing device 14, as illustrated in <figref idref="f0002">FIG. 2</figref>, and can be reversed. For example, the first (left) hearing device 14 could be the eavesdropper and the second (right) hearing device 16 could be the participant.</p>
<p id="p0065" num="0065">The Hands-Free Profile ("HFP") and the Advanced Audio Distribution Profile ("A2DP") of the Bluetooth specification may both be utilized for the point-to-point links 20 and 28. When HFP is utilized, the wireless communication device 12 can send incoming audio to the first hearing device 14. The first hearing device 14 renders the received incoming audio. The second hearing device 16 can eavesdrop the mono (i.e., monaural) incoming audio link and also renders the received incoming audio. When A2DP is utilized, the first<!-- EPO <DP n="19"> --> hearing device 14 receives a stereo (i.e., stereophonic) signal and renders only the left audio channel. The second hearing device 16 can eavesdrop on the stereo signal and render the right audio channel.</p>
<p id="p0066" num="0066">The first hearing device 14 can be configured to transmit an outgoing audio packet (e.g., voice for a telephone call or voice commands to applications stored on the mobile phone 12) to the mobile phone 12. The outgoing audio packet can be transmitted via the wireless point-to-point link 20, which conforms to a wireless communication protocol such as Bluetooth BR/EDR™, Bluetooth Low Energy™, a proprietary communication (e.g., binaural communication protocol between hearing aids or bimodal communication protocol between a hearing aid and hearing device), ZigBee™, Wi-Fi™, or an Industry of Electrical and Electronic Engineers (IEEE) wireless communication standard (e.g., 802.11), for example. The second hearing device 16 can be similarly configured to transmit an outgoing audio packet (e.g., voice for a telephone call or voice commands to applications stored on the mobile phone 12) to the mobile phone 12, over another wireless link similar to the wireless link 20. The wireless link 20 may also be configured for bi-directional communications allowing transmission and receipt of audio packets, as well as transmission and receipt of acknowledgements (ACK) by the hearing devices 14, 16 that an audio packet was successfully received, for example. The wireless link 20 may further be configured for bi-directional communications between the first hearing device 14 and the mobile phone 12, allowing not only transmission and receipt of audio packets between the first hearing device 14 and the wireless communication device 12, but also acknowledgements by the mobile phone 12 that an audio packet from the first hearing device 14 was successfully received. The bi-directional link 20 can minimize the number of audio packet re-transmissions when an audio packet has been received and no retransmission is necessary. When an audio packet from the wireless communication device 12 is not received or is received corrupted by the first hearing device 14, the first hearing device 14 can transmit an error signal across the wireless link 20 to the wireless communication device 12 to request retransmission of the audio packet. Such an error signal is called a negative acknowledge (NAK) in the Bluetooth specification, in opposition to the positive acknowledge (ACK). When an audio packet from the first hearing device 14 is not received or is received corrupted by the wireless communication device 12, the wireless communication device 12 can transmit an error signal across the wireless link 20 to the first hearing device 14 to request retransmission of the audio packet. When an audio packet is not received or is received corrupted by the second hearing device 16, the second hearing device 16 can transmit an error signal via the separate wireless<!-- EPO <DP n="20"> --> link 28 to the first hearing device 14 to be forwarded to the wireless communication device across the wireless link 20 requesting retransmission of the audio packet.</p>
<p id="p0067" num="0067">When an audio packet is not received or is received corrupted by the mobile phone 12, the mobile phone 12 can transmit an error signal across the wireless link 20 to the first hearing device 14 to request retransmission of the audio packet.</p>
<p id="p0068" num="0068"><figref idref="f0006">FIG. 7</figref> is a schematic diagram for a signaling packet header used in a wireless communication protocol (e.g., Bluetooth BR/EDR™). The packet header can be used in signaling communication. For example, signaling communication occurs during A2DP communication between a wireless communication device and a hearing device (e.g., bidirectional). Two levels of signaling are common: (1) Link Manager Protocol (LMP) communication and (2) Logical Link Control and Adaptation Protocol (L2CAP). LMP generally refers to updated channel maps, periodic channel classification packets, requests to increase or decrease transmit power. L2CAP signaling generally refers to signaling for A2DP (e.g., play or pause stream) or notification (e.g., phone call notifications in Hands-Free-Profile). As A2DP audio packets are also transmitted using L2CAP, the destination Channel ID (CID) field within the L2CAP packet informs whether an L2CAP packet carries A2DP audio or signaling. For example, an L2CAP packet contains A2DP audio and does not contain signal if the content of its CID field corresponds to the destination channel endpoint that has been configured for A2DP audio packets when the A2DP connection has been established.</p>
<p id="p0069" num="0069">In the context of HFP, audio-related packets are defined as eSCO audio packets.</p>
<p id="p0070" num="0070">Two fields of the header can be used for traffic control in either direction of Bluetooth BR/EDR™. One field is an automatic repeat request number (ARQN) bit in the header packet, which a device can use to acknowledge reception of a valid packet with data from another device by setting the ARQN. This ARQN field can be a "not acknowledge" (NAK), which means that no acknowledgment is being sent, or ACK, which means that an acknowledgment is being sent. A device receiving a header can use the ARQN information to determine whether a packet was received successfully (e.g., based on receiving an "1" in the ARQN field) or whether an acknowledgment was not necessary or the packet was not received correctly.</p>
<p id="p0071" num="0071">Another field for signaling traffic in the header is the sequence number (SEQN), which is generally a 1-bit number that is toggled for consecutive packets that carry a payload. For example, an audio packet can be sent as "0" SEQN meaning it is a first packet<!-- EPO <DP n="21"> --> and then another audio packet can be sent as a "1" SEQN because it is the next packet with payload. A device receiving packets with this header can use the SEQN number to filter out duplicates. For example, if a hearing device correctly receives two consecutive packets that have a "0" for SEQN, it can determine that the second packet is a duplicate of the first one and discard it.</p>
<p id="p0072" num="0072">When interpreting a packet header in A2DP, a hearing device may need to use the same SEQN number for transmitting a packet until an acknowledgment is received from a wireless communication device (e.g., audio source). Also, the same SEQN number may need to be used in the communication to the wireless communication device even after reception of an ACK packet and may need to be used for other communications. Accordingly, the SEQN being updated ensures correct wireless protocol functionality. Without an updated or accurate SEQN number, a hearing device user may experience suboptimal performance such as unexpected disconnections because the wireless communication device may filter out correctly received packets if the received SEQN number is not correct or updated.</p>
<p id="p0073" num="0073">Also as part of the signaling packet header, the Header Error Check (HEC) is an 8-bit number that is an integrity check value calculated from other bits of the header. The header also includes other information such as Logical Transport Active Member Address (LT ADDR), which refers to the address of the active slave to which the packet is directed or from which it is being sent. An address of zero is reserved for a "broadcast message" message to all active slave devices. Flow control (FLOW) relates to flow control over the ACL (asynchronous connection-less) logical transport (e.g., 0 = stop and 1= go) and type code (TYPE) identifies the type of packet, which depends on whether the logical transport is ACL and SCO (synchronous Connection Oriented). A device receiving the packet header information can use it to update, control, or monitor traffic signaling wireless communications. A device can also generate a packet header when transmitting a packet (e.g., signaling or audio packet).</p>
<p id="p0074" num="0074">Although not shown in <figref idref="f0006">FIG. 7</figref>, the wireless communication device or the hearing device transmits audio packets or signaling packets. These packets can include a channel identification (CID), which can be a two-bit number. The CID can be used by the wireless communication device 102 or the hearing device 103 to determine what type of information the packet is associated with (e.g., CID can be associated with a hands-free profile and another CID can be associated with a A2DP). In some implementations, the hearing device or wireless communication device can use CID to implement full diversity. For example, the hearing device may implement full diversity for packets with a CID related<!-- EPO <DP n="22"> --> to A2DP, but the hearing device may not implement full diversity for packets with a CID associated with the hands-free profile (or another profile). If the device determines that a CID is associated with A2DP, it can then distinguish between packets related to audio (i.e., audio-related packets) and packets related to signaling.</p>
<p id="p0075" num="0075"><figref idref="f0007">FIG. 8</figref> illustrates a simplified block flow diagram for a process 800 for implementing a diversity scheme. In some implementations, the process 800 can be carried out by a hearing device (e.g., hearing device 103, <figref idref="f0001">FIGs. 1A-1C</figref>) or can be carried out by a wireless communication device (e.g., wireless communication device 102, <figref idref="f0001">FIGs. 1A-1C</figref>). Part or all of the process 800 may be carried out on more than one device (e.g., two hearing devices can perform the process or a wireless communication and two hearing devices can perform the operations of the process 800). The process 800 begins with a wireless connection operation 801 and continues to eavesdropping operation 802. As disclosed in more detail, some operations of the process 800 may be repeated or performed out of order.</p>
<p id="p0076" num="0076">At wireless connection operation 801, a hearing device 103 wirelessly connects with a wireless communication device 102. The hearing device 103 can wirelessly connect with a wireless communication device 102 using a Bluetooth link or another wireless communication protocol. The hearing device 103 can also perform pairing and authentication operations to secure the wireless connection between the hearing device and the wireless communication device. The hearing device 103 with the wireless connection to the wireless communication device 102 can be referred to as the "primary" device, the "master device", or the "first" hearing device. The other hearing device 103 can be referred to as the "secondary", "slave", or "second" hearing device. The wireless connection between the hearing devices 103 can be a binaural connection, which means the two hearing devices 103 can communicate regarding providing hearing to the hearing device user. The wireless protocol used to connect the hearing device 103 and the wireless communication device 102 can be different than the wireless protocol used to connect the two hearing devices 103. More information regarding the wireless connection between the wireless communication device 102 and the hearing devices 103 can be found in <patcit id="pcit0004" dnum="EP2018081139W"><text>PCT/EP2018/081139 filed Nov. 14, 2018</text></patcit>, and titled "Operating More Than One Wireless Communication Protocol with a Coexistence Window," and <patcit id="pcit0005" dnum="EP2018081136W"><text>PCT/EP2018/081136 filed on Nov. 14, 2018</text></patcit>, and titled "Operating More Than One Wireless Protocol with a Hearing Device," both of which are incorporated herein by reference for their entireties.</p>
<p id="p0077" num="0077">At eavesdropping operation 802, a second hearing device (e.g., a slave or secondary hearing device) eavesdrops an audio stream between the first hearing device and<!-- EPO <DP n="23"> --> the wireless communication device. Specifically, a wireless communication device can transmit a stereo audio stream of music or phone call audio using A2DP, and the second hearing device can eavesdrop audio packets and/or signaling packet information from the audio stream. If the second hearing device is a left hearing device, it can eavesdrop left audio packet information; and if the second hearing device is a right hearing device, it can eavesdrop right audio packet information. The eavesdropping operation can also be referred to as "sniffing" or "spoofing", but it is more accurate to refer to it as eavesdropping because a user intends that the second hearing device receive the audio information for the stream.</p>
<p id="p0078" num="0078">At wireless connection operation 803, a hearing device 103 wirelessly connects with another hearing device 103.</p>
<p id="p0079" num="0079">At monitoring quality operation 804, each of the primary hearing device and the secondary hearing device, can independently, monitor the quality of the first wireless link that provides a bi-directional wireless connection between the primary hearing device and the wireless communication device, and the quality of the second wireless link between the wireless communication device and the secondary hearing device. The primary hearing device can periodically receive or retrieve statistics from the secondary hearing device regarding the monitored quality of the first and/or the second wireless links. Based on processing of the retrieved statistics regarding the monitored quality of the first and/or the second wireless links, the primary hearing device can determine whether a handover (e.g., transferring the role of transmission of audio-related packets towards the wireless communication device) to the secondary hearing device is necessary. For example, the role of transmission of audio-related packets towards the wireless communication device can be switched based on a determination that the monitored quality of the first wireless link 20 (shown in <figref idref="f0002">FIG. 2</figref>) is bad (as described below with reference to <figref idref="f0008">FIG. 9</figref>), or based on a determination that the monitored quality of the second wireless link 30 (shown in <figref idref="f0002">FIG. 2</figref>) is good (as described below with reference to <figref idref="f0008">FIG. 9</figref>). If such transfer of the role of transmission of audio-related packets towards the wireless communication device is determined to be necessary, the primary hearing device can instruct the secondary hearing device that the roles of transmission of audio-related packets towards the wireless communication device are changing (e.g., switching) for the next period (which can be between 50 ms and 100 ms, for example, to ensure quick reaction to changing wireless conditions, but at the same time is sufficiently long to collect statistics and perform a reliable link quality estimation).<!-- EPO <DP n="24"> --></p>
<p id="p0080" num="0080">In a point-to-point protocol, a packet is formatted in 8-bit bytes, and can include control information and data, which is also known as the payload. Control information can provide data for delivering the payload, such as source and destination network addresses, error detection codes, and sequencing information, for example. Typically, control information can be found in the packet header. An audio packet can be considered corrupted if at least one bit is erroneous. In digital transmission, the number of bit errors is the number of received bits of a data stream over a communication channel that has been altered due to noise, interference, distortion, or bit synchronization errors. A packet error rate (PER) (also known as packet error rate) of a transmission via the point-to-point protocol (e.g., the wireless link) is the number of incorrectly received data packets divided by the total number of received packets. The packet error rate (PER) is used to test and measure the performance of a receiver.</p>
<p id="p0081" num="0081">Because the transmit powers of the first hearing device 14 and the mobile phone 12 (shown in <figref idref="f0002">FIG. 2</figref>) are different (e.g., asymmetric), when the distance between the first hearing device 14 and the mobile phone 12 exceeds a certain range, the quality of the wireless link 20 can deteriorate. As a result of the deteriorated quality of the wireless link 20, the audio packets transmitted from the first hearing device 14 to the mobile phone 12 can be corrupted or not received at all, and the quality of the audio transmitted from the first hearing device 14 to the mobile phone 12 can deteriorate.</p>
<p id="p0082" num="0082">As discussed above with reference to <figref idref="f0002">FIG. 2</figref>, the transceiver 26', 26" of the first hearing device 14 and the second hearing device 16, respectively, may include its own Bluetooth on-board signal processor 23. In this embodiment, the processor 23 of the transceiver 26' of the first hearing device 14 can be configured to measure or estimate the outgoing packet error rate (PerTx) on the wireless link 20 between the first hearing device 14 and the mobile phone 12. Alternatively, the processor 22' of the first hearing device 14 can be configured to measure or estimate the outgoing packet error rate (PerTx). As yet another alternative, the outgoing packet error rate (PerTx) on the wireless link 20 can be estimated by a processor of the mobile phone 12. Similarly, the processor 22' or 23' of the transceiver 26" of the second hearing device 16 can be configured to measure or estimate the outgoing packet error rate (PerTx) on the wireless link between the second hearing device 16 and the mobile phone 12. In other words, each of the first and second hearing devices 12 and 14 can independently measure the outgoing packet error rate (PerTx) for audio-related packets transmitted by the hearing devices towards the mobile phone 12.<!-- EPO <DP n="25"> --></p>
<p id="p0083" num="0083">The PerTx measurement is performed on the hearing device that is connected bi-directionally with the mobile phone 12. In the example illustrated in <figref idref="f0002">FIG. 2</figref>, the hearing device that is connected bi-directionally with the mobile phone 12 is the first hearing device 14. However, in other examples, the hearing device that is connected bi-directionally with the mobile phone 12 can be the second hearing device 16. In the example when the hearing device 14 is connected bi-directionally with the mobile phone 12, the processor 23 of the transceiver 26' can be configured to compute the outgoing packet error rate PerTx by monitoring the number of the retransmissions from the first hearing device 14 towards the mobile phone 12. Retransmissions from the first hearing device 14 towards the mobile phone 12 are performed when an audio packet from the first hearing device 14 is not received or is received corrupted by the wireless communication device 12. In this situation, the wireless communication device 12 can transmit an error signal across the wireless link 20 to the first hearing device 14 to request retransmission of the audio packet. Alternatively, because the wireless link 20 may be configured for transmission of acknowledgements by the mobile phone 12 that an audio packet from the first hearing device 14 was successfully received, the first hearing device 14 may retransmit the audio packet to the wireless communication device when the first hearing device 14 has not received an acknowledgment from the mobile phone 12 of a successful receipt of the audio packet.</p>
<p id="p0084" num="0084">In other embodiments, in the A2DP case, the processor 23 of the transceiver 26' can be configured to compute the outgoing packet error rate PerTx by monitoring duplicate incoming audio packets transmitted by the wireless communication device 12.</p>
<p id="p0085" num="0085">from the first hearing device 14 towards the mobile phone 12.</p>
<p id="p0086" num="0086">As illustrated in <figref idref="f0008">FIG. 9</figref>, in Step 1, the processor 23 of the transceiver 26' measures the outgoing packet error rate PerTx.</p>
<p id="p0087" num="0087">In Step 2, the processor 23 of the transceiver 26' checks whether the outgoing packet error rate PerTx is above a threshold T4 ("bad threshold"). When the outgoing packet error rate PerTx is above a certain threshold, the quality of the audio link has deteriorated to the point that the audio is not understandable and the wireless link is considered bad. The audio error rate above which audio is not understandable is typically around 20%, but may vary depending on context. A Bluetooth Hands-Free Profile ("HFP") audio link may be configured to use two or three transmit attempts N<sub>T</sub>. Sometimes, even if a wireless link is negotiated by the mobile phone to use three transmits attempts, the third transmit attempt may not be listened to by the mobile phone. Therefore, typically only two transmit attempts are available even if the link allows for a third transmit.<!-- EPO <DP n="26"> --></p>
<p id="p0088" num="0088">With a Modified SBC Codec (mSBC) for Bluetooth devices, at 1 Mbps, one audio frame of 7.5 ms is transmitted in two radio packets. The Average Frame Error Rate (FER) can be calculated with the formula: FER = 1-(1-PER^N<sub>T</sub>)^2.</p>
<p id="p0089" num="0089">With a Continuously variable slope delta modulation (CVSD), at 1 Mbps, one audio frame of 3.75 ms is transmitted in one radio packet. The Average Frame Error Rate (FER) can be calculated with the formula: FER = PER^N<sub>T</sub>, where PER is the outgoing packet error rate PerTx. The outgoing packet error rate PerTx can be calculated by monitoring the number of transmit attempts of outgoing audio frames from the hearing device towards the wireless communication device, for example.</p>
<p id="p0090" num="0090">Assuming that the audio error rate above which audio is not understandable is 20%, the bad audio state can be entered if the outgoing packet error rate PerTx is above 1-(1-0.2)^(1/2))^(1/2)=32% and (1-(1-0.2)^(1/2))^(1/3)=47% with two and three transmit attempts, respectively. Considering the case of two transmit attempts, the bad audio threshold T4 can preferably be chosen at T4=0.32.</p>
<p id="p0091" num="0091">Turning back to <figref idref="f0008">FIG. 9</figref>, in Step 3, if the outgoing packet error rate PerTx is above the threshold T4, the processor 22' transfers the role of transmitting audio-related packets towards the wireless communication device from the primary device 14 to the secondary device 16. Alternatively, the role transfer may be performed by the processor 23 of the transceiver 26'. As yet another alternative, the role transfer may be performed by the processor of the mobile phone 12.</p>
<p id="p0092" num="0092">In Step 4, if the outgoing packet error rate PerTx is not above the threshold T4, the processor 23 of the transceiver 26' measures again the outgoing packet error rate PerTx in Step 1.</p>
<p id="p0093" num="0093">In Step 5, during bad audio state, the processor 23 of the transceiver 26' measures again the outgoing packet error rate PerTx, and in Step 6, the processor 23 of the transceiver 26' checks whether the outgoing packet error rate PerTx is below another threshold T3 (the "good threshold"), which is lower than the threshold T4. If the outgoing packet error rate PerTx is below the good audio threshold T3, in Step 7 the processor 23 of the transceiver 26' maintains the role of transmitting audio related packets to the primary hearing device 14.</p>
<p id="p0094" num="0094">The value of the good audio threshold T3 can be chosen sufficiently below the bad audio threshold T4 to avoid rapid toggling between good and bad audio. At 20% outgoing packet error rate PerTx, the audio error rate is 1-(1-0.2^2)^2=7.8% with two transmits and 1-(1-0.2^3)^2=1.6% with three transmits. At 7.8% audio error rate, the audio is<!-- EPO <DP n="27"> --> understandable and a good audio state can be entered. Accordingly, the present embodiment can select T3 to be 20%.</p>
<p id="p0095" num="0095">In Step 8, when the outgoing packet error rate PerTx is not below the threshold T3, the process continues with the processor 23 of the transceiver 26' measuring again the outgoing packet error rate PerTx in Step 5.</p>
<p id="p0096" num="0096">In certain embodiments, the process illustrated in <figref idref="f0008">FIG. 9</figref> may be performed by considering the incoming packet error rate, as opposed to the outgoing packet error rate.</p>
<p id="p0097" num="0097">In another embodiment, the hearing system 10 can be configured to automatically adapt the transmitted power of the hearing device as a function of the outgoing audio link packet error rate.</p>
<p id="p0098" num="0098">The conducted transmit power is the transmit power that a radio frequency (RF) transmitter (e.g., radio chip) produces at its output or the transmit power of the radio chip measured when a power meter is connected to the radio chip in place of the antenna. The effective radiated power (ERP) or the effective isotropic radiated power (EIRP), also known as a radiated power, is the effective power produced at the output of the radio chip including the ability of the antenna to direct that power in a certain direction or in the direction of the antenna's strongest beam, respectively. The conducted transmit power is relevant for link asymmetry, since the effect of the antenna is symmetric on both the transmit and receive paths.</p>
<p id="p0099" num="0099">In the present embodiment, the hearing device can decide autonomously whether to use a higher or a lower transmit power. This embodiment has the advantage of minimizing the power consumption in the hearing device via using a lower transmit power whenever possible.</p>
<p id="p0100" num="0100">The methods of the embodiments described above applies to an Enhanced Synchronous connection-oriented ("eSCO") link or a wireless link that uses the eSCO transport option of the Bluetooth specification. With Synchronous connection-oriented ("SCO") links (e.g., where each device transmits encoded voice data in a reserved timeslot or a reserved frame, without retransmits), it may not be possible to reliably estimate the transmit Tx link quality. Enhanced SCO (eSCO) links allow greater flexibility in that they may use retransmissions to achieve reliability, allow a wider variety of packet types, and greater intervals between packets than SCO, thus increasing radio availability for other links.</p>
<p id="p0101" num="0101">In this embodiment, the PerTx estimation can be based only on the first transmit attempt of every eSCO frame, and can include the following steps:<!-- EPO <DP n="28"> --></p>
<p id="p0102" num="0102">At the establishment of an eSCO link, the processor 23 of the transceiver 26' can set the following values for the outgoing packet error rate PerTx and the bad HFP transmit link: <maths id="math0001" num=""><math display="block"><mrow><mi>PerTx</mi><mo>=</mo><mn>0</mn></mrow></math><img id="ib0001" file="imgb0001.tif" wi="20" he="5" img-content="math" img-format="tif"/></maths> <maths id="math0002" num=""><math display="block"><mrow><mi>hfpTxLinkBad</mi><mo>=</mo><mn>0</mn></mrow></math><img id="ib0002" file="imgb0002.tif" wi="35" he="6" img-content="math" img-format="tif"/></maths></p>
<p id="p0103" num="0103">After every eSCO frame (i.e., every 3.75 ms), the processor 23 of the transceiver 26' can retrieve transmit count (txCnt) and receive count (rxCnt), which indicate how many attempts have occurred to transmit and receive an audio frame, respectively.</p>
<p id="p0104" num="0104">The processor 23 of the transceiver 26' can then check whether no header has been received or both rxCnt and txCnt are &gt; 1 (i.e., whether neither the first reception nor the first transmit attempt was successful):</p>
<p id="p0105" num="0105">If true (i.e., no header has been received or both rxCnt and txCnt are &gt; 1), the processor 23 of the transceiver 26' can set the value for the transmit error txError to 1.</p>
<p id="p0106" num="0106">If false, the processor 23 of the transceiver 26' can set txError to 1 if txCnt &gt; 1 (i.e., the first transmit attempt was not successful) or to 0 otherwise.</p>
<p id="p0107" num="0107">The processor 23 of the transceiver 26' can then update PerTx using the formula PerTx = min((1-1/256) <sup>∗</sup> PerTx + 1/256 <sup>∗</sup> txError; T4)</p>
<p id="p0108" num="0108">The value PerTx can be saturated at the threshold value T4 via the function min(X; T4), such that the time needed to reach the good audio state when the link is good again is fixed.</p>
<p id="p0109" num="0109">The methods of the embodiments described above can apply to a wireless link that uses the isochronous transport option of the Bluetooth specification. For certain communication links, only a limited amount of delay is allowed and retransmissions are allowed up to a certain limit at which the current payload must be disregarded and the next payload must be considered. This data transfer is known as isochronous traffic. In other words, the retransmit process must be overruled in order to continue with the next data payload. Aborting the retransmit scheme can be accomplished by flushing the old data and forcing the Bluetooth controller to take the next data instead.</p>
<p id="p0110" num="0110">The packet error rate estimate PerTx can be implemented using an exponential moving speed average according to the formula PerTx(k)=(1-a)<sup>∗</sup> PerTx(k-1)+ a<sup>∗</sup> txError, where "a" is the degree of weighting decrease; and txError takes the value 1 if a transmitted packet is observed to have been lost and the value 0 if a transmitted packet is observed to have been received. The variable "a" sets the moving average speed. This parameter can be chosen as a trade-off between speed of bad link detection and accuracy of<!-- EPO <DP n="29"> --> measurement. The value a=1/256 can be selected to provide a detection time that is close to one second, but not exceeding one second. This selection can provide the highest accuracy while not being too slow.</p>
<p id="p0111" num="0111">In certain embodiments, the audio link quality may be estimated via Received Signal Strength Indicator ("RSSI"). Specifically, instead of keeping statistics of the effective errors on the outgoing audio link, the signal strength of the incoming audio link can be measured and the expected audio link quality can be deduced on the outgoing link.</p>
<p id="p0112" num="0112">Other embodiments can monitor the incoming audio link. For example, the incoming audio quality may be monitored via packet error statistics. A notification can be transmitted to the user when the audio quality is bad in either or in both the incoming and outgoing directions.</p>
<p id="p0113" num="0113">At determining transmission of audio-related packets operation 805, the first hearing device determines that it will transmit an audio-related packet towards the wireless communication device 102. As described above with reference to <figref idref="f0006">FIG. 7</figref>, the destination Channel ID (CID) field within the L2CAP packet caries information about whether an L2CAP packet carries A2DP audio or signaling. For example, if the content of the CID field of the L2CAP packet corresponds to the destination channel endpoint that has been configured for A2DP audio packets when the A2DP connection has been established, the hearing device can determine that the packet is an audio-related packet.</p>
<p id="p0114" num="0114">Turning back to <figref idref="f0007">FIG. 8</figref>, at diversity operation 806, two hearing devices implement a diversity scheme. In a diversity scheme, the hearing devices communicate and work together to receive and transmit information that increases (e.g., maximizes) the probability that the wireless communication device (e.g., audio source such as a smartphone) receives an ACK packet. Specifically, if both hearing devices successfully receive an audio packet, either hearing devices (e.g., first or second, primary or secondary) can transmit an ACK packet to the wireless communication device to acknowledge receipt of the audio packet. If only the first hearing device (e.g., primary hearing device or master hearing device) successfully receives an audio packet, the primary hearing device can forward the audio packet to the second hearing device (e.g., secondary device) and the first hearing device can transmit an ACK packet to the wireless communication device. If only the second hearing device successfully receives an audio packet, the secondary hearing device can forward the audio packet to the first hearing device (e.g., primary device) and the secondary hearing device can transmit an ACK packet to the wireless communication device.<!-- EPO <DP n="30"> --></p>
<p id="p0115" num="0115">In some implementations, the wireless communication device can continue to transmit audio stream using A2DP to the first hearing device while the second hearing device eavesdrops. However, during an audio stream it is necessary to exchange both audio packet information (e.g., payloads) and signaling information. The signaling information is generally bidirectional, and thus the wireless communication device or the first hearing device may need to receive or to transmit signaling information to successfully transmit or receive or use the audio stream. Also, in general, the secondary hearing device does not exchange signaling information directly with the wireless communication device (e.g., because it is eavesdropping).</p>
<p id="p0116" num="0116">Based on the determining transmission of audio-related packets operation 805, the first hearing device can determine that audio-related packets are being sent from the wireless communication device to the first hearing device or that the first hearing device needs to transmit an audio-related packet. It is at this time that, depending on the quality of the wireless connection between the two hearing devices and the wireless communication device, one of the hearing devices can be assigned the role of transmitting audio-related packets towards the wireless communication device, and the other hearing device can suspend (stop) transmitting audio-related packets (e.g., towards the wireless communication device, forwarding audio packets to the other hearing device, or sending acknowledgment packets to successfully received audio packet from the wireless communication device). Normally, when a diversity scheme is implemented either the first or the second hearing device transmits acknowledgment packets; however, when the diversity scheme with role switch is implemented, it means the second hearing device does not transmit audio-related packets towards the wireless communication device when the first hearing device been has assigned the role of transmitting audio-related packets towards the wireless communication device.</p>
<p id="p0117" num="0117">At the same time, when the diversity scheme with role switch is implemented, during audio streaming from the wireless communication device, the primary hearing device remains in a wireless connection with the wireless communication device, and continues to transmit to the wireless communication device packets that are not audio-related, regardless of which hearing device has the role of transmitting audio-related packets towards the wireless communication device. Packets that are not audio-related can be control packets or signaling packets, as described with reference to <figref idref="f0006">FIG. 7</figref>, for example.</p>
<p id="p0118" num="0118">Aspects and implementations of the process 800 have been disclosed in the general context of various steps and operations. A variety of these steps and operations<!-- EPO <DP n="31"> --> may be performed by hardware components or may be embodied in computer-executable instructions, which may be used to cause a general-purpose or special-purpose processor (e.g., in a controller, computer, server, or other computing device) programmed with the instructions to perform the steps or operations. The steps or operations may be performed by a combination of hardware, software, and/or firmware such with a wireless communication device or a hearing device. For example, the operations 804, 805, and 806 can be repeated each time an audio-related packet is transmitted and/or received, and it may not be necessary to perform operations 801, 802, and 803 again. In some implementations, the process 800 can run continuously and/or automatically based on the hearing device turning on or streaming audio information.</p>
<p id="p0119" num="0119">The phrases "in some implementations," "according to some implementations," "in the implementations shown," "in other implementations," and generally mean a feature, structure, or characteristic following the phrase is included in at least one implementation of the disclosure, and may be included in more than one implementation. In addition, such phrases do not necessarily refer to the same implementations or different implementations.</p>
<p id="p0120" num="0120">The techniques introduced here can be embodied as special-purpose hardware (e.g., circuitry), as programmable circuitry appropriately programmed with software or firmware, or as a combination of special-purpose and programmable circuitry. Hence, implementations may include a machine-readable medium having stored thereon instructions which may be used to program a computer (or other electronic devices) to perform a process. The machine-readable medium may include, but is not limited to, optical disks, ROMs, random access memories (RAMs), erasable programmable read-only memories (EPROMs), electrically erasable programmable read-only memories (EEPROMs), magnetic or optical cards, flash memory, or other type of media / machine-readable medium suitable for storing electronic instructions. In some implementations, the machine-readable medium is non-transitory computer readable medium, where in non-transitory excludes a propagating signal.</p>
<p id="p0121" num="0121">The above detailed description of examples of the disclosure is not intended to be exhaustive or to limit the disclosure to the precise form disclosed above. While specific examples for the disclosure are described above for illustrative purposes, various equivalent modifications are possible within the scope of the disclosure, as those skilled in the relevant art will recognize. For example, while processes or blocks are presented in an order, alternative implementations may perform routines having steps, or<!-- EPO <DP n="32"> --> employ systems having blocks, in a different order, and some processes or blocks may be deleted, moved, added, subdivided, combined, or modified to provide alternative or subcombinations. Each of these processes or blocks may be implemented in a variety of different ways. Also, while processes or blocks are at times shown as being performed in series, these processes or blocks may instead be performed or implemented in parallel, or may be performed at different times. Further any specific numbers noted herein are only examples: alternative implementations may employ differing values or ranges.</p>
<p id="p0122" num="0122">As used herein, the word "or" refers to any possible permutation of a set of items. For example, the phrase "A, B, or C" refers to at least one of A, B, C, or any combination thereof, such as any of: A; B; C; A and B; A and C; B and C; A, B, and C; or multiple of any item such as A and A; B, B, and C; A, A, B, C, and C; etc. As another example, "A or B" can be only A, only B, or A and B.</p>
<p id="p0123" num="0123">Many other example embodiments can be provided through various combinations of the above described features. Although the embodiments described hereinabove use specific examples and alternatives, it will be understood by those skilled in the art that various additional alternatives may be used and equivalents may be substituted for elements and/or steps described herein, without necessarily deviating from the intended scope of the application. Modifications may be desirable to adapt the embodiments to a particular situation or to particular needs without departing from the intended scope of the application. It is intended that the application not be limited to the particular example implementations and example embodiments described herein, but that the claims be given their broadest reasonable interpretation to cover all novel and non-obvious embodiments, literal or equivalent, disclosed or not, covered thereby.</p>
</description>
<claims id="claims01" lang="en"><!-- EPO <DP n="33"> -->
<claim id="c-en-0001" num="0001">
<claim-text>A method for operating two hearing devices, the method comprising:
<claim-text>establishing a first bi-directional wireless connection between a primary hearing device and a wireless communication device over a first wireless link;</claim-text>
<claim-text>eavesdropping on the first wireless link, by a secondary hearing device, over a second wireless link between the wireless communication device and the secondary hearing device;</claim-text>
<claim-text>establishing a second bi-directional wireless connection between the primary hearing device and the secondary hearing device over a third wireless link;</claim-text>
<claim-text>monitoring, by the primary hearing device, a link quality of the first wireless link and/or by the secondary hearing device, the link quality of the second wireless link;</claim-text>
<claim-text>assigning to the secondary hearing device a role of transmitting audio-related packets towards the wireless communication device, in place of the primary hearing device, based on quality parameters of at least one of the first wireless link or the second wireless link; and</claim-text>
<claim-text>returning to the primary hearing device the role of transmitting audio-related packets towards the wireless communication device based on the quality parameters of at least one of the first wireless link or the second wireless link.</claim-text></claim-text></claim>
<claim id="c-en-0002" num="0002">
<claim-text>The method according to claim 1, wherein the assigning to the secondary hearing device the role of transmitting audio-related packets towards the wireless communication device is based on one of a degradation of the first wireless link quality or an improvement of the second wireless link quality.</claim-text></claim>
<claim id="c-en-0003" num="0003">
<claim-text>The method according to claim 1, wherein the returning to the primary hearing device the role of transmitting audio-related packets towards the wireless communication device is based on one of a degradation of the second wireless link quality or an improvement of the first wireless link quality.<!-- EPO <DP n="34"> --></claim-text></claim>
<claim id="c-en-0004" num="0004">
<claim-text>The method according to claim 1, wherein during audio streaming, the primary hearing device remains in the first bi-directional wireless connection with the wireless communication device and transmits to the wireless communication device packets that are not audio-related, regardless of which hearing device has the role of transmitting audio-related packets towards the wireless communication device.</claim-text></claim>
<claim id="c-en-0005" num="0005">
<claim-text>The method according to claim 1, wherein the wireless link quality of the first or second wireless link is measured via measuring an outgoing packet error rate or via measuring in incoming packet error rate.</claim-text></claim>
<claim id="c-en-0006" num="0006">
<claim-text>The method according to claim 5, wherein the outgoing packet error rate is calculated by monitoring a number of transmit attempts of outgoing audio frames or by monitoring duplicate incoming audio packets transmitted by the wireless communication device.</claim-text></claim>
<claim id="c-en-0007" num="0007">
<claim-text>The method according to claim 5, wherein the role of transmitting audio-related packets is transferred from the primary hearing device to the secondary hearing device when the outgoing packet error rate on the first wireless link exceeds a predefined threshold or when the incoming packet error rate on the second wireless link is lower than the incoming packet error rate on the first wireless link, respectively.</claim-text></claim>
<claim id="c-en-0008" num="0008">
<claim-text>The method according to claim 1, wherein the role of transmitting audio-related packets is transferred from the secondary hearing device to the primary hearing device when the outgoing packet error rate on the second wireless link exceeds a predefined threshold or when the incoming packet error rate on the first wireless link is lower than the incoming packet error rate on the second wireless link, respectively.<!-- EPO <DP n="35"> --></claim-text></claim>
<claim id="c-en-0009" num="0009">
<claim-text>The method according to claim 1, wherein the audio-related packets are at least one of audio packets or acknowledgements to audio packets or wherein the audio-related packets are Enhanced Synchronous connection-oriented ("eSCO") audio packets.</claim-text></claim>
<claim id="c-en-0010" num="0010">
<claim-text>The method according to claim 1, wherein the audio-related packets are transmitted using a Logical Link Control and Adaptation Protocol (L2CAP) with a destination Channel ID (CID) field that corresponds to a destination channel endpoint that has been configured for an Advanced Audio Distribution Profile (A2DP) audio packets when an A2DP connection has been established.</claim-text></claim>
<claim id="c-en-0011" num="0011">
<claim-text>The according to claim 1, wherein the first and second wireless links and the third wireless link use different wireless communication protocols.</claim-text></claim>
<claim id="c-en-0012" num="0012">
<claim-text>The method according to claim 1, wherein a communication protocol used in the first and second wireless links is associated with BLUETOOTH and a communication protocol used in the third wireless link is a proprietary wireless communication protocol.</claim-text></claim>
<claim id="c-en-0013" num="0013">
<claim-text>The method according to claim 1, wherein the packets that are not audio related are one of a Link Management Protocol (LMP) data unit or a Logical Link Control and Adaptation Protocol (L2CAP) data unit addressed to a CID different than a destination channel endpoint for A2DP.</claim-text></claim>
<claim id="c-en-0014" num="0014">
<claim-text>An audio communication system comprising:
<claim-text>a primary hearing device configured to establish a first bi-directional wireless connection with a wireless communication device over a first wireless link; and</claim-text>
<claim-text>a secondary hearing device configured to:
<claim-text>eavesdrop on the first wireless link, over a second wireless link between the wireless communication device and the secondary hearing device, and</claim-text>
<claim-text>establish a second bi-directional wireless connection with the primary hearing device over a third wireless link, wherein:</claim-text><!-- EPO <DP n="36"> --></claim-text>
<claim-text>the primary hearing device and the secondary hearing device are both configured to:
<claim-text>monitor a link quality of the first wireless link and/or the link quality of the second wireless link;</claim-text>
<claim-text>assign to the secondary hearing device a role of transmitting audio-related packets towards the wireless communication device, in place of the primary hearing device, based on quality parameters of at least one of the first wireless link or the second wireless link; and</claim-text>
<claim-text>return to the primary hearing device the role of transmitting audio-related packets towards the wireless communication device based on the quality parameters of at least one of the first wireless link or the second wireless link.</claim-text></claim-text></claim-text></claim>
<claim id="c-en-0015" num="0015">
<claim-text>The audio communication system according to claim 14, wherein during audio streaming, the primary hearing device remains in the first bi-directional wireless connection with the wireless communication device and transmits to the wireless communication device packets that are not audio-related, regardless of which hearing device has the role of transmitting audio-related packets towards the wireless communication device.</claim-text></claim>
</claims>
<drawings id="draw" lang="en"><!-- EPO <DP n="37"> -->
<figure id="f0001" num="1A,1B,1C"><img id="if0001" file="imgf0001.tif" wi="137" he="210" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> -->
<figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="147" he="168" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> -->
<figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="165" he="98" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> -->
<figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="135" he="221" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> -->
<figure id="f0005" num="5A,5B,5C,6"><img id="if0005" file="imgf0005.tif" wi="161" he="201" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> -->
<figure id="f0006" num="7"><img id="if0006" file="imgf0006.tif" wi="147" he="52" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> -->
<figure id="f0007" num="8"><img id="if0007" file="imgf0007.tif" wi="99" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> -->
<figure id="f0008" num="9"><img id="if0008" file="imgf0008.tif" wi="147" he="215" img-content="drawing" img-format="tif"/></figure>
</drawings>
<search-report-data id="srep" lang="en" srep-office="EP" date-produced=""><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="155" he="233" type="tif"/></search-report-data><search-report-data date-produced="20210626" id="srepxml" lang="en" srep-office="EP" srep-type="ep-sr" status="n"><!--
 The search report data in XML is provided for the users' convenience only. It might differ from the search report of the PDF document, which contains the officially published data. The EPO disclaims any liability for incorrect or incomplete data in the XML for search reports.
 -->

<srep-info><file-reference-id>10004P62229EP</file-reference-id><application-reference><document-id><country>EP</country><doc-number>21150214.1</doc-number></document-id></application-reference><applicant-name><name>Sonova AG</name></applicant-name><srep-established srep-established="yes"/><srep-invention-title title-approval="yes"/><srep-abstract abs-approval="yes"/><srep-figure-to-publish figinfo="by-applicant"><figure-to-publish><fig-number>2</fig-number></figure-to-publish></srep-figure-to-publish><srep-info-admin><srep-office><addressbook><text>MN</text></addressbook></srep-office><date-search-report-mailed><date>20210706</date></date-search-report-mailed></srep-info-admin></srep-info><srep-for-pub><srep-fields-searched><minimum-documentation><classifications-ipcr><classification-ipcr><text>H04B</text></classification-ipcr><classification-ipcr><text>H04L</text></classification-ipcr><classification-ipcr><text>H04M</text></classification-ipcr><classification-ipcr><text>H04N</text></classification-ipcr><classification-ipcr><text>H04R</text></classification-ipcr><classification-ipcr><text>H04W</text></classification-ipcr></classifications-ipcr></minimum-documentation></srep-fields-searched><srep-citations><citation id="sr-cit0001"><patcit dnum="WO2019143901A1" id="sr-pcit0001" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=WO2019143901&amp;CY=ep"><document-id><country>WO</country><doc-number>2019143901</doc-number><kind>A1</kind><name>CYPRESS SEMICONDUCTOR CORP [US]</name><date>20190725</date></document-id></patcit><category>X</category><rel-claims>1-3,5-8,11,12,14</rel-claims><category>Y</category><rel-claims>4,9,10,13,15</rel-claims><rel-passage><passage>* paragraph [0061]; figures 2, 13B, 1 *</passage></rel-passage><rel-passage><passage>* paragraph [0030]; figure 5 *</passage></rel-passage></citation><citation id="sr-cit0002"><patcit dnum="US2015327001A1" id="sr-pcit0002" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=US2015327001&amp;CY=ep"><document-id><country>US</country><doc-number>2015327001</doc-number><kind>A1</kind><name>KIRSHENBERG GILAD [IL] ET AL</name><date>20151112</date></document-id></patcit><category>Y</category><rel-claims>4,15</rel-claims><rel-passage><passage>* paragraph [0040] - paragraph [0042]; figure 4 *</passage></rel-passage></citation><citation id="sr-cit0003"><patcit dnum="CN110381485A" id="sr-pcit0003" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=CN110381485&amp;CY=ep"><document-id><country>CN</country><doc-number>110381485</doc-number><kind>A</kind><name>HUAWEI TECH CO LTD</name><date>20191025</date></document-id></patcit><category>Y</category><rel-claims>9</rel-claims><rel-passage><passage>* claim 1; figures 5A, 5B *</passage></rel-passage></citation><citation id="sr-cit0004"><patcit dnum="US2020053612A1" id="sr-pcit0004" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=US2020053612&amp;CY=ep"><document-id><country>US</country><doc-number>2020053612</doc-number><kind>A1</kind><name>JORGOVANOVIC MILOS [US]</name><date>20200213</date></document-id></patcit><category>Y</category><rel-claims>10,13</rel-claims><rel-passage><passage>* paragraph [0050] *</passage></rel-passage></citation></srep-citations><srep-admin><examiners><primary-examiner><name>Glasser, Jean-Marc</name></primary-examiner></examiners><srep-office><addressbook><text>Munich</text></addressbook></srep-office><date-search-completed><date>20210626</date></date-search-completed></srep-admin><!--							The annex lists the patent family members relating to the patent documents cited in the above mentioned European search report.							The members are as contained in the European Patent Office EDP file on							The European Patent Office is in no way liable for these particulars which are merely given for the purpose of information.							For more details about this annex : see Official Journal of the European Patent Office, No 12/82						--><srep-patent-family><patent-family><priority-application><document-id><country>WO</country><doc-number>2019143901</doc-number><kind>A1</kind><date>20190725</date></document-id></priority-application><family-member><document-id><country>CN</country><doc-number>111615794</doc-number><kind>A</kind><date>20200901</date></document-id></family-member><family-member><document-id><country>DE</country><doc-number>112019000465</doc-number><kind>T5</kind><date>20200924</date></document-id></family-member><family-member><document-id><country>US</country><doc-number>2019230459</doc-number><kind>A1</kind><date>20190725</date></document-id></family-member><family-member><document-id><country>WO</country><doc-number>2019143901</doc-number><kind>A1</kind><date>20190725</date></document-id></family-member></patent-family><patent-family><priority-application><document-id><country>US</country><doc-number>2015327001</doc-number><kind>A1</kind><date>20151112</date></document-id></priority-application><family-member><document-id><country>CN</country><doc-number>105898672</doc-number><kind>A</kind><date>20160824</date></document-id></family-member><family-member><document-id><country>DE</country><doc-number>102015208547</doc-number><kind>A1</kind><date>20151112</date></document-id></family-member><family-member><document-id><country>US</country><doc-number>2015327001</doc-number><kind>A1</kind><date>20151112</date></document-id></family-member></patent-family><patent-family><priority-application><document-id><country>CN</country><doc-number>110381485</doc-number><kind>A</kind><date>20191025</date></document-id></priority-application><family-member><document-id><country>CN</country><doc-number>110381485</doc-number><kind>A</kind><date>20191025</date></document-id></family-member><family-member><document-id><country>WO</country><doc-number>2020249098</doc-number><kind>A1</kind><date>20201217</date></document-id></family-member></patent-family><patent-family><priority-application><document-id><country>US</country><doc-number>2020053612</doc-number><kind>A1</kind><date>20200213</date></document-id></priority-application><text>NONE</text></patent-family></srep-patent-family></srep-for-pub></search-report-data>
<ep-reference-list id="ref-list">
<heading id="ref-h0001"><b>REFERENCES CITED IN THE DESCRIPTION</b></heading>
<p id="ref-p0001" num=""><i>This list of references cited by the applicant is for the reader's convenience only. It does not form part of the European patent document. Even though great care has been taken in compiling the references, errors or omissions cannot be excluded and the EPO disclaims all liability in this regard.</i></p>
<heading id="ref-h0002"><b>Patent documents cited in the description</b></heading>
<p id="ref-p0002" num="">
<ul id="ref-ul0001" list-style="bullet">
<li><patcit id="ref-pcit0001" dnum="US73915320" dnum-type="L"><document-id><country>US</country><doc-number>73915320</doc-number><date>20200110</date></document-id></patcit><crossref idref="pcit0001">[0001]</crossref></li>
<li><patcit id="ref-pcit0002" dnum="US73953120" dnum-type="L"><document-id><country>US</country><doc-number>73953120</doc-number><date>20200110</date></document-id></patcit><crossref idref="pcit0002">[0001]</crossref></li>
<li><patcit id="ref-pcit0003" dnum="US73959320" dnum-type="L"><document-id><country>US</country><doc-number>73959320</doc-number><date>20200110</date></document-id></patcit><crossref idref="pcit0003">[0001]</crossref></li>
<li><patcit id="ref-pcit0004" dnum="EP2018081139W" dnum-type="L"><document-id><country>EP</country><doc-number>2018081139</doc-number><kind>W</kind><date>20181114</date></document-id></patcit><crossref idref="pcit0004">[0076]</crossref></li>
<li><patcit id="ref-pcit0005" dnum="EP2018081136W" dnum-type="L"><document-id><country>EP</country><doc-number>2018081136</doc-number><kind>W</kind><date>20181114</date></document-id></patcit><crossref idref="pcit0005">[0076]</crossref></li>
</ul></p>
</ep-reference-list>
</ep-patent-document>
