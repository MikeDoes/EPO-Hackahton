<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ep-patent-document PUBLIC "-//EPO//EP PATENT DOCUMENT 1.5.1//EN" "ep-patent-document-v1-5-1.dtd">
<!-- This XML data has been generated under the supervision of the European Patent Office -->
<ep-patent-document id="EP20167131A1" file="EP20167131NWA1.xml" lang="de" country="EP" doc-number="3889767" kind="A1" date-publ="20211006" status="n" dtd-version="ep-patent-document-v1-5-1">
<SDOBI lang="de"><B000><eptags><B001EP>ATBECHDEDKESFRGBGRITLILUNLSEMCPTIESILTLVFIROMKCYALTRBGCZEEHUPLSKBAHRIS..MTNORSMESMMAKHTNMD..........</B001EP><B005EP>J</B005EP><B007EP>BDM Ver 2.0.12 (4th of August) -  1100000/0</B007EP></eptags></B000><B100><B110>3889767</B110><B120><B121>EUROPÄISCHE PATENTANMELDUNG</B121></B120><B130>A1</B130><B140><date>20211006</date></B140><B190>EP</B190></B100><B200><B210>20167131.0</B210><B220><date>20200331</date></B220><B250>de</B250><B251EP>de</B251EP><B260>de</B260></B200><B400><B405><date>20211006</date><bnum>202140</bnum></B405><B430><date>20211006</date><bnum>202140</bnum></B430></B400><B500><B510EP><classification-ipcr sequence="1"><text>G06F   8/658       20180101AFI20201110BHEP        </text></classification-ipcr><classification-ipcr sequence="2"><text>G06F  11/14        20060101ALI20201110BHEP        </text></classification-ipcr><classification-ipcr sequence="3"><text>G06F   9/455       20180101ALI20201110BHEP        </text></classification-ipcr></B510EP><B520EP><classifications-cpc><classification-cpc sequence="1"><text>G06F   9/45558     20130101 LI20200924BHEP        </text></classification-cpc><classification-cpc sequence="2"><text>G06F   8/658       20180201 FI20200924BHEP        </text></classification-cpc><classification-cpc sequence="3"><text>G06F2009/45587     20130101 LA20200924BHEP        </text></classification-cpc><classification-cpc sequence="4"><text>G06F  11/1433      20130101 LI20200924BHEP        </text></classification-cpc><classification-cpc sequence="5"><text>G06F2009/45579     20130101 LA20200924BHEP        </text></classification-cpc><classification-cpc sequence="6"><text>G06F2009/45595     20130101 LA20200924BHEP        </text></classification-cpc><classification-cpc sequence="7"><text>G06F2009/45575     20130101 LA20200924BHEP        </text></classification-cpc></classifications-cpc></B520EP><B540><B541>de</B541><B542>VERFAHREN ZUM QUASI-UNTERBRUCHFREIEN PATCHEN VON EINEM WINDOWS-SYSTEM</B542><B541>en</B541><B542>METHOD FOR QUASI-INTERRUPTION-FREE PATCHING IN A WINDOWS SYSTEM</B542><B541>fr</B541><B542>PROCÉDÉ DE MISE À JOUR CORRECTIVE QUASI SANS INTERRUPTION D'UN SYSTÈME WINDOWS</B542></B540><B590><B598>4</B598></B590></B500><B700><B710><B711><snm>Siemens Mobility AG</snm><iid>101754394</iid><irf>2020P05325EP</irf><adr><str>Hammerweg 1</str><city>8304 Wallisellen</city><ctry>CH</ctry></adr></B711></B710><B720><B721><snm>LOCHER, Viktor</snm><adr><str>Felsenaustr. 41</str><city>8200 Schaffhausen</city><ctry>CH</ctry></adr></B721></B720><B740><B741><snm>Deffner, Rolf</snm><iid>101822385</iid><adr><str>Siemens Mobility GmbH 
Postfach 22 16 34</str><city>80506 München</city><ctry>DE</ctry></adr></B741></B740></B700><B800><B840><ctry>AL</ctry><ctry>AT</ctry><ctry>BE</ctry><ctry>BG</ctry><ctry>CH</ctry><ctry>CY</ctry><ctry>CZ</ctry><ctry>DE</ctry><ctry>DK</ctry><ctry>EE</ctry><ctry>ES</ctry><ctry>FI</ctry><ctry>FR</ctry><ctry>GB</ctry><ctry>GR</ctry><ctry>HR</ctry><ctry>HU</ctry><ctry>IE</ctry><ctry>IS</ctry><ctry>IT</ctry><ctry>LI</ctry><ctry>LT</ctry><ctry>LU</ctry><ctry>LV</ctry><ctry>MC</ctry><ctry>MK</ctry><ctry>MT</ctry><ctry>NL</ctry><ctry>NO</ctry><ctry>PL</ctry><ctry>PT</ctry><ctry>RO</ctry><ctry>RS</ctry><ctry>SE</ctry><ctry>SI</ctry><ctry>SK</ctry><ctry>SM</ctry><ctry>TR</ctry></B840><B844EP><B845EP><ctry>BA</ctry></B845EP><B845EP><ctry>ME</ctry></B845EP></B844EP><B848EP><B849EP><ctry>KH</ctry></B849EP><B849EP><ctry>MA</ctry></B849EP><B849EP><ctry>MD</ctry></B849EP><B849EP><ctry>TN</ctry></B849EP></B848EP></B800></SDOBI>
<abstract id="abst" lang="de">
<p id="pa01" num="0001">Die vorliegende Erfindung offenbart ein Verfahren zum quasiunterbruchsfreien Patchen von einem eine insbesondere sicherheitsrelevante Applikation ausführenden Windows-System (WR), umfassend:<br/>
a) Aufsetzen des die Applikation (ILTIS) ausführenden Windows-Systems (WR) in einer Produktiv-Instanz (2) mit einer eigenen Produktiv-Speicherinstanz (6) und einer Passiv-Instanz (4) mit einer eigenen Passiv-Speicherinstanz (8);<br/>
b) Installieren der Applikation (ILTIS) und ggfs. von für ihre Ausführung erforderlichen Daten auf einer weiteren Applikations-Speicherinstanz (10) und Verbinden dieser Applikations-Speicherinstanz (10) mit der Produktiv-Instanz (4) ;<br/>
c) Ausrüsten der Produktiv-Instanz (2) und der Passiv-Instanz (4) mit je einer Netzwerkkarte (12, 16 bzw. 14, 18) für ein Produktiv-Netzwerk (20) und ein Passiv-Netzwerk (22), wobei die Produktiv-Instanz (2) nur mit dem Produktiv-Netzwerk (20) und die Passiv-Instanz (4) nur mit dem Passiv-Netzwerk (22) verbunden ist,<br/>
d) Patchen der Passiv-Instanz (4) mit einer neuen Windows-Version über das Passiv-Netzwerk (22), wobei:<br/>
e) eine externe Supervisor-Instanz (iHME) bereitgestellt wird, mit der bedienergesteuert über eine der Supervisor-Instanz (iHME) eigenen Benutzeroberfläche:<br/>
e1) nach erfolgreicher Installation des Patches der neuen Windows-Version die Produktiv-Instanz (2) und die Passiv-Instanz (4) heruntergefahren werden;<br/>
e2) die Applikations-Speicherinstanz (10) von der Produktiv-Instanz (2) auf die Passiv-Instanz (4) umgehängt wird;<br/>
e3) an der Produktiv-Instanz (2) die Netzwerkkarte (12) für das Produktiv-Netzwerk (20) durch die Netzwerkkarte (14) für das Passiv-Netzwerk (22) und an der Passiv-Instanz (4) die Netzwerkkarte (18) für das Passiv-Netzwerk (22) durch die Netzwerkkarte (16) für das Produktiv-Netzwerk (20) ausgetauscht wird; und<br/>
e4) nach erfolgreichem Abschluss der Schritte e1) bis e3) die bisherige Passiv-Instanz (4) als Produktiv-Instanz (2) und die bisherige Produktiv-Instanz (2) als Passiv-Instanz (4) neu gestartet werden.
<img id="iaf01" file="imgaf001.tif" wi="78" he="58" img-content="drawing" img-format="tif"/></p>
</abstract>
<description id="desc" lang="de"><!-- EPO <DP n="1"> -->
<p id="p0001" num="0001">Die vorliegende Erfindung betrifft ein Verfahren zum quasi-unterbruchfreien Patchen von einem eine insbesondere sicherheitsrelevante Applikation ausführenden Windows-System.</p>
<p id="p0002" num="0002">Windows-Systeme werden solche Computersysteme genannt, die mit einem Betriebssystem OS der Microsoft Corp. ausgestattet sind. Ein derartiges Betriebssystem steuert die Abarbeitung von Operationen durch den eigentlichen Mikroprozessor, das Daten- und Speichermanagement, die Verwaltung der laufenden Anwenderprogramme und Applikationen, sämtliche Schnittstellen für Umsystem, wie Maus, Tastatur, Drucker, Scanner, Bildschirm, sowie sämtliche Kommunikationsschnittstellen usw.</p>
<p id="p0003" num="0003">Aufgrund der Komplexität und im Zuge der ständigen Verbesserung derartiger Betriebssysteme sind diese Betriebssysteme stets auf dem neuesten Stand zu halten, besonders dann, wenn auf dem Computersystem eine sicherheitsrelevante Applikation ausgeführt wird, wie dies beispielsweise bei einer Anlagensteuerung für eine industrielle Anlage (pharmazeutisch-technische oder chemische Anlage, Stromerzeugung und dergleichen) oder auch bei einem Zugdispositionssystem zur Steuerung von schienengebundenem Verkehr der Fall ist.</p>
<p id="p0004" num="0004">Besonders aufwändig ist das wiederholte Patchen von Windows-Systemen, bei dem kleinere funktionale und Security-bezogene Verbesserungen und Korrekturen am Betriebssystem in das Betriebssystem eingespielt werden müssen. Das Update (Patching) von einem Windows-Betriebssystem bedeutet aber in der Regel, dass die Ausführung des laufenden Betriebssystems während der Installation des Patches beeinträchtigt ist, da sich das Betriebssystem während der Patch-Installation in einem nicht definierten Zustand befindet. Aus diesem Grunde dürfen/können auch derartige sicherheitsrelevante oder sonst<!-- EPO <DP n="2"> --> wie kritische Applikationen während der Zeitdauer des Patches nicht ausgeführt werden.</p>
<p id="p0005" num="0005">Somit kann es während der Installation eines neuen Patches zu einem längeren Unterbruch der Funktionalität kommen. Ausserdem ist das Windows-System nach der Installation des Patches noch nicht voll betriebsbereit, sondern muss erst neu gestartet werden, was den Unterbruch der Funktionalität zusätzlich verlängert.</p>
<p id="p0006" num="0006">Es kann zudem vorkommen, dass ein Microsoft-Patch fehlerhaft ist und zu Problemen im Betriebssystem und/oder in der Applikation führt. In dieser Situation wäre es wünschenswert einen Rollback-Mechanismus zu haben, welcher das Computersystem auf den exakten Stand vor der Installation des Patches zurückschaltet. Eine derartige Möglichkeit wird jedoch leider von der Microsoft Corp. nicht angeboten. An dieser Stelle kann möglichweise nur das gesamte Neu-Aufsetzen des Betriebssystems Abhilfe schaffen, was zu einer noch längeren Unterbrechung der Funktionalität des Windows-Systems führt.</p>
<p id="p0007" num="0007">Der vorliegenden Erfindung liegt daher die Aufgabe zugrunde, ein Verfahren zum quasi-unterbruchfreien Patchen von einem eine insbesondere sicherheitsrelevante Applikation ausführenden Windows-System anzugeben, bei dem sowohl eine Rollback-Möglichkeit besteht als auch der Unterbruch der Funktionalität durch den Patch-Vorgang auf ein Mindestmass beschränkt wird.</p>
<p id="p0008" num="0008">Diese Aufgabe wird erfindungsgemäss durch ein Verfahren zum quasi-unterbruchfreien Patchen von einem eine insbesondere sicherheitrelevante Applikation ausführenden Windows-System gelöst, umfassend:
<ol id="ol0001" compact="compact" ol-style="">
<li>a) Aufsetzen des die Applikation ausführenden Windows-Systems in einer Produktiv-Instanz mit einer eigenen Produktiv-Speicherinstanz und einer Passiv-Instanz mit einer eigenen Passiv-Speicherinstanz;<!-- EPO <DP n="3"> --></li>
<li>b) Installieren der Applikation und ggfs. von für ihre Ausführung erforderlichen Daten auf einer Applikations-Speicherinstanz und Verbinden dieser Applikations-Speicherinstanz mit der Produktiv-Instanz;</li>
<li>c) Ausrüsten der Produktiv-Instanz und der Passiv-Instanz mit je einer Netzwerkkarte für ein Produktiv-Netzwerk und ein Passiv-Netzwerk, wobei die Produktiv-Instanz nur mit dem Produktiv-Netzwerk und die Passiv-Instanz nur mit dem Passiv-Netzwerk verbunden ist,</li>
<li>d) Patchen der Passiv-Instanz mit den benötigten Windows-Patches über das Passiv-Netzwerk, wobei:</li>
<li>e) eine externe Supervisor-Instanz bereitgestellt wird, mit der bedienergesteuert über eine der Supervisor-Instanz eigenen Benutzeroberfläche:
<ul id="ul0001" list-style="none" compact="compact">
<li>e1) nach erfolgreicher Installation der Patches die Produktiv-Instanz und die Passiv-Instanz heruntergefahren werden;</li>
<li>e2) die Applikations-Speicherinstanz von der Produktiv-Instanz auf die Passiv-Instanz umgehängt wird;</li>
<li>e3) an der Produktiv-Instanz die Netzwerkkarte für das Produktiv-Netzwerk durch die Netzwerkkarte für das Passiv-Netzwerk und an der Passiv-Instanz die Netzwerkkarte für das Passiv-Netzwerk durch die Netzwerkkarte für das Produktiv-Netzwerk ausgetauscht wird; und</li>
<li>e4) nach erfolgreichem Abschluss der Schritte e1) bis e3) die bisherige Passiv-Instanz als Produktiv-Instanz und die bisherige Produktiv-Instanz als Passiv-Instanz neu gestartet werden.</li>
</ul></li>
</ol></p>
<p id="p0009" num="0009">Auf diese Weise wird das Computersystem für die Applikation in zwei virtuellen Instanzen aufgebaut, wobei sich der Windows-Patch vollkommen rückwirkungsfrei für die Produktiv-Instanz auf der Passiv-Instanz installieren und testen lässt. Dieser Patch kann dadurch zu einem beliebigen Zeitpunkt vorgenommen werden und muss beispielsweise bei sicherheitskritischen Anwendungen im Bahnverkehr nicht in nächtlichen Randzeiten ausgeführt werden. Die eigentliche Übergangsdauer zur<!-- EPO <DP n="4"> --> Umschaltung der gepatchten Passiv-Instanz in die dann aktive Produktiv-Instanz vollzieht sich in einer sehr kurzen Zeitspanne, weil im Besonderen virtuell aufgesetzte Instanzen sehr rasch rebootet werden können. Somit wird der betriebliche Impact des Patchens auf eine sehr kleine Zeitdauer, wie z.B. nur einige Sekunden, minimiert. Besonders hilfreich ist hier auch der Einsatz der Supervisor-Instanz, die im einfachsten Fall von nur einem Memory-Stick aus gestartet und ausgeführt werden kann («Live-System») und die sich über ein vSpere-API an der Virtualisierungs-Schicht ankoppeln kann.</p>
<p id="p0010" num="0010">In logischer Weiterbildung der vorliegenden Erfindung kann dann nach einer vorgebbaren Zeitdauer auch die ehemalige Produktiv-Instanz auf die neue Windows-Version gepatcht werden. Sie bleibt aber dann weiter die Passiv-Instanz bis der nächste Windows-Patch ansteht.</p>
<p id="p0011" num="0011">Eine besonders vorteilhafte Ausgestaltung der Erfindung kann erzielt werden, wenn nach dem Neustart der bisherigen Passiv-Instanz (4) als Produktiv-Instanz (2) und der bisherigen Produktiv-Instanz (2) als Passiv-Instanz (4) auch ein Rollback ausgeführt werden kann, der vorherige Produktiv-Instanz (2) dann auch wieder als Produktiv-Instanz (2) und die vorherige Passiv-Instanz (4) dann auch wieder als Passiv-Instanz (4) ausführt. Auf diese Weise können eventuell doch nach dem Patchen und dem Umschalten auftretende Probleme isoliert werden. Die eigentliche Applikation kann nach einem kurzen Unterbruch zwecks Rollback zum Zurück-Umschalten auf die Situation vor dem Umschalten wieder störungsfrei ausgeführt werden. Allfällige Fehler können dann auf der Passiv-Instanz analysiert und behoben werden.</p>
<p id="p0012" num="0012">In einer weiteren vorteilhaften Ausgestaltung der vorliegenden Erfindung kann die Supervisor-Instanz so ausgestaltet sein, dass benutzergesteuert über deren Benutzeroberfläche vollständig automatisiert anhand von geschützten Spezifikationen ein virtueller Applikationsrechner aufgesetzt<!-- EPO <DP n="5"> --> werden kann, der die Produktiv-Instanz mit eigener Produktiv-Speicherinstanz, die Passiv-Instanz mit eigener Passiv-Speicherinstanz und die Applikations-Speicherinstanz umfasst.</p>
<p id="p0013" num="0013">Um hohe Sicherheitsstandards beim Patchen der Passiv-Instanz und bei der späteren Umschaltung der gepatchten Passiv-Instanz in die dann aktive Produktiv-Instanz garantieren zu können, werden die mittels der Supervisor-Instanz (iHME) ausgelösten Schritte e1) bis e4) hard-codiert und können damit über die Benutzeroberfläche der Supervisor-Instanz (10) benutzergesteuert ausgelöst werden. Auf diese Weise ist es ausgeschlossen, dass ein Anwender Konfigurationen des Patches und der Produktiv- und Passiv-Instanz «on the fly» bewusst oder aus Versehen verändern kann.</p>
<p id="p0014" num="0014">Bevorzugte Ausführungsbeispiel der vorliegenden Erfindung werden nachfolgend anhand der Zeichnung näher erläutert. Dabei zeigen:
<dl id="dl0001">
<dt>Figur 1</dt><dd>in schematischer Weise eine Benutzeroberfläche der Supervisor-Instanz zur Generierung virtueller Windows-Rechner für die Ausführung einer sicherheitskritischen Applikation, hier eines Zugdispositionssystems;</dd>
<dt>Figur 2</dt><dd>in schematischer Weise das Set-up der virtuellen Windows-Rechner;</dd>
<dt>Figur 3</dt><dd>in schematischer Darstellung den Aufbau eines Windows-Rechners für eine Leittechnikzelle des Zugdispositionssystems; und</dd>
<dt>Figur 4</dt><dd>in schematischer Darstellung den eigentlichen Umschaltvorgang für den Wechsel auf einen neuen Windows-Patch der Produktiv-Instanz einer Leittechnikzelle.</dd>
</dl><!-- EPO <DP n="6"> --></p>
<p id="p0015" num="0015">Die vorliegende Erfindung wird hier nachfolgend nun am Beispiel eines Zugleitsystems (Zugdispositionssystem) erläutert. Ein derartiges Zugleitsystem wird von Siemens Mobility AG, Wallisellen, Schweiz, unter dem Namen ILTIS® Netz vertrieben. Mit diesem Zugleitsystem wird beispielsweise der gesamte Zugverkehr der Schweiz aus einer kleinen Anzahl von Zugleitständen von Fahrdienstleitern gesteuert. Hierzu ist das Eisenbahnnetzwerk der Schweiz in eine Anzahl von geographisch klar abgegrenzten Leittechnikzellen aufgeteilt worden, wobei jede Zelle mehrere (auch virtuell aufgesetzte) Windows-Rechner zur Ausführung der ILTIS-Applikation umfasst.</p>
<p id="p0016" num="0016">Um nun einen derartigen Windows-Rechner auf einen neuen Patch upzugraden, ist gemäss der vorliegenden Erfindung ein Verfahren zum quasi-unterbruchsfreien Patchen dieses die ILTIS-Applikation ausführenden Windows-Systems vorgesehen. Ein zentraler Bestandteil des Verfahrens ist dabei die Verwendung der System-Virtualisierung und einer Supervisor-Instanz - nachfolgend kurz als iHME (integrated Hypervisor Management Environment) bezeichnet - , deren Benutzeroberfläche schematisch in <figref idref="f0001">Figur 1</figref> gezeigt ist. Über diesen iHME lässt sich die Virtualisierung des Windows-Rechners für eine bestimmte ILTIS-Zelle erzielen. Der iHME ist somit eine Management-Software, welche über die offiziellen vSpere-APIs sowohl ESX-Hosts (also der Rechner mit dem Hypervisor) als auch ESX-Guests (die virtuellen Rechner-Instanzen auf dem Host) aufsetzen und verwalten kann.</p>
<p id="p0017" num="0017">Die <figref idref="f0002">Figuren 2</figref> und <figref idref="f0003">3</figref> zeigen schematisch das Set-Up zum Aufsetzen der virtuellen Windows-Rechner zum Ausführen der ILTIS-Software (ILTIS-Applikation). Im Zuge der Ausführung des Verfahrens wird somit der iHME zum Aufsetzen des die ILTIS-Applikation ausführenden Windows-Rechners WR als Guest-Pair in einer Produktiv-Instanz 2 mit einer eigenen Produktiv-Speicherinstanz 6 und einer Passiv-Instanz 4 mit einer eigenen Passiv-Speicherinstanz 8 verwendet. Dieses Aufsetzen erfolgt über versionierte und geschützte Spezifikationen (auch<!-- EPO <DP n="7"> --> gehashed), sodass ein Anwender an der vorgesehenen Konfiguration nichts ändern und diese auch nicht on-the-fly vornehmen kann. Dieses Aufsetzen schliesst somit das Erstellen der virtuellen Hardware (vDisk, vRAM, vCPUs, vSwitches, vNICs usw.) ein.</p>
<p id="p0018" num="0018">Mit dem iHME können nun auch die sogenannten Guest-Pairs verwaltet werden. Pro virtuellem Windows-Rechner WR gibt es somit die zwei Instanzen, die Produktiv-Instanz 2 und die Passiv-Instanz 4. Ausserdem wird mit dem IHME die ILTIS-Applikation und die für ihre Ausführung erforderlichen Daten auf einer weiteren Applikations-Speicherinstanz 10 (D-Laufwerk) installiert. Diese Applikations-Speicherinstanz 10 wird dann auch mit der Produktiv-Instanz 2 verbunden (wie in <figref idref="f0002">Figur 2</figref> gezeigt). Diese vorstehend genannten Komponenten bilden somit den virtuellen Windows-Rechner WR. Im Zuge der Installation der Switches werden die Produktiv-Instanz 2 und die Passiv-Instanz 4 jeweils mit je einer Netzwerkkarte 12, 14, 16, 18 für ein Produktiv-Netzwerk 20 und ein Passiv-Netzwerk 22 ausgerüstet (vgl. <figref idref="f0004">Figur 4</figref>). Dabei wird die Produktiv-Instanz 2 nur mit dem Produktiv-Netzwerk 20 und die Passiv-Instanz 4 nur mit dem Passiv-Netzwerk 22 verbunden.</p>
<p id="p0019" num="0019">Steht nun ein Windows-Patch an, wird mittels des iHME die Installation des Patches zunächst nur auf der Passiv-Instanz 4 ausgeführt. Dabei kann die neue Windows-Version über das Passiv-Netzwerk 22 auf der Passiv-Instanz 4 (diese kann auch als Maintenance-Instanz bezeichnet werden) installiert werden. Diese Installation ist vollkommen rückwirkungsfrei für die Produktiv-Instanz 2. Auf diese Weise hat auch die zeitliche Dauer der Installation des Patches keinen Einfluss auf die ILTIS-Applikation, was ebenfalls auch für allfällige Reboots der Passiv-Instanz 4 gilt. Somit können nun auch die System-Eventlogs der Passiv-Instanz 4 nach dem Patchen geprüft werden, wodurch sichergestellt werden kann, dass die neue gepatche Windows-Version auf der Passiv-Instanz 4 wieder stabil läuft. Das Ausrollen und Installieren des Patches kann<!-- EPO <DP n="8"> --> so zu einem beliebigen Zeitpunkt stattfinden; es muss so auch nicht in Randzeiten des Eisenbahnbetriebs stattfinden.</p>
<p id="p0020" num="0020">Nach dieser erfolgreichen Installation des Patches erfolgt dann die Umschaltung von Produktiv- und Passiv-Instanz. Mit dem iHME werden nun bedienergesteuert über die dem iHME-eigene Benutzeroberfläche (siehe <figref idref="f0001">Figur 1</figref>) die Produktiv-Instanz 2 und die gepatchte Passiv-Instanz 4 heruntergefahren. Dabei wird die die Applikations-Speicherinstanz 10 von der Produktiv-Instanz 2 auf die Passiv-Instanz 4 umgehängt und an der Produktiv-Instanz 2 wird die Netzwerkkarte 12 für das Produktiv-Netzwerk 20 durch die Netzwerkkarte 14 für das Passiv-Netzwerk 22 und an der Passiv-Instanz 4 die Netzwerkkarte 18 für das Passiv-Netzwerk 22 durch die Netzwerkkarte 16 für das Produktiv-Netzwerk 20 am virtuellen Switch umgehängt. Diese Situation ist in <figref idref="f0004">Figur 4</figref> vor der Umschaltung gezeigt, was für die aktiven Verbindungen durch die durchgezogenen Linien und für die passiven Verbindungen durch die gestrichelten Linien repräsentiert. Nach der Umschaltung werden die durchgezogenen Linien zu gestrichelten Linien und die gestrichelten Linien zu durchgezogenen Linien. Nach dem erfolgreichem Abschluss dieser Schritte wird die bisherige Passiv-Instanz 4 als Produktiv-Instanz und die bisherige Produktiv-Instanz 2 als Passiv-Instanz neu gestartet werden.</p>
<p id="p0021" num="0021">Diese über die iHME initiierte Umschaltung wird über das vSphere-API realisiert. Die iHME steuert das Herunterfahren der Produktiv-Instanz 2 und der Passiv-Instanz 4, das Umhängen der Applikations-Speicherinstanz (Laufwerk D:/) und der beiden Netzwerkkarten beider Instanzen (Produktiv- und Passiv-Instanz) und den Neustart dieser beiden Instanzen. Diese haben nun ihre "Identitäten" vertauscht. Die ehemalige Produktiv-Instanz 2 verbleibt nun für eine vorbestimmbare Zeitdauer unverändert für Rollback-Szenarien erhalten. Nach Ablauf dieser Zeitdauer kann diese Instanz (nun als Passiv-Instanz) ebenfalls gepatcht werden, wobei durch diesen Vorgang<!-- EPO <DP n="9"> --> ebenfalls keinerlei Rückwirkung auf die nun laufende Produktiv-Instanz 2 auftritt.</p>
<p id="p0022" num="0022">Wie in <figref idref="f0003">Figur 3</figref> gezeigt, wird zum Beispiel bei der sicherheitskritischen ILTIS-Applikation beispielhaft ein zweiter virtueller und redundant betriebener Windows-Rechner analog dem soeben Beschriebenen betrieben. Darüberhinaus sei an dieser Stelle angemerkt, dass auch mehr als die zwei hier beschriebenen virtuellen Iltis-Rechner auf einem Host ausgeführt werden können.</p>
<p id="p0023" num="0023">Das Verfahren ist damit quasi-rückwirkungsfrei und kann zu einem beliebigen Zeitpunkt vorgenommen werden. Die Umschaltung von der ungepatchten auf die gepatchte Instanz dauert nur wenige Sekunden, da ein Reboot auf virtueller Hardware sehr rasch ausgeführt werden kann. Der Unterbruch der ILTIS-Applikation ist somit auf ein Minimum reduziert. Ein Rollback ist jederzeit möglich. Falls die gepatchte Instanz instabil laufen sollte, kann in wenigen Sekunden wieder auf die alte, stabile Umgebung zurückgeschaltet werden (erneutes Tauschen der Identitäten der beiden Instanzen).</p>
<p id="p0024" num="0024">Der durch das Verfahren bereitgestellte Mechanismus kann auch eingesetzt werden, um mit einer minimalen Down-time der Windows-Systeme und damit der ILTIS-Funktionalität von einer Version der Windows-Betriebssystems auf eine neue Version migrieren zu können.</p>
<p id="p0025" num="0025">Das vorstehend beschriebene Verfahren stellt zudem eine Lösung dar, die mit einem einzelnen Rechner realisiert werden kann. Es braucht also keine komplexe und daher meist auch teure Infrastruktur, wie z.B. das Clustering von Hosts in einem Rechenzentrum. Es braucht lediglich die Supervisor-Instanz iHME, die auf einem beliebigen Windows-Rechner laufen kann, welcher mit dem Management-Port des iHME temporär oder permanent verbunden ist. Der iHME hat somit einen minimalen Footprint und ist sogar aus einem von einem USB-Stick<!-- EPO <DP n="10"> --> bootbaren mobilen Live-System lauffähig. Die Lösung ist zudem gleichermassen für grosse Umgebungen mit vielen virtuellen Windows-Rechnern, die auf einer Anzahl von Rechner (Hosts) verteilt sind, einsetzbar.</p>
<p id="p0026" num="0026">Die Lösung ist auch vergleichsweise einfach umsetzbar, weil sie zu einem grossen Teil auf in Windows-Systemen standardisierte Schnittstellen und Standard-Technologien zurückgreift, wie z.B. Windows-Betriebssystem und ESXi Hypervisor. Bereits mit einer Essential-Lizenz von VMWare ist das Verfahren voll funktionsfähig. Eine VMWare-Lizenz ist notwendig, damit mit dem iHME auf die ESXi-Schnittstellen zugegriffen bzw. eine Automatisierung des Verfahrens über die Schnittstellen vorgenommen werden kann.</p>
<p id="p0027" num="0027">Vorliegend ist das erfindungsgemässe Verfahren nun für eine Leittechnik-Applikation, hier ILTIS® Netz der Siemens Mobility AG, Wallisellen, Schweiz, erläutert worden. Grundsätzlich ist das Verfahren aber überall dort anwendbar, wo zeitkritisch oder sicherheitsrelevante Applikationen auf Windows-Rechnern ausgeführt werden, die nach von der Microsoft Corp. vorgegebenen Intervallen mit neuen Patches oder sogar neuen Betriebssystemversionen ausgeführt werden sollten oder sogar müssen. Derartige Prozesse (Applikationen) können beispielsweise in der Energieerzeugung und -übertragung, in der industriellen Fertigung, in Verkehrsleitsystemen für andere Fahrzeuggattungen usw. auf Windows-Rechnern ausgeführt werden.</p>
</description>
<claims id="claims01" lang="de"><!-- EPO <DP n="11"> -->
<claim id="c-de-0001" num="0001">
<claim-text>Verfahren zum quasi-unterbruchfreien Patchen von einem eine insbesondere sicherheitsrelevante Applikation ausführenden Windows-System (WR), umfassend:
<claim-text>a) Aufsetzen des die Applikation (ILTIS) ausführenden Windows-Systems (WR) in einer Produktiv-Instanz (2) mit einer eigenen Produktiv-Speicherinstanz (6) und einer Passiv-Instanz (4) mit einer eigenen Passiv-Speicherinstanz (8);</claim-text>
<claim-text>b) Installieren der Applikation (ILTIS) und ggfs. von für ihre Ausführung erforderlichen Daten auf einer weiteren Applikations-Speicherinstanz (10) und Verbinden dieser Applikations-Speicherinstanz (10) mit der Produktiv-Instanz (4) ;</claim-text>
<claim-text>c) Ausrüsten der Produktiv-Instanz (2) und der Passiv-Instanz (4) mit je einer Netzwerkkarte (12, 16 bzw. 14, 18) für ein Produktiv-Netzwerk (20) und ein Passiv-Netzwerk (22), wobei die Produktiv-Instanz (2) nur mit dem Produktiv-Netzwerk (20) und die Passiv-Instanz (4) nur mit dem Passiv-Netzwerk (22) verbunden ist,</claim-text>
<claim-text>d) Patchen oder Neu-Aufsetzen der Passiv-Instanz (4) über das Passiv-Netzwerk (22), wobei:</claim-text>
<claim-text>e) eine externe Supervisor-Instanz (iHME) bereitgestellt wird, mit der bedienergesteuert über eine der Supervisor-Instanz (iHME) eigenen Benutzeroberfläche:
<claim-text>e1) nach erfolgreicher Installation des Patches resp. der neuen Windows-Version die Produktiv-Instanz (2) und die Passiv-Instanz (4) heruntergefahren werden;</claim-text>
<claim-text>e2) die Applikations-Speicherinstanz (10) von der Produktiv-Instanz (2) auf die Passiv-Instanz (4) umgehängt wird;</claim-text>
<claim-text>e3) an der Produktiv-Instanz (2) die Netzwerkkarte (12) für das Produktiv-Netzwerk (20) durch die Netzwerkkarte (14) für das Passiv-Netzwerk (22) und an der Passiv-Instanz (4) die Netzwerkkarte (18) für das Passiv-Netzwerk (22) durch die Netzwerkkarte (16) für das Produktiv-Netzwerk (20) umgehängt werden; und<!-- EPO <DP n="12"> --></claim-text>
<claim-text>e4) nach erfolgreichem Abschluss der Schritte e1) bis e3) die bisherige Passiv-Instanz (4) als Produktiv-Instanz (2) und die bisherige Produktiv-Instanz (2) als Passiv-Instanz (4) neu gestartet werden.</claim-text></claim-text></claim-text></claim>
<claim id="c-de-0002" num="0002">
<claim-text>Verfahren nach Anspruch 1,
<claim-text><b>dadurch gekennzeichnet, dass</b></claim-text>
<claim-text>nach einer vorgebbaren Zeitdauer auch die ehemalige Produktiv-Instanz (2) auch auf die neue Windows-Version gepatcht wird.</claim-text></claim-text></claim>
<claim id="c-de-0003" num="0003">
<claim-text>Verfahren nach Anspruch 1 oder 2,
<claim-text><b>dadurch gekennzeichnet, dass</b></claim-text>
<claim-text>nach dem Neustart der bisherigen Passiv-Instanz (4) als Produktiv-Instanz (2) und der bisherigen Produktiv-Instanz (2) als Passiv-Instanz (4) auch ein Rollback ausgeführt werden kann, der vorherige Produktiv-Instanz (2) dann auch wieder als Produktiv-Instanz (2) und die vorherige Passiv-Instanz (4) dann auch wieder als Passiv-Instanz (4) ausführt.</claim-text></claim-text></claim>
<claim id="c-de-0004" num="0004">
<claim-text>Verfahren nach einem der vorangehenden Ansprüche,
<claim-text><b>dadurch gekennzeichnet, dass</b></claim-text>
<claim-text>die Supervisor-Instanz (iHME) so ausgestaltet ist, dass benutzergesteuert über deren Benutzeroberfläche ein virtueller Applikationsrechner (WR) aufgesetzt wird, der die Produktiv-Instanz (2) mit eigener Produktiv-Speicherinstanz (6), die Passiv-Instanz (4) mit eigener Passiv-Speicherinstanz (8) und die Applikations-Speicherinstanz (10) umfasst.</claim-text></claim-text></claim>
<claim id="c-de-0005" num="0005">
<claim-text>Verfahren nach einem der vorhergehenden Ansprüche,
<claim-text><b>dadurch gekennzeichnet, dass</b></claim-text>
<claim-text>die mittels der Supervisor-Instanz (iHME) ausgelösten Schritte e1) bis e4) hard-codiert sind und damit über die Benutzeroberfläche der Supervisor-Instanz (10) benutzergesteuert ausgelöst werden.</claim-text></claim-text></claim>
</claims>
<drawings id="draw" lang="de"><!-- EPO <DP n="13"> -->
<figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="14"> -->
<figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="109" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="15"> -->
<figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="153" he="144" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="16"> -->
<figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="223" img-content="drawing" img-format="tif"/></figure>
</drawings>
<search-report-data id="srep" lang="de" srep-office="EP" date-produced=""><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="155" he="233" type="tif"/></search-report-data><search-report-data date-produced="20200929" id="srepxml" lang="de" srep-office="EP" srep-type="ep-sr" status="n"><!--
 The search report data in XML is provided for the users' convenience only. It might differ from the search report of the PDF document, which contains the officially published data. The EPO disclaims any liability for incorrect or incomplete data in the XML for search reports.
 -->

<srep-info><file-reference-id>2020P05325EP</file-reference-id><application-reference><document-id><country>EP</country><doc-number>20167131.0</doc-number></document-id></application-reference><applicant-name><name>Siemens Mobility AG</name></applicant-name><srep-established srep-established="yes"/><srep-invention-title title-approval="yes"/><srep-abstract abs-approval="yes"/><srep-figure-to-publish figinfo="by-applicant"><figure-to-publish><fig-number>4</fig-number></figure-to-publish></srep-figure-to-publish><srep-info-admin><srep-office><addressbook><text>MN</text></addressbook></srep-office><date-search-report-mailed><date>20201116</date></date-search-report-mailed></srep-info-admin></srep-info><srep-for-pub><srep-fields-searched><minimum-documentation><classifications-ipcr><classification-ipcr><text>G06F</text></classification-ipcr></classifications-ipcr></minimum-documentation></srep-fields-searched><srep-citations><citation id="sr-cit0001"><patcit dnum="US2015281054A1" id="sr-pcit0001" url="http://v3.espacenet.com/textdoc?DB=EPODOC&amp;IDX=US2015281054&amp;CY=ep"><document-id><country>US</country><doc-number>2015281054</doc-number><kind>A1</kind><name>UTGIKAR ANANT P [IN] ET AL</name><date>20151001</date></document-id></patcit><category>X</category><rel-claims>1-5</rel-claims><rel-passage><passage>* Absätze [0025] - [0026],  [0031] - [0064]; Abbildungen 1,2, 3a-3d *</passage></rel-passage></citation></srep-citations><srep-admin><examiners><primary-examiner><name>Gafita, Cristinel</name></primary-examiner></examiners><srep-office><addressbook><text>Munich</text></addressbook></srep-office><date-search-completed><date>20200929</date></date-search-completed></srep-admin><!--							The annex lists the patent family members relating to the patent documents cited in the above mentioned European search report.							The members are as contained in the European Patent Office EDP file on							The European Patent Office is in no way liable for these particulars which are merely given for the purpose of information.							For more details about this annex : see Official Journal of the European Patent Office, No 12/82						--><srep-patent-family><patent-family><priority-application><document-id><country>US</country><doc-number>2015281054</doc-number><kind>A1</kind><date>20151001</date></document-id></priority-application><family-member><document-id><country>US</country><doc-number>2015281054</doc-number><kind>A1</kind><date>20151001</date></document-id></family-member><family-member><document-id><country>WO</country><doc-number>2015145291</doc-number><kind>A1</kind><date>20151001</date></document-id></family-member></patent-family></srep-patent-family></srep-for-pub></search-report-data>
</ep-patent-document>
